{"ast":null,"code":"const lottie = {};\nif (typeof document !== 'undefined') {\n  const svgNS = 'http://www.w3.org/2000/svg';\n  let locationHref = '';\n  let _useWebWorker = false;\n  const initialDefaultFrame = -999999;\n  const setWebWorker = flag => {\n    _useWebWorker = !!flag;\n  };\n  const getWebWorker = () => _useWebWorker;\n  const setLocationHref = value => {\n    locationHref = value;\n  };\n  const getLocationHref = () => locationHref;\n  function createTag(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElement(type);\n  }\n  function extendPrototype(sources, destination) {\n    var i;\n    var len = sources.length;\n    var sourcePrototype;\n    for (i = 0; i < len; i += 1) {\n      sourcePrototype = sources[i].prototype;\n      for (var attr in sourcePrototype) {\n        if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\n      }\n    }\n  }\n  function getDescriptor(object, prop) {\n    return Object.getOwnPropertyDescriptor(object, prop);\n  }\n  function createProxyFunction(prototype) {\n    function ProxyFunction() {}\n    ProxyFunction.prototype = prototype;\n    return ProxyFunction;\n  }\n\n  // import Howl from '../../3rd_party/howler';\n\n  const audioControllerFactory = function () {\n    function AudioController(audioFactory) {\n      this.audios = [];\n      this.audioFactory = audioFactory;\n      this._volume = 1;\n      this._isMuted = false;\n    }\n    AudioController.prototype = {\n      addAudio: function (audio) {\n        this.audios.push(audio);\n      },\n      pause: function () {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].pause();\n        }\n      },\n      resume: function () {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].resume();\n        }\n      },\n      setRate: function (rateValue) {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].setRate(rateValue);\n        }\n      },\n      createAudio: function (assetPath) {\n        if (this.audioFactory) {\n          return this.audioFactory(assetPath);\n        }\n        if (window.Howl) {\n          return new window.Howl({\n            src: [assetPath]\n          });\n        }\n        return {\n          isPlaying: false,\n          play: function () {\n            this.isPlaying = true;\n          },\n          seek: function () {\n            this.isPlaying = false;\n          },\n          playing: function () {},\n          rate: function () {},\n          setVolume: function () {}\n        };\n      },\n      setAudioFactory: function (audioFactory) {\n        this.audioFactory = audioFactory;\n      },\n      setVolume: function (value) {\n        this._volume = value;\n        this._updateVolume();\n      },\n      mute: function () {\n        this._isMuted = true;\n        this._updateVolume();\n      },\n      unmute: function () {\n        this._isMuted = false;\n        this._updateVolume();\n      },\n      getVolume: function () {\n        return this._volume;\n      },\n      _updateVolume: function () {\n        var i;\n        var len = this.audios.length;\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\n        }\n      }\n    };\n    return function () {\n      return new AudioController();\n    };\n  }();\n  const createTypedArray = function () {\n    function createRegularArray(type, len) {\n      var i = 0;\n      var arr = [];\n      var value;\n      switch (type) {\n        case 'int16':\n        case 'uint8c':\n          value = 1;\n          break;\n        default:\n          value = 1.1;\n          break;\n      }\n      for (i = 0; i < len; i += 1) {\n        arr.push(value);\n      }\n      return arr;\n    }\n    function createTypedArrayFactory(type, len) {\n      if (type === 'float32') {\n        return new Float32Array(len);\n      }\n      if (type === 'int16') {\n        return new Int16Array(len);\n      }\n      if (type === 'uint8c') {\n        return new Uint8ClampedArray(len);\n      }\n      return createRegularArray(type, len);\n    }\n    if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\n      return createTypedArrayFactory;\n    }\n    return createRegularArray;\n  }();\n  function createSizedArray(len) {\n    return Array.apply(null, {\n      length: len\n    });\n  }\n  let subframeEnabled = true;\n  let expressionsPlugin = null;\n  let idPrefix$1 = '';\n  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  let _shouldRoundValues = false;\n  const bmPow = Math.pow;\n  const bmSqrt = Math.sqrt;\n  const bmFloor = Math.floor;\n  const bmMax = Math.max;\n  const bmMin = Math.min;\n  const BMMath = {};\n  (function () {\n    var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\n    var i;\n    var len = propertyNames.length;\n    for (i = 0; i < len; i += 1) {\n      BMMath[propertyNames[i]] = Math[propertyNames[i]];\n    }\n  })();\n  function ProjectInterface$1() {\n    return {};\n  }\n  BMMath.random = Math.random;\n  BMMath.abs = function (val) {\n    var tOfVal = typeof val;\n    if (tOfVal === 'object' && val.length) {\n      var absArr = createSizedArray(val.length);\n      var i;\n      var len = val.length;\n      for (i = 0; i < len; i += 1) {\n        absArr[i] = Math.abs(val[i]);\n      }\n      return absArr;\n    }\n    return Math.abs(val);\n  };\n  let defaultCurveSegments = 150;\n  const degToRads = Math.PI / 180;\n  const roundCorner = 0.5519;\n  function roundValues(flag) {\n    _shouldRoundValues = !!flag;\n  }\n  function bmRnd(value) {\n    if (_shouldRoundValues) {\n      return Math.round(value);\n    }\n    return value;\n  }\n  function styleDiv(element) {\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.display = 'block';\n    element.style.transformOrigin = '0 0';\n    element.style.webkitTransformOrigin = '0 0';\n    element.style.backfaceVisibility = 'visible';\n    element.style.webkitBackfaceVisibility = 'visible';\n    element.style.transformStyle = 'preserve-3d';\n    element.style.webkitTransformStyle = 'preserve-3d';\n    element.style.mozTransformStyle = 'preserve-3d';\n  }\n  function BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\n    this.type = type;\n    this.currentTime = currentTime;\n    this.totalTime = totalTime;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMCompleteEvent(type, frameMultiplier) {\n    this.type = type;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\n    this.type = type;\n    this.currentLoop = currentLoop;\n    this.totalLoops = totalLoops;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n  function BMSegmentStartEvent(type, firstFrame, totalFrames) {\n    this.type = type;\n    this.firstFrame = firstFrame;\n    this.totalFrames = totalFrames;\n  }\n  function BMDestroyEvent(type, target) {\n    this.type = type;\n    this.target = target;\n  }\n  function BMRenderFrameErrorEvent(nativeError, currentTime) {\n    this.type = 'renderFrameError';\n    this.nativeError = nativeError;\n    this.currentTime = currentTime;\n  }\n  function BMConfigErrorEvent(nativeError) {\n    this.type = 'configError';\n    this.nativeError = nativeError;\n  }\n  function BMAnimationConfigErrorEvent(type, nativeError) {\n    this.type = type;\n    this.nativeError = nativeError;\n  }\n  const createElementID = function () {\n    var _count = 0;\n    return function createID() {\n      _count += 1;\n      return idPrefix$1 + '__lottie_element_' + _count;\n    };\n  }();\n  function HSVtoRGB(h, s, v) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n      default:\n        break;\n    }\n    return [r, g, b];\n  }\n  function RGBtoHSV(r, g, b) {\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var d = max - min;\n    var h;\n    var s = max === 0 ? 0 : d / max;\n    var v = max / 255;\n    switch (max) {\n      case min:\n        h = 0;\n        break;\n      case r:\n        h = g - b + d * (g < b ? 6 : 0);\n        h /= 6 * d;\n        break;\n      case g:\n        h = b - r + d * 2;\n        h /= 6 * d;\n        break;\n      case b:\n        h = r - g + d * 4;\n        h /= 6 * d;\n        break;\n      default:\n        break;\n    }\n    return [h, s, v];\n  }\n  function addSaturationToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[1] += offset;\n    if (hsv[1] > 1) {\n      hsv[1] = 1;\n    } else if (hsv[1] <= 0) {\n      hsv[1] = 0;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  function addBrightnessToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[2] += offset;\n    if (hsv[2] > 1) {\n      hsv[2] = 1;\n    } else if (hsv[2] < 0) {\n      hsv[2] = 0;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  function addHueToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[0] += offset / 360;\n    if (hsv[0] > 1) {\n      hsv[0] -= 1;\n    } else if (hsv[0] < 0) {\n      hsv[0] += 1;\n    }\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n  const rgbToHex = function () {\n    var colorMap = [];\n    var i;\n    var hex;\n    for (i = 0; i < 256; i += 1) {\n      hex = i.toString(16);\n      colorMap[i] = hex.length === 1 ? '0' + hex : hex;\n    }\n    return function (r, g, b) {\n      if (r < 0) {\n        r = 0;\n      }\n      if (g < 0) {\n        g = 0;\n      }\n      if (b < 0) {\n        b = 0;\n      }\n      return '#' + colorMap[r] + colorMap[g] + colorMap[b];\n    };\n  }();\n  const setSubframeEnabled = flag => {\n    subframeEnabled = !!flag;\n  };\n  const getSubframeEnabled = () => subframeEnabled;\n  const setExpressionsPlugin = value => {\n    expressionsPlugin = value;\n  };\n  const getExpressionsPlugin = () => expressionsPlugin;\n  const setDefaultCurveSegments = value => {\n    defaultCurveSegments = value;\n  };\n  const getDefaultCurveSegments = () => defaultCurveSegments;\n  const setIdPrefix = value => {\n    idPrefix$1 = value;\n  };\n  const getIdPrefix = () => idPrefix$1;\n  function createNS(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElementNS(svgNS, type);\n  }\n  const dataManager = function () {\n    var _counterId = 1;\n    var processes = [];\n    var workerFn;\n    var workerInstance;\n    var workerProxy = {\n      onmessage: function () {},\n      postMessage: function (path) {\n        workerFn({\n          data: path\n        });\n      }\n    };\n    var _workerSelf = {\n      postMessage: function (data) {\n        workerProxy.onmessage({\n          data: data\n        });\n      }\n    };\n    function createWorker(fn) {\n      if (window.Worker && window.Blob && getWebWorker()) {\n        var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], {\n          type: 'text/javascript'\n        });\n        // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\n        var url = URL.createObjectURL(blob);\n        return new Worker(url);\n      }\n      workerFn = fn;\n      return workerProxy;\n    }\n    function setupWorker() {\n      if (!workerInstance) {\n        workerInstance = createWorker(function workerStart(e) {\n          function dataFunctionManager() {\n            function completeLayers(layers, comps) {\n              var layerData;\n              var i;\n              var len = layers.length;\n              var j;\n              var jLen;\n              var k;\n              var kLen;\n              for (i = 0; i < len; i += 1) {\n                layerData = layers[i];\n                if ('ks' in layerData && !layerData.completed) {\n                  layerData.completed = true;\n                  if (layerData.tt) {\n                    layers[i - 1].td = layerData.tt;\n                  }\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\n                          }\n                          if (maskProps[j].pt.k[k].e) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\n                          }\n                        }\n                      }\n                    }\n                  }\n                  if (layerData.ty === 0) {\n                    layerData.layers = findCompLayers(layerData.refId, comps);\n                    completeLayers(layerData.layers, comps);\n                  } else if (layerData.ty === 4) {\n                    completeShapes(layerData.shapes);\n                  } else if (layerData.ty === 5) {\n                    completeText(layerData);\n                  }\n                }\n              }\n            }\n            function completeChars(chars, assets) {\n              if (chars) {\n                var i = 0;\n                var len = chars.length;\n                for (i = 0; i < len; i += 1) {\n                  if (chars[i].t === 1) {\n                    // var compData = findComp(chars[i].data.refId, assets);\n                    chars[i].data.layers = findCompLayers(chars[i].data.refId, assets);\n                    // chars[i].data.ip = 0;\n                    // chars[i].data.op = 99999;\n                    // chars[i].data.st = 0;\n                    // chars[i].data.sr = 1;\n                    // chars[i].w = compData.w;\n                    // chars[i].data.ks = {\n                    //   a: { k: [0, 0, 0], a: 0 },\n                    //   p: { k: [0, -compData.h, 0], a: 0 },\n                    //   r: { k: 0, a: 0 },\n                    //   s: { k: [100, 100], a: 0 },\n                    //   o: { k: 100, a: 0 },\n                    // };\n                    completeLayers(chars[i].data.layers, assets);\n                  }\n                }\n              }\n            }\n            function findComp(id, comps) {\n              var i = 0;\n              var len = comps.length;\n              while (i < len) {\n                if (comps[i].id === id) {\n                  return comps[i];\n                }\n                i += 1;\n              }\n              return null;\n            }\n            function findCompLayers(id, comps) {\n              var comp = findComp(id, comps);\n              if (comp) {\n                if (!comp.layers.__used) {\n                  comp.layers.__used = true;\n                  return comp.layers;\n                }\n                return JSON.parse(JSON.stringify(comp.layers));\n              }\n              return null;\n            }\n            function completeShapes(arr) {\n              var i;\n              var len = arr.length;\n              var j;\n              var jLen;\n              for (i = len - 1; i >= 0; i -= 1) {\n                if (arr[i].ty === 'sh') {\n                  if (arr[i].ks.k.i) {\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\n                  } else {\n                    jLen = arr[i].ks.k.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (arr[i].ks.k[j].s) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\n                      }\n                      if (arr[i].ks.k[j].e) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\n                      }\n                    }\n                  }\n                } else if (arr[i].ty === 'gr') {\n                  completeShapes(arr[i].it);\n                }\n              }\n            }\n            function convertPathsToAbsoluteValues(path) {\n              var i;\n              var len = path.i.length;\n              for (i = 0; i < len; i += 1) {\n                path.i[i][0] += path.v[i][0];\n                path.i[i][1] += path.v[i][1];\n                path.o[i][0] += path.v[i][0];\n                path.o[i][1] += path.v[i][1];\n              }\n            }\n            function checkVersion(minimum, animVersionString) {\n              var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\n              if (minimum[0] > animVersion[0]) {\n                return true;\n              }\n              if (animVersion[0] > minimum[0]) {\n                return false;\n              }\n              if (minimum[1] > animVersion[1]) {\n                return true;\n              }\n              if (animVersion[1] > minimum[1]) {\n                return false;\n              }\n              if (minimum[2] > animVersion[2]) {\n                return true;\n              }\n              if (animVersion[2] > minimum[2]) {\n                return false;\n              }\n              return null;\n            }\n            var checkText = function () {\n              var minimumVersion = [4, 4, 14];\n              function updateTextLayer(textLayer) {\n                var documentData = textLayer.t.d;\n                textLayer.t.d = {\n                  k: [{\n                    s: documentData,\n                    t: 0\n                  }]\n                };\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkChars = function () {\n              var minimumVersion = [4, 7, 99];\n              return function (animationData) {\n                if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\n                  var i;\n                  var len = animationData.chars.length;\n                  for (i = 0; i < len; i += 1) {\n                    var charData = animationData.chars[i];\n                    if (charData.data && charData.data.shapes) {\n                      completeShapes(charData.data.shapes);\n                      charData.data.ip = 0;\n                      charData.data.op = 99999;\n                      charData.data.st = 0;\n                      charData.data.sr = 1;\n                      charData.data.ks = {\n                        p: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        s: {\n                          k: [100, 100],\n                          a: 0\n                        },\n                        a: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        r: {\n                          k: 0,\n                          a: 0\n                        },\n                        o: {\n                          k: 100,\n                          a: 0\n                        }\n                      };\n                      if (!animationData.chars[i].t) {\n                        charData.data.shapes.push({\n                          ty: 'no'\n                        });\n                        charData.data.shapes[0].it.push({\n                          p: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          s: {\n                            k: [100, 100],\n                            a: 0\n                          },\n                          a: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          r: {\n                            k: 0,\n                            a: 0\n                          },\n                          o: {\n                            k: 100,\n                            a: 0\n                          },\n                          sk: {\n                            k: 0,\n                            a: 0\n                          },\n                          sa: {\n                            k: 0,\n                            a: 0\n                          },\n                          ty: 'tr'\n                        });\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkPathProperties = function () {\n              var minimumVersion = [5, 7, 15];\n              function updateTextLayer(textLayer) {\n                var pathData = textLayer.t.p;\n                if (typeof pathData.a === 'number') {\n                  pathData.a = {\n                    a: 0,\n                    k: pathData.a\n                  };\n                }\n                if (typeof pathData.p === 'number') {\n                  pathData.p = {\n                    a: 0,\n                    k: pathData.p\n                  };\n                }\n                if (typeof pathData.r === 'number') {\n                  pathData.r = {\n                    a: 0,\n                    k: pathData.r\n                  };\n                }\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkColors = function () {\n              var minimumVersion = [4, 1, 9];\n              function iterateShapes(shapes) {\n                var i;\n                var len = shapes.length;\n                var j;\n                var jLen;\n                for (i = 0; i < len; i += 1) {\n                  if (shapes[i].ty === 'gr') {\n                    iterateShapes(shapes[i].it);\n                  } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\n                    if (shapes[i].c.k && shapes[i].c.k[0].i) {\n                      jLen = shapes[i].c.k.length;\n                      for (j = 0; j < jLen; j += 1) {\n                        if (shapes[i].c.k[j].s) {\n                          shapes[i].c.k[j].s[0] /= 255;\n                          shapes[i].c.k[j].s[1] /= 255;\n                          shapes[i].c.k[j].s[2] /= 255;\n                          shapes[i].c.k[j].s[3] /= 255;\n                        }\n                        if (shapes[i].c.k[j].e) {\n                          shapes[i].c.k[j].e[0] /= 255;\n                          shapes[i].c.k[j].e[1] /= 255;\n                          shapes[i].c.k[j].e[2] /= 255;\n                          shapes[i].c.k[j].e[3] /= 255;\n                        }\n                      }\n                    } else {\n                      shapes[i].c.k[0] /= 255;\n                      shapes[i].c.k[1] /= 255;\n                      shapes[i].c.k[2] /= 255;\n                      shapes[i].c.k[3] /= 255;\n                    }\n                  }\n                }\n              }\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 4) {\n                    iterateShapes(layers[i].shapes);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            var checkShapes = function () {\n              var minimumVersion = [4, 4, 18];\n              function completeClosingShapes(arr) {\n                var i;\n                var len = arr.length;\n                var j;\n                var jLen;\n                for (i = len - 1; i >= 0; i -= 1) {\n                  if (arr[i].ty === 'sh') {\n                    if (arr[i].ks.k.i) {\n                      arr[i].ks.k.c = arr[i].closed;\n                    } else {\n                      jLen = arr[i].ks.k.length;\n                      for (j = 0; j < jLen; j += 1) {\n                        if (arr[i].ks.k[j].s) {\n                          arr[i].ks.k[j].s[0].c = arr[i].closed;\n                        }\n                        if (arr[i].ks.k[j].e) {\n                          arr[i].ks.k[j].e[0].c = arr[i].closed;\n                        }\n                      }\n                    }\n                  } else if (arr[i].ty === 'gr') {\n                    completeClosingShapes(arr[i].it);\n                  }\n                }\n              }\n              function iterateLayers(layers) {\n                var layerData;\n                var i;\n                var len = layers.length;\n                var j;\n                var jLen;\n                var k;\n                var kLen;\n                for (i = 0; i < len; i += 1) {\n                  layerData = layers[i];\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        maskProps[j].pt.k.c = maskProps[j].cl;\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\n                          }\n                          if (maskProps[j].pt.k[k].e) {\n                            maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\n                          }\n                        }\n                      }\n                    }\n                  }\n                  if (layerData.ty === 4) {\n                    completeClosingShapes(layerData.shapes);\n                  }\n                }\n              }\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n            function completeData(animationData) {\n              if (animationData.__complete) {\n                return;\n              }\n              checkColors(animationData);\n              checkText(animationData);\n              checkChars(animationData);\n              checkPathProperties(animationData);\n              checkShapes(animationData);\n              completeLayers(animationData.layers, animationData.assets);\n              completeChars(animationData.chars, animationData.assets);\n              animationData.__complete = true;\n            }\n            function completeText(data) {\n              if (data.t.a.length === 0 && !('m' in data.t.p)) {\n                // data.singleShape = true;\n              }\n            }\n            var moduleOb = {};\n            moduleOb.completeData = completeData;\n            moduleOb.checkColors = checkColors;\n            moduleOb.checkChars = checkChars;\n            moduleOb.checkPathProperties = checkPathProperties;\n            moduleOb.checkShapes = checkShapes;\n            moduleOb.completeLayers = completeLayers;\n            return moduleOb;\n          }\n          if (!_workerSelf.dataManager) {\n            _workerSelf.dataManager = dataFunctionManager();\n          }\n          if (!_workerSelf.assetLoader) {\n            _workerSelf.assetLoader = function () {\n              function formatResponse(xhr) {\n                // using typeof doubles the time of execution of this method,\n                // so if available, it's better to use the header to validate the type\n                var contentTypeHeader = xhr.getResponseHeader('content-type');\n                if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\n                  return xhr.response;\n                }\n                if (xhr.response && typeof xhr.response === 'object') {\n                  return xhr.response;\n                }\n                if (xhr.response && typeof xhr.response === 'string') {\n                  return JSON.parse(xhr.response);\n                }\n                if (xhr.responseText) {\n                  return JSON.parse(xhr.responseText);\n                }\n                return null;\n              }\n              function loadAsset(path, fullPath, callback, errorCallback) {\n                var response;\n                var xhr = new XMLHttpRequest();\n                // set responseType after calling open or IE will break.\n                try {\n                  // This crashes on Android WebView prior to KitKat\n                  xhr.responseType = 'json';\n                } catch (err) {} // eslint-disable-line no-empty\n                xhr.onreadystatechange = function () {\n                  if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                      response = formatResponse(xhr);\n                      callback(response);\n                    } else {\n                      try {\n                        response = formatResponse(xhr);\n                        callback(response);\n                      } catch (err) {\n                        if (errorCallback) {\n                          errorCallback(err);\n                        }\n                      }\n                    }\n                  }\n                };\n                try {\n                  xhr.open('GET', path, true);\n                } catch (error) {\n                  xhr.open('GET', fullPath + '/' + path, true);\n                }\n                xhr.send();\n              }\n              return {\n                load: loadAsset\n              };\n            }();\n          }\n          if (e.data.type === 'loadAnimation') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.dataManager.completeData(data);\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          } else if (e.data.type === 'complete') {\n            var animation = e.data.animation;\n            _workerSelf.dataManager.completeData(animation);\n            _workerSelf.postMessage({\n              id: e.data.id,\n              payload: animation,\n              status: 'success'\n            });\n          } else if (e.data.type === 'loadData') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          }\n        });\n        workerInstance.onmessage = function (event) {\n          var data = event.data;\n          var id = data.id;\n          var process = processes[id];\n          processes[id] = null;\n          if (data.status === 'success') {\n            process.onComplete(data.payload);\n          } else if (process.onError) {\n            process.onError();\n          }\n        };\n      }\n    }\n    function createProcess(onComplete, onError) {\n      _counterId += 1;\n      var id = 'processId_' + _counterId;\n      processes[id] = {\n        onComplete: onComplete,\n        onError: onError\n      };\n      return id;\n    }\n    function loadAnimation(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadAnimation',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n    function loadData(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadData',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n    function completeAnimation(anim, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'complete',\n        animation: anim,\n        id: processId\n      });\n    }\n    return {\n      loadAnimation: loadAnimation,\n      loadData: loadData,\n      completeAnimation: completeAnimation\n    };\n  }();\n  const ImagePreloader = function () {\n    var proxyImage = function () {\n      var canvas = createTag('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      var ctx = canvas.getContext('2d');\n      ctx.fillStyle = 'rgba(0,0,0,0)';\n      ctx.fillRect(0, 0, 1, 1);\n      return canvas;\n    }();\n    function imageLoaded() {\n      this.loadedAssets += 1;\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n    function footageLoaded() {\n      this.loadedFootagesCount += 1;\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n    function getAssetsPath(assetData, assetsPath, originalPath) {\n      var path = '';\n      if (assetData.e) {\n        path = assetData.p;\n      } else if (assetsPath) {\n        var imagePath = assetData.p;\n        if (imagePath.indexOf('images/') !== -1) {\n          imagePath = imagePath.split('/')[1];\n        }\n        path = assetsPath + imagePath;\n      } else {\n        path = originalPath;\n        path += assetData.u ? assetData.u : '';\n        path += assetData.p;\n      }\n      return path;\n    }\n    function testImageLoaded(img) {\n      var _count = 0;\n      var intervalId = setInterval(function () {\n        var box = img.getBBox();\n        if (box.width || _count > 500) {\n          this._imageLoaded();\n          clearInterval(intervalId);\n        }\n        _count += 1;\n      }.bind(this), 50);\n    }\n    function createImageData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createNS('image');\n      if (isSafari) {\n        this.testImageLoaded(img);\n      } else {\n        img.addEventListener('load', this._imageLoaded, false);\n      }\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n        this._imageLoaded();\n      }.bind(this), false);\n      img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\n      if (this._elementHelper.append) {\n        this._elementHelper.append(img);\n      } else {\n        this._elementHelper.appendChild(img);\n      }\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n    function createImgData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createTag('img');\n      img.crossOrigin = 'anonymous';\n      img.addEventListener('load', this._imageLoaded, false);\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n        this._imageLoaded();\n      }.bind(this), false);\n      img.src = path;\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n    function createFootageData(data) {\n      var ob = {\n        assetData: data\n      };\n      var path = getAssetsPath(data, this.assetsPath, this.path);\n      dataManager.loadData(path, function (footageData) {\n        ob.img = footageData;\n        this._footageLoaded();\n      }.bind(this), function () {\n        ob.img = {};\n        this._footageLoaded();\n      }.bind(this));\n      return ob;\n    }\n    function loadAssets(assets, cb) {\n      this.imagesLoadedCb = cb;\n      var i;\n      var len = assets.length;\n      for (i = 0; i < len; i += 1) {\n        if (!assets[i].layers) {\n          if (!assets[i].t || assets[i].t === 'seq') {\n            this.totalImages += 1;\n            this.images.push(this._createImageData(assets[i]));\n          } else if (assets[i].t === 3) {\n            this.totalFootages += 1;\n            this.images.push(this.createFootageData(assets[i]));\n          }\n        }\n      }\n    }\n    function setPath(path) {\n      this.path = path || '';\n    }\n    function setAssetsPath(path) {\n      this.assetsPath = path || '';\n    }\n    function getAsset(assetData) {\n      var i = 0;\n      var len = this.images.length;\n      while (i < len) {\n        if (this.images[i].assetData === assetData) {\n          return this.images[i].img;\n        }\n        i += 1;\n      }\n      return null;\n    }\n    function destroy() {\n      this.imagesLoadedCb = null;\n      this.images.length = 0;\n    }\n    function loadedImages() {\n      return this.totalImages === this.loadedAssets;\n    }\n    function loadedFootages() {\n      return this.totalFootages === this.loadedFootagesCount;\n    }\n    function setCacheType(type, elementHelper) {\n      if (type === 'svg') {\n        this._elementHelper = elementHelper;\n        this._createImageData = this.createImageData.bind(this);\n      } else {\n        this._createImageData = this.createImgData.bind(this);\n      }\n    }\n    function ImagePreloaderFactory() {\n      this._imageLoaded = imageLoaded.bind(this);\n      this._footageLoaded = footageLoaded.bind(this);\n      this.testImageLoaded = testImageLoaded.bind(this);\n      this.createFootageData = createFootageData.bind(this);\n      this.assetsPath = '';\n      this.path = '';\n      this.totalImages = 0;\n      this.totalFootages = 0;\n      this.loadedAssets = 0;\n      this.loadedFootagesCount = 0;\n      this.imagesLoadedCb = null;\n      this.images = [];\n    }\n    ImagePreloaderFactory.prototype = {\n      loadAssets: loadAssets,\n      setAssetsPath: setAssetsPath,\n      setPath: setPath,\n      loadedImages: loadedImages,\n      loadedFootages: loadedFootages,\n      destroy: destroy,\n      getAsset: getAsset,\n      createImgData: createImgData,\n      createImageData: createImageData,\n      imageLoaded: imageLoaded,\n      footageLoaded: footageLoaded,\n      setCacheType: setCacheType\n    };\n    return ImagePreloaderFactory;\n  }();\n  function BaseEvent() {}\n  BaseEvent.prototype = {\n    triggerEvent: function (eventName, args) {\n      if (this._cbs[eventName]) {\n        var callbacks = this._cbs[eventName];\n        for (var i = 0; i < callbacks.length; i += 1) {\n          callbacks[i](args);\n        }\n      }\n    },\n    addEventListener: function (eventName, callback) {\n      if (!this._cbs[eventName]) {\n        this._cbs[eventName] = [];\n      }\n      this._cbs[eventName].push(callback);\n      return function () {\n        this.removeEventListener(eventName, callback);\n      }.bind(this);\n    },\n    removeEventListener: function (eventName, callback) {\n      if (!callback) {\n        this._cbs[eventName] = null;\n      } else if (this._cbs[eventName]) {\n        var i = 0;\n        var len = this._cbs[eventName].length;\n        while (i < len) {\n          if (this._cbs[eventName][i] === callback) {\n            this._cbs[eventName].splice(i, 1);\n            i -= 1;\n            len -= 1;\n          }\n          i += 1;\n        }\n        if (!this._cbs[eventName].length) {\n          this._cbs[eventName] = null;\n        }\n      }\n    }\n  };\n  const markerParser = function () {\n    function parsePayloadLines(payload) {\n      var lines = payload.split('\\r\\n');\n      var keys = {};\n      var line;\n      var keysCount = 0;\n      for (var i = 0; i < lines.length; i += 1) {\n        line = lines[i].split(':');\n        if (line.length === 2) {\n          keys[line[0]] = line[1].trim();\n          keysCount += 1;\n        }\n      }\n      if (keysCount === 0) {\n        throw new Error();\n      }\n      return keys;\n    }\n    return function (_markers) {\n      var markers = [];\n      for (var i = 0; i < _markers.length; i += 1) {\n        var _marker = _markers[i];\n        var markerData = {\n          time: _marker.tm,\n          duration: _marker.dr\n        };\n        try {\n          markerData.payload = JSON.parse(_markers[i].cm);\n        } catch (_) {\n          try {\n            markerData.payload = parsePayloadLines(_markers[i].cm);\n          } catch (__) {\n            markerData.payload = {\n              name: _markers[i].cm\n            };\n          }\n        }\n        markers.push(markerData);\n      }\n      return markers;\n    };\n  }();\n  const ProjectInterface = function () {\n    function registerComposition(comp) {\n      this.compositions.push(comp);\n    }\n    return function () {\n      function _thisProjectFunction(name) {\n        var i = 0;\n        var len = this.compositions.length;\n        while (i < len) {\n          if (this.compositions[i].data && this.compositions[i].data.nm === name) {\n            if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\n              this.compositions[i].prepareFrame(this.currentFrame);\n            }\n            return this.compositions[i].compInterface;\n          }\n          i += 1;\n        }\n        return null;\n      }\n      _thisProjectFunction.compositions = [];\n      _thisProjectFunction.currentFrame = 0;\n      _thisProjectFunction.registerComposition = registerComposition;\n      return _thisProjectFunction;\n    };\n  }();\n  const renderers = {};\n  const registerRenderer = (key, value) => {\n    renderers[key] = value;\n  };\n  function getRenderer(key) {\n    return renderers[key];\n  }\n  const AnimationItem = function () {\n    this._cbs = [];\n    this.name = '';\n    this.path = '';\n    this.isLoaded = false;\n    this.currentFrame = 0;\n    this.currentRawFrame = 0;\n    this.firstFrame = 0;\n    this.totalFrames = 0;\n    this.frameRate = 0;\n    this.frameMult = 0;\n    this.playSpeed = 1;\n    this.playDirection = 1;\n    this.playCount = 0;\n    this.animationData = {};\n    this.assets = [];\n    this.isPaused = true;\n    this.autoplay = false;\n    this.loop = true;\n    this.renderer = null;\n    this.animationID = createElementID();\n    this.assetsPath = '';\n    this.timeCompleted = 0;\n    this.segmentPos = 0;\n    this.isSubframeEnabled = getSubframeEnabled();\n    this.segments = [];\n    this._idle = true;\n    this._completedLoop = false;\n    this.projectInterface = ProjectInterface();\n    this.imagePreloader = new ImagePreloader();\n    this.audioController = audioControllerFactory();\n    this.markers = [];\n    this.configAnimation = this.configAnimation.bind(this);\n    this.onSetupError = this.onSetupError.bind(this);\n    this.onSegmentComplete = this.onSegmentComplete.bind(this);\n    this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\n  };\n  extendPrototype([BaseEvent], AnimationItem);\n  AnimationItem.prototype.setParams = function (params) {\n    if (params.wrapper || params.container) {\n      this.wrapper = params.wrapper || params.container;\n    }\n    var animType = 'svg';\n    if (params.animType) {\n      animType = params.animType;\n    } else if (params.renderer) {\n      animType = params.renderer;\n    }\n    const RendererClass = getRenderer(animType);\n    this.renderer = new RendererClass(this, params.rendererSettings);\n    this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\n    this.renderer.setProjectInterface(this.projectInterface);\n    this.animType = animType;\n    if (params.loop === '' || params.loop === null || params.loop === undefined || params.loop === true) {\n      this.loop = true;\n    } else if (params.loop === false) {\n      this.loop = false;\n    } else {\n      this.loop = parseInt(params.loop, 10);\n    }\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\n    this.name = params.name ? params.name : '';\n    this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\n    this.assetsPath = params.assetsPath;\n    this.initialSegment = params.initialSegment;\n    if (params.audioFactory) {\n      this.audioController.setAudioFactory(params.audioFactory);\n    }\n    if (params.animationData) {\n      this.setupAnimation(params.animationData);\n    } else if (params.path) {\n      if (params.path.lastIndexOf('\\\\') !== -1) {\n        this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\n      } else {\n        this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\n      }\n      this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\n      this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\n      dataManager.loadAnimation(params.path, this.configAnimation, this.onSetupError);\n    }\n  };\n  AnimationItem.prototype.onSetupError = function () {\n    this.trigger('data_failed');\n  };\n  AnimationItem.prototype.setupAnimation = function (data) {\n    dataManager.completeAnimation(data, this.configAnimation);\n  };\n  AnimationItem.prototype.setData = function (wrapper, animationData) {\n    if (animationData) {\n      if (typeof animationData !== 'object') {\n        animationData = JSON.parse(animationData);\n      }\n    }\n    var params = {\n      wrapper: wrapper,\n      animationData: animationData\n    };\n    var wrapperAttributes = wrapper.attributes;\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\n    if (loop === 'false') {\n      params.loop = false;\n    } else if (loop === 'true') {\n      params.loop = true;\n    } else if (loop !== '') {\n      params.loop = parseInt(loop, 10);\n    }\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\n    params.autoplay = autoplay !== 'false';\n    params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\n    if (prerender === 'false') {\n      params.prerender = false;\n    }\n    this.setParams(params);\n  };\n  AnimationItem.prototype.includeLayers = function (data) {\n    if (data.op > this.animationData.op) {\n      this.animationData.op = data.op;\n      this.totalFrames = Math.floor(data.op - this.animationData.ip);\n    }\n    var layers = this.animationData.layers;\n    var i;\n    var len = layers.length;\n    var newLayers = data.layers;\n    var j;\n    var jLen = newLayers.length;\n    for (j = 0; j < jLen; j += 1) {\n      i = 0;\n      while (i < len) {\n        if (layers[i].id === newLayers[j].id) {\n          layers[i] = newLayers[j];\n          break;\n        }\n        i += 1;\n      }\n    }\n    if (data.chars || data.fonts) {\n      this.renderer.globalData.fontManager.addChars(data.chars);\n      this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\n    }\n    if (data.assets) {\n      len = data.assets.length;\n      for (i = 0; i < len; i += 1) {\n        this.animationData.assets.push(data.assets[i]);\n      }\n    }\n    this.animationData.__complete = false;\n    dataManager.completeAnimation(this.animationData, this.onSegmentComplete);\n  };\n  AnimationItem.prototype.onSegmentComplete = function (data) {\n    this.animationData = data;\n    var expressionsPlugin = getExpressionsPlugin();\n    if (expressionsPlugin) {\n      expressionsPlugin.initExpressions(this);\n    }\n    this.loadNextSegment();\n  };\n  AnimationItem.prototype.loadNextSegment = function () {\n    var segments = this.animationData.segments;\n    if (!segments || segments.length === 0 || !this.autoloadSegments) {\n      this.trigger('data_ready');\n      this.timeCompleted = this.totalFrames;\n      return;\n    }\n    var segment = segments.shift();\n    this.timeCompleted = segment.time * this.frameRate;\n    var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\n    this.segmentPos += 1;\n    dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\n      this.trigger('data_failed');\n    }.bind(this));\n  };\n  AnimationItem.prototype.loadSegments = function () {\n    var segments = this.animationData.segments;\n    if (!segments) {\n      this.timeCompleted = this.totalFrames;\n    }\n    this.loadNextSegment();\n  };\n  AnimationItem.prototype.imagesLoaded = function () {\n    this.trigger('loaded_images');\n    this.checkLoaded();\n  };\n  AnimationItem.prototype.preloadImages = function () {\n    this.imagePreloader.setAssetsPath(this.assetsPath);\n    this.imagePreloader.setPath(this.path);\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\n  };\n  AnimationItem.prototype.configAnimation = function (animData) {\n    if (!this.renderer) {\n      return;\n    }\n    try {\n      this.animationData = animData;\n      if (this.initialSegment) {\n        this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\n        this.firstFrame = Math.round(this.initialSegment[0]);\n      } else {\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\n        this.firstFrame = Math.round(this.animationData.ip);\n      }\n      this.renderer.configAnimation(animData);\n      if (!animData.assets) {\n        animData.assets = [];\n      }\n      this.assets = this.animationData.assets;\n      this.frameRate = this.animationData.fr;\n      this.frameMult = this.animationData.fr / 1000;\n      this.renderer.searchExtraCompositions(animData.assets);\n      this.markers = markerParser(animData.markers || []);\n      this.trigger('config_ready');\n      this.preloadImages();\n      this.loadSegments();\n      this.updaFrameModifier();\n      this.waitForFontsLoaded();\n      if (this.isPaused) {\n        this.audioController.pause();\n      }\n    } catch (error) {\n      this.triggerConfigError(error);\n    }\n  };\n  AnimationItem.prototype.waitForFontsLoaded = function () {\n    if (!this.renderer) {\n      return;\n    }\n    if (this.renderer.globalData.fontManager.isLoaded) {\n      this.checkLoaded();\n    } else {\n      setTimeout(this.waitForFontsLoaded.bind(this), 20);\n    }\n  };\n  AnimationItem.prototype.checkLoaded = function () {\n    if (!this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas') && this.imagePreloader.loadedFootages()) {\n      this.isLoaded = true;\n      var expressionsPlugin = getExpressionsPlugin();\n      if (expressionsPlugin) {\n        expressionsPlugin.initExpressions(this);\n      }\n      this.renderer.initItems();\n      setTimeout(function () {\n        this.trigger('DOMLoaded');\n      }.bind(this), 0);\n      this.gotoFrame();\n      if (this.autoplay) {\n        this.play();\n      }\n    }\n  };\n  AnimationItem.prototype.resize = function () {\n    this.renderer.updateContainerSize();\n  };\n  AnimationItem.prototype.setSubframe = function (flag) {\n    this.isSubframeEnabled = !!flag;\n  };\n  AnimationItem.prototype.gotoFrame = function () {\n    this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\n\n    if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\n      this.currentFrame = this.timeCompleted;\n    }\n    this.trigger('enterFrame');\n    this.renderFrame();\n    this.trigger('drawnFrame');\n  };\n  AnimationItem.prototype.renderFrame = function () {\n    if (this.isLoaded === false || !this.renderer) {\n      return;\n    }\n    try {\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\n    } catch (error) {\n      this.triggerRenderFrameError(error);\n    }\n  };\n  AnimationItem.prototype.play = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === true) {\n      this.isPaused = false;\n      this.trigger('_pause');\n      this.audioController.resume();\n      if (this._idle) {\n        this._idle = false;\n        this.trigger('_active');\n      }\n    }\n  };\n  AnimationItem.prototype.pause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === false) {\n      this.isPaused = true;\n      this.trigger('_play');\n      this._idle = true;\n      this.trigger('_idle');\n      this.audioController.pause();\n    }\n  };\n  AnimationItem.prototype.togglePause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    if (this.isPaused === true) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  };\n  AnimationItem.prototype.stop = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.pause();\n    this.playCount = 0;\n    this._completedLoop = false;\n    this.setCurrentRawFrameValue(0);\n  };\n  AnimationItem.prototype.getMarkerData = function (markerName) {\n    var marker;\n    for (var i = 0; i < this.markers.length; i += 1) {\n      marker = this.markers[i];\n      if (marker.payload && marker.payload.name === markerName) {\n        return marker;\n      }\n    }\n    return null;\n  };\n  AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    var numValue = Number(value);\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n      if (marker) {\n        this.goToAndStop(marker.time, true);\n      }\n    } else if (isFrame) {\n      this.setCurrentRawFrameValue(value);\n    } else {\n      this.setCurrentRawFrameValue(value * this.frameModifier);\n    }\n    this.pause();\n  };\n  AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    var numValue = Number(value);\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n      if (marker) {\n        if (!marker.duration) {\n          this.goToAndStop(marker.time, true);\n        } else {\n          this.playSegments([marker.time, marker.time + marker.duration], true);\n        }\n      }\n    } else {\n      this.goToAndStop(numValue, isFrame, name);\n    }\n    this.play();\n  };\n  AnimationItem.prototype.advanceTime = function (value) {\n    if (this.isPaused === true || this.isLoaded === false) {\n      return;\n    }\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\n    var _isComplete = false;\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\n      if (!this.loop || this.playCount === this.loop) {\n        if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\n          _isComplete = true;\n          nextValue = this.totalFrames - 1;\n        }\n      } else if (nextValue >= this.totalFrames) {\n        this.playCount += 1;\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\n          this.setCurrentRawFrameValue(nextValue % this.totalFrames);\n          this._completedLoop = true;\n          this.trigger('loopComplete');\n        }\n      } else {\n        this.setCurrentRawFrameValue(nextValue);\n      }\n    } else if (nextValue < 0) {\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\n        if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\n          // eslint-disable-line no-plusplus\n          this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\n          if (!this._completedLoop) {\n            this._completedLoop = true;\n          } else {\n            this.trigger('loopComplete');\n          }\n        } else {\n          _isComplete = true;\n          nextValue = 0;\n        }\n      }\n    } else {\n      this.setCurrentRawFrameValue(nextValue);\n    }\n    if (_isComplete) {\n      this.setCurrentRawFrameValue(nextValue);\n      this.pause();\n      this.trigger('complete');\n    }\n  };\n  AnimationItem.prototype.adjustSegment = function (arr, offset) {\n    this.playCount = 0;\n    if (arr[1] < arr[0]) {\n      if (this.frameModifier > 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(-1);\n        }\n      }\n      this.totalFrames = arr[0] - arr[1];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[1];\n      this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\n    } else if (arr[1] > arr[0]) {\n      if (this.frameModifier < 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(1);\n        }\n      }\n      this.totalFrames = arr[1] - arr[0];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[0];\n      this.setCurrentRawFrameValue(0.001 + offset);\n    }\n    this.trigger('segmentStart');\n  };\n  AnimationItem.prototype.setSegment = function (init, end) {\n    var pendingFrame = -1;\n    if (this.isPaused) {\n      if (this.currentRawFrame + this.firstFrame < init) {\n        pendingFrame = init;\n      } else if (this.currentRawFrame + this.firstFrame > end) {\n        pendingFrame = end - init;\n      }\n    }\n    this.firstFrame = init;\n    this.totalFrames = end - init;\n    this.timeCompleted = this.totalFrames;\n    if (pendingFrame !== -1) {\n      this.goToAndStop(pendingFrame, true);\n    }\n  };\n  AnimationItem.prototype.playSegments = function (arr, forceFlag) {\n    if (forceFlag) {\n      this.segments.length = 0;\n    }\n    if (typeof arr[0] === 'object') {\n      var i;\n      var len = arr.length;\n      for (i = 0; i < len; i += 1) {\n        this.segments.push(arr[i]);\n      }\n    } else {\n      this.segments.push(arr);\n    }\n    if (this.segments.length && forceFlag) {\n      this.adjustSegment(this.segments.shift(), 0);\n    }\n    if (this.isPaused) {\n      this.play();\n    }\n  };\n  AnimationItem.prototype.resetSegments = function (forceFlag) {\n    this.segments.length = 0;\n    this.segments.push([this.animationData.ip, this.animationData.op]);\n    if (forceFlag) {\n      this.checkSegments(0);\n    }\n  };\n  AnimationItem.prototype.checkSegments = function (offset) {\n    if (this.segments.length) {\n      this.adjustSegment(this.segments.shift(), offset);\n      return true;\n    }\n    return false;\n  };\n  AnimationItem.prototype.destroy = function (name) {\n    if (name && this.name !== name || !this.renderer) {\n      return;\n    }\n    this.renderer.destroy();\n    this.imagePreloader.destroy();\n    this.trigger('destroy');\n    this._cbs = null;\n    this.onEnterFrame = null;\n    this.onLoopComplete = null;\n    this.onComplete = null;\n    this.onSegmentStart = null;\n    this.onDestroy = null;\n    this.renderer = null;\n    this.renderer = null;\n    this.imagePreloader = null;\n    this.projectInterface = null;\n  };\n  AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\n    this.currentRawFrame = value;\n    this.gotoFrame();\n  };\n  AnimationItem.prototype.setSpeed = function (val) {\n    this.playSpeed = val;\n    this.updaFrameModifier();\n  };\n  AnimationItem.prototype.setDirection = function (val) {\n    this.playDirection = val < 0 ? -1 : 1;\n    this.updaFrameModifier();\n  };\n  AnimationItem.prototype.setVolume = function (val, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.setVolume(val);\n  };\n  AnimationItem.prototype.getVolume = function () {\n    return this.audioController.getVolume();\n  };\n  AnimationItem.prototype.mute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.mute();\n  };\n  AnimationItem.prototype.unmute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n    this.audioController.unmute();\n  };\n  AnimationItem.prototype.updaFrameModifier = function () {\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\n    this.audioController.setRate(this.playSpeed * this.playDirection);\n  };\n  AnimationItem.prototype.getPath = function () {\n    return this.path;\n  };\n  AnimationItem.prototype.getAssetsPath = function (assetData) {\n    var path = '';\n    if (assetData.e) {\n      path = assetData.p;\n    } else if (this.assetsPath) {\n      var imagePath = assetData.p;\n      if (imagePath.indexOf('images/') !== -1) {\n        imagePath = imagePath.split('/')[1];\n      }\n      path = this.assetsPath + imagePath;\n    } else {\n      path = this.path;\n      path += assetData.u ? assetData.u : '';\n      path += assetData.p;\n    }\n    return path;\n  };\n  AnimationItem.prototype.getAssetData = function (id) {\n    var i = 0;\n    var len = this.assets.length;\n    while (i < len) {\n      if (id === this.assets[i].id) {\n        return this.assets[i];\n      }\n      i += 1;\n    }\n    return null;\n  };\n  AnimationItem.prototype.hide = function () {\n    this.renderer.hide();\n  };\n  AnimationItem.prototype.show = function () {\n    this.renderer.show();\n  };\n  AnimationItem.prototype.getDuration = function (isFrame) {\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\n  };\n  AnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\n    try {\n      var element = this.renderer.getElementByPath(path);\n      element.updateDocumentData(documentData, index);\n    } catch (error) {\n      // TODO: decide how to handle catch case\n    }\n  };\n  AnimationItem.prototype.trigger = function (name) {\n    if (this._cbs && this._cbs[name]) {\n      switch (name) {\n        case 'enterFrame':\n          this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\n          break;\n        case 'drawnFrame':\n          this.drawnFrameEvent.currentTime = this.currentFrame;\n          this.drawnFrameEvent.totalTime = this.totalFrames;\n          this.drawnFrameEvent.direction = this.frameModifier;\n          this.triggerEvent(name, this.drawnFrameEvent);\n          break;\n        case 'loopComplete':\n          this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n          break;\n        case 'complete':\n          this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\n          break;\n        case 'segmentStart':\n          this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n          break;\n        case 'destroy':\n          this.triggerEvent(name, new BMDestroyEvent(name, this));\n          break;\n        default:\n          this.triggerEvent(name);\n      }\n    }\n    if (name === 'enterFrame' && this.onEnterFrame) {\n      this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\n    }\n    if (name === 'loopComplete' && this.onLoopComplete) {\n      this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n    }\n    if (name === 'complete' && this.onComplete) {\n      this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\n    }\n    if (name === 'segmentStart' && this.onSegmentStart) {\n      this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n    }\n    if (name === 'destroy' && this.onDestroy) {\n      this.onDestroy.call(this, new BMDestroyEvent(name, this));\n    }\n  };\n  AnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n  AnimationItem.prototype.triggerConfigError = function (nativeError) {\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n  const animationManager = function () {\n    var moduleOb = {};\n    var registeredAnimations = [];\n    var initTime = 0;\n    var len = 0;\n    var playingAnimationsNum = 0;\n    var _stopped = true;\n    var _isFrozen = false;\n    function removeElement(ev) {\n      var i = 0;\n      var animItem = ev.target;\n      while (i < len) {\n        if (registeredAnimations[i].animation === animItem) {\n          registeredAnimations.splice(i, 1);\n          i -= 1;\n          len -= 1;\n          if (!animItem.isPaused) {\n            subtractPlayingCount();\n          }\n        }\n        i += 1;\n      }\n    }\n    function registerAnimation(element, animationData) {\n      if (!element) {\n        return null;\n      }\n      var i = 0;\n      while (i < len) {\n        if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\n          return registeredAnimations[i].animation;\n        }\n        i += 1;\n      }\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, element);\n      animItem.setData(element, animationData);\n      return animItem;\n    }\n    function getRegisteredAnimations() {\n      var i;\n      var lenAnims = registeredAnimations.length;\n      var animations = [];\n      for (i = 0; i < lenAnims; i += 1) {\n        animations.push(registeredAnimations[i].animation);\n      }\n      return animations;\n    }\n    function addPlayingCount() {\n      playingAnimationsNum += 1;\n      activate();\n    }\n    function subtractPlayingCount() {\n      playingAnimationsNum -= 1;\n    }\n    function setupAnimation(animItem, element) {\n      animItem.addEventListener('destroy', removeElement);\n      animItem.addEventListener('_active', addPlayingCount);\n      animItem.addEventListener('_idle', subtractPlayingCount);\n      registeredAnimations.push({\n        elem: element,\n        animation: animItem\n      });\n      len += 1;\n    }\n    function loadAnimation(params) {\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, null);\n      animItem.setParams(params);\n      return animItem;\n    }\n    function setSpeed(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setSpeed(val, animation);\n      }\n    }\n    function setDirection(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setDirection(val, animation);\n      }\n    }\n    function play(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.play(animation);\n      }\n    }\n    function resume(nowTime) {\n      var elapsedTime = nowTime - initTime;\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.advanceTime(elapsedTime);\n      }\n      initTime = nowTime;\n      if (playingAnimationsNum && !_isFrozen) {\n        window.requestAnimationFrame(resume);\n      } else {\n        _stopped = true;\n      }\n    }\n    function first(nowTime) {\n      initTime = nowTime;\n      window.requestAnimationFrame(resume);\n    }\n    function pause(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.pause(animation);\n      }\n    }\n    function goToAndStop(value, isFrame, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\n      }\n    }\n    function stop(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.stop(animation);\n      }\n    }\n    function togglePause(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.togglePause(animation);\n      }\n    }\n    function destroy(animation) {\n      var i;\n      for (i = len - 1; i >= 0; i -= 1) {\n        registeredAnimations[i].animation.destroy(animation);\n      }\n    }\n    function searchAnimations(animationData, standalone, renderer) {\n      var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\n      var i;\n      var lenAnims = animElements.length;\n      for (i = 0; i < lenAnims; i += 1) {\n        if (renderer) {\n          animElements[i].setAttribute('data-bm-type', renderer);\n        }\n        registerAnimation(animElements[i], animationData);\n      }\n      if (standalone && lenAnims === 0) {\n        if (!renderer) {\n          renderer = 'svg';\n        }\n        var body = document.getElementsByTagName('body')[0];\n        body.innerText = '';\n        var div = createTag('div');\n        div.style.width = '100%';\n        div.style.height = '100%';\n        div.setAttribute('data-bm-type', renderer);\n        body.appendChild(div);\n        registerAnimation(div, animationData);\n      }\n    }\n    function resize() {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.resize();\n      }\n    }\n    function activate() {\n      if (!_isFrozen && playingAnimationsNum) {\n        if (_stopped) {\n          window.requestAnimationFrame(first);\n          _stopped = false;\n        }\n      }\n    }\n    function freeze() {\n      _isFrozen = true;\n    }\n    function unfreeze() {\n      _isFrozen = false;\n      activate();\n    }\n    function setVolume(val, animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setVolume(val, animation);\n      }\n    }\n    function mute(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.mute(animation);\n      }\n    }\n    function unmute(animation) {\n      var i;\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.unmute(animation);\n      }\n    }\n    moduleOb.registerAnimation = registerAnimation;\n    moduleOb.loadAnimation = loadAnimation;\n    moduleOb.setSpeed = setSpeed;\n    moduleOb.setDirection = setDirection;\n    moduleOb.play = play;\n    moduleOb.pause = pause;\n    moduleOb.stop = stop;\n    moduleOb.togglePause = togglePause;\n    moduleOb.searchAnimations = searchAnimations;\n    moduleOb.resize = resize;\n    // moduleOb.start = start;\n    moduleOb.goToAndStop = goToAndStop;\n    moduleOb.destroy = destroy;\n    moduleOb.freeze = freeze;\n    moduleOb.unfreeze = unfreeze;\n    moduleOb.setVolume = setVolume;\n    moduleOb.mute = mute;\n    moduleOb.unmute = unmute;\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\n    return moduleOb;\n  }();\n\n  /* eslint-disable */\n  const BezierFactory = function () {\n    /**\n       * BezierEasing - use bezier curve for transition easing function\n       * by Gatan Renaudeau 2014 - 2015  MIT License\n       *\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\n       * Usage:\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\n       *\n       */\n\n    var ob = {};\n    ob.getBezierEasing = getBezierEasing;\n    var beziers = {};\n    function getBezierEasing(a, b, c, d, nm) {\n      var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\n      if (beziers[str]) {\n        return beziers[str];\n      }\n      var bezEasing = new BezierEasing([a, b, c, d]);\n      beziers[str] = bezEasing;\n      return bezEasing;\n    }\n\n    // These values are established by empiricism with tests (tradeoff: performance VS precision)\n    var NEWTON_ITERATIONS = 4;\n    var NEWTON_MIN_SLOPE = 0.001;\n    var SUBDIVISION_PRECISION = 0.0000001;\n    var SUBDIVISION_MAX_ITERATIONS = 10;\n    var kSplineTableSize = 11;\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n    var float32ArraySupported = typeof Float32Array === 'function';\n    function A(aA1, aA2) {\n      return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n    }\n    function B(aA1, aA2) {\n      return 3.0 * aA2 - 6.0 * aA1;\n    }\n    function C(aA1) {\n      return 3.0 * aA1;\n    }\n\n    // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n    function calcBezier(aT, aA1, aA2) {\n      return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n    }\n\n    // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n    function getSlope(aT, aA1, aA2) {\n      return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n    }\n    function binarySubdivide(aX, aA, aB, mX1, mX2) {\n      var currentX,\n        currentT,\n        i = 0;\n      do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) {\n          aB = currentT;\n        } else {\n          aA = currentT;\n        }\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n      return currentT;\n    }\n    function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) return aGuessT;\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n      }\n      return aGuessT;\n    }\n\n    /**\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\n       */\n    function BezierEasing(points) {\n      this._p = points;\n      this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n      this._precomputed = false;\n      this.get = this.get.bind(this);\n    }\n    BezierEasing.prototype = {\n      get: function (x) {\n        var mX1 = this._p[0],\n          mY1 = this._p[1],\n          mX2 = this._p[2],\n          mY2 = this._p[3];\n        if (!this._precomputed) this._precompute();\n        if (mX1 === mY1 && mX2 === mY2) return x; // linear\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n        if (x === 0) return 0;\n        if (x === 1) return 1;\n        return calcBezier(this._getTForX(x), mY1, mY2);\n      },\n      // Private part\n\n      _precompute: function () {\n        var mX1 = this._p[0],\n          mY1 = this._p[1],\n          mX2 = this._p[2],\n          mY2 = this._p[3];\n        this._precomputed = true;\n        if (mX1 !== mY1 || mX2 !== mY2) {\n          this._calcSampleValues();\n        }\n      },\n      _calcSampleValues: function () {\n        var mX1 = this._p[0],\n          mX2 = this._p[2];\n        for (var i = 0; i < kSplineTableSize; ++i) {\n          this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n        }\n      },\n      /**\n           * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\n           */\n      _getTForX: function (aX) {\n        var mX1 = this._p[0],\n          mX2 = this._p[2],\n          mSampleValues = this._mSampleValues;\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n        for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n          intervalStart += kSampleStepSize;\n        }\n        --currentSample;\n\n        // Interpolate to provide an initial guess for t\n        var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        }\n        if (initialSlope === 0.0) {\n          return guessForT;\n        }\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n    };\n    return ob;\n  }();\n  const pooling = function () {\n    function double(arr) {\n      return arr.concat(createSizedArray(arr.length));\n    }\n    return {\n      double: double\n    };\n  }();\n  const poolFactory = function () {\n    return function (initialLength, _create, _release) {\n      var _length = 0;\n      var _maxLength = initialLength;\n      var pool = createSizedArray(_maxLength);\n      var ob = {\n        newElement: newElement,\n        release: release\n      };\n      function newElement() {\n        var element;\n        if (_length) {\n          _length -= 1;\n          element = pool[_length];\n        } else {\n          element = _create();\n        }\n        return element;\n      }\n      function release(element) {\n        if (_length === _maxLength) {\n          pool = pooling.double(pool);\n          _maxLength *= 2;\n        }\n        if (_release) {\n          _release(element);\n        }\n        pool[_length] = element;\n        _length += 1;\n      }\n      return ob;\n    };\n  }();\n  const bezierLengthPool = function () {\n    function create() {\n      return {\n        addedLength: 0,\n        percents: createTypedArray('float32', getDefaultCurveSegments()),\n        lengths: createTypedArray('float32', getDefaultCurveSegments())\n      };\n    }\n    return poolFactory(8, create);\n  }();\n  const segmentsLengthPool = function () {\n    function create() {\n      return {\n        lengths: [],\n        totalLength: 0\n      };\n    }\n    function release(element) {\n      var i;\n      var len = element.lengths.length;\n      for (i = 0; i < len; i += 1) {\n        bezierLengthPool.release(element.lengths[i]);\n      }\n      element.lengths.length = 0;\n    }\n    return poolFactory(8, create, release);\n  }();\n  function bezFunction() {\n    var math = Math;\n    function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\n      var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\n      return det1 > -0.001 && det1 < 0.001;\n    }\n    function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\n      if (z1 === 0 && z2 === 0 && z3 === 0) {\n        return pointOnLine2D(x1, y1, x2, y2, x3, y3);\n      }\n      var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\n      var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\n      var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\n      var diffDist;\n      if (dist1 > dist2) {\n        if (dist1 > dist3) {\n          diffDist = dist1 - dist2 - dist3;\n        } else {\n          diffDist = dist3 - dist2 - dist1;\n        }\n      } else if (dist3 > dist2) {\n        diffDist = dist3 - dist2 - dist1;\n      } else {\n        diffDist = dist2 - dist1 - dist3;\n      }\n      return diffDist > -0.0001 && diffDist < 0.0001;\n    }\n    var getBezierLength = function () {\n      return function (pt1, pt2, pt3, pt4) {\n        var curveSegments = getDefaultCurveSegments();\n        var k;\n        var i;\n        var len;\n        var ptCoord;\n        var perc;\n        var addedLength = 0;\n        var ptDistance;\n        var point = [];\n        var lastPoint = [];\n        var lengthData = bezierLengthPool.newElement();\n        len = pt3.length;\n        for (k = 0; k < curveSegments; k += 1) {\n          perc = k / (curveSegments - 1);\n          ptDistance = 0;\n          for (i = 0; i < len; i += 1) {\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\n            point[i] = ptCoord;\n            if (lastPoint[i] !== null) {\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\n            }\n            lastPoint[i] = point[i];\n          }\n          if (ptDistance) {\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n          }\n          lengthData.percents[k] = perc;\n          lengthData.lengths[k] = addedLength;\n        }\n        lengthData.addedLength = addedLength;\n        return lengthData;\n      };\n    }();\n    function getSegmentsLength(shapeData) {\n      var segmentsLength = segmentsLengthPool.newElement();\n      var closed = shapeData.c;\n      var pathV = shapeData.v;\n      var pathO = shapeData.o;\n      var pathI = shapeData.i;\n      var i;\n      var len = shapeData._length;\n      var lengths = segmentsLength.lengths;\n      var totalLength = 0;\n      for (i = 0; i < len - 1; i += 1) {\n        lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\n        totalLength += lengths[i].addedLength;\n      }\n      if (closed && len) {\n        lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\n        totalLength += lengths[i].addedLength;\n      }\n      segmentsLength.totalLength = totalLength;\n      return segmentsLength;\n    }\n    function BezierData(length) {\n      this.segmentLength = 0;\n      this.points = new Array(length);\n    }\n    function PointData(partial, point) {\n      this.partialLength = partial;\n      this.point = point;\n    }\n    var buildBezierData = function () {\n      var storedData = {};\n      return function (pt1, pt2, pt3, pt4) {\n        var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\n        if (!storedData[bezierName]) {\n          var curveSegments = getDefaultCurveSegments();\n          var k;\n          var i;\n          var len;\n          var ptCoord;\n          var perc;\n          var addedLength = 0;\n          var ptDistance;\n          var point;\n          var lastPoint = null;\n          if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\n            curveSegments = 2;\n          }\n          var bezierData = new BezierData(curveSegments);\n          len = pt3.length;\n          for (k = 0; k < curveSegments; k += 1) {\n            point = createSizedArray(len);\n            perc = k / (curveSegments - 1);\n            ptDistance = 0;\n            for (i = 0; i < len; i += 1) {\n              ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\n              point[i] = ptCoord;\n              if (lastPoint !== null) {\n                ptDistance += bmPow(point[i] - lastPoint[i], 2);\n              }\n            }\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n            bezierData.points[k] = new PointData(ptDistance, point);\n            lastPoint = point;\n          }\n          bezierData.segmentLength = addedLength;\n          storedData[bezierName] = bezierData;\n        }\n        return storedData[bezierName];\n      };\n    }();\n    function getDistancePerc(perc, bezierData) {\n      var percents = bezierData.percents;\n      var lengths = bezierData.lengths;\n      var len = percents.length;\n      var initPos = bmFloor((len - 1) * perc);\n      var lengthPos = perc * bezierData.addedLength;\n      var lPerc = 0;\n      if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\n        return percents[initPos];\n      }\n      var dir = lengths[initPos] > lengthPos ? -1 : 1;\n      var flag = true;\n      while (flag) {\n        if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\n          lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\n          flag = false;\n        } else {\n          initPos += dir;\n        }\n        if (initPos < 0 || initPos >= len - 1) {\n          // FIX for TypedArrays that don't store floating point values with enough accuracy\n          if (initPos === len - 1) {\n            return percents[initPos];\n          }\n          flag = false;\n        }\n      }\n      return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\n    }\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\n      var t1 = getDistancePerc(percent, bezierData);\n      var u1 = 1 - t1;\n      var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\n      var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\n      return [ptX, ptY];\n    }\n    var bezierSegmentPoints = createTypedArray('float32', 8);\n    function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\n      if (startPerc < 0) {\n        startPerc = 0;\n      } else if (startPerc > 1) {\n        startPerc = 1;\n      }\n      var t0 = getDistancePerc(startPerc, bezierData);\n      endPerc = endPerc > 1 ? 1 : endPerc;\n      var t1 = getDistancePerc(endPerc, bezierData);\n      var i;\n      var len = pt1.length;\n      var u0 = 1 - t0;\n      var u1 = 1 - t1;\n      var u0u0u0 = u0 * u0 * u0;\n      var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\n      var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\n      var t0t0t0 = t0 * t0 * t0;\n      //\n      var u0u0u1 = u0 * u0 * u1;\n      var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\n      var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\n      var t0t0t1 = t0 * t0 * t1;\n      //\n      var u0u1u1 = u0 * u1 * u1;\n      var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\n      var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\n      var t0t1t1 = t0 * t1 * t1;\n      //\n      var u1u1u1 = u1 * u1 * u1;\n      var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\n      var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\n      var t1t1t1 = t1 * t1 * t1;\n      for (i = 0; i < len; i += 1) {\n        bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n        bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      }\n      return bezierSegmentPoints;\n    }\n    return {\n      getSegmentsLength: getSegmentsLength,\n      getNewSegment: getNewSegment,\n      getPointInSegment: getPointInSegment,\n      buildBezierData: buildBezierData,\n      pointOnLine2D: pointOnLine2D,\n      pointOnLine3D: pointOnLine3D\n    };\n  }\n  const bez = bezFunction();\n  const PropertyFactory = function () {\n    var initFrame = initialDefaultFrame;\n    var mathAbs = Math.abs;\n    function interpolateValue(frameNum, caching) {\n      var offsetTime = this.offsetTime;\n      var newValue;\n      if (this.propType === 'multidimensional') {\n        newValue = createTypedArray('float32', this.pv.length);\n      }\n      var iterationIndex = caching.lastIndex;\n      var i = iterationIndex;\n      var len = this.keyframes.length - 1;\n      var flag = true;\n      var keyData;\n      var nextKeyData;\n      var keyframeMetadata;\n      while (flag) {\n        keyData = this.keyframes[i];\n        nextKeyData = this.keyframes[i + 1];\n        if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\n          if (keyData.h) {\n            keyData = nextKeyData;\n          }\n          iterationIndex = 0;\n          break;\n        }\n        if (nextKeyData.t - offsetTime > frameNum) {\n          iterationIndex = i;\n          break;\n        }\n        if (i < len - 1) {\n          i += 1;\n        } else {\n          iterationIndex = 0;\n          flag = false;\n        }\n      }\n      keyframeMetadata = this.keyframesMetadata[i] || {};\n      var k;\n      var kLen;\n      var perc;\n      var jLen;\n      var j;\n      var fnc;\n      var nextKeyTime = nextKeyData.t - offsetTime;\n      var keyTime = keyData.t - offsetTime;\n      var endValue;\n      if (keyData.to) {\n        if (!keyframeMetadata.bezierData) {\n          keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\n        }\n        var bezierData = keyframeMetadata.bezierData;\n        if (frameNum >= nextKeyTime || frameNum < keyTime) {\n          var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\n          kLen = bezierData.points[ind].point.length;\n          for (k = 0; k < kLen; k += 1) {\n            newValue[k] = bezierData.points[ind].point[k];\n          }\n          // caching._lastKeyframeIndex = -1;\n        } else {\n          if (keyframeMetadata.__fnct) {\n            fnc = keyframeMetadata.__fnct;\n          } else {\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\n            keyframeMetadata.__fnct = fnc;\n          }\n          perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n          var distanceInLine = bezierData.segmentLength * perc;\n          var segmentPerc;\n          var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\n          j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\n          flag = true;\n          jLen = bezierData.points.length;\n          while (flag) {\n            addedLength += bezierData.points[j].partialLength;\n            if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\n              kLen = bezierData.points[j].point.length;\n              for (k = 0; k < kLen; k += 1) {\n                newValue[k] = bezierData.points[j].point[k];\n              }\n              break;\n            } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\n              segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\n              kLen = bezierData.points[j].point.length;\n              for (k = 0; k < kLen; k += 1) {\n                newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\n              }\n              break;\n            }\n            if (j < jLen - 1) {\n              j += 1;\n            } else {\n              flag = false;\n            }\n          }\n          caching._lastPoint = j;\n          caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\n          caching._lastKeyframeIndex = i;\n        }\n      } else {\n        var outX;\n        var outY;\n        var inX;\n        var inY;\n        var keyValue;\n        len = keyData.s.length;\n        endValue = nextKeyData.s || keyData.e;\n        if (this.sh && keyData.h !== 1) {\n          if (frameNum >= nextKeyTime) {\n            newValue[0] = endValue[0];\n            newValue[1] = endValue[1];\n            newValue[2] = endValue[2];\n          } else if (frameNum <= keyTime) {\n            newValue[0] = keyData.s[0];\n            newValue[1] = keyData.s[1];\n            newValue[2] = keyData.s[2];\n          } else {\n            var quatStart = createQuaternion(keyData.s);\n            var quatEnd = createQuaternion(endValue);\n            var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\n            quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\n          }\n        } else {\n          for (i = 0; i < len; i += 1) {\n            if (keyData.h !== 1) {\n              if (frameNum >= nextKeyTime) {\n                perc = 1;\n              } else if (frameNum < keyTime) {\n                perc = 0;\n              } else {\n                if (keyData.o.x.constructor === Array) {\n                  if (!keyframeMetadata.__fnct) {\n                    keyframeMetadata.__fnct = [];\n                  }\n                  if (!keyframeMetadata.__fnct[i]) {\n                    outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\n                    outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\n                    inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\n                    inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\n                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                    keyframeMetadata.__fnct[i] = fnc;\n                  } else {\n                    fnc = keyframeMetadata.__fnct[i];\n                  }\n                } else if (!keyframeMetadata.__fnct) {\n                  outX = keyData.o.x;\n                  outY = keyData.o.y;\n                  inX = keyData.i.x;\n                  inY = keyData.i.y;\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                  keyData.keyframeMetadata = fnc;\n                } else {\n                  fnc = keyframeMetadata.__fnct;\n                }\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n              }\n            }\n            endValue = nextKeyData.s || keyData.e;\n            keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\n            if (this.propType === 'multidimensional') {\n              newValue[i] = keyValue;\n            } else {\n              newValue = keyValue;\n            }\n          }\n        }\n      }\n      caching.lastIndex = iterationIndex;\n      return newValue;\n    }\n\n    // based on @Toji's https://github.com/toji/gl-matrix/\n    function slerp(a, b, t) {\n      var out = [];\n      var ax = a[0];\n      var ay = a[1];\n      var az = a[2];\n      var aw = a[3];\n      var bx = b[0];\n      var by = b[1];\n      var bz = b[2];\n      var bw = b[3];\n      var omega;\n      var cosom;\n      var sinom;\n      var scale0;\n      var scale1;\n      cosom = ax * bx + ay * by + az * bz + aw * bw;\n      if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n      }\n      if (1.0 - cosom > 0.000001) {\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n      } else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n      }\n      out[0] = scale0 * ax + scale1 * bx;\n      out[1] = scale0 * ay + scale1 * by;\n      out[2] = scale0 * az + scale1 * bz;\n      out[3] = scale0 * aw + scale1 * bw;\n      return out;\n    }\n    function quaternionToEuler(out, quat) {\n      var qx = quat[0];\n      var qy = quat[1];\n      var qz = quat[2];\n      var qw = quat[3];\n      var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\n      var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\n      var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\n      out[0] = heading / degToRads;\n      out[1] = attitude / degToRads;\n      out[2] = bank / degToRads;\n    }\n    function createQuaternion(values) {\n      var heading = values[0] * degToRads;\n      var attitude = values[1] * degToRads;\n      var bank = values[2] * degToRads;\n      var c1 = Math.cos(heading / 2);\n      var c2 = Math.cos(attitude / 2);\n      var c3 = Math.cos(bank / 2);\n      var s1 = Math.sin(heading / 2);\n      var s2 = Math.sin(attitude / 2);\n      var s3 = Math.sin(bank / 2);\n      var w = c1 * c2 * c3 - s1 * s2 * s3;\n      var x = s1 * s2 * c3 + c1 * c2 * s3;\n      var y = s1 * c2 * c3 + c1 * s2 * s3;\n      var z = c1 * s2 * c3 - s1 * c2 * s3;\n      return [x, y, z, w];\n    }\n    function getValueAtCurrentTime() {\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\n      var initTime = this.keyframes[0].t - this.offsetTime;\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n      if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\n        if (this._caching.lastFrame >= frameNum) {\n          this._caching._lastKeyframeIndex = -1;\n          this._caching.lastIndex = 0;\n        }\n        var renderResult = this.interpolateValue(frameNum, this._caching);\n        this.pv = renderResult;\n      }\n      this._caching.lastFrame = frameNum;\n      return this.pv;\n    }\n    function setVValue(val) {\n      var multipliedValue;\n      if (this.propType === 'unidimensional') {\n        multipliedValue = val * this.mult;\n        if (mathAbs(this.v - multipliedValue) > 0.00001) {\n          this.v = multipliedValue;\n          this._mdf = true;\n        }\n      } else {\n        var i = 0;\n        var len = this.v.length;\n        while (i < len) {\n          multipliedValue = val[i] * this.mult;\n          if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\n            this.v[i] = multipliedValue;\n            this._mdf = true;\n          }\n          i += 1;\n        }\n      }\n    }\n    function processEffectsSequence() {\n      if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\n        return;\n      }\n      if (this.lock) {\n        this.setVValue(this.pv);\n        return;\n      }\n      this.lock = true;\n      this._mdf = this._isFirstFrame;\n      var i;\n      var len = this.effectsSequence.length;\n      var finalValue = this.kf ? this.pv : this.data.k;\n      for (i = 0; i < len; i += 1) {\n        finalValue = this.effectsSequence[i](finalValue);\n      }\n      this.setVValue(finalValue);\n      this._isFirstFrame = false;\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    }\n    function addEffect(effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.container.addDynamicProperty(this);\n    }\n    function ValueProperty(elem, data, mult, container) {\n      this.propType = 'unidimensional';\n      this.mult = mult || 1;\n      this.data = data;\n      this.v = mult ? data.k * mult : data.k;\n      this.pv = data.k;\n      this._mdf = false;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.k = false;\n      this.kf = false;\n      this.vel = 0;\n      this.effectsSequence = [];\n      this._isFirstFrame = true;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.addEffect = addEffect;\n    }\n    function MultiDimensionalProperty(elem, data, mult, container) {\n      this.propType = 'multidimensional';\n      this.mult = mult || 1;\n      this.data = data;\n      this._mdf = false;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.k = false;\n      this.kf = false;\n      this.frameId = -1;\n      var i;\n      var len = data.k.length;\n      this.v = createTypedArray('float32', len);\n      this.pv = createTypedArray('float32', len);\n      this.vel = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        this.v[i] = data.k[i] * this.mult;\n        this.pv[i] = data.k[i];\n      }\n      this._isFirstFrame = true;\n      this.effectsSequence = [];\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.addEffect = addEffect;\n    }\n    function KeyframedValueProperty(elem, data, mult, container) {\n      this.propType = 'unidimensional';\n      this.keyframes = data.k;\n      this.keyframesMetadata = [];\n      this.offsetTime = elem.data.st;\n      this.frameId = -1;\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0,\n        value: 0,\n        _lastKeyframeIndex: -1\n      };\n      this.k = true;\n      this.kf = true;\n      this.data = data;\n      this.mult = mult || 1;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.v = initFrame;\n      this.pv = initFrame;\n      this._isFirstFrame = true;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.interpolateValue = interpolateValue;\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n      this.addEffect = addEffect;\n    }\n    function KeyframedMultidimensionalProperty(elem, data, mult, container) {\n      this.propType = 'multidimensional';\n      var i;\n      var len = data.k.length;\n      var s;\n      var e;\n      var to;\n      var ti;\n      for (i = 0; i < len - 1; i += 1) {\n        if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\n          s = data.k[i].s;\n          e = data.k[i + 1].s;\n          to = data.k[i].to;\n          ti = data.k[i].ti;\n          if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\n            data.k[i].to = null;\n            data.k[i].ti = null;\n          }\n          if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\n            if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\n              data.k[i].to = null;\n              data.k[i].ti = null;\n            }\n          }\n        }\n      }\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n      this.data = data;\n      this.keyframes = data.k;\n      this.keyframesMetadata = [];\n      this.offsetTime = elem.data.st;\n      this.k = true;\n      this.kf = true;\n      this._isFirstFrame = true;\n      this.mult = mult || 1;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.interpolateValue = interpolateValue;\n      this.frameId = -1;\n      var arrLen = data.k[0].s.length;\n      this.v = createTypedArray('float32', arrLen);\n      this.pv = createTypedArray('float32', arrLen);\n      for (i = 0; i < arrLen; i += 1) {\n        this.v[i] = initFrame;\n        this.pv[i] = initFrame;\n      }\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0,\n        value: createTypedArray('float32', arrLen)\n      };\n      this.addEffect = addEffect;\n    }\n    function getProp(elem, data, type, mult, container) {\n      var p;\n      if (!data.k.length) {\n        p = new ValueProperty(elem, data, mult, container);\n      } else if (typeof data.k[0] === 'number') {\n        p = new MultiDimensionalProperty(elem, data, mult, container);\n      } else {\n        switch (type) {\n          case 0:\n            p = new KeyframedValueProperty(elem, data, mult, container);\n            break;\n          case 1:\n            p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\n            break;\n          default:\n            break;\n        }\n      }\n      if (p.effectsSequence.length) {\n        container.addDynamicProperty(p);\n      }\n      return p;\n    }\n    var ob = {\n      getProp: getProp\n    };\n    return ob;\n  }();\n  function DynamicPropertyContainer() {}\n  DynamicPropertyContainer.prototype = {\n    addDynamicProperty: function (prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n        this.container.addDynamicProperty(this);\n        this._isAnimated = true;\n      }\n    },\n    iterateDynamicProperties: function () {\n      this._mdf = false;\n      var i;\n      var len = this.dynamicProperties.length;\n      for (i = 0; i < len; i += 1) {\n        this.dynamicProperties[i].getValue();\n        if (this.dynamicProperties[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    },\n    initDynamicPropertyContainer: function (container) {\n      this.container = container;\n      this.dynamicProperties = [];\n      this._mdf = false;\n      this._isAnimated = false;\n    }\n  };\n  const pointPool = function () {\n    function create() {\n      return createTypedArray('float32', 2);\n    }\n    return poolFactory(8, create);\n  }();\n  function ShapePath() {\n    this.c = false;\n    this._length = 0;\n    this._maxLength = 8;\n    this.v = createSizedArray(this._maxLength);\n    this.o = createSizedArray(this._maxLength);\n    this.i = createSizedArray(this._maxLength);\n  }\n  ShapePath.prototype.setPathData = function (closed, len) {\n    this.c = closed;\n    this.setLength(len);\n    var i = 0;\n    while (i < len) {\n      this.v[i] = pointPool.newElement();\n      this.o[i] = pointPool.newElement();\n      this.i[i] = pointPool.newElement();\n      i += 1;\n    }\n  };\n  ShapePath.prototype.setLength = function (len) {\n    while (this._maxLength < len) {\n      this.doubleArrayLength();\n    }\n    this._length = len;\n  };\n  ShapePath.prototype.doubleArrayLength = function () {\n    this.v = this.v.concat(createSizedArray(this._maxLength));\n    this.i = this.i.concat(createSizedArray(this._maxLength));\n    this.o = this.o.concat(createSizedArray(this._maxLength));\n    this._maxLength *= 2;\n  };\n  ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\n    var arr;\n    this._length = Math.max(this._length, pos + 1);\n    if (this._length >= this._maxLength) {\n      this.doubleArrayLength();\n    }\n    switch (type) {\n      case 'v':\n        arr = this.v;\n        break;\n      case 'i':\n        arr = this.i;\n        break;\n      case 'o':\n        arr = this.o;\n        break;\n      default:\n        arr = [];\n        break;\n    }\n    if (!arr[pos] || arr[pos] && !replace) {\n      arr[pos] = pointPool.newElement();\n    }\n    arr[pos][0] = x;\n    arr[pos][1] = y;\n  };\n  ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\n    this.setXYAt(vX, vY, 'v', pos, replace);\n    this.setXYAt(oX, oY, 'o', pos, replace);\n    this.setXYAt(iX, iY, 'i', pos, replace);\n  };\n  ShapePath.prototype.reverse = function () {\n    var newPath = new ShapePath();\n    newPath.setPathData(this.c, this._length);\n    var vertices = this.v;\n    var outPoints = this.o;\n    var inPoints = this.i;\n    var init = 0;\n    if (this.c) {\n      newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\n      init = 1;\n    }\n    var cnt = this._length - 1;\n    var len = this._length;\n    var i;\n    for (i = init; i < len; i += 1) {\n      newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\n      cnt -= 1;\n    }\n    return newPath;\n  };\n  const shapePool = function () {\n    function create() {\n      return new ShapePath();\n    }\n    function release(shapePath) {\n      var len = shapePath._length;\n      var i;\n      for (i = 0; i < len; i += 1) {\n        pointPool.release(shapePath.v[i]);\n        pointPool.release(shapePath.i[i]);\n        pointPool.release(shapePath.o[i]);\n        shapePath.v[i] = null;\n        shapePath.i[i] = null;\n        shapePath.o[i] = null;\n      }\n      shapePath._length = 0;\n      shapePath.c = false;\n    }\n    function clone(shape) {\n      var cloned = factory.newElement();\n      var i;\n      var len = shape._length === undefined ? shape.v.length : shape._length;\n      cloned.setLength(len);\n      cloned.c = shape.c;\n      for (i = 0; i < len; i += 1) {\n        cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\n      }\n      return cloned;\n    }\n    var factory = poolFactory(4, create, release);\n    factory.clone = clone;\n    return factory;\n  }();\n  function ShapeCollection() {\n    this._length = 0;\n    this._maxLength = 4;\n    this.shapes = createSizedArray(this._maxLength);\n  }\n  ShapeCollection.prototype.addShape = function (shapeData) {\n    if (this._length === this._maxLength) {\n      this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\n      this._maxLength *= 2;\n    }\n    this.shapes[this._length] = shapeData;\n    this._length += 1;\n  };\n  ShapeCollection.prototype.releaseShapes = function () {\n    var i;\n    for (i = 0; i < this._length; i += 1) {\n      shapePool.release(this.shapes[i]);\n    }\n    this._length = 0;\n  };\n  const shapeCollectionPool = function () {\n    var ob = {\n      newShapeCollection: newShapeCollection,\n      release: release\n    };\n    var _length = 0;\n    var _maxLength = 4;\n    var pool = createSizedArray(_maxLength);\n    function newShapeCollection() {\n      var shapeCollection;\n      if (_length) {\n        _length -= 1;\n        shapeCollection = pool[_length];\n      } else {\n        shapeCollection = new ShapeCollection();\n      }\n      return shapeCollection;\n    }\n    function release(shapeCollection) {\n      var i;\n      var len = shapeCollection._length;\n      for (i = 0; i < len; i += 1) {\n        shapePool.release(shapeCollection.shapes[i]);\n      }\n      shapeCollection._length = 0;\n      if (_length === _maxLength) {\n        pool = pooling.double(pool);\n        _maxLength *= 2;\n      }\n      pool[_length] = shapeCollection;\n      _length += 1;\n    }\n    return ob;\n  }();\n  const ShapePropertyFactory = function () {\n    var initFrame = -999999;\n    function interpolateShape(frameNum, previousValue, caching) {\n      var iterationIndex = caching.lastIndex;\n      var keyPropS;\n      var keyPropE;\n      var isHold;\n      var j;\n      var k;\n      var jLen;\n      var kLen;\n      var perc;\n      var vertexValue;\n      var kf = this.keyframes;\n      if (frameNum < kf[0].t - this.offsetTime) {\n        keyPropS = kf[0].s[0];\n        isHold = true;\n        iterationIndex = 0;\n      } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\n        keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\n        /* if(kf[kf.length - 1].s){\n                  keyPropS = kf[kf.length - 1].s[0];\n              }else{\n                  keyPropS = kf[kf.length - 2].e[0];\n              } */\n        isHold = true;\n      } else {\n        var i = iterationIndex;\n        var len = kf.length - 1;\n        var flag = true;\n        var keyData;\n        var nextKeyData;\n        var keyframeMetadata;\n        while (flag) {\n          keyData = kf[i];\n          nextKeyData = kf[i + 1];\n          if (nextKeyData.t - this.offsetTime > frameNum) {\n            break;\n          }\n          if (i < len - 1) {\n            i += 1;\n          } else {\n            flag = false;\n          }\n        }\n        keyframeMetadata = this.keyframesMetadata[i] || {};\n        isHold = keyData.h === 1;\n        iterationIndex = i;\n        if (!isHold) {\n          if (frameNum >= nextKeyData.t - this.offsetTime) {\n            perc = 1;\n          } else if (frameNum < keyData.t - this.offsetTime) {\n            perc = 0;\n          } else {\n            var fnc;\n            if (keyframeMetadata.__fnct) {\n              fnc = keyframeMetadata.__fnct;\n            } else {\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\n              keyframeMetadata.__fnct = fnc;\n            }\n            perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\n          }\n          keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\n        }\n        keyPropS = keyData.s[0];\n      }\n      jLen = previousValue._length;\n      kLen = keyPropS.i[0].length;\n      caching.lastIndex = iterationIndex;\n      for (j = 0; j < jLen; j += 1) {\n        for (k = 0; k < kLen; k += 1) {\n          vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\n          previousValue.i[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\n          previousValue.o[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\n          previousValue.v[j][k] = vertexValue;\n        }\n      }\n    }\n    function interpolateShapeCurrentTime() {\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\n      var initTime = this.keyframes[0].t - this.offsetTime;\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n      var lastFrame = this._caching.lastFrame;\n      if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\n        /// /\n        this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\n        this.interpolateShape(frameNum, this.pv, this._caching);\n        /// /\n      }\n      this._caching.lastFrame = frameNum;\n      return this.pv;\n    }\n    function resetShape() {\n      this.paths = this.localShapeCollection;\n    }\n    function shapesEqual(shape1, shape2) {\n      if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\n        return false;\n      }\n      var i;\n      var len = shape1._length;\n      for (i = 0; i < len; i += 1) {\n        if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function setVValue(newPath) {\n      if (!shapesEqual(this.v, newPath)) {\n        this.v = shapePool.clone(newPath);\n        this.localShapeCollection.releaseShapes();\n        this.localShapeCollection.addShape(this.v);\n        this._mdf = true;\n        this.paths = this.localShapeCollection;\n      }\n    }\n    function processEffectsSequence() {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n      if (!this.effectsSequence.length) {\n        this._mdf = false;\n        return;\n      }\n      if (this.lock) {\n        this.setVValue(this.pv);\n        return;\n      }\n      this.lock = true;\n      this._mdf = false;\n      var finalValue;\n      if (this.kf) {\n        finalValue = this.pv;\n      } else if (this.data.ks) {\n        finalValue = this.data.ks.k;\n      } else {\n        finalValue = this.data.pt.k;\n      }\n      var i;\n      var len = this.effectsSequence.length;\n      for (i = 0; i < len; i += 1) {\n        finalValue = this.effectsSequence[i](finalValue);\n      }\n      this.setVValue(finalValue);\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    }\n    function ShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.container = elem;\n      this.elem = elem;\n      this.data = data;\n      this.k = false;\n      this.kf = false;\n      this._mdf = false;\n      var pathData = type === 3 ? data.pt.k : data.ks.k;\n      this.v = shapePool.clone(pathData);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.reset = resetShape;\n      this.effectsSequence = [];\n    }\n    function addEffect(effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.container.addDynamicProperty(this);\n    }\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\n    ShapeProperty.prototype.getValue = processEffectsSequence;\n    ShapeProperty.prototype.setVValue = setVValue;\n    ShapeProperty.prototype.addEffect = addEffect;\n    function KeyframedShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.elem = elem;\n      this.container = elem;\n      this.offsetTime = elem.data.st;\n      this.keyframes = type === 3 ? data.pt.k : data.ks.k;\n      this.keyframesMetadata = [];\n      this.k = true;\n      this.kf = true;\n      var len = this.keyframes[0].s[0].i.length;\n      this.v = shapePool.newElement();\n      this.v.setPathData(this.keyframes[0].s[0].c, len);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.lastFrame = initFrame;\n      this.reset = resetShape;\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0\n      };\n      this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\n    }\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\n    var EllShapeProperty = function () {\n      var cPoint = roundCorner;\n      function EllShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 4);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.paths = this.localShapeCollection;\n        this.localShapeCollection.addShape(this.v);\n        this.d = data.d;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertEllToPath();\n        }\n      }\n      EllShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function () {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertEllToPath();\n          }\n        },\n        convertEllToPath: function () {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var s0 = this.s.v[0] / 2;\n          var s1 = this.s.v[1] / 2;\n          var _cw = this.d !== 3;\n          var _v = this.v;\n          _v.v[0][0] = p0;\n          _v.v[0][1] = p1 - s1;\n          _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.v[1][1] = p1;\n          _v.v[2][0] = p0;\n          _v.v[2][1] = p1 + s1;\n          _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.v[3][1] = p1;\n          _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.i[0][1] = p1 - s1;\n          _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.i[1][1] = p1 - s1 * cPoint;\n          _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.i[2][1] = p1 + s1;\n          _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.i[3][1] = p1 + s1 * cPoint;\n          _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.o[0][1] = p1 - s1;\n          _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.o[1][1] = p1 + s1 * cPoint;\n          _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.o[2][1] = p1 + s1;\n          _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.o[3][1] = p1 - s1 * cPoint;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\n      return EllShapePropertyFactory;\n    }();\n    var StarShapeProperty = function () {\n      function StarShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 0);\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.data = data;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n        if (data.sy === 1) {\n          this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\n          this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\n          this.convertToPath = this.convertStarToPath;\n        } else {\n          this.convertToPath = this.convertPolygonToPath;\n        }\n        this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\n        this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\n        this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertToPath();\n        }\n      }\n      StarShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function () {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertToPath();\n          }\n        },\n        convertStarToPath: function () {\n          var numPts = Math.floor(this.pt.v) * 2;\n          var angle = Math.PI * 2 / numPts;\n          /* this.v.v.length = numPts;\n                  this.v.i.length = numPts;\n                  this.v.o.length = numPts; */\n          var longFlag = true;\n          var longRad = this.or.v;\n          var shortRad = this.ir.v;\n          var longRound = this.os.v;\n          var shortRound = this.is.v;\n          var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\n          var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\n          var i;\n          var rad;\n          var roundness;\n          var perimSegment;\n          var currentAng = -Math.PI / 2;\n          currentAng += this.r.v;\n          var dir = this.data.d === 3 ? -1 : 1;\n          this.v._length = 0;\n          for (i = 0; i < numPts; i += 1) {\n            rad = longFlag ? longRad : shortRad;\n            roundness = longFlag ? longRound : shortRound;\n            perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n\n            /* this.v.v[i] = [x,y];\n                      this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\n                      this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\n                      this.v._length = numPts; */\n            longFlag = !longFlag;\n            currentAng += angle * dir;\n          }\n        },\n        convertPolygonToPath: function () {\n          var numPts = Math.floor(this.pt.v);\n          var angle = Math.PI * 2 / numPts;\n          var rad = this.or.v;\n          var roundness = this.os.v;\n          var perimSegment = 2 * Math.PI * rad / (numPts * 4);\n          var i;\n          var currentAng = -Math.PI * 0.5;\n          var dir = this.data.d === 3 ? -1 : 1;\n          currentAng += this.r.v;\n          this.v._length = 0;\n          for (i = 0; i < numPts; i += 1) {\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n            currentAng += angle * dir;\n          }\n          this.paths.length = 0;\n          this.paths[0] = this.v;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\n      return StarShapePropertyFactory;\n    }();\n    var RectShapeProperty = function () {\n      function RectShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.c = true;\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertRectToPath();\n        }\n      }\n      RectShapePropertyFactory.prototype = {\n        convertRectToPath: function () {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var v0 = this.s.v[0] / 2;\n          var v1 = this.s.v[1] / 2;\n          var round = bmMin(v0, v1, this.r.v);\n          var cPoint = round * (1 - roundCorner);\n          this.v._length = 0;\n          if (this.d === 2 || this.d === 1) {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\n            }\n          } else {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\n            }\n          }\n        },\n        getValue: function () {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n          if (this._mdf) {\n            this.convertRectToPath();\n          }\n        },\n        reset: resetShape\n      };\n      extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\n      return RectShapePropertyFactory;\n    }();\n    function getShapeProp(elem, data, type) {\n      var prop;\n      if (type === 3 || type === 4) {\n        var dataProp = type === 3 ? data.pt : data.ks;\n        var keys = dataProp.k;\n        if (keys.length) {\n          prop = new KeyframedShapeProperty(elem, data, type);\n        } else {\n          prop = new ShapeProperty(elem, data, type);\n        }\n      } else if (type === 5) {\n        prop = new RectShapeProperty(elem, data);\n      } else if (type === 6) {\n        prop = new EllShapeProperty(elem, data);\n      } else if (type === 7) {\n        prop = new StarShapeProperty(elem, data);\n      }\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n      return prop;\n    }\n    function getConstructorFunction() {\n      return ShapeProperty;\n    }\n    function getKeyframedConstructorFunction() {\n      return KeyframedShapeProperty;\n    }\n    var ob = {};\n    ob.getShapeProp = getShapeProp;\n    ob.getConstructorFunction = getConstructorFunction;\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\n    return ob;\n  }();\n\n  /*!\n   Transformation Matrix v2.0\n   (c) Epistemex 2014-2015\n   www.epistemex.com\n   By Ken Fyrstenberg\n   Contributions by leeoniya.\n   License: MIT, header required.\n   */\n\n  /**\n   * 2D transformation matrix object initialized with identity matrix.\n   *\n   * The matrix can synchronize a canvas context by supplying the context\n   * as an argument, or later apply current absolute transform to an\n   * existing context.\n   *\n   * All values are handled as floating point values.\n   *\n   * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\n   * @prop {number} a - scale x\n   * @prop {number} b - shear y\n   * @prop {number} c - shear x\n   * @prop {number} d - scale y\n   * @prop {number} e - translate x\n   * @prop {number} f - translate y\n   * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\n   * @constructor\n   */\n\n  const Matrix = function () {\n    var _cos = Math.cos;\n    var _sin = Math.sin;\n    var _tan = Math.tan;\n    var _rnd = Math.round;\n    function reset() {\n      this.props[0] = 1;\n      this.props[1] = 0;\n      this.props[2] = 0;\n      this.props[3] = 0;\n      this.props[4] = 0;\n      this.props[5] = 1;\n      this.props[6] = 0;\n      this.props[7] = 0;\n      this.props[8] = 0;\n      this.props[9] = 0;\n      this.props[10] = 1;\n      this.props[11] = 0;\n      this.props[12] = 0;\n      this.props[13] = 0;\n      this.props[14] = 0;\n      this.props[15] = 1;\n      return this;\n    }\n    function rotate(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    function rotateX(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\n    }\n    function rotateY(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\n    }\n    function rotateZ(angle) {\n      if (angle === 0) {\n        return this;\n      }\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n    function shear(sx, sy) {\n      return this._t(1, sy, sx, 1, 0, 0);\n    }\n    function skew(ax, ay) {\n      return this.shear(_tan(ax), _tan(ay));\n    }\n    function skewFromAxis(ax, angle) {\n      var mCos = _cos(angle);\n      var mSin = _sin(angle);\n      return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\n    }\n    function scale(sx, sy, sz) {\n      if (!sz && sz !== 0) {\n        sz = 1;\n      }\n      if (sx === 1 && sy === 1 && sz === 1) {\n        return this;\n      }\n      return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\n    }\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\n      this.props[0] = a;\n      this.props[1] = b;\n      this.props[2] = c;\n      this.props[3] = d;\n      this.props[4] = e;\n      this.props[5] = f;\n      this.props[6] = g;\n      this.props[7] = h;\n      this.props[8] = i;\n      this.props[9] = j;\n      this.props[10] = k;\n      this.props[11] = l;\n      this.props[12] = m;\n      this.props[13] = n;\n      this.props[14] = o;\n      this.props[15] = p;\n      return this;\n    }\n    function translate(tx, ty, tz) {\n      tz = tz || 0;\n      if (tx !== 0 || ty !== 0 || tz !== 0) {\n        return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\n      }\n      return this;\n    }\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\n      var _p = this.props;\n      if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\n        // NOTE: commenting this condition because TurboFan deoptimizes code when present\n        // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\n        _p[12] = _p[12] * a2 + _p[15] * m2;\n        _p[13] = _p[13] * f2 + _p[15] * n2;\n        _p[14] = _p[14] * k2 + _p[15] * o2;\n        _p[15] *= p2;\n        // }\n        this._identityCalculated = false;\n        return this;\n      }\n      var a1 = _p[0];\n      var b1 = _p[1];\n      var c1 = _p[2];\n      var d1 = _p[3];\n      var e1 = _p[4];\n      var f1 = _p[5];\n      var g1 = _p[6];\n      var h1 = _p[7];\n      var i1 = _p[8];\n      var j1 = _p[9];\n      var k1 = _p[10];\n      var l1 = _p[11];\n      var m1 = _p[12];\n      var n1 = _p[13];\n      var o1 = _p[14];\n      var p1 = _p[15];\n\n      /* matrix order (canvas compatible):\n           * ace\n           * bdf\n           * 001\n           */\n      _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\n      _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\n      _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\n      _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\n      _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\n      _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\n      _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\n      _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\n      _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\n      _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\n      _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\n      _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\n      _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\n      _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\n      _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\n      _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\n      this._identityCalculated = false;\n      return this;\n    }\n    function isIdentity() {\n      if (!this._identityCalculated) {\n        this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\n        this._identityCalculated = true;\n      }\n      return this._identity;\n    }\n    function equals(matr) {\n      var i = 0;\n      while (i < 16) {\n        if (matr.props[i] !== this.props[i]) {\n          return false;\n        }\n        i += 1;\n      }\n      return true;\n    }\n    function clone(matr) {\n      var i;\n      for (i = 0; i < 16; i += 1) {\n        matr.props[i] = this.props[i];\n      }\n      return matr;\n    }\n    function cloneFromProps(props) {\n      var i;\n      for (i = 0; i < 16; i += 1) {\n        this.props[i] = props[i];\n      }\n    }\n    function applyToPoint(x, y, z) {\n      return {\n        x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n        y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n        z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\n      };\n      /* return {\n           x: x * me.a + y * me.c + me.e,\n           y: x * me.b + y * me.d + me.f\n           }; */\n    }\n    function applyToX(x, y, z) {\n      return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\n    }\n    function applyToY(x, y, z) {\n      return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\n    }\n    function applyToZ(x, y, z) {\n      return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\n    }\n    function getInverseMatrix() {\n      var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\n      var a = this.props[5] / determinant;\n      var b = -this.props[1] / determinant;\n      var c = -this.props[4] / determinant;\n      var d = this.props[0] / determinant;\n      var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\n      var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\n      var inverseMatrix = new Matrix();\n      inverseMatrix.props[0] = a;\n      inverseMatrix.props[1] = b;\n      inverseMatrix.props[4] = c;\n      inverseMatrix.props[5] = d;\n      inverseMatrix.props[12] = e;\n      inverseMatrix.props[13] = f;\n      return inverseMatrix;\n    }\n    function inversePoint(pt) {\n      var inverseMatrix = this.getInverseMatrix();\n      return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\n    }\n    function inversePoints(pts) {\n      var i;\n      var len = pts.length;\n      var retPts = [];\n      for (i = 0; i < len; i += 1) {\n        retPts[i] = inversePoint(pts[i]);\n      }\n      return retPts;\n    }\n    function applyToTriplePoints(pt1, pt2, pt3) {\n      var arr = createTypedArray('float32', 6);\n      if (this.isIdentity()) {\n        arr[0] = pt1[0];\n        arr[1] = pt1[1];\n        arr[2] = pt2[0];\n        arr[3] = pt2[1];\n        arr[4] = pt3[0];\n        arr[5] = pt3[1];\n      } else {\n        var p0 = this.props[0];\n        var p1 = this.props[1];\n        var p4 = this.props[4];\n        var p5 = this.props[5];\n        var p12 = this.props[12];\n        var p13 = this.props[13];\n        arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\n        arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\n        arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\n        arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\n        arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\n        arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\n      }\n      return arr;\n    }\n    function applyToPointArray(x, y, z) {\n      var arr;\n      if (this.isIdentity()) {\n        arr = [x, y, z];\n      } else {\n        arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\n      }\n      return arr;\n    }\n    function applyToPointStringified(x, y) {\n      if (this.isIdentity()) {\n        return x + ',' + y;\n      }\n      var _p = this.props;\n      return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\n    }\n    function toCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n      /* if(this.isIdentity()) {\n              return '';\n          } */\n      var i = 0;\n      var props = this.props;\n      var cssValue = 'matrix3d(';\n      var v = 10000;\n      while (i < 16) {\n        cssValue += _rnd(props[i] * v) / v;\n        cssValue += i === 15 ? ')' : ',';\n        i += 1;\n      }\n      return cssValue;\n    }\n    function roundMatrixProperty(val) {\n      var v = 10000;\n      if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\n        return _rnd(val * v) / v;\n      }\n      return val;\n    }\n    function to2dCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n      /* if(this.isIdentity()) {\n              return '';\n          } */\n      var props = this.props;\n      var _a = roundMatrixProperty(props[0]);\n      var _b = roundMatrixProperty(props[1]);\n      var _c = roundMatrixProperty(props[4]);\n      var _d = roundMatrixProperty(props[5]);\n      var _e = roundMatrixProperty(props[12]);\n      var _f = roundMatrixProperty(props[13]);\n      return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\n    }\n    return function () {\n      this.reset = reset;\n      this.rotate = rotate;\n      this.rotateX = rotateX;\n      this.rotateY = rotateY;\n      this.rotateZ = rotateZ;\n      this.skew = skew;\n      this.skewFromAxis = skewFromAxis;\n      this.shear = shear;\n      this.scale = scale;\n      this.setTransform = setTransform;\n      this.translate = translate;\n      this.transform = transform;\n      this.applyToPoint = applyToPoint;\n      this.applyToX = applyToX;\n      this.applyToY = applyToY;\n      this.applyToZ = applyToZ;\n      this.applyToPointArray = applyToPointArray;\n      this.applyToTriplePoints = applyToTriplePoints;\n      this.applyToPointStringified = applyToPointStringified;\n      this.toCSS = toCSS;\n      this.to2dCSS = to2dCSS;\n      this.clone = clone;\n      this.cloneFromProps = cloneFromProps;\n      this.equals = equals;\n      this.inversePoints = inversePoints;\n      this.inversePoint = inversePoint;\n      this.getInverseMatrix = getInverseMatrix;\n      this._t = this.transform;\n      this.isIdentity = isIdentity;\n      this._identity = true;\n      this._identityCalculated = false;\n      this.props = createTypedArray('float32', 16);\n      this.reset();\n    };\n  }();\n  var standalone = '__[STANDALONE]__';\n  var animationData = '__[ANIMATIONDATA]__';\n  var renderer = '';\n  function setLocation(href) {\n    setLocationHref(href);\n  }\n  function searchAnimations() {\n    if (standalone === true) {\n      animationManager.searchAnimations(animationData, standalone, renderer);\n    } else {\n      animationManager.searchAnimations();\n    }\n  }\n  function setSubframeRendering(flag) {\n    setSubframeEnabled(flag);\n  }\n  function setPrefix(prefix) {\n    setIdPrefix(prefix);\n  }\n  function loadAnimation(params) {\n    if (standalone === true) {\n      params.animationData = JSON.parse(animationData);\n    }\n    return animationManager.loadAnimation(params);\n  }\n  function setQuality(value) {\n    if (typeof value === 'string') {\n      switch (value) {\n        case 'high':\n          setDefaultCurveSegments(200);\n          break;\n        default:\n        case 'medium':\n          setDefaultCurveSegments(50);\n          break;\n        case 'low':\n          setDefaultCurveSegments(10);\n          break;\n      }\n    } else if (!isNaN(value) && value > 1) {\n      setDefaultCurveSegments(value);\n    }\n    if (getDefaultCurveSegments() >= 50) {\n      roundValues(false);\n    } else {\n      roundValues(true);\n    }\n  }\n  function inBrowser() {\n    return typeof navigator !== 'undefined';\n  }\n  function installPlugin(type, plugin) {\n    if (type === 'expressions') {\n      setExpressionsPlugin(plugin);\n    }\n  }\n  function getFactory(name) {\n    switch (name) {\n      case 'propertyFactory':\n        return PropertyFactory;\n      case 'shapePropertyFactory':\n        return ShapePropertyFactory;\n      case 'matrix':\n        return Matrix;\n      default:\n        return null;\n    }\n  }\n  lottie.play = animationManager.play;\n  lottie.pause = animationManager.pause;\n  lottie.setLocationHref = setLocation;\n  lottie.togglePause = animationManager.togglePause;\n  lottie.setSpeed = animationManager.setSpeed;\n  lottie.setDirection = animationManager.setDirection;\n  lottie.stop = animationManager.stop;\n  lottie.searchAnimations = searchAnimations;\n  lottie.registerAnimation = animationManager.registerAnimation;\n  lottie.loadAnimation = loadAnimation;\n  lottie.setSubframeRendering = setSubframeRendering;\n  lottie.resize = animationManager.resize;\n  // lottie.start = start;\n  lottie.goToAndStop = animationManager.goToAndStop;\n  lottie.destroy = animationManager.destroy;\n  lottie.setQuality = setQuality;\n  lottie.inBrowser = inBrowser;\n  lottie.installPlugin = installPlugin;\n  lottie.freeze = animationManager.freeze;\n  lottie.unfreeze = animationManager.unfreeze;\n  lottie.setVolume = animationManager.setVolume;\n  lottie.mute = animationManager.mute;\n  lottie.unmute = animationManager.unmute;\n  lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\n  lottie.useWebWorker = setWebWorker;\n  lottie.setIDPrefix = setPrefix;\n  lottie.__getFactory = getFactory;\n  lottie.version = '[[BM_VERSION]]';\n  function checkReady() {\n    if (document.readyState === 'complete') {\n      clearInterval(readyStateCheckInterval);\n      searchAnimations();\n    }\n  }\n  function getQueryVariable(variable) {\n    var vars = queryString.split('&');\n    for (var i = 0; i < vars.length; i += 1) {\n      var pair = vars[i].split('=');\n      if (decodeURIComponent(pair[0]) == variable) {\n        // eslint-disable-line eqeqeq\n        return decodeURIComponent(pair[1]);\n      }\n    }\n    return null;\n  }\n  var queryString = '';\n  if (standalone) {\n    var scripts = document.getElementsByTagName('script');\n    var index = scripts.length - 1;\n    var myScript = scripts[index] || {\n      src: ''\n    };\n    queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\n    renderer = getQueryVariable('renderer');\n  }\n  var readyStateCheckInterval = setInterval(checkReady, 100);\n\n  // this adds bodymovin to the window object for backwards compatibility\n  try {\n    if (!(typeof exports === 'object' && typeof module !== 'undefined') && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\n    ) {\n      window.bodymovin = lottie;\n    }\n  } catch (err) {\n    //\n  }\n  const ShapeModifiers = function () {\n    var ob = {};\n    var modifiers = {};\n    ob.registerModifier = registerModifier;\n    ob.getModifier = getModifier;\n    function registerModifier(nm, factory) {\n      if (!modifiers[nm]) {\n        modifiers[nm] = factory;\n      }\n    }\n    function getModifier(nm, elem, data) {\n      return new modifiers[nm](elem, data);\n    }\n    return ob;\n  }();\n  function ShapeModifier() {}\n  ShapeModifier.prototype.initModifierProperties = function () {};\n  ShapeModifier.prototype.addShapeToModifier = function () {};\n  ShapeModifier.prototype.addShape = function (data) {\n    if (!this.closed) {\n      // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\n      data.sh.container.addDynamicProperty(data.sh);\n      var shapeData = {\n        shape: data.sh,\n        data: data,\n        localShapeCollection: shapeCollectionPool.newShapeCollection()\n      };\n      this.shapes.push(shapeData);\n      this.addShapeToModifier(shapeData);\n      if (this._isAnimated) {\n        data.setAsAnimated();\n      }\n    }\n  };\n  ShapeModifier.prototype.init = function (elem, data) {\n    this.shapes = [];\n    this.elem = elem;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, data);\n    this.frameId = initialDefaultFrame;\n    this.closed = false;\n    this.k = false;\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n  ShapeModifier.prototype.processKeys = function () {\n    if (this.elem.globalData.frameId === this.frameId) {\n      return;\n    }\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n  extendPrototype([DynamicPropertyContainer], ShapeModifier);\n  function TrimModifier() {}\n  extendPrototype([ShapeModifier], TrimModifier);\n  TrimModifier.prototype.initModifierProperties = function (elem, data) {\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\n    this.sValue = 0;\n    this.eValue = 0;\n    this.getValue = this.processKeys;\n    this.m = data.m;\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\n  };\n  TrimModifier.prototype.addShapeToModifier = function (shapeData) {\n    shapeData.pathsData = [];\n  };\n  TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\n    var segments = [];\n    if (e <= 1) {\n      segments.push({\n        s: s,\n        e: e\n      });\n    } else if (s >= 1) {\n      segments.push({\n        s: s - 1,\n        e: e - 1\n      });\n    } else {\n      segments.push({\n        s: s,\n        e: 1\n      });\n      segments.push({\n        s: 0,\n        e: e - 1\n      });\n    }\n    var shapeSegments = [];\n    var i;\n    var len = segments.length;\n    var segmentOb;\n    for (i = 0; i < len; i += 1) {\n      segmentOb = segments[i];\n      if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\n        var shapeS;\n        var shapeE;\n        if (segmentOb.s * totalModifierLength <= addedLength) {\n          shapeS = 0;\n        } else {\n          shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\n        }\n        if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\n          shapeE = 1;\n        } else {\n          shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\n        }\n        shapeSegments.push([shapeS, shapeE]);\n      }\n    }\n    if (!shapeSegments.length) {\n      shapeSegments.push([0, 0]);\n    }\n    return shapeSegments;\n  };\n  TrimModifier.prototype.releasePathsData = function (pathsData) {\n    var i;\n    var len = pathsData.length;\n    for (i = 0; i < len; i += 1) {\n      segmentsLengthPool.release(pathsData[i]);\n    }\n    pathsData.length = 0;\n    return pathsData;\n  };\n  TrimModifier.prototype.processShapes = function (_isFirstFrame) {\n    var s;\n    var e;\n    if (this._mdf || _isFirstFrame) {\n      var o = this.o.v % 360 / 360;\n      if (o < 0) {\n        o += 1;\n      }\n      if (this.s.v > 1) {\n        s = 1 + o;\n      } else if (this.s.v < 0) {\n        s = 0 + o;\n      } else {\n        s = this.s.v + o;\n      }\n      if (this.e.v > 1) {\n        e = 1 + o;\n      } else if (this.e.v < 0) {\n        e = 0 + o;\n      } else {\n        e = this.e.v + o;\n      }\n      if (s > e) {\n        var _s = s;\n        s = e;\n        e = _s;\n      }\n      s = Math.round(s * 10000) * 0.0001;\n      e = Math.round(e * 10000) * 0.0001;\n      this.sValue = s;\n      this.eValue = e;\n    } else {\n      s = this.sValue;\n      e = this.eValue;\n    }\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var pathsData;\n    var pathData;\n    var totalShapeLength;\n    var totalModifierLength = 0;\n    if (e === s) {\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].localShapeCollection.releaseShapes();\n        this.shapes[i].shape._mdf = true;\n        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\n        if (this._mdf) {\n          this.shapes[i].pathsData.length = 0;\n        }\n      }\n    } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\n      var segments = [];\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\n        if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\n          shapeData.shape.paths = shapeData.localShapeCollection;\n        } else {\n          shapePaths = shapeData.shape.paths;\n          jLen = shapePaths._length;\n          totalShapeLength = 0;\n          if (!shapeData.shape._mdf && shapeData.pathsData.length) {\n            totalShapeLength = shapeData.totalShapeLength;\n          } else {\n            pathsData = this.releasePathsData(shapeData.pathsData);\n            for (j = 0; j < jLen; j += 1) {\n              pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\n              pathsData.push(pathData);\n              totalShapeLength += pathData.totalLength;\n            }\n            shapeData.totalShapeLength = totalShapeLength;\n            shapeData.pathsData = pathsData;\n          }\n          totalModifierLength += totalShapeLength;\n          shapeData.shape._mdf = true;\n        }\n      }\n      var shapeS = s;\n      var shapeE = e;\n      var addedLength = 0;\n      var edges;\n      for (i = len - 1; i >= 0; i -= 1) {\n        shapeData = this.shapes[i];\n        if (shapeData.shape._mdf) {\n          localShapeCollection = shapeData.localShapeCollection;\n          localShapeCollection.releaseShapes();\n          // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\n          if (this.m === 2 && len > 1) {\n            edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\n            addedLength += shapeData.totalShapeLength;\n          } else {\n            edges = [[shapeS, shapeE]];\n          }\n          jLen = edges.length;\n          for (j = 0; j < jLen; j += 1) {\n            shapeS = edges[j][0];\n            shapeE = edges[j][1];\n            segments.length = 0;\n            if (shapeE <= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength * shapeE\n              });\n            } else if (shapeS >= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * (shapeS - 1),\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            } else {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength\n              });\n              segments.push({\n                s: 0,\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            }\n            var newShapesData = this.addShapes(shapeData, segments[0]);\n            if (segments[0].s !== segments[0].e) {\n              if (segments.length > 1) {\n                var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\n                if (lastShapeInCollection.c) {\n                  var lastShape = newShapesData.pop();\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1], lastShape);\n                } else {\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1]);\n                }\n              }\n              this.addPaths(newShapesData, localShapeCollection);\n            }\n          }\n          shapeData.shape.paths = localShapeCollection;\n        }\n      }\n    } else if (this._mdf) {\n      for (i = 0; i < len; i += 1) {\n        // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\n        // Don't remove this even if it's losing cached info.\n        this.shapes[i].pathsData.length = 0;\n        this.shapes[i].shape._mdf = true;\n      }\n    }\n  };\n  TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\n    var i;\n    var len = newPaths.length;\n    for (i = 0; i < len; i += 1) {\n      localShapeCollection.addShape(newPaths[i]);\n    }\n  };\n  TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\n    if (newShape) {\n      shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\n    }\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\n  };\n  TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\n    if (newShape) {\n      shapePath.setXYAt(points[0], points[4], 'v', pos);\n    }\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\n  };\n  TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\n    var pathsData = shapeData.pathsData;\n    var shapePaths = shapeData.shape.paths.shapes;\n    var i;\n    var len = shapeData.shape.paths._length;\n    var j;\n    var jLen;\n    var addedLength = 0;\n    var currentLengthData;\n    var segmentCount;\n    var lengths;\n    var segment;\n    var shapes = [];\n    var initPos;\n    var newShape = true;\n    if (!shapePath) {\n      shapePath = shapePool.newElement();\n      segmentCount = 0;\n      initPos = 0;\n    } else {\n      segmentCount = shapePath._length;\n      initPos = shapePath._length;\n    }\n    shapes.push(shapePath);\n    for (i = 0; i < len; i += 1) {\n      lengths = pathsData[i].lengths;\n      shapePath.c = shapePaths[i].c;\n      jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\n      for (j = 1; j < jLen; j += 1) {\n        currentLengthData = lengths[j - 1];\n        if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\n          addedLength += currentLengthData.addedLength;\n          shapePath.c = false;\n        } else if (addedLength > shapeSegment.e) {\n          shapePath.c = false;\n          break;\n        } else {\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n            // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n            newShape = false;\n            shapePath.c = false;\n          }\n          addedLength += currentLengthData.addedLength;\n          segmentCount += 1;\n        }\n      }\n      if (shapePaths[i].c && lengths.length) {\n        currentLengthData = lengths[j - 1];\n        if (addedLength <= shapeSegment.e) {\n          var segmentLength = lengths[j - 1].addedLength;\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n            // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n            newShape = false;\n            shapePath.c = false;\n          }\n        } else {\n          shapePath.c = false;\n        }\n        addedLength += currentLengthData.addedLength;\n        segmentCount += 1;\n      }\n      if (shapePath._length) {\n        shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\n        shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\n      }\n      if (addedLength > shapeSegment.e) {\n        break;\n      }\n      if (i < len - 1) {\n        shapePath = shapePool.newElement();\n        newShape = true;\n        shapes.push(shapePath);\n        segmentCount = 0;\n      }\n    }\n    return shapes;\n  };\n  function PuckerAndBloatModifier() {}\n  extendPrototype([ShapeModifier], PuckerAndBloatModifier);\n  PuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\n    this._isAnimated = !!this.amount.effectsSequence.length;\n  };\n  PuckerAndBloatModifier.prototype.processPath = function (path, amount) {\n    var percent = amount / 100;\n    var centerPoint = [0, 0];\n    var pathLength = path._length;\n    var i = 0;\n    for (i = 0; i < pathLength; i += 1) {\n      centerPoint[0] += path.v[i][0];\n      centerPoint[1] += path.v[i][1];\n    }\n    centerPoint[0] /= pathLength;\n    centerPoint[1] /= pathLength;\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n    for (i = 0; i < pathLength; i += 1) {\n      vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\n      vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\n      oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\n      oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\n      iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\n      iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\n      clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\n    }\n    return clonedPath;\n  };\n  PuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var amount = this.amount.v;\n    if (amount !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n  const TransformPropertyFactory = function () {\n    var defaultVector = [0, 0];\n    function applyToMatrix(mat) {\n      var _mdf = this._mdf;\n      this.iterateDynamicProperties();\n      this._mdf = this._mdf || _mdf;\n      if (this.a) {\n        mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n      }\n      if (this.s) {\n        mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n      }\n      if (this.sk) {\n        mat.skewFromAxis(-this.sk.v, this.sa.v);\n      }\n      if (this.r) {\n        mat.rotate(-this.r.v);\n      } else {\n        mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n      }\n      if (this.data.p.s) {\n        if (this.data.p.z) {\n          mat.translate(this.px.v, this.py.v, -this.pz.v);\n        } else {\n          mat.translate(this.px.v, this.py.v, 0);\n        }\n      } else {\n        mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n      }\n    }\n    function processKeys(forceRender) {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n      if (this._isDirty) {\n        this.precalculateMatrix();\n        this._isDirty = false;\n      }\n      this.iterateDynamicProperties();\n      if (this._mdf || forceRender) {\n        var frameRate;\n        this.v.cloneFromProps(this.pre.props);\n        if (this.appliedTransformations < 1) {\n          this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        }\n        if (this.appliedTransformations < 2) {\n          this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        }\n        if (this.sk && this.appliedTransformations < 3) {\n          this.v.skewFromAxis(-this.sk.v, this.sa.v);\n        }\n        if (this.r && this.appliedTransformations < 4) {\n          this.v.rotate(-this.r.v);\n        } else if (!this.r && this.appliedTransformations < 4) {\n          this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        }\n        if (this.autoOriented) {\n          var v1;\n          var v2;\n          frameRate = this.elem.globalData.frameRate;\n          if (this.p && this.p.keyframes && this.p.getValueAtTime) {\n            if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\n              v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\n              v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\n            } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\n              v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\n              v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\n            } else {\n              v1 = this.p.pv;\n              v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\n            }\n          } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\n            v1 = [];\n            v2 = [];\n            var px = this.px;\n            var py = this.py;\n            if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\n              v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\n              v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\n              v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\n              v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\n            } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\n              v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\n              v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\n              v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\n              v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\n            } else {\n              v1 = [px.pv, py.pv];\n              v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\n              v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\n            }\n          } else {\n            v2 = defaultVector;\n            v1 = v2;\n          }\n          this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\n        }\n        if (this.data.p && this.data.p.s) {\n          if (this.data.p.z) {\n            this.v.translate(this.px.v, this.py.v, -this.pz.v);\n          } else {\n            this.v.translate(this.px.v, this.py.v, 0);\n          }\n        } else {\n          this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n        }\n      }\n      this.frameId = this.elem.globalData.frameId;\n    }\n    function precalculateMatrix() {\n      if (!this.a.k) {\n        this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        this.appliedTransformations = 1;\n      } else {\n        return;\n      }\n      if (!this.s.effectsSequence.length) {\n        this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        this.appliedTransformations = 2;\n      } else {\n        return;\n      }\n      if (this.sk) {\n        if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\n          this.pre.skewFromAxis(-this.sk.v, this.sa.v);\n          this.appliedTransformations = 3;\n        } else {\n          return;\n        }\n      }\n      if (this.r) {\n        if (!this.r.effectsSequence.length) {\n          this.pre.rotate(-this.r.v);\n          this.appliedTransformations = 4;\n        }\n      } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\n        this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        this.appliedTransformations = 4;\n      }\n    }\n    function autoOrient() {\n      //\n      // var prevP = this.getValueAtTime();\n    }\n    function addDynamicProperty(prop) {\n      this._addDynamicProperty(prop);\n      this.elem.addDynamicProperty(prop);\n      this._isDirty = true;\n    }\n    function TransformProperty(elem, data, container) {\n      this.elem = elem;\n      this.frameId = -1;\n      this.propType = 'transform';\n      this.data = data;\n      this.v = new Matrix();\n      // Precalculated matrix with non animated properties\n      this.pre = new Matrix();\n      this.appliedTransformations = 0;\n      this.initDynamicPropertyContainer(container || elem);\n      if (data.p && data.p.s) {\n        this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\n        this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\n        if (data.p.z) {\n          this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\n        }\n      } else {\n        this.p = PropertyFactory.getProp(elem, data.p || {\n          k: [0, 0, 0]\n        }, 1, 0, this);\n      }\n      if (data.rx) {\n        this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\n        this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\n        this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\n        if (data.or.k[0].ti) {\n          var i;\n          var len = data.or.k.length;\n          for (i = 0; i < len; i += 1) {\n            data.or.k[i].to = null;\n            data.or.k[i].ti = null;\n          }\n        }\n        this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\n        // sh Indicates it needs to be capped between -180 and 180\n        this.or.sh = true;\n      } else {\n        this.r = PropertyFactory.getProp(elem, data.r || {\n          k: 0\n        }, 0, degToRads, this);\n      }\n      if (data.sk) {\n        this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\n        this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\n      }\n      this.a = PropertyFactory.getProp(elem, data.a || {\n        k: [0, 0, 0]\n      }, 1, 0, this);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: [100, 100, 100]\n      }, 1, 0.01, this);\n      // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\n      if (data.o) {\n        this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\n      } else {\n        this.o = {\n          _mdf: false,\n          v: 1\n        };\n      }\n      this._isDirty = true;\n      if (!this.dynamicProperties.length) {\n        this.getValue(true);\n      }\n    }\n    TransformProperty.prototype = {\n      applyToMatrix: applyToMatrix,\n      getValue: processKeys,\n      precalculateMatrix: precalculateMatrix,\n      autoOrient: autoOrient\n    };\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\n    function getTransformProperty(elem, data, container) {\n      return new TransformProperty(elem, data, container);\n    }\n    return {\n      getTransformProperty: getTransformProperty\n    };\n  }();\n  function RepeaterModifier() {}\n  extendPrototype([ShapeModifier], RepeaterModifier);\n  RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\n    this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\n    this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\n    this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\n    this.data = data;\n    if (!this.dynamicProperties.length) {\n      this.getValue(true);\n    }\n    this._isAnimated = !!this.dynamicProperties.length;\n    this.pMatrix = new Matrix();\n    this.rMatrix = new Matrix();\n    this.sMatrix = new Matrix();\n    this.tMatrix = new Matrix();\n    this.matrix = new Matrix();\n  };\n  RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\n    var dir = inv ? -1 : 1;\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    rMatrix.rotate(-transform.r.v * dir * perc);\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n  };\n  RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\n    this.elem = elem;\n    this.arr = arr;\n    this.pos = pos;\n    this.elemsData = elemsData;\n    this._currentCopies = 0;\n    this._elements = [];\n    this._groups = [];\n    this.frameId = -1;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, arr[pos]);\n    while (pos > 0) {\n      pos -= 1;\n      // this._elements.unshift(arr.splice(pos,1)[0]);\n      this._elements.unshift(arr[pos]);\n    }\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n  RepeaterModifier.prototype.resetElements = function (elements) {\n    var i;\n    var len = elements.length;\n    for (i = 0; i < len; i += 1) {\n      elements[i]._processed = false;\n      if (elements[i].ty === 'gr') {\n        this.resetElements(elements[i].it);\n      }\n    }\n  };\n  RepeaterModifier.prototype.cloneElements = function (elements) {\n    var newElements = JSON.parse(JSON.stringify(elements));\n    this.resetElements(newElements);\n    return newElements;\n  };\n  RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\n    var i;\n    var len = elements.length;\n    for (i = 0; i < len; i += 1) {\n      elements[i]._render = renderFlag;\n      if (elements[i].ty === 'gr') {\n        this.changeGroupRender(elements[i].it, renderFlag);\n      }\n    }\n  };\n  RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\n    var items;\n    var itemsTransform;\n    var i;\n    var dir;\n    var cont;\n    var hasReloaded = false;\n    if (this._mdf || _isFirstFrame) {\n      var copies = Math.ceil(this.c.v);\n      if (this._groups.length < copies) {\n        while (this._groups.length < copies) {\n          var group = {\n            it: this.cloneElements(this._elements),\n            ty: 'gr'\n          };\n          group.it.push({\n            a: {\n              a: 0,\n              ix: 1,\n              k: [0, 0]\n            },\n            nm: 'Transform',\n            o: {\n              a: 0,\n              ix: 7,\n              k: 100\n            },\n            p: {\n              a: 0,\n              ix: 2,\n              k: [0, 0]\n            },\n            r: {\n              a: 1,\n              ix: 6,\n              k: [{\n                s: 0,\n                e: 0,\n                t: 0\n              }, {\n                s: 0,\n                e: 0,\n                t: 1\n              }]\n            },\n            s: {\n              a: 0,\n              ix: 3,\n              k: [100, 100]\n            },\n            sa: {\n              a: 0,\n              ix: 5,\n              k: 0\n            },\n            sk: {\n              a: 0,\n              ix: 4,\n              k: 0\n            },\n            ty: 'tr'\n          });\n          this.arr.splice(0, 0, group);\n          this._groups.splice(0, 0, group);\n          this._currentCopies += 1;\n        }\n        this.elem.reloadShapes();\n        hasReloaded = true;\n      }\n      cont = 0;\n      var renderFlag;\n      for (i = 0; i <= this._groups.length - 1; i += 1) {\n        renderFlag = cont < copies;\n        this._groups[i]._render = renderFlag;\n        this.changeGroupRender(this._groups[i].it, renderFlag);\n        if (!renderFlag) {\n          var elems = this.elemsData[i].it;\n          var transformData = elems[elems.length - 1];\n          if (transformData.transform.op.v !== 0) {\n            transformData.transform.op._mdf = true;\n            transformData.transform.op.v = 0;\n          } else {\n            transformData.transform.op._mdf = false;\n          }\n        }\n        cont += 1;\n      }\n      this._currentCopies = copies;\n      /// /\n\n      var offset = this.o.v;\n      var offsetModulo = offset % 1;\n      var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n      var pProps = this.pMatrix.props;\n      var rProps = this.rMatrix.props;\n      var sProps = this.sMatrix.props;\n      this.pMatrix.reset();\n      this.rMatrix.reset();\n      this.sMatrix.reset();\n      this.tMatrix.reset();\n      this.matrix.reset();\n      var iteration = 0;\n      if (offset > 0) {\n        while (iteration < roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          iteration += 1;\n        }\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\n          iteration += offsetModulo;\n        }\n      } else if (offset < 0) {\n        while (iteration > roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\n          iteration -= 1;\n        }\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\n          iteration -= offsetModulo;\n        }\n      }\n      i = this.data.m === 1 ? 0 : this._currentCopies - 1;\n      dir = this.data.m === 1 ? 1 : -1;\n      cont = this._currentCopies;\n      var j;\n      var jLen;\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        jLen = itemsTransform.length;\n        items[items.length - 1].transform.mProps._mdf = true;\n        items[items.length - 1].transform.op._mdf = true;\n        items[items.length - 1].transform.op.v = this._currentCopies === 1 ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\n        if (iteration !== 0) {\n          if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          }\n          this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\n          this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\n          this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n          this.matrix.reset();\n        } else {\n          this.matrix.reset();\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n        }\n        iteration += 1;\n        cont -= 1;\n        i += dir;\n      }\n    } else {\n      cont = this._currentCopies;\n      i = 0;\n      dir = 1;\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        items[items.length - 1].transform.mProps._mdf = false;\n        items[items.length - 1].transform.op._mdf = false;\n        cont -= 1;\n        i += dir;\n      }\n    }\n    return hasReloaded;\n  };\n  RepeaterModifier.prototype.addShape = function () {};\n  function RoundCornersModifier() {}\n  extendPrototype([ShapeModifier], RoundCornersModifier);\n  RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\n    this._isAnimated = !!this.rd.effectsSequence.length;\n  };\n  RoundCornersModifier.prototype.processPath = function (path, round) {\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var i;\n    var len = path._length;\n    var currentV;\n    var currentI;\n    var currentO;\n    var closerV;\n    var distance;\n    var newPosPerc;\n    var index = 0;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n    for (i = 0; i < len; i += 1) {\n      currentV = path.v[i];\n      currentO = path.o[i];\n      currentI = path.i[i];\n      if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\n        if ((i === 0 || i === len - 1) && !path.c) {\n          clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\n          /* clonedPath.v[index] = currentV;\n                  clonedPath.o[index] = currentO;\n                  clonedPath.i[index] = currentI; */\n          index += 1;\n        } else {\n          if (i === 0) {\n            closerV = path.v[len - 1];\n          } else {\n            closerV = path.v[i - 1];\n          }\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = iX;\n          iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\n          vY = iY;\n          oX = vX - (vX - currentV[0]) * roundCorner;\n          oY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n          if (i === len - 1) {\n            closerV = path.v[0];\n          } else {\n            closerV = path.v[i + 1];\n          }\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = oX;\n          oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\n          vY = oY;\n          iX = vX - (vX - currentV[0]) * roundCorner;\n          iY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n        }\n      } else {\n        clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\n        index += 1;\n      }\n    }\n    return clonedPath;\n  };\n  RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var rd = this.rd.v;\n    if (rd !== 0) {\n      var shapeData;\n      var localShapeCollection;\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\n          }\n        }\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n  function getFontProperties(fontData) {\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\n    var fWeight = 'normal';\n    var fStyle = 'normal';\n    var len = styles.length;\n    var styleName;\n    for (var i = 0; i < len; i += 1) {\n      styleName = styles[i].toLowerCase();\n      switch (styleName) {\n        case 'italic':\n          fStyle = 'italic';\n          break;\n        case 'bold':\n          fWeight = '700';\n          break;\n        case 'black':\n          fWeight = '900';\n          break;\n        case 'medium':\n          fWeight = '500';\n          break;\n        case 'regular':\n        case 'normal':\n          fWeight = '400';\n          break;\n        case 'light':\n        case 'thin':\n          fWeight = '200';\n          break;\n        default:\n          break;\n      }\n    }\n    return {\n      style: fStyle,\n      weight: fontData.fWeight || fWeight\n    };\n  }\n  const FontManager = function () {\n    var maxWaitingTime = 5000;\n    var emptyChar = {\n      w: 0,\n      size: 0,\n      shapes: [],\n      data: {\n        shapes: []\n      }\n    };\n    var combinedCharacters = [];\n    // Hindi characters\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\n    var surrogateModifiers = ['d83cdffb', 'd83cdffc', 'd83cdffd', 'd83cdffe', 'd83cdfff'];\n    var zeroWidthJoiner = [65039, 8205];\n    function trimFontOptions(font) {\n      var familyArray = font.split(',');\n      var i;\n      var len = familyArray.length;\n      var enabledFamilies = [];\n      for (i = 0; i < len; i += 1) {\n        if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\n          enabledFamilies.push(familyArray[i]);\n        }\n      }\n      return enabledFamilies.join(',');\n    }\n    function setUpNode(font, family) {\n      var parentNode = createTag('span');\n      // Node is invisible to screen readers.\n      parentNode.setAttribute('aria-hidden', true);\n      parentNode.style.fontFamily = family;\n      var node = createTag('span');\n      // Characters that vary significantly among different fonts\n      node.innerText = 'giItT1WQy@!-/#';\n      // Visible - so we can measure it - but not on the screen\n      parentNode.style.position = 'absolute';\n      parentNode.style.left = '-10000px';\n      parentNode.style.top = '-10000px';\n      // Large font size makes even subtle changes obvious\n      parentNode.style.fontSize = '300px';\n      // Reset any font properties\n      parentNode.style.fontVariant = 'normal';\n      parentNode.style.fontStyle = 'normal';\n      parentNode.style.fontWeight = 'normal';\n      parentNode.style.letterSpacing = '0';\n      parentNode.appendChild(node);\n      document.body.appendChild(parentNode);\n\n      // Remember width with no applied web font\n      var width = node.offsetWidth;\n      node.style.fontFamily = trimFontOptions(font) + ', ' + family;\n      return {\n        node: node,\n        w: width,\n        parent: parentNode\n      };\n    }\n    function checkLoadedFonts() {\n      var i;\n      var len = this.fonts.length;\n      var node;\n      var w;\n      var loadedCount = len;\n      for (i = 0; i < len; i += 1) {\n        if (this.fonts[i].loaded) {\n          loadedCount -= 1;\n        } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\n          this.fonts[i].loaded = true;\n        } else {\n          node = this.fonts[i].monoCase.node;\n          w = this.fonts[i].monoCase.w;\n          if (node.offsetWidth !== w) {\n            loadedCount -= 1;\n            this.fonts[i].loaded = true;\n          } else {\n            node = this.fonts[i].sansCase.node;\n            w = this.fonts[i].sansCase.w;\n            if (node.offsetWidth !== w) {\n              loadedCount -= 1;\n              this.fonts[i].loaded = true;\n            }\n          }\n          if (this.fonts[i].loaded) {\n            this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\n            this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\n          }\n        }\n      }\n      if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\n        setTimeout(this.checkLoadedFontsBinded, 20);\n      } else {\n        setTimeout(this.setIsLoadedBinded, 10);\n      }\n    }\n    function createHelper(fontData, def) {\n      var engine = document.body && def ? 'svg' : 'canvas';\n      var helper;\n      var fontProps = getFontProperties(fontData);\n      if (engine === 'svg') {\n        var tHelper = createNS('text');\n        tHelper.style.fontSize = '100px';\n        // tHelper.style.fontFamily = fontData.fFamily;\n        tHelper.setAttribute('font-family', fontData.fFamily);\n        tHelper.setAttribute('font-style', fontProps.style);\n        tHelper.setAttribute('font-weight', fontProps.weight);\n        tHelper.textContent = '1';\n        if (fontData.fClass) {\n          tHelper.style.fontFamily = 'inherit';\n          tHelper.setAttribute('class', fontData.fClass);\n        } else {\n          tHelper.style.fontFamily = fontData.fFamily;\n        }\n        def.appendChild(tHelper);\n        helper = tHelper;\n      } else {\n        var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\n        tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\n        helper = tCanvasHelper;\n      }\n      function measure(text) {\n        if (engine === 'svg') {\n          helper.textContent = text;\n          return helper.getComputedTextLength();\n        }\n        return helper.measureText(text).width;\n      }\n      return {\n        measureText: measure\n      };\n    }\n    function addFonts(fontData, defs) {\n      if (!fontData) {\n        this.isLoaded = true;\n        return;\n      }\n      if (this.chars) {\n        this.isLoaded = true;\n        this.fonts = fontData.list;\n        return;\n      }\n      if (!document.body) {\n        this.isLoaded = true;\n        fontData.list.forEach(data => {\n          data.helper = createHelper(data);\n          data.cache = {};\n        });\n        this.fonts = fontData.list;\n        return;\n      }\n      var fontArr = fontData.list;\n      var i;\n      var len = fontArr.length;\n      var _pendingFonts = len;\n      for (i = 0; i < len; i += 1) {\n        var shouldLoadFont = true;\n        var loadedSelector;\n        var j;\n        fontArr[i].loaded = false;\n        fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\n        fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\n        if (!fontArr[i].fPath) {\n          fontArr[i].loaded = true;\n          _pendingFonts -= 1;\n        } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\n          loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\n          if (loadedSelector.length > 0) {\n            shouldLoadFont = false;\n          }\n          if (shouldLoadFont) {\n            var s = createTag('style');\n            s.setAttribute('f-forigin', fontArr[i].fOrigin);\n            s.setAttribute('f-origin', fontArr[i].origin);\n            s.setAttribute('f-family', fontArr[i].fFamily);\n            s.type = 'text/css';\n            s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\n            defs.appendChild(s);\n          }\n        } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\n          loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n          if (shouldLoadFont) {\n            var l = createTag('link');\n            l.setAttribute('f-forigin', fontArr[i].fOrigin);\n            l.setAttribute('f-origin', fontArr[i].origin);\n            l.type = 'text/css';\n            l.rel = 'stylesheet';\n            l.href = fontArr[i].fPath;\n            document.body.appendChild(l);\n          }\n        } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\n          loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (fontArr[i].fPath === loadedSelector[j].src) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n          if (shouldLoadFont) {\n            var sc = createTag('link');\n            sc.setAttribute('f-forigin', fontArr[i].fOrigin);\n            sc.setAttribute('f-origin', fontArr[i].origin);\n            sc.setAttribute('rel', 'stylesheet');\n            sc.setAttribute('href', fontArr[i].fPath);\n            defs.appendChild(sc);\n          }\n        }\n        fontArr[i].helper = createHelper(fontArr[i], defs);\n        fontArr[i].cache = {};\n        this.fonts.push(fontArr[i]);\n      }\n      if (_pendingFonts === 0) {\n        this.isLoaded = true;\n      } else {\n        // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\n        // Adding this timeout seems to fix it\n        setTimeout(this.checkLoadedFonts.bind(this), 100);\n      }\n    }\n    function addChars(chars) {\n      if (!chars) {\n        return;\n      }\n      if (!this.chars) {\n        this.chars = [];\n      }\n      var i;\n      var len = chars.length;\n      var j;\n      var jLen = this.chars.length;\n      var found;\n      for (i = 0; i < len; i += 1) {\n        j = 0;\n        found = false;\n        while (j < jLen) {\n          if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\n            found = true;\n          }\n          j += 1;\n        }\n        if (!found) {\n          this.chars.push(chars[i]);\n          jLen += 1;\n        }\n      }\n    }\n    function getCharData(char, style, font) {\n      var i = 0;\n      var len = this.chars.length;\n      while (i < len) {\n        if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\n          return this.chars[i];\n        }\n        i += 1;\n      }\n      if ((typeof char === 'string' && char.charCodeAt(0) !== 13 || !char) && console && console.warn // eslint-disable-line no-console\n      && !this._warned) {\n        this._warned = true;\n        console.warn('Missing character from exported characters list: ', char, style, font); // eslint-disable-line no-console\n      }\n      return emptyChar;\n    }\n    function measureText(char, fontName, size) {\n      var fontData = this.getFontByName(fontName);\n      var index = char.charCodeAt(0);\n      if (!fontData.cache[index + 1]) {\n        var tHelper = fontData.helper;\n        if (char === ' ') {\n          var doubleSize = tHelper.measureText('|' + char + '|');\n          var singleSize = tHelper.measureText('||');\n          fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\n        } else {\n          fontData.cache[index + 1] = tHelper.measureText(char) / 100;\n        }\n      }\n      return fontData.cache[index + 1] * size;\n    }\n    function getFontByName(name) {\n      var i = 0;\n      var len = this.fonts.length;\n      while (i < len) {\n        if (this.fonts[i].fName === name) {\n          return this.fonts[i];\n        }\n        i += 1;\n      }\n      return this.fonts[0];\n    }\n    function isModifier(firstCharCode, secondCharCode) {\n      var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\n      return surrogateModifiers.indexOf(sum) !== -1;\n    }\n    function isZeroWidthJoiner(firstCharCode, secondCharCode) {\n      if (!secondCharCode) {\n        return firstCharCode === zeroWidthJoiner[1];\n      }\n      return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\n    }\n    function isCombinedCharacter(char) {\n      return combinedCharacters.indexOf(char) !== -1;\n    }\n    function setIsLoaded() {\n      this.isLoaded = true;\n    }\n    var Font = function () {\n      this.fonts = [];\n      this.chars = null;\n      this.typekitLoaded = 0;\n      this.isLoaded = false;\n      this._warned = false;\n      this.initTime = Date.now();\n      this.setIsLoadedBinded = this.setIsLoaded.bind(this);\n      this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\n    };\n    Font.isModifier = isModifier;\n    Font.isZeroWidthJoiner = isZeroWidthJoiner;\n    Font.isCombinedCharacter = isCombinedCharacter;\n    var fontPrototype = {\n      addChars: addChars,\n      addFonts: addFonts,\n      getCharData: getCharData,\n      getFontByName: getFontByName,\n      measureText: measureText,\n      checkLoadedFonts: checkLoadedFonts,\n      setIsLoaded: setIsLoaded\n    };\n    Font.prototype = fontPrototype;\n    return Font;\n  }();\n  function RenderableElement() {}\n  RenderableElement.prototype = {\n    initRenderable: function () {\n      // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\n      this.isInRange = false;\n      // layer's display state\n      this.hidden = false;\n      // If layer's transparency equals 0, it can be hidden\n      this.isTransparent = false;\n      // list of animated components\n      this.renderableComponents = [];\n    },\n    addRenderableComponent: function (component) {\n      if (this.renderableComponents.indexOf(component) === -1) {\n        this.renderableComponents.push(component);\n      }\n    },\n    removeRenderableComponent: function (component) {\n      if (this.renderableComponents.indexOf(component) !== -1) {\n        this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\n      }\n    },\n    prepareRenderableFrame: function (num) {\n      this.checkLayerLimits(num);\n    },\n    checkTransparency: function () {\n      if (this.finalTransform.mProp.o.v <= 0) {\n        if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\n          this.isTransparent = true;\n          this.hide();\n        }\n      } else if (this.isTransparent) {\n        this.isTransparent = false;\n        this.show();\n      }\n    },\n    /**\n       * @function\n       * Initializes frame related properties.\n       *\n       * @param {number} num\n       * current frame number in Layer's time\n       *\n       */\n    checkLayerLimits: function (num) {\n      if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\n        if (this.isInRange !== true) {\n          this.globalData._mdf = true;\n          this._mdf = true;\n          this.isInRange = true;\n          this.show();\n        }\n      } else if (this.isInRange !== false) {\n        this.globalData._mdf = true;\n        this.isInRange = false;\n        this.hide();\n      }\n    },\n    renderRenderable: function () {\n      var i;\n      var len = this.renderableComponents.length;\n      for (i = 0; i < len; i += 1) {\n        this.renderableComponents[i].renderFrame(this._isFirstFrame);\n      }\n      /* this.maskManager.renderFrame(this.finalTransform.mat);\n          this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\n    },\n    sourceRectAtTime: function () {\n      return {\n        top: 0,\n        left: 0,\n        width: 100,\n        height: 100\n      };\n    },\n    getLayerSize: function () {\n      if (this.data.ty === 5) {\n        return {\n          w: this.data.textData.width,\n          h: this.data.textData.height\n        };\n      }\n      return {\n        w: this.data.width,\n        h: this.data.height\n      };\n    }\n  };\n  const MaskManagerInterface = function () {\n    function MaskInterface(mask, data) {\n      this._mask = mask;\n      this._data = data;\n    }\n    Object.defineProperty(MaskInterface.prototype, 'maskPath', {\n      get: function () {\n        if (this._mask.prop.k) {\n          this._mask.prop.getValue();\n        }\n        return this._mask.prop;\n      }\n    });\n    Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\n      get: function () {\n        if (this._mask.op.k) {\n          this._mask.op.getValue();\n        }\n        return this._mask.op.v * 100;\n      }\n    });\n    var MaskManager = function (maskManager) {\n      var _masksInterfaces = createSizedArray(maskManager.viewData.length);\n      var i;\n      var len = maskManager.viewData.length;\n      for (i = 0; i < len; i += 1) {\n        _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\n      }\n      var maskFunction = function (name) {\n        i = 0;\n        while (i < len) {\n          if (maskManager.masksProperties[i].nm === name) {\n            return _masksInterfaces[i];\n          }\n          i += 1;\n        }\n        return null;\n      };\n      return maskFunction;\n    };\n    return MaskManager;\n  }();\n  const ExpressionPropertyInterface = function () {\n    var defaultUnidimensionalValue = {\n      pv: 0,\n      v: 0,\n      mult: 1\n    };\n    var defaultMultidimensionalValue = {\n      pv: [0, 0, 0],\n      v: [0, 0, 0],\n      mult: 1\n    };\n    function completeProperty(expressionValue, property, type) {\n      Object.defineProperty(expressionValue, 'velocity', {\n        get: function () {\n          return property.getVelocityAtTime(property.comp.currentFrame);\n        }\n      });\n      expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\n      expressionValue.key = function (pos) {\n        if (!expressionValue.numKeys) {\n          return 0;\n        }\n        var value = '';\n        if ('s' in property.keyframes[pos - 1]) {\n          value = property.keyframes[pos - 1].s;\n        } else if ('e' in property.keyframes[pos - 2]) {\n          value = property.keyframes[pos - 2].e;\n        } else {\n          value = property.keyframes[pos - 2].s;\n        }\n        var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\n        valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\n        valueProp.value = type === 'unidimensional' ? value[0] : value;\n        return valueProp;\n      };\n      expressionValue.valueAtTime = property.getValueAtTime;\n      expressionValue.speedAtTime = property.getSpeedAtTime;\n      expressionValue.velocityAtTime = property.getVelocityAtTime;\n      expressionValue.propertyGroup = property.propertyGroup;\n    }\n    function UnidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultUnidimensionalValue;\n      }\n      var mult = 1 / property.mult;\n      var val = property.pv * mult;\n      var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n      expressionValue.value = val;\n      completeProperty(expressionValue, property, 'unidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n        val = property.v * mult;\n        if (expressionValue.value !== val) {\n          expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n          expressionValue.value = val;\n          completeProperty(expressionValue, property, 'unidimensional');\n        }\n        return expressionValue;\n      };\n    }\n    function MultidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultMultidimensionalValue;\n      }\n      var mult = 1 / property.mult;\n      var len = property.data && property.data.l || property.pv.length;\n      var expressionValue = createTypedArray('float32', len);\n      var arrValue = createTypedArray('float32', len);\n      expressionValue.value = arrValue;\n      completeProperty(expressionValue, property, 'multidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n        for (var i = 0; i < len; i += 1) {\n          arrValue[i] = property.v[i] * mult;\n          expressionValue[i] = arrValue[i];\n        }\n        return expressionValue;\n      };\n    }\n\n    // TODO: try to avoid using this getter\n    function defaultGetter() {\n      return defaultUnidimensionalValue;\n    }\n    return function (property) {\n      if (!property) {\n        return defaultGetter;\n      }\n      if (property.propType === 'unidimensional') {\n        return UnidimensionalPropertyInterface(property);\n      }\n      return MultidimensionalPropertyInterface(property);\n    };\n  }();\n  const TransformExpressionInterface = function () {\n    return function (transform) {\n      function _thisFunction(name) {\n        switch (name) {\n          case 'scale':\n          case 'Scale':\n          case 'ADBE Scale':\n          case 6:\n            return _thisFunction.scale;\n          case 'rotation':\n          case 'Rotation':\n          case 'ADBE Rotation':\n          case 'ADBE Rotate Z':\n          case 10:\n            return _thisFunction.rotation;\n          case 'ADBE Rotate X':\n            return _thisFunction.xRotation;\n          case 'ADBE Rotate Y':\n            return _thisFunction.yRotation;\n          case 'position':\n          case 'Position':\n          case 'ADBE Position':\n          case 2:\n            return _thisFunction.position;\n          case 'ADBE Position_0':\n            return _thisFunction.xPosition;\n          case 'ADBE Position_1':\n            return _thisFunction.yPosition;\n          case 'ADBE Position_2':\n            return _thisFunction.zPosition;\n          case 'anchorPoint':\n          case 'AnchorPoint':\n          case 'Anchor Point':\n          case 'ADBE AnchorPoint':\n          case 1:\n            return _thisFunction.anchorPoint;\n          case 'opacity':\n          case 'Opacity':\n          case 11:\n            return _thisFunction.opacity;\n          default:\n            return null;\n        }\n      }\n      Object.defineProperty(_thisFunction, 'rotation', {\n        get: ExpressionPropertyInterface(transform.r || transform.rz)\n      });\n      Object.defineProperty(_thisFunction, 'zRotation', {\n        get: ExpressionPropertyInterface(transform.rz || transform.r)\n      });\n      Object.defineProperty(_thisFunction, 'xRotation', {\n        get: ExpressionPropertyInterface(transform.rx)\n      });\n      Object.defineProperty(_thisFunction, 'yRotation', {\n        get: ExpressionPropertyInterface(transform.ry)\n      });\n      Object.defineProperty(_thisFunction, 'scale', {\n        get: ExpressionPropertyInterface(transform.s)\n      });\n      var _px;\n      var _py;\n      var _pz;\n      var _transformFactory;\n      if (transform.p) {\n        _transformFactory = ExpressionPropertyInterface(transform.p);\n      } else {\n        _px = ExpressionPropertyInterface(transform.px);\n        _py = ExpressionPropertyInterface(transform.py);\n        if (transform.pz) {\n          _pz = ExpressionPropertyInterface(transform.pz);\n        }\n      }\n      Object.defineProperty(_thisFunction, 'position', {\n        get: function () {\n          if (transform.p) {\n            return _transformFactory();\n          }\n          return [_px(), _py(), _pz ? _pz() : 0];\n        }\n      });\n      Object.defineProperty(_thisFunction, 'xPosition', {\n        get: ExpressionPropertyInterface(transform.px)\n      });\n      Object.defineProperty(_thisFunction, 'yPosition', {\n        get: ExpressionPropertyInterface(transform.py)\n      });\n      Object.defineProperty(_thisFunction, 'zPosition', {\n        get: ExpressionPropertyInterface(transform.pz)\n      });\n      Object.defineProperty(_thisFunction, 'anchorPoint', {\n        get: ExpressionPropertyInterface(transform.a)\n      });\n      Object.defineProperty(_thisFunction, 'opacity', {\n        get: ExpressionPropertyInterface(transform.o)\n      });\n      Object.defineProperty(_thisFunction, 'skew', {\n        get: ExpressionPropertyInterface(transform.sk)\n      });\n      Object.defineProperty(_thisFunction, 'skewAxis', {\n        get: ExpressionPropertyInterface(transform.sa)\n      });\n      Object.defineProperty(_thisFunction, 'orientation', {\n        get: ExpressionPropertyInterface(transform.or)\n      });\n      return _thisFunction;\n    };\n  }();\n  const LayerExpressionInterface = function () {\n    function getMatrix(time) {\n      var toWorldMat = new Matrix();\n      if (time !== undefined) {\n        var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\n        propMatrix.clone(toWorldMat);\n      } else {\n        var transformMat = this._elem.finalTransform.mProp;\n        transformMat.applyToMatrix(toWorldMat);\n      }\n      return toWorldMat;\n    }\n    function toWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.applyPoint(toWorldMat, arr);\n    }\n    function toWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.applyPoint(toWorldMat, arr);\n    }\n    function fromWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.invertPoint(toWorldMat, arr);\n    }\n    function fromWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.invertPoint(toWorldMat, arr);\n    }\n    function applyPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n      return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n    }\n    function invertPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n      return matrix.inversePoint(arr);\n    }\n    function fromComp(arr) {\n      var toWorldMat = new Matrix();\n      toWorldMat.reset();\n      this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n        }\n        return toWorldMat.inversePoint(arr);\n      }\n      return toWorldMat.inversePoint(arr);\n    }\n    function sampleImage() {\n      return [1, 1, 1, 1];\n    }\n    return function (elem) {\n      var transformInterface;\n      function _registerMaskInterface(maskManager) {\n        _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\n      }\n      function _registerEffectsInterface(effects) {\n        _thisLayerFunction.effect = effects;\n      }\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Root Vectors Group':\n          case 'Contents':\n          case 2:\n            return _thisLayerFunction.shapeInterface;\n          case 1:\n          case 6:\n          case 'Transform':\n          case 'transform':\n          case 'ADBE Transform Group':\n            return transformInterface;\n          case 4:\n          case 'ADBE Effect Parade':\n          case 'effects':\n          case 'Effects':\n            return _thisLayerFunction.effect;\n          case 'ADBE Text Properties':\n            return _thisLayerFunction.textInterface;\n          default:\n            return null;\n        }\n      }\n      _thisLayerFunction.getMatrix = getMatrix;\n      _thisLayerFunction.invertPoint = invertPoint;\n      _thisLayerFunction.applyPoint = applyPoint;\n      _thisLayerFunction.toWorld = toWorld;\n      _thisLayerFunction.toWorldVec = toWorldVec;\n      _thisLayerFunction.fromWorld = fromWorld;\n      _thisLayerFunction.fromWorldVec = fromWorldVec;\n      _thisLayerFunction.toComp = toWorld;\n      _thisLayerFunction.fromComp = fromComp;\n      _thisLayerFunction.sampleImage = sampleImage;\n      _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\n      _thisLayerFunction._elem = elem;\n      transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\n      var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\n      Object.defineProperties(_thisLayerFunction, {\n        hasParent: {\n          get: function () {\n            return elem.hierarchy.length;\n          }\n        },\n        parent: {\n          get: function () {\n            return elem.hierarchy[0].layerInterface;\n          }\n        },\n        rotation: getDescriptor(transformInterface, 'rotation'),\n        scale: getDescriptor(transformInterface, 'scale'),\n        position: getDescriptor(transformInterface, 'position'),\n        opacity: getDescriptor(transformInterface, 'opacity'),\n        anchorPoint: anchorPointDescriptor,\n        anchor_point: anchorPointDescriptor,\n        transform: {\n          get: function () {\n            return transformInterface;\n          }\n        },\n        active: {\n          get: function () {\n            return elem.isInRange;\n          }\n        }\n      });\n      _thisLayerFunction.startTime = elem.data.st;\n      _thisLayerFunction.index = elem.data.ind;\n      _thisLayerFunction.source = elem.data.refId;\n      _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\n      _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\n      _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      _thisLayerFunction._name = elem.data.nm;\n      _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\n      _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\n      return _thisLayerFunction;\n    };\n  }();\n  const propertyGroupFactory = function () {\n    return function (interfaceFunction, parentPropertyGroup) {\n      return function (val) {\n        val = val === undefined ? 1 : val;\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n        return parentPropertyGroup(val - 1);\n      };\n    };\n  }();\n  const PropertyInterface = function () {\n    return function (propertyName, propertyGroup) {\n      var interfaceFunction = {\n        _name: propertyName\n      };\n      function _propertyGroup(val) {\n        val = val === undefined ? 1 : val;\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n        return propertyGroup(val - 1);\n      }\n      return _propertyGroup;\n    };\n  }();\n  const EffectsExpressionInterface = function () {\n    var ob = {\n      createEffectsInterface: createEffectsInterface\n    };\n    function createEffectsInterface(elem, propertyGroup) {\n      if (elem.effectsManager) {\n        var effectElements = [];\n        var effectsData = elem.data.ef;\n        var i;\n        var len = elem.effectsManager.effectElements.length;\n        for (i = 0; i < len; i += 1) {\n          effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\n        }\n        var effects = elem.data.ef || [];\n        var groupInterface = function (name) {\n          i = 0;\n          len = effects.length;\n          while (i < len) {\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n              return effectElements[i];\n            }\n            i += 1;\n          }\n          return null;\n        };\n        Object.defineProperty(groupInterface, 'numProperties', {\n          get: function () {\n            return effects.length;\n          }\n        });\n        return groupInterface;\n      }\n      return null;\n    }\n    function createGroupInterface(data, elements, propertyGroup, elem) {\n      function groupInterface(name) {\n        var effects = data.ef;\n        var i = 0;\n        var len = effects.length;\n        while (i < len) {\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n            if (effects[i].ty === 5) {\n              return effectElements[i];\n            }\n            return effectElements[i]();\n          }\n          i += 1;\n        }\n        throw new Error();\n      }\n      var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\n      var effectElements = [];\n      var i;\n      var len = data.ef.length;\n      for (i = 0; i < len; i += 1) {\n        if (data.ef[i].ty === 5) {\n          effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\n        } else {\n          effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\n        }\n      }\n      if (data.mn === 'ADBE Color Control') {\n        Object.defineProperty(groupInterface, 'color', {\n          get: function () {\n            return effectElements[0]();\n          }\n        });\n      }\n      Object.defineProperties(groupInterface, {\n        numProperties: {\n          get: function () {\n            return data.np;\n          }\n        },\n        _name: {\n          value: data.nm\n        },\n        propertyGroup: {\n          value: _propertyGroup\n        }\n      });\n      groupInterface.enabled = data.en !== 0;\n      groupInterface.active = groupInterface.enabled;\n      return groupInterface;\n    }\n    function createValueInterface(element, type, elem, propertyGroup) {\n      var expressionProperty = ExpressionPropertyInterface(element.p);\n      function interfaceFunction() {\n        if (type === 10) {\n          return elem.comp.compInterface(element.p.v);\n        }\n        return expressionProperty();\n      }\n      if (element.p.setGroupProperty) {\n        element.p.setGroupProperty(PropertyInterface('', propertyGroup));\n      }\n      return interfaceFunction;\n    }\n    return ob;\n  }();\n  const CompExpressionInterface = function () {\n    return function (comp) {\n      function _thisLayerFunction(name) {\n        var i = 0;\n        var len = comp.layers.length;\n        while (i < len) {\n          if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\n            return comp.elements[i].layerInterface;\n          }\n          i += 1;\n        }\n        return null;\n        // return {active:false};\n      }\n      Object.defineProperty(_thisLayerFunction, '_name', {\n        value: comp.data.nm\n      });\n      _thisLayerFunction.layer = _thisLayerFunction;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\n      _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\n      _thisLayerFunction.displayStartTime = 0;\n      _thisLayerFunction.numLayers = comp.layers.length;\n      return _thisLayerFunction;\n    };\n  }();\n  const ShapePathInterface = function () {\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\n      var prop = view.sh;\n      function interfaceFunction(val) {\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\n          return interfaceFunction.path;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        path: {\n          get: function () {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          }\n        },\n        shape: {\n          get: function () {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        ix: {\n          value: shape.ix\n        },\n        propertyIndex: {\n          value: shape.ix\n        },\n        mn: {\n          value: shape.mn\n        },\n        propertyGroup: {\n          value: propertyGroup\n        }\n      });\n      return interfaceFunction;\n    };\n  }();\n  const ShapeExpressionInterface = function () {\n    function iterateElements(shapes, view, propertyGroup) {\n      var arr = [];\n      var i;\n      var len = shapes ? shapes.length : 0;\n      for (i = 0; i < len; i += 1) {\n        if (shapes[i].ty === 'gr') {\n          arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'fl') {\n          arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'st') {\n          arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tm') {\n          arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tr') {\n          // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\n        } else if (shapes[i].ty === 'el') {\n          arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sr') {\n          arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sh') {\n          arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rc') {\n          arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rd') {\n          arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rp') {\n          arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'gf') {\n          arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else {\n          arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\n        }\n      }\n      return arr;\n    }\n    function contentsInterfaceFactory(shape, view, propertyGroup) {\n      var interfaces;\n      var interfaceFunction = function _interfaceFunction(value) {\n        var i = 0;\n        var len = interfaces.length;\n        while (i < len) {\n          if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\n            return interfaces[i];\n          }\n          i += 1;\n        }\n        if (typeof value === 'number') {\n          return interfaces[value - 1];\n        }\n        return null;\n      };\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\n      interfaceFunction.numProperties = interfaces.length;\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.transform = transformInterface;\n      interfaceFunction.propertyIndex = shape.cix;\n      interfaceFunction._name = shape.nm;\n      return interfaceFunction;\n    }\n    function groupInterfaceFactory(shape, view, propertyGroup) {\n      var interfaceFunction = function _interfaceFunction(value) {\n        switch (value) {\n          case 'ADBE Vectors Group':\n          case 'Contents':\n          case 2:\n            return interfaceFunction.content;\n          // Not necessary for now. Keeping them here in case a new case appears\n          // case 'ADBE Vector Transform Group':\n          // case 3:\n          default:\n            return interfaceFunction.transform;\n        }\n      };\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.content = content;\n      interfaceFunction.transform = transformInterface;\n      Object.defineProperty(interfaceFunction, '_name', {\n        get: function () {\n          return shape.nm;\n        }\n      });\n      // interfaceFunction.content = interfaceFunction;\n      interfaceFunction.numProperties = shape.np;\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.nm = shape.nm;\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function fillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n    function gradientFillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Start Point' || val === 'start point') {\n          return interfaceFunction.startPoint;\n        }\n        if (val === 'End Point' || val === 'end point') {\n          return interfaceFunction.endPoint;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        startPoint: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        endPoint: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        type: {\n          get: function () {\n            return 'a';\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n    function defaultInterfaceFactory() {\n      function interfaceFunction() {\n        return null;\n      }\n      return interfaceFunction;\n    }\n    function strokeInterfaceFactory(shape, view, propertyGroup) {\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\n      function addPropertyToDashOb(i) {\n        Object.defineProperty(dashOb, shape.d[i].nm, {\n          get: ExpressionPropertyInterface(view.d.dataProps[i].p)\n        });\n      }\n      var i;\n      var len = shape.d ? shape.d.length : 0;\n      var dashOb = {};\n      for (i = 0; i < len; i += 1) {\n        addPropertyToDashOb(i);\n        view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\n      }\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n        if (val === 'Stroke Width' || val === 'stroke width') {\n          return interfaceFunction.strokeWidth;\n        }\n        return null;\n      }\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        strokeWidth: {\n          get: ExpressionPropertyInterface(view.w)\n        },\n        dash: {\n          get: function () {\n            return dashOb;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\n      return interfaceFunction;\n    }\n    function trimInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === shape.e.ix || val === 'End' || val === 'end') {\n          return interfaceFunction.end;\n        }\n        if (val === shape.s.ix) {\n          return interfaceFunction.start;\n        }\n        if (val === shape.o.ix) {\n          return interfaceFunction.offset;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaceFunction.propertyIndex = shape.ix;\n      view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.propertyGroup = propertyGroup;\n      Object.defineProperties(interfaceFunction, {\n        start: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        end: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function transformInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.a.ix === value || value === 'Anchor Point') {\n          return interfaceFunction.anchorPoint;\n        }\n        if (shape.o.ix === value || value === 'Opacity') {\n          return interfaceFunction.opacity;\n        }\n        if (shape.p.ix === value || value === 'Position') {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\n          return interfaceFunction.rotation;\n        }\n        if (shape.s.ix === value || value === 'Scale') {\n          return interfaceFunction.scale;\n        }\n        if (shape.sk && shape.sk.ix === value || value === 'Skew') {\n          return interfaceFunction.skew;\n        }\n        if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\n          return interfaceFunction.skewAxis;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\n      view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\n      view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      if (view.transform.mProps.sk) {\n        view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\n        view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\n      }\n      view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        opacity: {\n          get: ExpressionPropertyInterface(view.transform.mProps.o)\n        },\n        position: {\n          get: ExpressionPropertyInterface(view.transform.mProps.p)\n        },\n        anchorPoint: {\n          get: ExpressionPropertyInterface(view.transform.mProps.a)\n        },\n        scale: {\n          get: ExpressionPropertyInterface(view.transform.mProps.s)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(view.transform.mProps.r)\n        },\n        skew: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sk)\n        },\n        skewAxis: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sa)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.ty = 'tr';\n      interfaceFunction.mn = shape.mn;\n      interfaceFunction.propertyGroup = propertyGroup;\n      return interfaceFunction;\n    }\n    function ellipseInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.s.ix === value) {\n          return interfaceFunction.size;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaceFunction.propertyIndex = shape.ix;\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function starInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value) {\n          return interfaceFunction.rotation;\n        }\n        if (shape.pt.ix === value) {\n          return interfaceFunction.points;\n        }\n        if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\n          return interfaceFunction.outerRadius;\n        }\n        if (shape.os.ix === value) {\n          return interfaceFunction.outerRoundness;\n        }\n        if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\n          return interfaceFunction.innerRadius;\n        }\n        if (shape.is && shape.is.ix === value) {\n          return interfaceFunction.innerRoundness;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\n      prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\n      prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      if (shape.ir) {\n        prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\n        prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\n      }\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        points: {\n          get: ExpressionPropertyInterface(prop.pt)\n        },\n        outerRadius: {\n          get: ExpressionPropertyInterface(prop.or)\n        },\n        outerRoundness: {\n          get: ExpressionPropertyInterface(prop.os)\n        },\n        innerRadius: {\n          get: ExpressionPropertyInterface(prop.ir)\n        },\n        innerRoundness: {\n          get: ExpressionPropertyInterface(prop.is)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function rectInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n        if (shape.r.ix === value) {\n          return interfaceFunction.roundness;\n        }\n        if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\n          return interfaceFunction.size;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        roundness: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function roundedInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.r.ix === value || value === 'Round Corners 1') {\n          return interfaceFunction.radius;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        radius: {\n          get: ExpressionPropertyInterface(prop.rd)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    function repeaterInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.c.ix === value || value === 'Copies') {\n          return interfaceFunction.copies;\n        }\n        if (shape.o.ix === value || value === 'Offset') {\n          return interfaceFunction.offset;\n        }\n        return null;\n      }\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\n      prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        copies: {\n          get: ExpressionPropertyInterface(prop.c)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(prop.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n    return function (shapes, view, propertyGroup) {\n      var interfaces;\n      function _interfaceFunction(value) {\n        if (typeof value === 'number') {\n          value = value === undefined ? 1 : value;\n          if (value === 0) {\n            return propertyGroup;\n          }\n          return interfaces[value - 1];\n        }\n        var i = 0;\n        var len = interfaces.length;\n        while (i < len) {\n          if (interfaces[i]._name === value) {\n            return interfaces[i];\n          }\n          i += 1;\n        }\n        return null;\n      }\n      function parentGroupWrapper() {\n        return propertyGroup;\n      }\n      _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\n      interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\n      _interfaceFunction.numProperties = interfaces.length;\n      _interfaceFunction._name = 'Contents';\n      return _interfaceFunction;\n    };\n  }();\n  const TextExpressionInterface = function () {\n    return function (elem) {\n      var _prevValue;\n      var _sourceText;\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Text Document':\n            return _thisLayerFunction.sourceText;\n          default:\n            return null;\n        }\n      }\n      Object.defineProperty(_thisLayerFunction, 'sourceText', {\n        get: function () {\n          elem.textProperty.getValue();\n          var stringValue = elem.textProperty.currentData.t;\n          if (stringValue !== _prevValue) {\n            elem.textProperty.currentData.t = _prevValue;\n            _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\n            // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\n            _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\n          }\n          return _sourceText;\n        }\n      });\n      return _thisLayerFunction;\n    };\n  }();\n  const getBlendMode = function () {\n    var blendModeEnums = {\n      0: 'source-over',\n      1: 'multiply',\n      2: 'screen',\n      3: 'overlay',\n      4: 'darken',\n      5: 'lighten',\n      6: 'color-dodge',\n      7: 'color-burn',\n      8: 'hard-light',\n      9: 'soft-light',\n      10: 'difference',\n      11: 'exclusion',\n      12: 'hue',\n      13: 'saturation',\n      14: 'color',\n      15: 'luminosity'\n    };\n    return function (mode) {\n      return blendModeEnums[mode] || '';\n    };\n  }();\n  function SliderEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function AngleEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function ColorEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n  function PointEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n  function LayerIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function MaskIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function CheckboxEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n  function NoValueEffect() {\n    this.p = {};\n  }\n  function EffectsManager(data, element) {\n    var effects = data.ef || [];\n    this.effectElements = [];\n    var i;\n    var len = effects.length;\n    var effectItem;\n    for (i = 0; i < len; i += 1) {\n      effectItem = new GroupEffect(effects[i], element);\n      this.effectElements.push(effectItem);\n    }\n  }\n  function GroupEffect(data, element) {\n    this.init(data, element);\n  }\n  extendPrototype([DynamicPropertyContainer], GroupEffect);\n  GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\n  GroupEffect.prototype.init = function (data, element) {\n    this.data = data;\n    this.effectElements = [];\n    this.initDynamicPropertyContainer(element);\n    var i;\n    var len = this.data.ef.length;\n    var eff;\n    var effects = this.data.ef;\n    for (i = 0; i < len; i += 1) {\n      eff = null;\n      switch (effects[i].ty) {\n        case 0:\n          eff = new SliderEffect(effects[i], element, this);\n          break;\n        case 1:\n          eff = new AngleEffect(effects[i], element, this);\n          break;\n        case 2:\n          eff = new ColorEffect(effects[i], element, this);\n          break;\n        case 3:\n          eff = new PointEffect(effects[i], element, this);\n          break;\n        case 4:\n        case 7:\n          eff = new CheckboxEffect(effects[i], element, this);\n          break;\n        case 10:\n          eff = new LayerIndexEffect(effects[i], element, this);\n          break;\n        case 11:\n          eff = new MaskIndexEffect(effects[i], element, this);\n          break;\n        case 5:\n          eff = new EffectsManager(effects[i], element, this);\n          break;\n        // case 6:\n        default:\n          eff = new NoValueEffect(effects[i], element, this);\n          break;\n      }\n      if (eff) {\n        this.effectElements.push(eff);\n      }\n    }\n  };\n  function BaseElement() {}\n  BaseElement.prototype = {\n    checkMasks: function () {\n      if (!this.data.hasMask) {\n        return false;\n      }\n      var i = 0;\n      var len = this.data.masksProperties.length;\n      while (i < len) {\n        if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\n          return true;\n        }\n        i += 1;\n      }\n      return false;\n    },\n    initExpressions: function () {\n      this.layerInterface = LayerExpressionInterface(this);\n      if (this.data.hasMask && this.maskManager) {\n        this.layerInterface.registerMaskInterface(this.maskManager);\n      }\n      var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\n      this.layerInterface.registerEffectsInterface(effectsInterface);\n      if (this.data.ty === 0 || this.data.xt) {\n        this.compInterface = CompExpressionInterface(this);\n      } else if (this.data.ty === 4) {\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\n        this.layerInterface.content = this.layerInterface.shapeInterface;\n      } else if (this.data.ty === 5) {\n        this.layerInterface.textInterface = TextExpressionInterface(this);\n        this.layerInterface.text = this.layerInterface.textInterface;\n      }\n    },\n    setBlendMode: function () {\n      var blendModeValue = getBlendMode(this.data.bm);\n      var elem = this.baseElement || this.layerElement;\n      elem.style['mix-blend-mode'] = blendModeValue;\n    },\n    initBaseData: function (data, globalData, comp) {\n      this.globalData = globalData;\n      this.comp = comp;\n      this.data = data;\n      this.layerId = createElementID();\n\n      // Stretch factor for old animations missing this property.\n      if (!this.data.sr) {\n        this.data.sr = 1;\n      }\n      // effects manager\n      this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\n    },\n    getType: function () {\n      return this.type;\n    },\n    sourceRectAtTime: function () {}\n  };\n\n  /**\n   * @file\n   * Handles element's layer frame update.\n   * Checks layer in point and out point\n   *\n   */\n\n  function FrameElement() {}\n  FrameElement.prototype = {\n    /**\n       * @function\n       * Initializes frame related properties.\n       *\n       */\n    initFrame: function () {\n      // set to true when inpoint is rendered\n      this._isFirstFrame = false;\n      // list of animated properties\n      this.dynamicProperties = [];\n      // If layer has been modified in current tick this will be true\n      this._mdf = false;\n    },\n    /**\n       * @function\n       * Calculates all dynamic values\n       *\n       * @param {number} num\n       * current frame number in Layer's time\n       * @param {boolean} isVisible\n       * if layers is currently in range\n       *\n       */\n    prepareProperties: function (num, isVisible) {\n      var i;\n      var len = this.dynamicProperties.length;\n      for (i = 0; i < len; i += 1) {\n        if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\n          this.dynamicProperties[i].getValue();\n          if (this.dynamicProperties[i]._mdf) {\n            this.globalData._mdf = true;\n            this._mdf = true;\n          }\n        }\n      }\n    },\n    addDynamicProperty: function (prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n      }\n    }\n  };\n  const FootageInterface = function () {\n    var outlineInterfaceFactory = function (elem) {\n      var currentPropertyName = '';\n      var currentProperty = elem.getFootageData();\n      function init() {\n        currentPropertyName = '';\n        currentProperty = elem.getFootageData();\n        return searchProperty;\n      }\n      function searchProperty(value) {\n        if (currentProperty[value]) {\n          currentPropertyName = value;\n          currentProperty = currentProperty[value];\n          if (typeof currentProperty === 'object') {\n            return searchProperty;\n          }\n          return currentProperty;\n        }\n        var propertyNameIndex = value.indexOf(currentPropertyName);\n        if (propertyNameIndex !== -1) {\n          var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\n          currentProperty = currentProperty[index];\n          if (typeof currentProperty === 'object') {\n            return searchProperty;\n          }\n          return currentProperty;\n        }\n        return '';\n      }\n      return init;\n    };\n    var dataInterfaceFactory = function (elem) {\n      function interfaceFunction(value) {\n        if (value === 'Outline') {\n          return interfaceFunction.outlineInterface();\n        }\n        return null;\n      }\n      interfaceFunction._name = 'Outline';\n      interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\n      return interfaceFunction;\n    };\n    return function (elem) {\n      function _interfaceFunction(value) {\n        if (value === 'Data') {\n          return _interfaceFunction.dataInterface;\n        }\n        return null;\n      }\n      _interfaceFunction._name = 'Data';\n      _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\n      return _interfaceFunction;\n    };\n  }();\n  function FootageElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.footageData = globalData.imageLoader.getAsset(this.assetData);\n    this.initBaseData(data, globalData, comp);\n  }\n  FootageElement.prototype.prepareFrame = function () {};\n  extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\n  FootageElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  FootageElement.prototype.renderFrame = function () {};\n  FootageElement.prototype.destroy = function () {};\n  FootageElement.prototype.initExpressions = function () {\n    this.layerInterface = FootageInterface(this);\n  };\n  FootageElement.prototype.getFootageData = function () {\n    return this.footageData;\n  };\n  function AudioElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initBaseData(data, globalData, comp);\n    this._isPlaying = false;\n    this._canPlay = false;\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.audio = this.globalData.audioController.createAudio(assetPath);\n    this._currentTime = 0;\n    this.globalData.audioController.addAudio(this);\n    this._volumeMultiplier = 1;\n    this._volume = 1;\n    this._previousVolume = null;\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n    this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : {\n      k: [100]\n    }, 1, 0.01, this);\n  }\n  AudioElement.prototype.prepareFrame = function (num) {\n    this.prepareRenderableFrame(num, true);\n    this.prepareProperties(num, true);\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n      this._currentTime = timeRemapped;\n    } else {\n      this._currentTime = num / this.data.sr;\n    }\n    this._volume = this.lv.v[0];\n    var totalVolume = this._volume * this._volumeMultiplier;\n    if (this._previousVolume !== totalVolume) {\n      this._previousVolume = totalVolume;\n      this.audio.volume(totalVolume);\n    }\n  };\n  extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\n  AudioElement.prototype.renderFrame = function () {\n    if (this.isInRange && this._canPlay) {\n      if (!this._isPlaying) {\n        this.audio.play();\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n        this._isPlaying = true;\n      } else if (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1) {\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n      }\n    }\n  };\n  AudioElement.prototype.show = function () {\n    // this.audio.play()\n  };\n  AudioElement.prototype.hide = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n  };\n  AudioElement.prototype.pause = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n    this._canPlay = false;\n  };\n  AudioElement.prototype.resume = function () {\n    this._canPlay = true;\n  };\n  AudioElement.prototype.setRate = function (rateValue) {\n    this.audio.rate(rateValue);\n  };\n  AudioElement.prototype.volume = function (volumeValue) {\n    this._volumeMultiplier = volumeValue;\n    this._previousVolume = volumeValue * this._volume;\n    this.audio.volume(this._previousVolume);\n  };\n  AudioElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  AudioElement.prototype.destroy = function () {};\n  AudioElement.prototype.sourceRectAtTime = function () {};\n  AudioElement.prototype.initExpressions = function () {};\n  function BaseRenderer() {}\n  BaseRenderer.prototype.checkLayers = function (num) {\n    var i;\n    var len = this.layers.length;\n    var data;\n    this.completeLayers = true;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (!this.elements[i]) {\n        data = this.layers[i];\n        if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\n          this.buildItem(i);\n        }\n      }\n      this.completeLayers = this.elements[i] ? this.completeLayers : false;\n    }\n    this.checkPendingElements();\n  };\n  BaseRenderer.prototype.createItem = function (layer) {\n    switch (layer.ty) {\n      case 2:\n        return this.createImage(layer);\n      case 0:\n        return this.createComp(layer);\n      case 1:\n        return this.createSolid(layer);\n      case 3:\n        return this.createNull(layer);\n      case 4:\n        return this.createShape(layer);\n      case 5:\n        return this.createText(layer);\n      case 6:\n        return this.createAudio(layer);\n      case 13:\n        return this.createCamera(layer);\n      case 15:\n        return this.createFootage(layer);\n      default:\n        return this.createNull(layer);\n    }\n  };\n  BaseRenderer.prototype.createCamera = function () {\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\n  };\n  BaseRenderer.prototype.createAudio = function (data) {\n    return new AudioElement(data, this.globalData, this);\n  };\n  BaseRenderer.prototype.createFootage = function (data) {\n    return new FootageElement(data, this.globalData, this);\n  };\n  BaseRenderer.prototype.buildAllItems = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      this.buildItem(i);\n    }\n    this.checkPendingElements();\n  };\n  BaseRenderer.prototype.includeLayers = function (newLayers) {\n    this.completeLayers = false;\n    var i;\n    var len = newLayers.length;\n    var j;\n    var jLen = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      j = 0;\n      while (j < jLen) {\n        if (this.layers[j].id === newLayers[i].id) {\n          this.layers[j] = newLayers[i];\n          break;\n        }\n        j += 1;\n      }\n    }\n  };\n  BaseRenderer.prototype.setProjectInterface = function (pInterface) {\n    this.globalData.projectInterface = pInterface;\n  };\n  BaseRenderer.prototype.initItems = function () {\n    if (!this.globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n  };\n  BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\n    var elements = this.elements;\n    var layers = this.layers;\n    var i = 0;\n    var len = layers.length;\n    while (i < len) {\n      if (layers[i].ind == parentName) {\n        // eslint-disable-line eqeqeq\n        if (!elements[i] || elements[i] === true) {\n          this.buildItem(i);\n          this.addPendingElement(element);\n        } else {\n          hierarchy.push(elements[i]);\n          elements[i].setAsParent();\n          if (layers[i].parent !== undefined) {\n            this.buildElementParenting(element, layers[i].parent, hierarchy);\n          } else {\n            element.setHierarchy(hierarchy);\n          }\n        }\n      }\n      i += 1;\n    }\n  };\n  BaseRenderer.prototype.addPendingElement = function (element) {\n    this.pendingElements.push(element);\n  };\n  BaseRenderer.prototype.searchExtraCompositions = function (assets) {\n    var i;\n    var len = assets.length;\n    for (i = 0; i < len; i += 1) {\n      if (assets[i].xt) {\n        var comp = this.createComp(assets[i]);\n        comp.initExpressions();\n        this.globalData.projectInterface.registerComposition(comp);\n      }\n    }\n  };\n  BaseRenderer.prototype.getElementByPath = function (path) {\n    var pathValue = path.shift();\n    var element;\n    if (typeof pathValue === 'number') {\n      element = this.elements[pathValue];\n    } else {\n      var i;\n      var len = this.elements.length;\n      for (i = 0; i < len; i += 1) {\n        if (this.elements[i].data.nm === pathValue) {\n          element = this.elements[i];\n          break;\n        }\n      }\n    }\n    if (path.length === 0) {\n      return element;\n    }\n    return element.getElementByPath(path);\n  };\n  BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\n    this.globalData.fontManager = new FontManager();\n    this.globalData.fontManager.addChars(animData.chars);\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\n    this.globalData.audioController = this.animationItem.audioController;\n    this.globalData.frameId = 0;\n    this.globalData.frameRate = animData.fr;\n    this.globalData.nm = animData.nm;\n    this.globalData.compSize = {\n      w: animData.w,\n      h: animData.h\n    };\n  };\n  function TransformElement() {}\n  TransformElement.prototype = {\n    initTransform: function () {\n      this.finalTransform = {\n        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\n          o: 0\n        },\n        _matMdf: false,\n        _opMdf: false,\n        mat: new Matrix()\n      };\n      if (this.data.ao) {\n        this.finalTransform.mProp.autoOriented = true;\n      }\n\n      // TODO: check TYPE 11: Guided elements\n      if (this.data.ty !== 11) {\n        // this.createElements();\n      }\n    },\n    renderTransform: function () {\n      this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\n      this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\n      if (this.hierarchy) {\n        var mat;\n        var finalMat = this.finalTransform.mat;\n        var i = 0;\n        var len = this.hierarchy.length;\n        // Checking if any of the transformation matrices in the hierarchy chain has changed.\n        if (!this.finalTransform._matMdf) {\n          while (i < len) {\n            if (this.hierarchy[i].finalTransform.mProp._mdf) {\n              this.finalTransform._matMdf = true;\n              break;\n            }\n            i += 1;\n          }\n        }\n        if (this.finalTransform._matMdf) {\n          mat = this.finalTransform.mProp.v.props;\n          finalMat.cloneFromProps(mat);\n          for (i = 0; i < len; i += 1) {\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\n            finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\n          }\n        }\n      }\n    },\n    globalToLocal: function (pt) {\n      var transforms = [];\n      transforms.push(this.finalTransform);\n      var flag = true;\n      var comp = this.comp;\n      while (flag) {\n        if (comp.finalTransform) {\n          if (comp.data.hasMask) {\n            transforms.splice(0, 0, comp.finalTransform);\n          }\n          comp = comp.comp;\n        } else {\n          flag = false;\n        }\n      }\n      var i;\n      var len = transforms.length;\n      var ptNew;\n      for (i = 0; i < len; i += 1) {\n        ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\n        // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\n        pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\n      }\n      return pt;\n    },\n    mHelper: new Matrix()\n  };\n  function MaskElement(data, element, globalData) {\n    this.data = data;\n    this.element = element;\n    this.globalData = globalData;\n    this.storedData = [];\n    this.masksProperties = this.data.masksProperties || [];\n    this.maskElement = null;\n    var defs = this.globalData.defs;\n    var i;\n    var len = this.masksProperties ? this.masksProperties.length : 0;\n    this.viewData = createSizedArray(len);\n    this.solidPath = '';\n    var path;\n    var properties = this.masksProperties;\n    var count = 0;\n    var currentMasks = [];\n    var j;\n    var jLen;\n    var layerId = createElementID();\n    var rect;\n    var expansor;\n    var feMorph;\n    var x;\n    var maskType = 'clipPath';\n    var maskRef = 'clip-path';\n    for (i = 0; i < len; i += 1) {\n      if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\n        maskType = 'mask';\n        maskRef = 'mask';\n      }\n      if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\n        rect = createNS('rect');\n        rect.setAttribute('fill', '#ffffff');\n        rect.setAttribute('width', this.element.comp.data.w || 0);\n        rect.setAttribute('height', this.element.comp.data.h || 0);\n        currentMasks.push(rect);\n      } else {\n        rect = null;\n      }\n      path = createNS('path');\n      if (properties[i].mode === 'n') {\n        // TODO move this to a factory or to a constructor\n        this.viewData[i] = {\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          elem: path,\n          lastPath: ''\n        };\n        defs.appendChild(path);\n      } else {\n        count += 1;\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        path.setAttribute('clip-rule', 'nonzero');\n        var filterID;\n        if (properties[i].x.k !== 0) {\n          maskType = 'mask';\n          maskRef = 'mask';\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\n          filterID = createElementID();\n          expansor = createNS('filter');\n          expansor.setAttribute('id', filterID);\n          feMorph = createNS('feMorphology');\n          feMorph.setAttribute('operator', 'erode');\n          feMorph.setAttribute('in', 'SourceGraphic');\n          feMorph.setAttribute('radius', '0');\n          expansor.appendChild(feMorph);\n          defs.appendChild(expansor);\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        } else {\n          feMorph = null;\n          x = null;\n        }\n\n        // TODO move this to a factory or to a constructor\n        this.storedData[i] = {\n          elem: path,\n          x: x,\n          expan: feMorph,\n          lastPath: '',\n          lastOperator: '',\n          filterId: filterID,\n          lastRadius: 0\n        };\n        if (properties[i].mode === 'i') {\n          jLen = currentMasks.length;\n          var g = createNS('g');\n          for (j = 0; j < jLen; j += 1) {\n            g.appendChild(currentMasks[j]);\n          }\n          var mask = createNS('mask');\n          mask.setAttribute('mask-type', 'alpha');\n          mask.setAttribute('id', layerId + '_' + count);\n          mask.appendChild(path);\n          defs.appendChild(mask);\n          g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\n          currentMasks.length = 0;\n          currentMasks.push(g);\n        } else {\n          currentMasks.push(path);\n        }\n        if (properties[i].inv && !this.solidPath) {\n          this.solidPath = this.createLayerSolidPath();\n        }\n        // TODO move this to a factory or to a constructor\n        this.viewData[i] = {\n          elem: path,\n          lastPath: '',\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          invRect: rect\n        };\n        if (!this.viewData[i].prop.k) {\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\n        }\n      }\n    }\n    this.maskElement = createNS(maskType);\n    len = currentMasks.length;\n    for (i = 0; i < len; i += 1) {\n      this.maskElement.appendChild(currentMasks[i]);\n    }\n    if (count > 0) {\n      this.maskElement.setAttribute('id', layerId);\n      this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\n      defs.appendChild(this.maskElement);\n    }\n    if (this.viewData.length) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n  MaskElement.prototype.getMaskProperty = function (pos) {\n    return this.viewData[pos].prop;\n  };\n  MaskElement.prototype.renderFrame = function (isFirstFrame) {\n    var finalMat = this.element.finalTransform.mat;\n    var i;\n    var len = this.masksProperties.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.viewData[i].prop._mdf || isFirstFrame) {\n        this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\n      }\n      if (this.viewData[i].op._mdf || isFirstFrame) {\n        this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\n      }\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\n          this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\n        }\n        if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\n          var feMorph = this.storedData[i].expan;\n          if (this.storedData[i].x.v < 0) {\n            if (this.storedData[i].lastOperator !== 'erode') {\n              this.storedData[i].lastOperator = 'erode';\n              this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\n            }\n            feMorph.setAttribute('radius', -this.storedData[i].x.v);\n          } else {\n            if (this.storedData[i].lastOperator !== 'dilate') {\n              this.storedData[i].lastOperator = 'dilate';\n              this.storedData[i].elem.setAttribute('filter', null);\n            }\n            this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\n          }\n        }\n      }\n    }\n  };\n  MaskElement.prototype.getMaskelement = function () {\n    return this.maskElement;\n  };\n  MaskElement.prototype.createLayerSolidPath = function () {\n    var path = 'M0,0 ';\n    path += ' h' + this.globalData.compSize.w;\n    path += ' v' + this.globalData.compSize.h;\n    path += ' h-' + this.globalData.compSize.w;\n    path += ' v-' + this.globalData.compSize.h + ' ';\n    return path;\n  };\n  MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\n    var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    var i;\n    var len;\n    len = pathNodes._length;\n    for (i = 1; i < len; i += 1) {\n      // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\n    }\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\n    if (pathNodes.c && len > 1) {\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    }\n    // pathNodes.__renderedString = pathString;\n\n    if (viewData.lastPath !== pathString) {\n      var pathShapeValue = '';\n      if (viewData.elem) {\n        if (pathNodes.c) {\n          pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\n        }\n        viewData.elem.setAttribute('d', pathShapeValue);\n      }\n      viewData.lastPath = pathString;\n    }\n  };\n  MaskElement.prototype.destroy = function () {\n    this.element = null;\n    this.globalData = null;\n    this.maskElement = null;\n    this.data = null;\n    this.masksProperties = null;\n  };\n  const filtersFactory = function () {\n    var ob = {};\n    ob.createFilter = createFilter;\n    ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\n    function createFilter(filId, skipCoordinates) {\n      var fil = createNS('filter');\n      fil.setAttribute('id', filId);\n      if (skipCoordinates !== true) {\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\n        fil.setAttribute('x', '0%');\n        fil.setAttribute('y', '0%');\n        fil.setAttribute('width', '100%');\n        fil.setAttribute('height', '100%');\n      }\n      return fil;\n    }\n    function createAlphaToLuminanceFilter() {\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n      feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\n      return feColorMatrix;\n    }\n    return ob;\n  }();\n  const featureSupport = function () {\n    var ob = {\n      maskType: true\n    };\n    if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\n      ob.maskType = false;\n    }\n    return ob;\n  }();\n  var registeredEffects = {};\n  var idPrefix = 'filter_result_';\n  function SVGEffects(elem) {\n    var i;\n    var source = 'SourceGraphic';\n    var len = elem.data.ef ? elem.data.ef.length : 0;\n    var filId = createElementID();\n    var fil = filtersFactory.createFilter(filId, true);\n    var count = 0;\n    this.filters = [];\n    var filterManager;\n    for (i = 0; i < len; i += 1) {\n      filterManager = null;\n      var type = elem.data.ef[i].ty;\n      if (registeredEffects[type]) {\n        var Effect = registeredEffects[type].effect;\n        filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\n        source = idPrefix + count;\n        if (registeredEffects[type].countsAsEffect) {\n          count += 1;\n        }\n      }\n      if (filterManager) {\n        this.filters.push(filterManager);\n      }\n    }\n    if (count) {\n      elem.globalData.defs.appendChild(fil);\n      elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n    }\n    if (this.filters.length) {\n      elem.addRenderableComponent(this);\n    }\n  }\n  SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\n    var i;\n    var len = this.filters.length;\n    for (i = 0; i < len; i += 1) {\n      this.filters[i].renderFrame(_isFirstFrame);\n    }\n  };\n  function registerEffect(id, effect, countsAsEffect) {\n    registeredEffects[id] = {\n      effect,\n      countsAsEffect\n    };\n  }\n  function SVGBaseElement() {}\n  SVGBaseElement.prototype = {\n    initRendererElement: function () {\n      this.layerElement = createNS('g');\n    },\n    createContainerElements: function () {\n      this.matteElement = createNS('g');\n      this.transformedElement = this.layerElement;\n      this.maskedElement = this.layerElement;\n      this._sizeChanged = false;\n      var layerElementParent = null;\n      // If this layer acts as a mask for the following layer\n      var filId;\n      var fil;\n      var gg;\n      if (this.data.td) {\n        if (this.data.td == 3 || this.data.td == 1) {\n          // eslint-disable-line eqeqeq\n          var masker = createNS('mask');\n          masker.setAttribute('id', this.layerId);\n          masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha'); // eslint-disable-line eqeqeq\n          masker.appendChild(this.layerElement);\n          layerElementParent = masker;\n          this.globalData.defs.appendChild(masker);\n          // This is only for IE and Edge when mask if of type alpha\n          if (!featureSupport.maskType && this.data.td == 1) {\n            // eslint-disable-line eqeqeq\n            masker.setAttribute('mask-type', 'luminance');\n            filId = createElementID();\n            fil = filtersFactory.createFilter(filId);\n            this.globalData.defs.appendChild(fil);\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            gg.appendChild(this.layerElement);\n            layerElementParent = gg;\n            masker.appendChild(gg);\n            gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          }\n        } else if (this.data.td == 2) {\n          // eslint-disable-line eqeqeq\n          var maskGroup = createNS('mask');\n          maskGroup.setAttribute('id', this.layerId);\n          maskGroup.setAttribute('mask-type', 'alpha');\n          var maskGrouper = createNS('g');\n          maskGroup.appendChild(maskGrouper);\n          filId = createElementID();\n          fil = filtersFactory.createFilter(filId);\n          /// /\n\n          // This solution doesn't work on Android when meta tag with viewport attribute is set\n          /* var feColorMatrix = createNS('feColorMatrix');\n                  feColorMatrix.setAttribute('type', 'matrix');\n                  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n                  feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\n                  fil.appendChild(feColorMatrix); */\n          /// /\n          var feCTr = createNS('feComponentTransfer');\n          feCTr.setAttribute('in', 'SourceGraphic');\n          fil.appendChild(feCTr);\n          var feFunc = createNS('feFuncA');\n          feFunc.setAttribute('type', 'table');\n          feFunc.setAttribute('tableValues', '1.0 0.0');\n          feCTr.appendChild(feFunc);\n          /// /\n          this.globalData.defs.appendChild(fil);\n          var alphaRect = createNS('rect');\n          alphaRect.setAttribute('width', this.comp.data.w);\n          alphaRect.setAttribute('height', this.comp.data.h);\n          alphaRect.setAttribute('x', '0');\n          alphaRect.setAttribute('y', '0');\n          alphaRect.setAttribute('fill', '#ffffff');\n          alphaRect.setAttribute('opacity', '0');\n          maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          maskGrouper.appendChild(alphaRect);\n          maskGrouper.appendChild(this.layerElement);\n          layerElementParent = maskGrouper;\n          if (!featureSupport.maskType) {\n            maskGroup.setAttribute('mask-type', 'luminance');\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            maskGrouper.appendChild(alphaRect);\n            gg.appendChild(this.layerElement);\n            layerElementParent = gg;\n            maskGrouper.appendChild(gg);\n          }\n          this.globalData.defs.appendChild(maskGroup);\n        }\n      } else if (this.data.tt) {\n        this.matteElement.appendChild(this.layerElement);\n        layerElementParent = this.matteElement;\n        this.baseElement = this.matteElement;\n      } else {\n        this.baseElement = this.layerElement;\n      }\n      if (this.data.ln) {\n        this.layerElement.setAttribute('id', this.data.ln);\n      }\n      if (this.data.cl) {\n        this.layerElement.setAttribute('class', this.data.cl);\n      }\n      // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\n      if (this.data.ty === 0 && !this.data.hd) {\n        var cp = createNS('clipPath');\n        var pt = createNS('path');\n        pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\n        var clipId = createElementID();\n        cp.setAttribute('id', clipId);\n        cp.appendChild(pt);\n        this.globalData.defs.appendChild(cp);\n        if (this.checkMasks()) {\n          var cpGroup = createNS('g');\n          cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n          cpGroup.appendChild(this.layerElement);\n          this.transformedElement = cpGroup;\n          if (layerElementParent) {\n            layerElementParent.appendChild(this.transformedElement);\n          } else {\n            this.baseElement = this.transformedElement;\n          }\n        } else {\n          this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n        }\n      }\n      if (this.data.bm !== 0) {\n        this.setBlendMode();\n      }\n    },\n    renderElement: function () {\n      if (this.finalTransform._matMdf) {\n        this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\n      }\n      if (this.finalTransform._opMdf) {\n        this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\n      }\n    },\n    destroyBaseElement: function () {\n      this.layerElement = null;\n      this.matteElement = null;\n      this.maskManager.destroy();\n    },\n    getBaseElement: function () {\n      if (this.data.hd) {\n        return null;\n      }\n      return this.baseElement;\n    },\n    createRenderableComponents: function () {\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\n      this.renderableEffectsManager = new SVGEffects(this);\n    },\n    setMatte: function (id) {\n      if (!this.matteElement) {\n        return;\n      }\n      this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n    }\n  };\n\n  /**\n   * @file\n   * Handles AE's layer parenting property.\n   *\n   */\n\n  function HierarchyElement() {}\n  HierarchyElement.prototype = {\n    /**\n       * @function\n       * Initializes hierarchy properties\n       *\n       */\n    initHierarchy: function () {\n      // element's parent list\n      this.hierarchy = [];\n      // if element is parent of another layer _isParent will be true\n      this._isParent = false;\n      this.checkParenting();\n    },\n    /**\n       * @function\n       * Sets layer's hierarchy.\n       * @param {array} hierarch\n       * layer's parent list\n       *\n       */\n    setHierarchy: function (hierarchy) {\n      this.hierarchy = hierarchy;\n    },\n    /**\n       * @function\n       * Sets layer as parent.\n       *\n       */\n    setAsParent: function () {\n      this._isParent = true;\n    },\n    /**\n       * @function\n       * Searches layer's parenting chain\n       *\n       */\n    checkParenting: function () {\n      if (this.data.parent !== undefined) {\n        this.comp.buildElementParenting(this, this.data.parent, []);\n      }\n    }\n  };\n  function RenderableDOMElement() {}\n  (function () {\n    var _prototype = {\n      initElement: function (data, globalData, comp) {\n        this.initFrame();\n        this.initBaseData(data, globalData, comp);\n        this.initTransform(data, globalData, comp);\n        this.initHierarchy();\n        this.initRenderable();\n        this.initRendererElement();\n        this.createContainerElements();\n        this.createRenderableComponents();\n        this.createContent();\n        this.hide();\n      },\n      hide: function () {\n        // console.log('HIDE', this);\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n          var elem = this.baseElement || this.layerElement;\n          elem.style.display = 'none';\n          this.hidden = true;\n        }\n      },\n      show: function () {\n        // console.log('SHOW', this);\n        if (this.isInRange && !this.isTransparent) {\n          if (!this.data.hd) {\n            var elem = this.baseElement || this.layerElement;\n            elem.style.display = 'block';\n          }\n          this.hidden = false;\n          this._isFirstFrame = true;\n        }\n      },\n      renderFrame: function () {\n        // If it is exported as hidden (data.hd === true) no need to render\n        // If it is not visible no need to render\n        if (this.data.hd || this.hidden) {\n          return;\n        }\n        this.renderTransform();\n        this.renderRenderable();\n        this.renderElement();\n        this.renderInnerContent();\n        if (this._isFirstFrame) {\n          this._isFirstFrame = false;\n        }\n      },\n      renderInnerContent: function () {},\n      prepareFrame: function (num) {\n        this._mdf = false;\n        this.prepareRenderableFrame(num);\n        this.prepareProperties(num, this.isInRange);\n        this.checkTransparency();\n      },\n      destroy: function () {\n        this.innerElem = null;\n        this.destroyBaseElement();\n      }\n    };\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\n  })();\n  function IImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initElement(data, globalData, comp);\n    this.sourceRect = {\n      top: 0,\n      left: 0,\n      width: this.assetData.w,\n      height: this.assetData.h\n    };\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\n  IImageElement.prototype.createContent = function () {\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.innerElem = createNS('image');\n    this.innerElem.setAttribute('width', this.assetData.w + 'px');\n    this.innerElem.setAttribute('height', this.assetData.h + 'px');\n    this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n    this.layerElement.appendChild(this.innerElem);\n  };\n  IImageElement.prototype.sourceRectAtTime = function () {\n    return this.sourceRect;\n  };\n  function ProcessedElement(element, position) {\n    this.elem = element;\n    this.pos = position;\n  }\n  function IShapeElement() {}\n  IShapeElement.prototype = {\n    addShapeToModifiers: function (data) {\n      var i;\n      var len = this.shapeModifiers.length;\n      for (i = 0; i < len; i += 1) {\n        this.shapeModifiers[i].addShape(data);\n      }\n    },\n    isShapeInAnimatedModifiers: function (data) {\n      var i = 0;\n      var len = this.shapeModifiers.length;\n      while (i < len) {\n        if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    renderModifiers: function () {\n      if (!this.shapeModifiers.length) {\n        return;\n      }\n      var i;\n      var len = this.shapes.length;\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].sh.reset();\n      }\n      len = this.shapeModifiers.length;\n      var shouldBreakProcess;\n      for (i = len - 1; i >= 0; i -= 1) {\n        shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\n        // workaround to fix cases where a repeater resets the shape so the following processes get called twice\n        // TODO: find a better solution for this\n        if (shouldBreakProcess) {\n          break;\n        }\n      }\n    },\n    searchProcessedElement: function (elem) {\n      var elements = this.processedElements;\n      var i = 0;\n      var len = elements.length;\n      while (i < len) {\n        if (elements[i].elem === elem) {\n          return elements[i].pos;\n        }\n        i += 1;\n      }\n      return 0;\n    },\n    addProcessedElement: function (elem, pos) {\n      var elements = this.processedElements;\n      var i = elements.length;\n      while (i) {\n        i -= 1;\n        if (elements[i].elem === elem) {\n          elements[i].pos = pos;\n          return;\n        }\n      }\n      elements.push(new ProcessedElement(elem, pos));\n    },\n    prepareFrame: function (num) {\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n    }\n  };\n  const lineCapEnum = {\n    1: 'butt',\n    2: 'round',\n    3: 'square'\n  };\n  const lineJoinEnum = {\n    1: 'miter',\n    2: 'round',\n    3: 'bevel'\n  };\n  function SVGShapeData(transformers, level, shape) {\n    this.caches = [];\n    this.styles = [];\n    this.transformers = transformers;\n    this.lStr = '';\n    this.sh = shape;\n    this.lvl = level;\n    // TODO find if there are some cases where _isAnimated can be false.\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\n    this._isAnimated = !!shape.k;\n    // TODO: commenting this for now since all shapes are animated\n    var i = 0;\n    var len = transformers.length;\n    while (i < len) {\n      if (transformers[i].mProps.dynamicProperties.length) {\n        this._isAnimated = true;\n        break;\n      }\n      i += 1;\n    }\n  }\n  SVGShapeData.prototype.setAsAnimated = function () {\n    this._isAnimated = true;\n  };\n  function SVGStyleData(data, level) {\n    this.data = data;\n    this.type = data.ty;\n    this.d = '';\n    this.lvl = level;\n    this._mdf = false;\n    this.closed = data.hd === true;\n    this.pElem = createNS('path');\n    this.msElem = null;\n  }\n  SVGStyleData.prototype.reset = function () {\n    this.d = '';\n    this._mdf = false;\n  };\n  function DashProperty(elem, data, renderer, container) {\n    this.elem = elem;\n    this.frameId = -1;\n    this.dataProps = createSizedArray(data.length);\n    this.renderer = renderer;\n    this.k = false;\n    this.dashStr = '';\n    this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\n    this.dashoffset = createTypedArray('float32', 1);\n    this.initDynamicPropertyContainer(container);\n    var i;\n    var len = data.length || 0;\n    var prop;\n    for (i = 0; i < len; i += 1) {\n      prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\n      this.k = prop.k || this.k;\n      this.dataProps[i] = {\n        n: data[i].n,\n        p: prop\n      };\n    }\n    if (!this.k) {\n      this.getValue(true);\n    }\n    this._isAnimated = this.k;\n  }\n  DashProperty.prototype.getValue = function (forceRender) {\n    if (this.elem.globalData.frameId === this.frameId && !forceRender) {\n      return;\n    }\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n    this._mdf = this._mdf || forceRender;\n    if (this._mdf) {\n      var i = 0;\n      var len = this.dataProps.length;\n      if (this.renderer === 'svg') {\n        this.dashStr = '';\n      }\n      for (i = 0; i < len; i += 1) {\n        if (this.dataProps[i].n !== 'o') {\n          if (this.renderer === 'svg') {\n            this.dashStr += ' ' + this.dataProps[i].p.v;\n          } else {\n            this.dashArray[i] = this.dataProps[i].p.v;\n          }\n        } else {\n          this.dashoffset[0] = this.dataProps[i].p.v;\n        }\n      }\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], DashProperty);\n  function SVGStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n    this._isAnimated = !!this._isAnimated;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n  function SVGFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n  function SVGNoStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.style = styleOb;\n  }\n  extendPrototype([DynamicPropertyContainer], SVGNoStyleData);\n  function GradientProperty(elem, data, container) {\n    this.data = data;\n    this.c = createTypedArray('uint8c', data.p * 4);\n    var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\n    this.o = createTypedArray('float32', cLength);\n    this._cmdf = false;\n    this._omdf = false;\n    this._collapsable = this.checkCollapsable();\n    this._hasOpacity = cLength;\n    this.initDynamicPropertyContainer(container);\n    this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\n    this.k = this.prop.k;\n    this.getValue(true);\n  }\n  GradientProperty.prototype.comparePoints = function (values, points) {\n    var i = 0;\n    var len = this.o.length / 2;\n    var diff;\n    while (i < len) {\n      diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\n      if (diff > 0.01) {\n        return false;\n      }\n      i += 1;\n    }\n    return true;\n  };\n  GradientProperty.prototype.checkCollapsable = function () {\n    if (this.o.length / 2 !== this.c.length / 4) {\n      return false;\n    }\n    if (this.data.k.k[0].s) {\n      var i = 0;\n      var len = this.data.k.k.length;\n      while (i < len) {\n        if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\n          return false;\n        }\n        i += 1;\n      }\n    } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\n      return false;\n    }\n    return true;\n  };\n  GradientProperty.prototype.getValue = function (forceRender) {\n    this.prop.getValue();\n    this._mdf = false;\n    this._cmdf = false;\n    this._omdf = false;\n    if (this.prop._mdf || forceRender) {\n      var i;\n      var len = this.data.p * 4;\n      var mult;\n      var val;\n      for (i = 0; i < len; i += 1) {\n        mult = i % 4 === 0 ? 100 : 255;\n        val = Math.round(this.prop.v[i] * mult);\n        if (this.c[i] !== val) {\n          this.c[i] = val;\n          this._cmdf = !forceRender;\n        }\n      }\n      if (this.o.length) {\n        len = this.prop.v.length;\n        for (i = this.data.p * 4; i < len; i += 1) {\n          mult = i % 2 === 0 ? 100 : 1;\n          val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\n          if (this.o[i - this.data.p * 4] !== val) {\n            this.o[i - this.data.p * 4] = val;\n            this._omdf = !forceRender;\n          }\n        }\n      }\n      this._mdf = !forceRender;\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], GradientProperty);\n  function SVGGradientFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.initGradientData(elem, data, styleOb);\n  }\n  SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\n    this.h = PropertyFactory.getProp(elem, data.h || {\n      k: 0\n    }, 0, 0.01, this);\n    this.a = PropertyFactory.getProp(elem, data.a || {\n      k: 0\n    }, 0, degToRads, this);\n    this.g = new GradientProperty(elem, data.g, this);\n    this.style = styleOb;\n    this.stops = [];\n    this.setGradientData(styleOb.pElem, data);\n    this.setGradientOpacity(data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  };\n  SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\n    var gradientId = createElementID();\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n    gfill.setAttribute('id', gradientId);\n    gfill.setAttribute('spreadMethod', 'pad');\n    gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\n    var stops = [];\n    var stop;\n    var j;\n    var jLen;\n    jLen = data.g.p * 4;\n    for (j = 0; j < jLen; j += 4) {\n      stop = createNS('stop');\n      gfill.appendChild(stop);\n      stops.push(stop);\n    }\n    pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\n    this.gf = gfill;\n    this.cst = stops;\n  };\n  SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\n    if (this.g._hasOpacity && !this.g._collapsable) {\n      var stop;\n      var j;\n      var jLen;\n      var mask = createNS('mask');\n      var maskElement = createNS('path');\n      mask.appendChild(maskElement);\n      var opacityId = createElementID();\n      var maskId = createElementID();\n      mask.setAttribute('id', maskId);\n      var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n      opFill.setAttribute('id', opacityId);\n      opFill.setAttribute('spreadMethod', 'pad');\n      opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\n      jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\n      var stops = this.stops;\n      for (j = data.g.p * 4; j < jLen; j += 2) {\n        stop = createNS('stop');\n        stop.setAttribute('stop-color', 'rgb(255,255,255)');\n        opFill.appendChild(stop);\n        stops.push(stop);\n      }\n      maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\n      if (data.ty === 'gs') {\n        maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n        maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n        if (data.lj === 1) {\n          maskElement.setAttribute('stroke-miterlimit', data.ml);\n        }\n      }\n      this.of = opFill;\n      this.ms = mask;\n      this.ost = stops;\n      this.maskId = maskId;\n      styleOb.msElem = maskElement;\n    }\n  };\n  extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n  function SVGGradientStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.initGradientData(elem, data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  }\n  extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n  function ShapeGroupData() {\n    this.it = [];\n    this.prevViewData = [];\n    this.gr = createNS('g');\n  }\n  function SVGTransformData(mProps, op, container) {\n    this.transform = {\n      mProps: mProps,\n      op: op,\n      container: container\n    };\n    this.elements = [];\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\n  }\n  const buildShapeString = function (pathNodes, length, closed, mat) {\n    if (length === 0) {\n      return '';\n    }\n    var _o = pathNodes.o;\n    var _i = pathNodes.i;\n    var _v = pathNodes.v;\n    var i;\n    var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n    for (i = 1; i < length; i += 1) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\n    }\n    if (closed && length) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n      shapeString += 'z';\n    }\n    return shapeString;\n  };\n  const SVGElementsRenderer = function () {\n    var _identityMatrix = new Matrix();\n    var _matrixHelper = new Matrix();\n    var ob = {\n      createRenderFunction: createRenderFunction\n    };\n    function createRenderFunction(data) {\n      switch (data.ty) {\n        case 'fl':\n          return renderFill;\n        case 'gf':\n          return renderGradient;\n        case 'gs':\n          return renderGradientStroke;\n        case 'st':\n          return renderStroke;\n        case 'sh':\n        case 'el':\n        case 'rc':\n        case 'sr':\n          return renderPath;\n        case 'tr':\n          return renderContentTransform;\n        case 'no':\n          return renderNoop;\n        default:\n          return null;\n      }\n    }\n    function renderContentTransform(styleData, itemData, isFirstFrame) {\n      if (isFirstFrame || itemData.transform.op._mdf) {\n        itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\n      }\n      if (isFirstFrame || itemData.transform.mProps._mdf) {\n        itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\n      }\n    }\n    function renderNoop() {}\n    function renderPath(styleData, itemData, isFirstFrame) {\n      var j;\n      var jLen;\n      var pathStringTransformed;\n      var redraw;\n      var pathNodes;\n      var l;\n      var lLen = itemData.styles.length;\n      var lvl = itemData.lvl;\n      var paths;\n      var mat;\n      var props;\n      var iterations;\n      var k;\n      for (l = 0; l < lLen; l += 1) {\n        redraw = itemData.sh._mdf || isFirstFrame;\n        if (itemData.styles[l].lvl < lvl) {\n          mat = _matrixHelper.reset();\n          iterations = lvl - itemData.styles[l].lvl;\n          k = itemData.transformers.length - 1;\n          while (!redraw && iterations > 0) {\n            redraw = itemData.transformers[k].mProps._mdf || redraw;\n            iterations -= 1;\n            k -= 1;\n          }\n          if (redraw) {\n            iterations = lvl - itemData.styles[l].lvl;\n            k = itemData.transformers.length - 1;\n            while (iterations > 0) {\n              props = itemData.transformers[k].mProps.v.props;\n              mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n              iterations -= 1;\n              k -= 1;\n            }\n          }\n        } else {\n          mat = _identityMatrix;\n        }\n        paths = itemData.sh.paths;\n        jLen = paths._length;\n        if (redraw) {\n          pathStringTransformed = '';\n          for (j = 0; j < jLen; j += 1) {\n            pathNodes = paths.shapes[j];\n            if (pathNodes && pathNodes._length) {\n              pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\n            }\n          }\n          itemData.caches[l] = pathStringTransformed;\n        } else {\n          pathStringTransformed = itemData.caches[l];\n        }\n        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\n      }\n    }\n    function renderFill(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n      if (itemData.c._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\n      }\n    }\n    function renderGradientStroke(styleData, itemData, isFirstFrame) {\n      renderGradient(styleData, itemData, isFirstFrame);\n      renderStroke(styleData, itemData, isFirstFrame);\n    }\n    function renderGradient(styleData, itemData, isFirstFrame) {\n      var gfill = itemData.gf;\n      var hasOpacity = itemData.g._hasOpacity;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n      if (itemData.o._mdf || isFirstFrame) {\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\n      }\n      if (itemData.s._mdf || isFirstFrame) {\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\n        gfill.setAttribute(attr1, pt1[0]);\n        gfill.setAttribute(attr2, pt1[1]);\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute(attr1, pt1[0]);\n          itemData.of.setAttribute(attr2, pt1[1]);\n        }\n      }\n      var stops;\n      var i;\n      var len;\n      var stop;\n      if (itemData.g._cmdf || isFirstFrame) {\n        stops = itemData.cst;\n        var cValues = itemData.g.c;\n        len = stops.length;\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n          stop.setAttribute('offset', cValues[i * 4] + '%');\n          stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\n        }\n      }\n      if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\n        var oValues = itemData.g.o;\n        if (itemData.g._collapsable) {\n          stops = itemData.cst;\n        } else {\n          stops = itemData.ost;\n        }\n        len = stops.length;\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n          if (!itemData.g._collapsable) {\n            stop.setAttribute('offset', oValues[i * 2] + '%');\n          }\n          stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\n        }\n      }\n      if (styleData.t === 1) {\n        if (itemData.e._mdf || isFirstFrame) {\n          gfill.setAttribute('x2', pt2[0]);\n          gfill.setAttribute('y2', pt2[1]);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('x2', pt2[0]);\n            itemData.of.setAttribute('y2', pt2[1]);\n          }\n        }\n      } else {\n        var rad;\n        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          gfill.setAttribute('r', rad);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('r', rad);\n          }\n        }\n        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\n          if (!rad) {\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          }\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n          var percent = itemData.h.v;\n          if (percent >= 1) {\n            percent = 0.99;\n          } else if (percent <= -1) {\n            percent = -0.99;\n          }\n          var dist = rad * percent;\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n          gfill.setAttribute('fx', x);\n          gfill.setAttribute('fy', y);\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('fx', x);\n            itemData.of.setAttribute('fy', y);\n          }\n        }\n        // gfill.setAttribute('fy','200');\n      }\n    }\n    function renderStroke(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n      var d = itemData.d;\n      if (d && (d._mdf || isFirstFrame) && d.dashStr) {\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\n      }\n      if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\n        styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\n      }\n      if (itemData.w._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\n        if (styleElem.msElem) {\n          styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\n        }\n      }\n    }\n    return ob;\n  }();\n  function SVGShapeElement(data, globalData, comp) {\n    // List of drawable elements\n    this.shapes = [];\n    // Full shape data\n    this.shapesData = data.shapes;\n    // List of styles that will be applied to shapes\n    this.stylesList = [];\n    // List of modifiers that will be applied to shapes\n    this.shapeModifiers = [];\n    // List of items in shape tree\n    this.itemsData = [];\n    // List of items in previous shape tree\n    this.processedElements = [];\n    // List of animated components\n    this.animatedContents = [];\n    this.initElement(data, globalData, comp);\n    // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    // List of elements that have been created\n    this.prevViewData = [];\n    // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\n  SVGShapeElement.prototype.initSecondaryElement = function () {};\n  SVGShapeElement.prototype.identityMatrix = new Matrix();\n  SVGShapeElement.prototype.buildExpressionInterface = function () {};\n  SVGShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n  };\n\n  /*\n  This method searches for multiple shapes that affect a single element and one of them is animated\n  */\n  SVGShapeElement.prototype.filterUniqueShapes = function () {\n    var i;\n    var len = this.shapes.length;\n    var shape;\n    var j;\n    var jLen = this.stylesList.length;\n    var style;\n    var tempShapes = [];\n    var areAnimated = false;\n    for (j = 0; j < jLen; j += 1) {\n      style = this.stylesList[j];\n      areAnimated = false;\n      tempShapes.length = 0;\n      for (i = 0; i < len; i += 1) {\n        shape = this.shapes[i];\n        if (shape.styles.indexOf(style) !== -1) {\n          tempShapes.push(shape);\n          areAnimated = shape._isAnimated || areAnimated;\n        }\n      }\n      if (tempShapes.length > 1 && areAnimated) {\n        this.setShapesAsAnimated(tempShapes);\n      }\n    }\n  };\n  SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\n    var i;\n    var len = shapes.length;\n    for (i = 0; i < len; i += 1) {\n      shapes[i].setAsAnimated();\n    }\n  };\n  SVGShapeElement.prototype.createStyleElement = function (data, level) {\n    // TODO: prevent drawing of hidden styles\n    var elementData;\n    var styleOb = new SVGStyleData(data, level);\n    var pathElement = styleOb.pElem;\n    if (data.ty === 'st') {\n      elementData = new SVGStrokeStyleData(this, data, styleOb);\n    } else if (data.ty === 'fl') {\n      elementData = new SVGFillStyleData(this, data, styleOb);\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\n      elementData = new GradientConstructor(this, data, styleOb);\n      this.globalData.defs.appendChild(elementData.gf);\n      if (elementData.maskId) {\n        this.globalData.defs.appendChild(elementData.ms);\n        this.globalData.defs.appendChild(elementData.of);\n        pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\n      }\n    } else if (data.ty === 'no') {\n      elementData = new SVGNoStyleData(this, data, styleOb);\n    }\n    if (data.ty === 'st' || data.ty === 'gs') {\n      pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n      pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n      pathElement.setAttribute('fill-opacity', '0');\n      if (data.lj === 1) {\n        pathElement.setAttribute('stroke-miterlimit', data.ml);\n      }\n    }\n    if (data.r === 2) {\n      pathElement.setAttribute('fill-rule', 'evenodd');\n    }\n    if (data.ln) {\n      pathElement.setAttribute('id', data.ln);\n    }\n    if (data.cl) {\n      pathElement.setAttribute('class', data.cl);\n    }\n    if (data.bm) {\n      pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n    this.stylesList.push(styleOb);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.createGroupElement = function (data) {\n    var elementData = new ShapeGroupData();\n    if (data.ln) {\n      elementData.gr.setAttribute('id', data.ln);\n    }\n    if (data.cl) {\n      elementData.gr.setAttribute('class', data.cl);\n    }\n    if (data.bm) {\n      elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n    return elementData;\n  };\n  SVGShapeElement.prototype.createTransformElement = function (data, container) {\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\n    var ty = 4;\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n  SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\n    var i = 0;\n    var len = this.animatedContents.length;\n    while (i < len) {\n      if (this.animatedContents[i].element === element) {\n        return;\n      }\n      i += 1;\n    }\n    this.animatedContents.push({\n      fn: SVGElementsRenderer.createRenderFunction(data),\n      element: element,\n      data: data\n    });\n  };\n  SVGShapeElement.prototype.setElementStyles = function (elementData) {\n    var arr = elementData.styles;\n    var j;\n    var jLen = this.stylesList.length;\n    for (j = 0; j < jLen; j += 1) {\n      if (!this.stylesList[j].closed) {\n        arr.push(this.stylesList[j]);\n      }\n    }\n  };\n  SVGShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n    len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n    this.renderModifiers();\n  };\n  SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\n    var ownTransformers = [].concat(transformers);\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var currentTransform;\n    var modifier;\n    var processedPos;\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n      if (!processedPos) {\n        arr[i]._render = render;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], level);\n        } else {\n          itemsData[i].style.closed = false;\n        }\n        if (arr[i]._render) {\n          if (itemsData[i].style.pElem.parentNode !== container) {\n            container.appendChild(itemsData[i].style.pElem);\n          }\n        }\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\n        if (arr[i]._render) {\n          if (itemsData[i].gr.parentNode !== container) {\n            container.appendChild(itemsData[i].gr);\n          }\n        }\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          itemsData[i] = this.createTransformElement(arr[i], container);\n        }\n        currentTransform = itemsData[i].transform;\n        ownTransformers.push(currentTransform);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\n        }\n        this.setElementStyles(itemsData[i]);\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          render = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n        ownModifiers.push(modifier);\n      }\n      this.addProcessedElement(arr[i], i + 1);\n    }\n    len = ownStyles.length;\n    for (i = 0; i < len; i += 1) {\n      ownStyles[i].closed = true;\n    }\n    len = ownModifiers.length;\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n  SVGShapeElement.prototype.renderInnerContent = function () {\n    this.renderModifiers();\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      this.stylesList[i].reset();\n    }\n    this.renderShape();\n    for (i = 0; i < len; i += 1) {\n      if (this.stylesList[i]._mdf || this._isFirstFrame) {\n        if (this.stylesList[i].msElem) {\n          this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\n          // Adding M0 0 fixes same mask bug on all browsers\n          this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\n        }\n        this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\n      }\n    }\n  };\n  SVGShapeElement.prototype.renderShape = function () {\n    var i;\n    var len = this.animatedContents.length;\n    var animatedContent;\n    for (i = 0; i < len; i += 1) {\n      animatedContent = this.animatedContents[i];\n      if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\n        animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\n      }\n    }\n  };\n  SVGShapeElement.prototype.destroy = function () {\n    this.destroyBaseElement();\n    this.shapesData = null;\n    this.itemsData = null;\n  };\n  function LetterProps(o, sw, sc, fc, m, p) {\n    this.o = o;\n    this.sw = sw;\n    this.sc = sc;\n    this.fc = fc;\n    this.m = m;\n    this.p = p;\n    this._mdf = {\n      o: true,\n      sw: !!sw,\n      sc: !!sc,\n      fc: !!fc,\n      m: true,\n      p: true\n    };\n  }\n  LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\n    this._mdf.o = false;\n    this._mdf.sw = false;\n    this._mdf.sc = false;\n    this._mdf.fc = false;\n    this._mdf.m = false;\n    this._mdf.p = false;\n    var updated = false;\n    if (this.o !== o) {\n      this.o = o;\n      this._mdf.o = true;\n      updated = true;\n    }\n    if (this.sw !== sw) {\n      this.sw = sw;\n      this._mdf.sw = true;\n      updated = true;\n    }\n    if (this.sc !== sc) {\n      this.sc = sc;\n      this._mdf.sc = true;\n      updated = true;\n    }\n    if (this.fc !== fc) {\n      this.fc = fc;\n      this._mdf.fc = true;\n      updated = true;\n    }\n    if (this.m !== m) {\n      this.m = m;\n      this._mdf.m = true;\n      updated = true;\n    }\n    if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\n      this.p = p;\n      this._mdf.p = true;\n      updated = true;\n    }\n    return updated;\n  };\n  function TextProperty(elem, data) {\n    this._frameId = initialDefaultFrame;\n    this.pv = '';\n    this.v = '';\n    this.kf = false;\n    this._isFirstFrame = true;\n    this._mdf = false;\n    this.data = data;\n    this.elem = elem;\n    this.comp = this.elem.comp;\n    this.keysIndex = 0;\n    this.canResize = false;\n    this.minimumFontSize = 1;\n    this.effectsSequence = [];\n    this.currentData = {\n      ascent: 0,\n      boxWidth: this.defaultBoxWidth,\n      f: '',\n      fStyle: '',\n      fWeight: '',\n      fc: '',\n      j: '',\n      justifyOffset: '',\n      l: [],\n      lh: 0,\n      lineWidths: [],\n      ls: '',\n      of: '',\n      s: '',\n      sc: '',\n      sw: 0,\n      t: 0,\n      tr: 0,\n      sz: 0,\n      ps: null,\n      fillColorAnim: false,\n      strokeColorAnim: false,\n      strokeWidthAnim: false,\n      yOffset: 0,\n      finalSize: 0,\n      finalText: [],\n      finalLineHeight: 0,\n      __complete: false\n    };\n    this.copyData(this.currentData, this.data.d.k[0].s);\n    if (!this.searchProperty()) {\n      this.completeTextData(this.currentData);\n    }\n  }\n  TextProperty.prototype.defaultBoxWidth = [0, 0];\n  TextProperty.prototype.copyData = function (obj, data) {\n    for (var s in data) {\n      if (Object.prototype.hasOwnProperty.call(data, s)) {\n        obj[s] = data[s];\n      }\n    }\n    return obj;\n  };\n  TextProperty.prototype.setCurrentData = function (data) {\n    if (!data.__complete) {\n      this.completeTextData(data);\n    }\n    this.currentData = data;\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\n    this._mdf = true;\n  };\n  TextProperty.prototype.searchProperty = function () {\n    return this.searchKeyframes();\n  };\n  TextProperty.prototype.searchKeyframes = function () {\n    this.kf = this.data.d.k.length > 1;\n    if (this.kf) {\n      this.addEffect(this.getKeyframeValue.bind(this));\n    }\n    return this.kf;\n  };\n  TextProperty.prototype.addEffect = function (effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.getValue = function (_finalValue) {\n    if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\n      return;\n    }\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\n    var currentValue = this.currentData;\n    var currentIndex = this.keysIndex;\n    if (this.lock) {\n      this.setCurrentData(this.currentData);\n      return;\n    }\n    this.lock = true;\n    this._mdf = false;\n    var i;\n    var len = this.effectsSequence.length;\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\n    for (i = 0; i < len; i += 1) {\n      // Checking if index changed to prevent creating a new object every time the expression updates.\n      if (currentIndex !== this.keysIndex) {\n        finalValue = this.effectsSequence[i](finalValue, finalValue.t);\n      } else {\n        finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\n      }\n    }\n    if (currentValue !== finalValue) {\n      this.setCurrentData(finalValue);\n    }\n    this.v = this.currentData;\n    this.pv = this.v;\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  };\n  TextProperty.prototype.getKeyframeValue = function () {\n    var textKeys = this.data.d.k;\n    var frameNum = this.elem.comp.renderedFrame;\n    var i = 0;\n    var len = textKeys.length;\n    while (i <= len - 1) {\n      if (i === len - 1 || textKeys[i + 1].t > frameNum) {\n        break;\n      }\n      i += 1;\n    }\n    if (this.keysIndex !== i) {\n      this.keysIndex = i;\n    }\n    return this.data.d.k[this.keysIndex].s;\n  };\n  TextProperty.prototype.buildFinalText = function (text) {\n    var charactersArray = [];\n    var i = 0;\n    var len = text.length;\n    var charCode;\n    var secondCharCode;\n    var shouldCombine = false;\n    while (i < len) {\n      charCode = text.charCodeAt(i);\n      if (FontManager.isCombinedCharacter(charCode)) {\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\n      } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n        secondCharCode = text.charCodeAt(i + 1);\n        if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\n          if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\n            charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n            shouldCombine = false;\n          } else {\n            charactersArray.push(text.substr(i, 2));\n          }\n          i += 1;\n        } else {\n          charactersArray.push(text.charAt(i));\n        }\n      } else if (charCode > 0xDBFF) {\n        secondCharCode = text.charCodeAt(i + 1);\n        if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\n          shouldCombine = true;\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n          i += 1;\n        } else {\n          charactersArray.push(text.charAt(i));\n        }\n      } else if (FontManager.isZeroWidthJoiner(charCode)) {\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\n        shouldCombine = true;\n      } else {\n        charactersArray.push(text.charAt(i));\n      }\n      i += 1;\n    }\n    return charactersArray;\n  };\n  TextProperty.prototype.completeTextData = function (documentData) {\n    documentData.__complete = true;\n    var fontManager = this.elem.globalData.fontManager;\n    var data = this.data;\n    var letters = [];\n    var i;\n    var len;\n    var newLineFlag;\n    var index = 0;\n    var val;\n    var anchorGrouping = data.m.g;\n    var currentSize = 0;\n    var currentPos = 0;\n    var currentLine = 0;\n    var lineWidths = [];\n    var lineWidth = 0;\n    var maxLineWidth = 0;\n    var j;\n    var jLen;\n    var fontData = fontManager.getFontByName(documentData.f);\n    var charData;\n    var cLength = 0;\n    var fontProps = getFontProperties(fontData);\n    documentData.fWeight = fontProps.weight;\n    documentData.fStyle = fontProps.style;\n    documentData.finalSize = documentData.s;\n    documentData.finalText = this.buildFinalText(documentData.t);\n    len = documentData.finalText.length;\n    documentData.finalLineHeight = documentData.lh;\n    var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n    var charCode;\n    if (documentData.sz) {\n      var flag = true;\n      var boxWidth = documentData.sz[0];\n      var boxHeight = documentData.sz[1];\n      var currentHeight;\n      var finalText;\n      while (flag) {\n        finalText = this.buildFinalText(documentData.t);\n        currentHeight = 0;\n        lineWidth = 0;\n        len = finalText.length;\n        trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n        var lastSpaceIndex = -1;\n        for (i = 0; i < len; i += 1) {\n          charCode = finalText[i].charCodeAt(0);\n          newLineFlag = false;\n          if (finalText[i] === ' ') {\n            lastSpaceIndex = i;\n          } else if (charCode === 13 || charCode === 3) {\n            lineWidth = 0;\n            newLineFlag = true;\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n          }\n          if (fontManager.chars) {\n            charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\n            cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n          } else {\n            // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\n            cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\n          }\n          if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\n            if (lastSpaceIndex === -1) {\n              len += 1;\n            } else {\n              i = lastSpaceIndex;\n            }\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n            finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\n            // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\n            lastSpaceIndex = -1;\n            lineWidth = 0;\n          } else {\n            lineWidth += cLength;\n            lineWidth += trackingOffset;\n          }\n        }\n        currentHeight += fontData.ascent * documentData.finalSize / 100;\n        if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\n          documentData.finalSize -= 1;\n          documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\n        } else {\n          documentData.finalText = finalText;\n          len = documentData.finalText.length;\n          flag = false;\n        }\n      }\n    }\n    lineWidth = -trackingOffset;\n    cLength = 0;\n    var uncollapsedSpaces = 0;\n    var currentChar;\n    for (i = 0; i < len; i += 1) {\n      newLineFlag = false;\n      currentChar = documentData.finalText[i];\n      charCode = currentChar.charCodeAt(0);\n      if (charCode === 13 || charCode === 3) {\n        uncollapsedSpaces = 0;\n        lineWidths.push(lineWidth);\n        maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n        lineWidth = -2 * trackingOffset;\n        val = '';\n        newLineFlag = true;\n        currentLine += 1;\n      } else {\n        val = currentChar;\n      }\n      if (fontManager.chars) {\n        charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\n        cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n      } else {\n        // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\n        // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\n        cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\n      }\n\n      //\n      if (currentChar === ' ') {\n        uncollapsedSpaces += cLength + trackingOffset;\n      } else {\n        lineWidth += cLength + trackingOffset + uncollapsedSpaces;\n        uncollapsedSpaces = 0;\n      }\n      letters.push({\n        l: cLength,\n        an: cLength,\n        add: currentSize,\n        n: newLineFlag,\n        anIndexes: [],\n        val: val,\n        line: currentLine,\n        animatorJustifyOffset: 0\n      });\n      if (anchorGrouping == 2) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n        if (val === '' || val === ' ' || i === len - 1) {\n          if (val === '' || val === ' ') {\n            currentSize -= cLength;\n          }\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n          index += 1;\n          currentSize = 0;\n        }\n      } else if (anchorGrouping == 3) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n        if (val === '' || i === len - 1) {\n          if (val === '') {\n            currentSize -= cLength;\n          }\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n          currentSize = 0;\n          index += 1;\n        }\n      } else {\n        letters[index].ind = index;\n        letters[index].extra = 0;\n        index += 1;\n      }\n    }\n    documentData.l = letters;\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n    lineWidths.push(lineWidth);\n    if (documentData.sz) {\n      documentData.boxWidth = documentData.sz[0];\n      documentData.justifyOffset = 0;\n    } else {\n      documentData.boxWidth = maxLineWidth;\n      switch (documentData.j) {\n        case 1:\n          documentData.justifyOffset = -documentData.boxWidth;\n          break;\n        case 2:\n          documentData.justifyOffset = -documentData.boxWidth / 2;\n          break;\n        default:\n          documentData.justifyOffset = 0;\n      }\n    }\n    documentData.lineWidths = lineWidths;\n    var animators = data.a;\n    var animatorData;\n    var letterData;\n    jLen = animators.length;\n    var based;\n    var ind;\n    var indexes = [];\n    for (j = 0; j < jLen; j += 1) {\n      animatorData = animators[j];\n      if (animatorData.a.sc) {\n        documentData.strokeColorAnim = true;\n      }\n      if (animatorData.a.sw) {\n        documentData.strokeWidthAnim = true;\n      }\n      if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\n        documentData.fillColorAnim = true;\n      }\n      ind = 0;\n      based = animatorData.s.b;\n      for (i = 0; i < len; i += 1) {\n        letterData = letters[i];\n        letterData.anIndexes[j] = ind;\n        if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== ' ' || based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\n          // eslint-disable-line eqeqeq\n          if (animatorData.s.rn === 1) {\n            indexes.push(ind);\n          }\n          ind += 1;\n        }\n      }\n      data.a[j].s.totalChars = ind;\n      var currentInd = -1;\n      var newInd;\n      if (animatorData.s.rn === 1) {\n        for (i = 0; i < len; i += 1) {\n          letterData = letters[i];\n          if (currentInd != letterData.anIndexes[j]) {\n            // eslint-disable-line eqeqeq\n            currentInd = letterData.anIndexes[j];\n            newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\n          }\n          letterData.anIndexes[j] = newInd;\n        }\n      }\n    }\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\n    documentData.ls = documentData.ls || 0;\n    documentData.ascent = fontData.ascent * documentData.finalSize / 100;\n  };\n  TextProperty.prototype.updateDocumentData = function (newData, index) {\n    index = index === undefined ? this.keysIndex : index;\n    var dData = this.copyData({}, this.data.d.k[index].s);\n    dData = this.copyData(dData, newData);\n    this.data.d.k[index].s = dData;\n    this.recalculate(index);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.recalculate = function (index) {\n    var dData = this.data.d.k[index].s;\n    dData.__complete = false;\n    this.keysIndex = 0;\n    this._isFirstFrame = true;\n    this.getValue(dData);\n  };\n  TextProperty.prototype.canResizeFont = function (_canResize) {\n    this.canResize = _canResize;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n  TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n  const TextSelectorProp = function () {\n    var max = Math.max;\n    var min = Math.min;\n    var floor = Math.floor;\n    function TextSelectorPropFactory(elem, data) {\n      this._currentTextLength = -1;\n      this.k = false;\n      this.data = data;\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.finalS = 0;\n      this.finalE = 0;\n      this.initDynamicPropertyContainer(elem);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: 0\n      }, 0, 0, this);\n      if ('e' in data) {\n        this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\n      } else {\n        this.e = {\n          v: 100\n        };\n      }\n      this.o = PropertyFactory.getProp(elem, data.o || {\n        k: 0\n      }, 0, 0, this);\n      this.xe = PropertyFactory.getProp(elem, data.xe || {\n        k: 0\n      }, 0, 0, this);\n      this.ne = PropertyFactory.getProp(elem, data.ne || {\n        k: 0\n      }, 0, 0, this);\n      this.sm = PropertyFactory.getProp(elem, data.sm || {\n        k: 100\n      }, 0, 0, this);\n      this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\n      if (!this.dynamicProperties.length) {\n        this.getValue();\n      }\n    }\n    TextSelectorPropFactory.prototype = {\n      getMult: function (ind) {\n        if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\n          this.getValue();\n        }\n        var x1 = 0;\n        var y1 = 0;\n        var x2 = 1;\n        var y2 = 1;\n        if (this.ne.v > 0) {\n          x1 = this.ne.v / 100.0;\n        } else {\n          y1 = -this.ne.v / 100.0;\n        }\n        if (this.xe.v > 0) {\n          x2 = 1.0 - this.xe.v / 100.0;\n        } else {\n          y2 = 1.0 + this.xe.v / 100.0;\n        }\n        var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\n        var mult = 0;\n        var s = this.finalS;\n        var e = this.finalE;\n        var type = this.data.sh;\n        if (type === 2) {\n          if (e === s) {\n            mult = ind >= e ? 1 : 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n          mult = easer(mult);\n        } else if (type === 3) {\n          if (e === s) {\n            mult = ind >= e ? 0 : 1;\n          } else {\n            mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n          mult = easer(mult);\n        } else if (type === 4) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n            if (mult < 0.5) {\n              mult *= 2;\n            } else {\n              mult = 1 - 2 * (mult - 0.5);\n            }\n          }\n          mult = easer(mult);\n        } else if (type === 5) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            var tot = e - s;\n            /* ind += 0.5;\n                      mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            var x = -tot / 2 + ind;\n            var a = tot / 2;\n            mult = Math.sqrt(1 - x * x / (a * a));\n          }\n          mult = easer(mult);\n        } else if (type === 6) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2; // eslint-disable-line\n          }\n          mult = easer(mult);\n        } else {\n          if (ind >= floor(s)) {\n            if (ind - s < 0) {\n              mult = max(0, min(min(e, 1) - (s - ind), 1));\n            } else {\n              mult = max(0, min(e - ind, 1));\n            }\n          }\n          mult = easer(mult);\n        }\n        // Smoothness implementation.\n        // The smoothness represents a reduced range of the original [0; 1] range.\n        // if smoothness is 25%, the new range will be [0.375; 0.625]\n        // Steps are:\n        // - find the lower value of the new range (threshold)\n        // - if multiplier is smaller than that value, floor it to 0\n        // - if it is larger,\n        //     - subtract the threshold\n        //     - divide it by the smoothness (this will return the range to [0; 1])\n        // Note: If it doesn't work on some scenarios, consider applying it before the easer.\n        if (this.sm.v !== 100) {\n          var smoothness = this.sm.v * 0.01;\n          if (smoothness === 0) {\n            smoothness = 0.00000001;\n          }\n          var threshold = 0.5 - smoothness * 0.5;\n          if (mult < threshold) {\n            mult = 0;\n          } else {\n            mult = (mult - threshold) / smoothness;\n            if (mult > 1) {\n              mult = 1;\n            }\n          }\n        }\n        return mult * this.a.v;\n      },\n      getValue: function (newCharsFlag) {\n        this.iterateDynamicProperties();\n        this._mdf = newCharsFlag || this._mdf;\n        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\n        if (newCharsFlag && this.data.r === 2) {\n          this.e.v = this._currentTextLength;\n        }\n        var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\n        var o = this.o.v / divisor;\n        var s = this.s.v / divisor + o;\n        var e = this.e.v / divisor + o;\n        if (s > e) {\n          var _s = s;\n          s = e;\n          e = _s;\n        }\n        this.finalS = s;\n        this.finalE = e;\n      }\n    };\n    extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\n    function getTextSelectorProp(elem, data, arr) {\n      return new TextSelectorPropFactory(elem, data, arr);\n    }\n    return {\n      getTextSelectorProp: getTextSelectorProp\n    };\n  }();\n  function TextAnimatorDataProperty(elem, animatorProps, container) {\n    var defaultData = {\n      propType: false\n    };\n    var getProp = PropertyFactory.getProp;\n    var textAnimatorAnimatables = animatorProps.a;\n    this.a = {\n      r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\n      rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\n      ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\n      sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\n      sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\n      s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\n      a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\n      o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\n      p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\n      sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\n      sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\n      fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\n      fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\n      fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\n      fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\n      t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData\n    };\n    this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\n    this.s.t = animatorProps.s.t;\n  }\n  function TextAnimatorProperty(textData, renderType, elem) {\n    this._isFirstFrame = true;\n    this._hasMaskedPath = false;\n    this._frameId = -1;\n    this._textData = textData;\n    this._renderType = renderType;\n    this._elem = elem;\n    this._animatorsData = createSizedArray(this._textData.a.length);\n    this._pathData = {};\n    this._moreOptions = {\n      alignment: {}\n    };\n    this.renderedLetters = [];\n    this.lettersChangedFlag = false;\n    this.initDynamicPropertyContainer(elem);\n  }\n  TextAnimatorProperty.prototype.searchProperties = function () {\n    var i;\n    var len = this._textData.a.length;\n    var animatorProps;\n    var getProp = PropertyFactory.getProp;\n    for (i = 0; i < len; i += 1) {\n      animatorProps = this._textData.a[i];\n      this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\n    }\n    if (this._textData.p && 'm' in this._textData.p) {\n      this._pathData = {\n        a: getProp(this._elem, this._textData.p.a, 0, 0, this),\n        f: getProp(this._elem, this._textData.p.f, 0, 0, this),\n        l: getProp(this._elem, this._textData.p.l, 0, 0, this),\n        r: getProp(this._elem, this._textData.p.r, 0, 0, this),\n        p: getProp(this._elem, this._textData.p.p, 0, 0, this),\n        m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\n      };\n      this._hasMaskedPath = true;\n    } else {\n      this._hasMaskedPath = false;\n    }\n    this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\n  };\n  TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\n    this.lettersChangedFlag = lettersChangedFlag;\n    if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\n      return;\n    }\n    this._isFirstFrame = false;\n    var alignment = this._moreOptions.alignment.v;\n    var animators = this._animatorsData;\n    var textData = this._textData;\n    var matrixHelper = this.mHelper;\n    var renderType = this._renderType;\n    var renderedLettersCount = this.renderedLetters.length;\n    var xPos;\n    var yPos;\n    var i;\n    var len;\n    var letters = documentData.l;\n    var pathInfo;\n    var currentLength;\n    var currentPoint;\n    var segmentLength;\n    var flag;\n    var pointInd;\n    var segmentInd;\n    var prevPoint;\n    var points;\n    var segments;\n    var partialLength;\n    var totalLength;\n    var perc;\n    var tanAngle;\n    var mask;\n    if (this._hasMaskedPath) {\n      mask = this._pathData.m;\n      if (!this._pathData.n || this._pathData._mdf) {\n        var paths = mask.v;\n        if (this._pathData.r.v) {\n          paths = paths.reverse();\n        }\n        // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\n        pathInfo = {\n          tLength: 0,\n          segments: []\n        };\n        len = paths._length - 1;\n        var bezierData;\n        totalLength = 0;\n        for (i = 0; i < len; i += 1) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n        i = len;\n        if (mask.v.c) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n        this._pathData.pi = pathInfo;\n      }\n      pathInfo = this._pathData.pi;\n      currentLength = this._pathData.f.v;\n      segmentInd = 0;\n      pointInd = 1;\n      segmentLength = 0;\n      flag = true;\n      segments = pathInfo.segments;\n      if (currentLength < 0 && mask.v.c) {\n        if (pathInfo.tLength < Math.abs(currentLength)) {\n          currentLength = -Math.abs(currentLength) % pathInfo.tLength;\n        }\n        segmentInd = segments.length - 1;\n        points = segments[segmentInd].points;\n        pointInd = points.length - 1;\n        while (currentLength < 0) {\n          currentLength += points[pointInd].partialLength;\n          pointInd -= 1;\n          if (pointInd < 0) {\n            segmentInd -= 1;\n            points = segments[segmentInd].points;\n            pointInd = points.length - 1;\n          }\n        }\n      }\n      points = segments[segmentInd].points;\n      prevPoint = points[pointInd - 1];\n      currentPoint = points[pointInd];\n      partialLength = currentPoint.partialLength;\n    }\n    len = letters.length;\n    xPos = 0;\n    yPos = 0;\n    var yOff = documentData.finalSize * 1.2 * 0.714;\n    var firstLine = true;\n    var animatorProps;\n    var animatorSelector;\n    var j;\n    var jLen;\n    var letterValue;\n    jLen = animators.length;\n    var mult;\n    var ind = -1;\n    var offf;\n    var xPathPos;\n    var yPathPos;\n    var initPathPos = currentLength;\n    var initSegmentInd = segmentInd;\n    var initPointInd = pointInd;\n    var currentLine = -1;\n    var elemOpacity;\n    var sc;\n    var sw;\n    var fc;\n    var k;\n    var letterSw;\n    var letterSc;\n    var letterFc;\n    var letterM = '';\n    var letterP = this.defaultPropsArray;\n    var letterO;\n\n    //\n    if (documentData.j === 2 || documentData.j === 1) {\n      var animatorJustifyOffset = 0;\n      var animatorFirstCharOffset = 0;\n      var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\n      var lastIndex = 0;\n      var isNewLine = true;\n      for (i = 0; i < len; i += 1) {\n        if (letters[i].n) {\n          if (animatorJustifyOffset) {\n            animatorJustifyOffset += animatorFirstCharOffset;\n          }\n          while (lastIndex < i) {\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n            lastIndex += 1;\n          }\n          animatorJustifyOffset = 0;\n          isNewLine = true;\n        } else {\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n            if (animatorProps.t.propType) {\n              if (isNewLine && documentData.j === 2) {\n                animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\n              }\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\n              } else {\n                animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\n              }\n            }\n          }\n          isNewLine = false;\n        }\n      }\n      if (animatorJustifyOffset) {\n        animatorJustifyOffset += animatorFirstCharOffset;\n      }\n      while (lastIndex < i) {\n        letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n        lastIndex += 1;\n      }\n    }\n    //\n\n    for (i = 0; i < len; i += 1) {\n      matrixHelper.reset();\n      elemOpacity = 1;\n      if (letters[i].n) {\n        xPos = 0;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        currentLength = initPathPos;\n        firstLine = false;\n        if (this._hasMaskedPath) {\n          segmentInd = initSegmentInd;\n          pointInd = initPointInd;\n          points = segments[segmentInd].points;\n          prevPoint = points[pointInd - 1];\n          currentPoint = points[pointInd];\n          partialLength = currentPoint.partialLength;\n          segmentLength = 0;\n        }\n        letterM = '';\n        letterFc = '';\n        letterSw = '';\n        letterO = '';\n        letterP = this.defaultPropsArray;\n      } else {\n        if (this._hasMaskedPath) {\n          if (currentLine !== letters[i].line) {\n            switch (documentData.j) {\n              case 1:\n                currentLength += totalLength - documentData.lineWidths[letters[i].line];\n                break;\n              case 2:\n                currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\n                break;\n              default:\n                break;\n            }\n            currentLine = letters[i].line;\n          }\n          if (ind !== letters[i].ind) {\n            if (letters[ind]) {\n              currentLength += letters[ind].extra;\n            }\n            currentLength += letters[i].an / 2;\n            ind = letters[i].ind;\n          }\n          currentLength += alignment[0] * letters[i].an * 0.005;\n          var animatorOffset = 0;\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n            if (animatorProps.p.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorOffset += animatorProps.p.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.p.v[0] * mult;\n              }\n            }\n            if (animatorProps.a.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n              if (mult.length) {\n                animatorOffset += animatorProps.a.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.a.v[0] * mult;\n              }\n            }\n          }\n          flag = true;\n          // Force alignment only works with a single line for now\n          if (this._pathData.a.v) {\n            currentLength = letters[0].an * 0.5 + (totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind / (len - 1);\n            currentLength += this._pathData.f.v;\n          }\n          while (flag) {\n            if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\n              perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\n              xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\n              yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\n              matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -(alignment[1] * yOff) * 0.01);\n              flag = false;\n            } else if (points) {\n              segmentLength += currentPoint.partialLength;\n              pointInd += 1;\n              if (pointInd >= points.length) {\n                pointInd = 0;\n                segmentInd += 1;\n                if (!segments[segmentInd]) {\n                  if (mask.v.c) {\n                    pointInd = 0;\n                    segmentInd = 0;\n                    points = segments[segmentInd].points;\n                  } else {\n                    segmentLength -= currentPoint.partialLength;\n                    points = null;\n                  }\n                } else {\n                  points = segments[segmentInd].points;\n                }\n              }\n              if (points) {\n                prevPoint = currentPoint;\n                currentPoint = points[pointInd];\n                partialLength = currentPoint.partialLength;\n              }\n            }\n          }\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0);\n        } else {\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0);\n\n          // Grouping alignment\n          matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -alignment[1] * yOff * 0.01, 0);\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.t.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\n            if (xPos !== 0 || documentData.j !== 0) {\n              if (this._hasMaskedPath) {\n                if (mult.length) {\n                  currentLength += animatorProps.t.v * mult[0];\n                } else {\n                  currentLength += animatorProps.t.v * mult;\n                }\n              } else if (mult.length) {\n                xPos += animatorProps.t.v * mult[0];\n              } else {\n                xPos += animatorProps.t.v * mult;\n              }\n            }\n          }\n        }\n        if (documentData.strokeWidthAnim) {\n          sw = documentData.sw || 0;\n        }\n        if (documentData.strokeColorAnim) {\n          if (documentData.sc) {\n            sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\n          } else {\n            sc = [0, 0, 0];\n          }\n        }\n        if (documentData.fillColorAnim && documentData.fc) {\n          fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.a.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.s.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\n            } else {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n          if (animatorProps.sk.propType) {\n            if (mult.length) {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\n            } else {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\n            }\n          }\n          if (animatorProps.r.propType) {\n            if (mult.length) {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\n            } else {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult);\n            }\n          }\n          if (animatorProps.ry.propType) {\n            if (mult.length) {\n              matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\n            } else {\n              matrixHelper.rotateY(animatorProps.ry.v * mult);\n            }\n          }\n          if (animatorProps.rx.propType) {\n            if (mult.length) {\n              matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\n            } else {\n              matrixHelper.rotateX(animatorProps.rx.v * mult);\n            }\n          }\n          if (animatorProps.o.propType) {\n            if (mult.length) {\n              elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\n            } else {\n              elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\n            }\n          }\n          if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\n            if (mult.length) {\n              sw += animatorProps.sw.v * mult[0];\n            } else {\n              sw += animatorProps.sw.v * mult;\n            }\n          }\n          if (documentData.strokeColorAnim && animatorProps.sc.propType) {\n            for (k = 0; k < 3; k += 1) {\n              if (mult.length) {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\n              } else {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\n              }\n            }\n          }\n          if (documentData.fillColorAnim && documentData.fc) {\n            if (animatorProps.fc.propType) {\n              for (k = 0; k < 3; k += 1) {\n                if (mult.length) {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\n                } else {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\n                }\n              }\n            }\n            if (animatorProps.fh.propType) {\n              if (mult.length) {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\n              } else {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult);\n              }\n            }\n            if (animatorProps.fs.propType) {\n              if (mult.length) {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\n              } else {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\n              }\n            }\n            if (animatorProps.fb.propType) {\n              if (mult.length) {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\n              } else {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\n              }\n            }\n          }\n        }\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.p.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (this._hasMaskedPath) {\n              if (mult.length) {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\n              } else {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n              }\n            } else if (mult.length) {\n              matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n            }\n          }\n        }\n        if (documentData.strokeWidthAnim) {\n          letterSw = sw < 0 ? 0 : sw;\n        }\n        if (documentData.strokeColorAnim) {\n          letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\n        }\n        if (documentData.fillColorAnim && documentData.fc) {\n          letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\n        }\n        if (this._hasMaskedPath) {\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(0, alignment[1] * yOff * 0.01 + yPos, 0);\n          if (this._pathData.p.v) {\n            tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\n            var rot = Math.atan(tanAngle) * 180 / Math.PI;\n            if (currentPoint.point[0] < prevPoint.point[0]) {\n              rot += 180;\n            }\n            matrixHelper.rotate(-rot * Math.PI / 180);\n          }\n          matrixHelper.translate(xPathPos, yPathPos, 0);\n          currentLength -= alignment[0] * letters[i].an * 0.005;\n          if (letters[i + 1] && ind !== letters[i + 1].ind) {\n            currentLength += letters[i].an / 2;\n            currentLength += documentData.tr * 0.001 * documentData.finalSize;\n          }\n        } else {\n          matrixHelper.translate(xPos, yPos, 0);\n          if (documentData.ps) {\n            // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\n            matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n          }\n          switch (documentData.j) {\n            case 1:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\n              break;\n            case 2:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\n              break;\n            default:\n              break;\n          }\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(offf, 0, 0);\n          matrixHelper.translate(alignment[0] * letters[i].an * 0.005, alignment[1] * yOff * 0.01, 0);\n          xPos += letters[i].l + documentData.tr * 0.001 * documentData.finalSize;\n        }\n        if (renderType === 'html') {\n          letterM = matrixHelper.toCSS();\n        } else if (renderType === 'svg') {\n          letterM = matrixHelper.to2dCSS();\n        } else {\n          letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\n        }\n        letterO = elemOpacity;\n      }\n      if (renderedLettersCount <= i) {\n        letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\n        this.renderedLetters.push(letterValue);\n        renderedLettersCount += 1;\n        this.lettersChangedFlag = true;\n      } else {\n        letterValue = this.renderedLetters[i];\n        this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\n      }\n    }\n  };\n  TextAnimatorProperty.prototype.getValue = function () {\n    if (this._elem.globalData.frameId === this._frameId) {\n      return;\n    }\n    this._frameId = this._elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n  TextAnimatorProperty.prototype.mHelper = new Matrix();\n  TextAnimatorProperty.prototype.defaultPropsArray = [];\n  extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n  function ITextElement() {}\n  ITextElement.prototype.initElement = function (data, globalData, comp) {\n    this.lettersChangedFlag = true;\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n    this.initRenderable();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n    this.createContent();\n    this.hide();\n    this.textAnimator.searchProperties(this.dynamicProperties);\n  };\n  ITextElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n    if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\n      this.buildNewText();\n      this.textProperty._isFirstFrame = false;\n      this.textProperty._mdf = false;\n    }\n  };\n  ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\n    var j;\n    var jLen = shapes.length;\n    var pathNodes;\n    var shapeStr = '';\n    for (j = 0; j < jLen; j += 1) {\n      if (shapes[j].ty === 'sh') {\n        pathNodes = shapes[j].ks.k;\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\n      }\n    }\n    return shapeStr;\n  };\n  ITextElement.prototype.updateDocumentData = function (newData, index) {\n    this.textProperty.updateDocumentData(newData, index);\n  };\n  ITextElement.prototype.canResizeFont = function (_canResize) {\n    this.textProperty.canResizeFont(_canResize);\n  };\n  ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\n    this.textProperty.setMinimumFontSize(_fontSize);\n  };\n  ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\n    if (documentData.ps) {\n      matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n    }\n    matrixHelper.translate(0, -documentData.ls, 0);\n    switch (documentData.j) {\n      case 1:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\n        break;\n      case 2:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\n        break;\n      default:\n        break;\n    }\n    matrixHelper.translate(xPos, yPos, 0);\n  };\n  ITextElement.prototype.buildColor = function (colorData) {\n    return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\n  };\n  ITextElement.prototype.emptyProp = new LetterProps();\n  ITextElement.prototype.destroy = function () {};\n  var emptyShapeData = {\n    shapes: []\n  };\n  function SVGTextLottieElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.renderType = 'svg';\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\n  SVGTextLottieElement.prototype.createContent = function () {\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\n      this.textContainer = createNS('text');\n    }\n  };\n  SVGTextLottieElement.prototype.buildTextContents = function (textArray) {\n    var i = 0;\n    var len = textArray.length;\n    var textContents = [];\n    var currentTextContent = '';\n    while (i < len) {\n      if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\n        textContents.push(currentTextContent);\n        currentTextContent = '';\n      } else {\n        currentTextContent += textArray[i];\n      }\n      i += 1;\n    }\n    textContents.push(currentTextContent);\n    return textContents;\n  };\n  SVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\n    // data should probably be cloned to apply scale separately to each instance of a text on different layers\n    // but since text internal content gets only rendered once and then it's never rerendered,\n    // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\n    // Avoiding cloning is preferred since cloning each character shape data is expensive\n    if (data.shapes && data.shapes.length) {\n      var shape = data.shapes[0];\n      if (shape.it) {\n        var shapeItem = shape.it[shape.it.length - 1];\n        if (shapeItem.s) {\n          shapeItem.s.k[0] = scale;\n          shapeItem.s.k[1] = scale;\n        }\n      }\n    }\n    return data;\n  };\n  SVGTextLottieElement.prototype.buildNewText = function () {\n    this.addDynamicProperty(this);\n    var i;\n    var len;\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\n    if (documentData.fc) {\n      this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\n    } else {\n      this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\n    }\n    if (documentData.sc) {\n      this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\n      this.layerElement.setAttribute('stroke-width', documentData.sw);\n    }\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    if (fontData.fClass) {\n      this.layerElement.setAttribute('class', fontData.fClass);\n    } else {\n      this.layerElement.setAttribute('font-family', fontData.fFamily);\n      var fWeight = documentData.fWeight;\n      var fStyle = documentData.fStyle;\n      this.layerElement.setAttribute('font-style', fStyle);\n      this.layerElement.setAttribute('font-weight', fWeight);\n    }\n    this.layerElement.setAttribute('aria-label', documentData.t);\n    var letters = documentData.l || [];\n    var usesGlyphs = !!this.globalData.fontManager.chars;\n    len = letters.length;\n    var tSpan;\n    var matrixHelper = this.mHelper;\n    var shapeStr = '';\n    var singleShape = this.data.singleShape;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n    if (singleShape && !usesGlyphs && !documentData.sz) {\n      var tElement = this.textContainer;\n      var justify = 'start';\n      switch (documentData.j) {\n        case 1:\n          justify = 'end';\n          break;\n        case 2:\n          justify = 'middle';\n          break;\n        default:\n          justify = 'start';\n          break;\n      }\n      tElement.setAttribute('text-anchor', justify);\n      tElement.setAttribute('letter-spacing', trackingOffset);\n      var textContent = this.buildTextContents(documentData.finalText);\n      len = textContent.length;\n      yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\n      for (i = 0; i < len; i += 1) {\n        tSpan = this.textSpans[i].span || createNS('tspan');\n        tSpan.textContent = textContent[i];\n        tSpan.setAttribute('x', 0);\n        tSpan.setAttribute('y', yPos);\n        tSpan.style.display = 'inherit';\n        tElement.appendChild(tSpan);\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            glyph: null\n          };\n        }\n        this.textSpans[i].span = tSpan;\n        yPos += documentData.finalLineHeight;\n      }\n      this.layerElement.appendChild(tElement);\n    } else {\n      var cachedSpansLength = this.textSpans.length;\n      var charData;\n      for (i = 0; i < len; i += 1) {\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            childSpan: null,\n            glyph: null\n          };\n        }\n        if (!usesGlyphs || !singleShape || i === 0) {\n          tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\n          if (cachedSpansLength <= i) {\n            tSpan.setAttribute('stroke-linecap', 'butt');\n            tSpan.setAttribute('stroke-linejoin', 'round');\n            tSpan.setAttribute('stroke-miterlimit', '4');\n            this.textSpans[i].span = tSpan;\n            if (usesGlyphs) {\n              var childSpan = createNS('g');\n              tSpan.appendChild(childSpan);\n              this.textSpans[i].childSpan = childSpan;\n            }\n            this.textSpans[i].span = tSpan;\n            this.layerElement.appendChild(tSpan);\n          }\n          tSpan.style.display = 'inherit';\n        }\n        matrixHelper.reset();\n        if (singleShape) {\n          if (letters[i].n) {\n            xPos = -trackingOffset;\n            yPos += documentData.yOffset;\n            yPos += firstLine ? 1 : 0;\n            firstLine = false;\n          }\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n          xPos += letters[i].l || 0;\n          // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\n          xPos += trackingOffset;\n        }\n        if (usesGlyphs) {\n          charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n          var glyphElement;\n          // t === 1 means the character has been replaced with an animated shaped\n          if (charData.t === 1) {\n            glyphElement = new SVGCompElement(charData.data, this.globalData, this);\n          } else {\n            var data = emptyShapeData;\n            if (charData.data && charData.data.shapes) {\n              data = this.buildShapeData(charData.data, documentData.finalSize);\n            }\n            glyphElement = new SVGShapeElement(data, this.globalData, this);\n          }\n          if (this.textSpans[i].glyph) {\n            var glyph = this.textSpans[i].glyph;\n            this.textSpans[i].childSpan.removeChild(glyph.layerElement);\n            glyph.destroy();\n          }\n          this.textSpans[i].glyph = glyphElement;\n          glyphElement._debug = true;\n          glyphElement.prepareFrame(0);\n          glyphElement.renderFrame();\n          this.textSpans[i].childSpan.appendChild(glyphElement.layerElement);\n          // when using animated shapes, the layer will be scaled instead of replacing the internal scale\n          // this might have issues with strokes and might need a different solution\n          if (charData.t === 1) {\n            this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\n          }\n        } else {\n          if (singleShape) {\n            tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\n          }\n          tSpan.textContent = letters[i].val;\n          tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        }\n        //\n      }\n      if (singleShape && tSpan) {\n        tSpan.setAttribute('d', shapeStr);\n      }\n    }\n    while (i < this.textSpans.length) {\n      this.textSpans[i].span.style.display = 'none';\n      i += 1;\n    }\n    this._sizeChanged = true;\n  };\n  SVGTextLottieElement.prototype.sourceRectAtTime = function () {\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\n    this.renderInnerContent();\n    if (this._sizeChanged) {\n      this._sizeChanged = false;\n      var textBox = this.layerElement.getBBox();\n      this.bbox = {\n        top: textBox.y,\n        left: textBox.x,\n        width: textBox.width,\n        height: textBox.height\n      };\n    }\n    return this.bbox;\n  };\n  SVGTextLottieElement.prototype.getValue = function () {\n    var i;\n    var len = this.textSpans.length;\n    var glyphElement;\n    this.renderedFrame = this.comp.renderedFrame;\n    for (i = 0; i < len; i += 1) {\n      glyphElement = this.textSpans[i].glyph;\n      if (glyphElement) {\n        glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\n        if (glyphElement._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n  SVGTextLottieElement.prototype.renderInnerContent = function () {\n    if (!this.data.singleShape || this._mdf) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n      if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\n        this._sizeChanged = true;\n        var i;\n        var len;\n        var renderedLetters = this.textAnimator.renderedLetters;\n        var letters = this.textProperty.currentData.l;\n        len = letters.length;\n        var renderedLetter;\n        var textSpan;\n        var glyphElement;\n        for (i = 0; i < len; i += 1) {\n          if (!letters[i].n) {\n            renderedLetter = renderedLetters[i];\n            textSpan = this.textSpans[i].span;\n            glyphElement = this.textSpans[i].glyph;\n            if (glyphElement) {\n              glyphElement.renderFrame();\n            }\n            if (renderedLetter._mdf.m) {\n              textSpan.setAttribute('transform', renderedLetter.m);\n            }\n            if (renderedLetter._mdf.o) {\n              textSpan.setAttribute('opacity', renderedLetter.o);\n            }\n            if (renderedLetter._mdf.sw) {\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\n            }\n            if (renderedLetter._mdf.sc) {\n              textSpan.setAttribute('stroke', renderedLetter.sc);\n            }\n            if (renderedLetter._mdf.fc) {\n              textSpan.setAttribute('fill', renderedLetter.fc);\n            }\n          }\n        }\n      }\n    }\n  };\n  function ISolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([IImageElement], ISolidElement);\n  ISolidElement.prototype.createContent = function () {\n    var rect = createNS('rect');\n    /// /rect.style.width = this.data.sw;\n    /// /rect.style.height = this.data.sh;\n    /// /rect.style.fill = this.data.sc;\n    rect.setAttribute('width', this.data.sw);\n    rect.setAttribute('height', this.data.sh);\n    rect.setAttribute('fill', this.data.sc);\n    this.layerElement.appendChild(rect);\n  };\n  function NullElement(data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initFrame();\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n  }\n  NullElement.prototype.prepareFrame = function (num) {\n    this.prepareProperties(num, true);\n  };\n  NullElement.prototype.renderFrame = function () {};\n  NullElement.prototype.getBaseElement = function () {\n    return null;\n  };\n  NullElement.prototype.destroy = function () {};\n  NullElement.prototype.sourceRectAtTime = function () {};\n  NullElement.prototype.hide = function () {};\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n  function SVGRendererBase() {}\n  extendPrototype([BaseRenderer], SVGRendererBase);\n  SVGRendererBase.prototype.createNull = function (data) {\n    return new NullElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createShape = function (data) {\n    return new SVGShapeElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createText = function (data) {\n    return new SVGTextLottieElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createImage = function (data) {\n    return new IImageElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.createSolid = function (data) {\n    return new ISolidElement(data, this.globalData, this);\n  };\n  SVGRendererBase.prototype.configAnimation = function (animData) {\n    this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    if (this.renderConfig.viewBoxSize) {\n      this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\n    } else {\n      this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\n    }\n    if (!this.renderConfig.viewBoxOnly) {\n      this.svgElement.setAttribute('width', animData.w);\n      this.svgElement.setAttribute('height', animData.h);\n      this.svgElement.style.width = '100%';\n      this.svgElement.style.height = '100%';\n      this.svgElement.style.transform = 'translate3d(0,0,0)';\n      this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\n    }\n    if (this.renderConfig.width) {\n      this.svgElement.setAttribute('width', this.renderConfig.width);\n    }\n    if (this.renderConfig.height) {\n      this.svgElement.setAttribute('height', this.renderConfig.height);\n    }\n    if (this.renderConfig.className) {\n      this.svgElement.setAttribute('class', this.renderConfig.className);\n    }\n    if (this.renderConfig.id) {\n      this.svgElement.setAttribute('id', this.renderConfig.id);\n    }\n    if (this.renderConfig.focusable !== undefined) {\n      this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\n    }\n    this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\n    // this.layerElement.style.transform = 'translate3d(0,0,0)';\n    // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\n    this.animationItem.wrapper.appendChild(this.svgElement);\n    // Mask animation\n    var defs = this.globalData.defs;\n    this.setupGlobalData(animData, defs);\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.data = animData;\n    var maskElement = createNS('clipPath');\n    var rect = createNS('rect');\n    rect.setAttribute('width', animData.w);\n    rect.setAttribute('height', animData.h);\n    rect.setAttribute('x', 0);\n    rect.setAttribute('y', 0);\n    var maskId = createElementID();\n    maskElement.setAttribute('id', maskId);\n    maskElement.appendChild(rect);\n    this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\n    defs.appendChild(maskElement);\n    this.layers = animData.layers;\n    this.elements = createSizedArray(animData.layers.length);\n  };\n  SVGRendererBase.prototype.destroy = function () {\n    if (this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n    this.layerElement = null;\n    this.globalData.defs = null;\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n    this.elements.length = 0;\n    this.destroyed = true;\n    this.animationItem = null;\n  };\n  SVGRendererBase.prototype.updateContainerSize = function () {};\n  SVGRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n    elements[pos] = true;\n    var element = this.createItem(this.layers[pos]);\n    elements[pos] = element;\n    if (getExpressionsPlugin()) {\n      if (this.layers[pos].ty === 0) {\n        this.globalData.projectInterface.registerComposition(element);\n      }\n      element.initExpressions();\n    }\n    this.appendElementInPos(element, pos);\n    if (this.layers[pos].tt) {\n      if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\n        this.buildItem(pos - 1);\n        this.addPendingElement(element);\n      } else {\n        element.setMatte(elements[pos - 1].layerId);\n      }\n    }\n  };\n  SVGRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n      if (element.data.tt) {\n        var i = 0;\n        var len = this.elements.length;\n        while (i < len) {\n          if (this.elements[i] === element) {\n            element.setMatte(this.elements[i - 1].layerId);\n            break;\n          }\n          i += 1;\n        }\n      }\n    }\n  };\n  SVGRendererBase.prototype.renderFrame = function (num) {\n    if (this.renderedFrame === num || this.destroyed) {\n      return;\n    }\n    if (num === null) {\n      num = this.renderedFrame;\n    } else {\n      this.renderedFrame = num;\n    }\n    // console.log('-------');\n    // console.log('FRAME ',num);\n    this.globalData.frameNum = num;\n    this.globalData.frameId += 1;\n    this.globalData.projectInterface.currentFrame = num;\n    this.globalData._mdf = false;\n    var i;\n    var len = this.layers.length;\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n    if (this.globalData._mdf) {\n      for (i = 0; i < len; i += 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n    }\n  };\n  SVGRendererBase.prototype.appendElementInPos = function (element, pos) {\n    var newElement = element.getBaseElement();\n    if (!newElement) {\n      return;\n    }\n    var i = 0;\n    var nextElement;\n    while (i < pos) {\n      if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\n        nextElement = this.elements[i].getBaseElement();\n      }\n      i += 1;\n    }\n    if (nextElement) {\n      this.layerElement.insertBefore(newElement, nextElement);\n    } else {\n      this.layerElement.appendChild(newElement);\n    }\n  };\n  SVGRendererBase.prototype.hide = function () {\n    this.layerElement.style.display = 'none';\n  };\n  SVGRendererBase.prototype.show = function () {\n    this.layerElement.style.display = 'block';\n  };\n  function ICompElement() {}\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\n  ICompElement.prototype.initElement = function (data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initTransform(data, globalData, comp);\n    this.initRenderable();\n    this.initHierarchy();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n    if (this.data.xt || !globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n    this.hide();\n  };\n\n  /* ICompElement.prototype.hide = function(){\n      if(!this.hidden){\n          this.hideElement();\n          var i,len = this.elements.length;\n          for( i = 0; i < len; i+=1 ){\n              if(this.elements[i]){\n                  this.elements[i].hide();\n              }\n          }\n      }\n  }; */\n\n  ICompElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n    if (!this.isInRange && !this.data.xt) {\n      return;\n    }\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n      if (timeRemapped === this.data.op) {\n        timeRemapped = this.data.op - 1;\n      }\n      this.renderedFrame = timeRemapped;\n    } else {\n      this.renderedFrame = num / this.data.sr;\n    }\n    var i;\n    var len = this.elements.length;\n    if (!this.completeLayers) {\n      this.checkLayers(this.renderedFrame);\n    }\n    // This iteration needs to be backwards because of how expressions connect between each other\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\n        if (this.elements[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n  ICompElement.prototype.renderInnerContent = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n  ICompElement.prototype.setElements = function (elems) {\n    this.elements = elems;\n  };\n  ICompElement.prototype.getElements = function () {\n    return this.elements;\n  };\n  ICompElement.prototype.destroyElements = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n  };\n  ICompElement.prototype.destroy = function () {\n    this.destroyElements();\n    this.destroyBaseElement();\n  };\n  function SVGCompElement(data, globalData, comp) {\n    this.layers = data.layers;\n    this.supports3d = true;\n    this.completeLayers = false;\n    this.pendingElements = [];\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n  extendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\n  SVGCompElement.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n  function SVGRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.svgElement = createNS('svg');\n    var ariaLabel = '';\n    if (config && config.title) {\n      var titleElement = createNS('title');\n      var titleId = createElementID();\n      titleElement.setAttribute('id', titleId);\n      titleElement.textContent = config.title;\n      this.svgElement.appendChild(titleElement);\n      ariaLabel += titleId;\n    }\n    if (config && config.description) {\n      var descElement = createNS('desc');\n      var descId = createElementID();\n      descElement.setAttribute('id', descId);\n      descElement.textContent = config.description;\n      this.svgElement.appendChild(descElement);\n      ariaLabel += ' ' + descId;\n    }\n    if (ariaLabel) {\n      this.svgElement.setAttribute('aria-labelledby', ariaLabel);\n    }\n    var defs = createNS('defs');\n    this.svgElement.appendChild(defs);\n    var maskElement = createNS('g');\n    this.svgElement.appendChild(maskElement);\n    this.layerElement = maskElement;\n    this.renderConfig = {\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      progressiveLoad: config && config.progressiveLoad || false,\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      viewBoxOnly: config && config.viewBoxOnly || false,\n      viewBoxSize: config && config.viewBoxSize || false,\n      className: config && config.className || '',\n      id: config && config.id || '',\n      focusable: config && config.focusable,\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '100%',\n        height: config && config.filterSize && config.filterSize.height || '100%',\n        x: config && config.filterSize && config.filterSize.x || '0%',\n        y: config && config.filterSize && config.filterSize.y || '0%'\n      },\n      width: config && config.width,\n      height: config && config.height\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      defs: defs,\n      renderConfig: this.renderConfig\n    };\n    this.elements = [];\n    this.pendingElements = [];\n    this.destroyed = false;\n    this.rendererType = 'svg';\n  }\n  extendPrototype([SVGRendererBase], SVGRenderer);\n  SVGRenderer.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n  function CVContextData() {\n    this.saved = [];\n    this.cArrPos = 0;\n    this.cTr = new Matrix();\n    this.cO = 1;\n    var i;\n    var len = 15;\n    this.savedOp = createTypedArray('float32', len);\n    for (i = 0; i < len; i += 1) {\n      this.saved[i] = createTypedArray('float32', 16);\n    }\n    this._length = len;\n  }\n  CVContextData.prototype.duplicate = function () {\n    var newLength = this._length * 2;\n    var currentSavedOp = this.savedOp;\n    this.savedOp = createTypedArray('float32', newLength);\n    this.savedOp.set(currentSavedOp);\n    var i = 0;\n    for (i = this._length; i < newLength; i += 1) {\n      this.saved[i] = createTypedArray('float32', 16);\n    }\n    this._length = newLength;\n  };\n  CVContextData.prototype.reset = function () {\n    this.cArrPos = 0;\n    this.cTr.reset();\n    this.cO = 1;\n  };\n  function ShapeTransformManager() {\n    this.sequences = {};\n    this.sequenceList = [];\n    this.transform_key_count = 0;\n  }\n  ShapeTransformManager.prototype = {\n    addTransformSequence: function (transforms) {\n      var i;\n      var len = transforms.length;\n      var key = '_';\n      for (i = 0; i < len; i += 1) {\n        key += transforms[i].transform.key + '_';\n      }\n      var sequence = this.sequences[key];\n      if (!sequence) {\n        sequence = {\n          transforms: [].concat(transforms),\n          finalTransform: new Matrix(),\n          _mdf: false\n        };\n        this.sequences[key] = sequence;\n        this.sequenceList.push(sequence);\n      }\n      return sequence;\n    },\n    processSequence: function (sequence, isFirstFrame) {\n      var i = 0;\n      var len = sequence.transforms.length;\n      var _mdf = isFirstFrame;\n      while (i < len && !isFirstFrame) {\n        if (sequence.transforms[i].transform.mProps._mdf) {\n          _mdf = true;\n          break;\n        }\n        i += 1;\n      }\n      if (_mdf) {\n        var props;\n        sequence.finalTransform.reset();\n        for (i = len - 1; i >= 0; i -= 1) {\n          props = sequence.transforms[i].transform.mProps.v.props;\n          sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n        }\n      }\n      sequence._mdf = _mdf;\n    },\n    processSequences: function (isFirstFrame) {\n      var i;\n      var len = this.sequenceList.length;\n      for (i = 0; i < len; i += 1) {\n        this.processSequence(this.sequenceList[i], isFirstFrame);\n      }\n    },\n    getNewKey: function () {\n      this.transform_key_count += 1;\n      return '_' + this.transform_key_count;\n    }\n  };\n  function CVEffects() {}\n  CVEffects.prototype.renderFrame = function () {};\n  function CVMaskElement(data, element) {\n    this.data = data;\n    this.element = element;\n    this.masksProperties = this.data.masksProperties || [];\n    this.viewData = createSizedArray(this.masksProperties.length);\n    var i;\n    var len = this.masksProperties.length;\n    var hasMasks = false;\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        hasMasks = true;\n      }\n      this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\n    }\n    this.hasMasks = hasMasks;\n    if (hasMasks) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n  CVMaskElement.prototype.renderFrame = function () {\n    if (!this.hasMasks) {\n      return;\n    }\n    var transform = this.element.finalTransform.mat;\n    var ctx = this.element.canvasContext;\n    var i;\n    var len = this.masksProperties.length;\n    var pt;\n    var pts;\n    var data;\n    ctx.beginPath();\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.masksProperties[i].inv) {\n          ctx.moveTo(0, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\n          ctx.lineTo(0, this.element.globalData.compSize.h);\n          ctx.lineTo(0, 0);\n        }\n        data = this.viewData[i].v;\n        pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\n        ctx.moveTo(pt[0], pt[1]);\n        var j;\n        var jLen = data._length;\n        for (j = 1; j < jLen; j += 1) {\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n        }\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n      }\n    }\n    this.element.globalData.renderer.save(true);\n    ctx.clip();\n  };\n  CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\n  CVMaskElement.prototype.destroy = function () {\n    this.element = null;\n  };\n  function CVBaseElement() {}\n  CVBaseElement.prototype = {\n    createElements: function () {},\n    initRendererElement: function () {},\n    createContainerElements: function () {\n      this.canvasContext = this.globalData.canvasContext;\n      this.renderableEffectsManager = new CVEffects(this);\n    },\n    createContent: function () {},\n    setBlendMode: function () {\n      var globalData = this.globalData;\n      if (globalData.blendMode !== this.data.bm) {\n        globalData.blendMode = this.data.bm;\n        var blendModeValue = getBlendMode(this.data.bm);\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\n      }\n    },\n    createRenderableComponents: function () {\n      this.maskManager = new CVMaskElement(this.data, this);\n    },\n    hideElement: function () {\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n        this.hidden = true;\n      }\n    },\n    showElement: function () {\n      if (this.isInRange && !this.isTransparent) {\n        this.hidden = false;\n        this._isFirstFrame = true;\n        this.maskManager._isFirstFrame = true;\n      }\n    },\n    renderFrame: function () {\n      if (this.hidden || this.data.hd) {\n        return;\n      }\n      this.renderTransform();\n      this.renderRenderable();\n      this.setBlendMode();\n      var forceRealStack = this.data.ty === 0;\n      this.globalData.renderer.save(forceRealStack);\n      this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\n      this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\n      this.renderInnerContent();\n      this.globalData.renderer.restore(forceRealStack);\n      if (this.maskManager.hasMasks) {\n        this.globalData.renderer.restore(true);\n      }\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    destroy: function () {\n      this.canvasContext = null;\n      this.data = null;\n      this.globalData = null;\n      this.maskManager.destroy();\n    },\n    mHelper: new Matrix()\n  };\n  CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\n  CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n  function CVShapeData(element, data, styles, transformsManager) {\n    this.styledShapes = [];\n    this.tr = [0, 0, 0, 0, 0, 0];\n    var ty = 4;\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n    this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\n    var i;\n    var len = styles.length;\n    var styledShape;\n    for (i = 0; i < len; i += 1) {\n      if (!styles[i].closed) {\n        styledShape = {\n          transforms: transformsManager.addTransformSequence(styles[i].transforms),\n          trNodes: []\n        };\n        this.styledShapes.push(styledShape);\n        styles[i].elements.push(styledShape);\n      }\n    }\n  }\n  CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n  function CVShapeElement(data, globalData, comp) {\n    this.shapes = [];\n    this.shapesData = data.shapes;\n    this.stylesList = [];\n    this.itemsData = [];\n    this.prevViewData = [];\n    this.shapeModifiers = [];\n    this.processedElements = [];\n    this.transformsManager = new ShapeTransformManager();\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\n  CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\n  CVShapeElement.prototype.transformHelper = {\n    opacity: 1,\n    _opMdf: false\n  };\n  CVShapeElement.prototype.dashResetter = [];\n  CVShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n  };\n  CVShapeElement.prototype.createStyleElement = function (data, transforms) {\n    var styleElem = {\n      data: data,\n      type: data.ty,\n      preTransforms: this.transformsManager.addTransformSequence(transforms),\n      transforms: [],\n      elements: [],\n      closed: data.hd === true\n    };\n    var elementData = {};\n    if (data.ty === 'fl' || data.ty === 'st') {\n      elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\n      if (!elementData.c.k) {\n        styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\n      }\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\n      elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\n      elementData.h = PropertyFactory.getProp(this, data.h || {\n        k: 0\n      }, 0, 0.01, this);\n      elementData.a = PropertyFactory.getProp(this, data.a || {\n        k: 0\n      }, 0, degToRads, this);\n      elementData.g = new GradientProperty(this, data.g, this);\n    }\n    elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\n    if (data.ty === 'st' || data.ty === 'gs') {\n      styleElem.lc = lineCapEnum[data.lc || 2];\n      styleElem.lj = lineJoinEnum[data.lj || 2];\n      if (data.lj == 1) {\n        // eslint-disable-line eqeqeq\n        styleElem.ml = data.ml;\n      }\n      elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\n      if (!elementData.w.k) {\n        styleElem.wi = elementData.w.v;\n      }\n      if (data.d) {\n        var d = new DashProperty(this, data.d, 'canvas', this);\n        elementData.d = d;\n        if (!elementData.d.k) {\n          styleElem.da = elementData.d.dashArray;\n          styleElem.do = elementData.d.dashoffset[0];\n        }\n      }\n    } else {\n      styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\n    }\n    this.stylesList.push(styleElem);\n    elementData.style = styleElem;\n    return elementData;\n  };\n  CVShapeElement.prototype.createGroupElement = function () {\n    var elementData = {\n      it: [],\n      prevViewData: []\n    };\n    return elementData;\n  };\n  CVShapeElement.prototype.createTransformElement = function (data) {\n    var elementData = {\n      transform: {\n        opacity: 1,\n        _opMdf: false,\n        key: this.transformsManager.getNewKey(),\n        op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\n        mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\n      }\n    };\n    return elementData;\n  };\n  CVShapeElement.prototype.createShapeElement = function (data) {\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    return elementData;\n  };\n  CVShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n    len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n  };\n  CVShapeElement.prototype.addTransformToStyleList = function (transform) {\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.push(transform);\n      }\n    }\n  };\n  CVShapeElement.prototype.removeTransformFromStyleList = function () {\n    var i;\n    var len = this.stylesList.length;\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.pop();\n      }\n    }\n  };\n  CVShapeElement.prototype.closeStyles = function (styles) {\n    var i;\n    var len = styles.length;\n    for (i = 0; i < len; i += 1) {\n      styles[i].closed = true;\n    }\n  };\n  CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var processedPos;\n    var modifier;\n    var currentTransform;\n    var ownTransforms = [].concat(transforms);\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n      if (!processedPos) {\n        arr[i]._shouldRender = shouldRender;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\n        } else {\n          itemsData[i].style.closed = false;\n        }\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          currentTransform = this.createTransformElement(arr[i]);\n          itemsData[i] = currentTransform;\n        }\n        ownTransforms.push(itemsData[i]);\n        this.addTransformToStyleList(itemsData[i]);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i]);\n        }\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          shouldRender = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n        ownModifiers.push(modifier);\n      }\n      this.addProcessedElement(arr[i], i + 1);\n    }\n    this.removeTransformFromStyleList();\n    this.closeStyles(ownStyles);\n    len = ownModifiers.length;\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n  CVShapeElement.prototype.renderInnerContent = function () {\n    this.transformHelper.opacity = 1;\n    this.transformHelper._opMdf = false;\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n    this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\n  };\n  CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\n    if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\n      groupTransform.opacity = parentTransform.opacity;\n      groupTransform.opacity *= groupTransform.op.v;\n      groupTransform._opMdf = true;\n    }\n  };\n  CVShapeElement.prototype.drawLayer = function () {\n    var i;\n    var len = this.stylesList.length;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var elems;\n    var nodes;\n    var renderer = this.globalData.renderer;\n    var ctx = this.globalData.canvasContext;\n    var type;\n    var currentStyle;\n    for (i = 0; i < len; i += 1) {\n      currentStyle = this.stylesList[i];\n      type = currentStyle.type;\n\n      // Skipping style when\n      // Stroke width equals 0\n      // style should not be rendered (extra unused repeaters)\n      // current opacity equals 0\n      // global opacity equals 0\n      if (!((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\n        renderer.save();\n        elems = currentStyle.elements;\n        if (type === 'st' || type === 'gs') {\n          ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\n          ctx.lineWidth = currentStyle.wi;\n          ctx.lineCap = currentStyle.lc;\n          ctx.lineJoin = currentStyle.lj;\n          ctx.miterLimit = currentStyle.ml || 0;\n        } else {\n          ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\n        }\n        renderer.ctxOpacity(currentStyle.coOp);\n        if (type !== 'st' && type !== 'gs') {\n          ctx.beginPath();\n        }\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\n        jLen = elems.length;\n        for (j = 0; j < jLen; j += 1) {\n          if (type === 'st' || type === 'gs') {\n            ctx.beginPath();\n            if (currentStyle.da) {\n              ctx.setLineDash(currentStyle.da);\n              ctx.lineDashOffset = currentStyle.do;\n            }\n          }\n          nodes = elems[j].trNodes;\n          kLen = nodes.length;\n          for (k = 0; k < kLen; k += 1) {\n            if (nodes[k].t === 'm') {\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\n            } else if (nodes[k].t === 'c') {\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\n            } else {\n              ctx.closePath();\n            }\n          }\n          if (type === 'st' || type === 'gs') {\n            ctx.stroke();\n            if (currentStyle.da) {\n              ctx.setLineDash(this.dashResetter);\n            }\n          }\n        }\n        if (type !== 'st' && type !== 'gs') {\n          ctx.fill(currentStyle.r);\n        }\n        renderer.restore();\n      }\n    }\n  };\n  CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\n    var i;\n    var len = items.length - 1;\n    var groupTransform;\n    groupTransform = parentTransform;\n    for (i = len; i >= 0; i -= 1) {\n      if (items[i].ty === 'tr') {\n        groupTransform = data[i].transform;\n        this.renderShapeTransform(parentTransform, groupTransform);\n      } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\n        this.renderPath(items[i], data[i]);\n      } else if (items[i].ty === 'fl') {\n        this.renderFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'st') {\n        this.renderStroke(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\n        this.renderGradientFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gr') {\n        this.renderShape(groupTransform, items[i].it, data[i].it);\n      } else if (items[i].ty === 'tm') {\n        //\n      }\n    }\n    if (isMain) {\n      this.drawLayer();\n    }\n  };\n  CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\n    if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\n      var shapeNodes = styledShape.trNodes;\n      var paths = shape.paths;\n      var i;\n      var len;\n      var j;\n      var jLen = paths._length;\n      shapeNodes.length = 0;\n      var groupTransformMat = styledShape.transforms.finalTransform;\n      for (j = 0; j < jLen; j += 1) {\n        var pathNodes = paths.shapes[j];\n        if (pathNodes && pathNodes.v) {\n          len = pathNodes._length;\n          for (i = 1; i < len; i += 1) {\n            if (i === 1) {\n              shapeNodes.push({\n                t: 'm',\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n              });\n            }\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\n            });\n          }\n          if (len === 1) {\n            shapeNodes.push({\n              t: 'm',\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n            });\n          }\n          if (pathNodes.c && len) {\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\n            });\n            shapeNodes.push({\n              t: 'z'\n            });\n          }\n        }\n      }\n      styledShape.trNodes = shapeNodes;\n    }\n  };\n  CVShapeElement.prototype.renderPath = function (pathData, itemData) {\n    if (pathData.hd !== true && pathData._shouldRender) {\n      var i;\n      var len = itemData.styledShapes.length;\n      for (i = 0; i < len; i += 1) {\n        this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\n      }\n    }\n  };\n  CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n  };\n  CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var grd;\n    if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\n      var ctx = this.globalData.canvasContext;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n      if (styleData.t === 1) {\n        grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\n      } else {\n        var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n        var percent = itemData.h.v;\n        if (percent >= 1) {\n          percent = 0.99;\n        } else if (percent <= -1) {\n          percent = -0.99;\n        }\n        var dist = rad * percent;\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n        grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\n      }\n      var i;\n      var len = styleData.g.p;\n      var cValues = itemData.g.c;\n      var opacity = 1;\n      for (i = 0; i < len; i += 1) {\n        if (itemData.g._hasOpacity && itemData.g._collapsable) {\n          opacity = itemData.g.o[i * 2 + 1];\n        }\n        grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\n      }\n      styleElem.grd = grd;\n    }\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\n  };\n  CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var d = itemData.d;\n    if (d && (d._mdf || this._isFirstFrame)) {\n      styleElem.da = d.dashArray;\n      styleElem.do = d.dashoffset[0];\n    }\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n    if (itemData.w._mdf || this._isFirstFrame) {\n      styleElem.wi = itemData.w.v;\n    }\n  };\n  CVShapeElement.prototype.destroy = function () {\n    this.shapesData = null;\n    this.globalData = null;\n    this.canvasContext = null;\n    this.stylesList.length = 0;\n    this.itemsData.length = 0;\n  };\n  function CVTextElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.yOffset = 0;\n    this.fillColorAnim = false;\n    this.strokeColorAnim = false;\n    this.strokeWidthAnim = false;\n    this.stroke = false;\n    this.fill = false;\n    this.justifyOffset = 0;\n    this.currentRender = null;\n    this.renderType = 'canvas';\n    this.values = {\n      fill: 'rgba(0,0,0,0)',\n      stroke: 'rgba(0,0,0,0)',\n      sWidth: 0,\n      fValue: ''\n    };\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\n  CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\n  CVTextElement.prototype.buildNewText = function () {\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n    var hasFill = false;\n    if (documentData.fc) {\n      hasFill = true;\n      this.values.fill = this.buildColor(documentData.fc);\n    } else {\n      this.values.fill = 'rgba(0,0,0,0)';\n    }\n    this.fill = hasFill;\n    var hasStroke = false;\n    if (documentData.sc) {\n      hasStroke = true;\n      this.values.stroke = this.buildColor(documentData.sc);\n      this.values.sWidth = documentData.sw;\n    }\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    var i;\n    var len;\n    var letters = documentData.l;\n    var matrixHelper = this.mHelper;\n    this.stroke = hasStroke;\n    this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\n    len = documentData.finalText.length;\n    // this.tHelper.font = this.values.fValue;\n    var charData;\n    var shapeData;\n    var k;\n    var kLen;\n    var shapes;\n    var j;\n    var jLen;\n    var pathNodes;\n    var commands;\n    var pathArr;\n    var singleShape = this.data.singleShape;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var cnt = 0;\n    for (i = 0; i < len; i += 1) {\n      charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n      shapeData = charData && charData.data || {};\n      matrixHelper.reset();\n      if (singleShape && letters[i].n) {\n        xPos = -trackingOffset;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        firstLine = false;\n      }\n      shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n      jLen = shapes.length;\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n      if (singleShape) {\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n      }\n      commands = createSizedArray(jLen - 1);\n      var commandsCounter = 0;\n      for (j = 0; j < jLen; j += 1) {\n        if (shapes[j].ty === 'sh') {\n          kLen = shapes[j].ks.k.i.length;\n          pathNodes = shapes[j].ks.k;\n          pathArr = [];\n          for (k = 1; k < kLen; k += 1) {\n            if (k === 1) {\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n            }\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\n          }\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n          commands[commandsCounter] = pathArr;\n          commandsCounter += 1;\n        }\n      }\n      if (singleShape) {\n        xPos += letters[i].l;\n        xPos += trackingOffset;\n      }\n      if (this.textSpans[cnt]) {\n        this.textSpans[cnt].elem = commands;\n      } else {\n        this.textSpans[cnt] = {\n          elem: commands\n        };\n      }\n      cnt += 1;\n    }\n  };\n  CVTextElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.font = this.values.fValue;\n    ctx.lineCap = 'butt';\n    ctx.lineJoin = 'miter';\n    ctx.miterLimit = 4;\n    if (!this.data.singleShape) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n    }\n    var i;\n    var len;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var renderedLetters = this.textAnimator.renderedLetters;\n    var letters = this.textProperty.currentData.l;\n    len = letters.length;\n    var renderedLetter;\n    var lastFill = null;\n    var lastStroke = null;\n    var lastStrokeW = null;\n    var commands;\n    var pathArr;\n    for (i = 0; i < len; i += 1) {\n      if (!letters[i].n) {\n        renderedLetter = renderedLetters[i];\n        if (renderedLetter) {\n          this.globalData.renderer.save();\n          this.globalData.renderer.ctxTransform(renderedLetter.p);\n          this.globalData.renderer.ctxOpacity(renderedLetter.o);\n        }\n        if (this.fill) {\n          if (renderedLetter && renderedLetter.fc) {\n            if (lastFill !== renderedLetter.fc) {\n              lastFill = renderedLetter.fc;\n              ctx.fillStyle = renderedLetter.fc;\n            }\n          } else if (lastFill !== this.values.fill) {\n            lastFill = this.values.fill;\n            ctx.fillStyle = this.values.fill;\n          }\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.fill();\n          /// ctx.fillText(this.textSpans[i].val,0,0);\n        }\n        if (this.stroke) {\n          if (renderedLetter && renderedLetter.sw) {\n            if (lastStrokeW !== renderedLetter.sw) {\n              lastStrokeW = renderedLetter.sw;\n              ctx.lineWidth = renderedLetter.sw;\n            }\n          } else if (lastStrokeW !== this.values.sWidth) {\n            lastStrokeW = this.values.sWidth;\n            ctx.lineWidth = this.values.sWidth;\n          }\n          if (renderedLetter && renderedLetter.sc) {\n            if (lastStroke !== renderedLetter.sc) {\n              lastStroke = renderedLetter.sc;\n              ctx.strokeStyle = renderedLetter.sc;\n            }\n          } else if (lastStroke !== this.values.stroke) {\n            lastStroke = this.values.stroke;\n            ctx.strokeStyle = this.values.stroke;\n          }\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.stroke();\n          /// ctx.strokeText(letters[i].val,0,0);\n        }\n        if (renderedLetter) {\n          this.globalData.renderer.restore();\n        }\n      }\n    }\n  };\n  function CVImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.img = globalData.imageLoader.getAsset(this.assetData);\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\n  CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n  CVImageElement.prototype.createContent = function () {\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\n      var canvas = createTag('canvas');\n      canvas.width = this.assetData.w;\n      canvas.height = this.assetData.h;\n      var ctx = canvas.getContext('2d');\n      var imgW = this.img.width;\n      var imgH = this.img.height;\n      var imgRel = imgW / imgH;\n      var canvasRel = this.assetData.w / this.assetData.h;\n      var widthCrop;\n      var heightCrop;\n      var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\n      if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\n        heightCrop = imgH;\n        widthCrop = heightCrop * canvasRel;\n      } else {\n        widthCrop = imgW;\n        heightCrop = widthCrop / canvasRel;\n      }\n      ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\n      this.img = canvas;\n    }\n  };\n  CVImageElement.prototype.renderInnerContent = function () {\n    this.canvasContext.drawImage(this.img, 0, 0);\n  };\n  CVImageElement.prototype.destroy = function () {\n    this.img = null;\n  };\n  function CVSolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\n  CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n  CVSolidElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.fillStyle = this.data.sc;\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh);\n    //\n  };\n  function CanvasRendererBase(animationItem, config) {\n    this.animationItem = animationItem;\n    this.renderConfig = {\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n      context: config && config.context || null,\n      progressiveLoad: config && config.progressiveLoad || false,\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      className: config && config.className || '',\n      id: config && config.id || ''\n    };\n    this.renderConfig.dpr = config && config.dpr || 1;\n    if (this.animationItem.wrapper) {\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n    }\n    this.renderedFrame = -1;\n    this.globalData = {\n      frameNum: -1,\n      _mdf: false,\n      renderConfig: this.renderConfig,\n      currentGlobalAlpha: -1\n    };\n    this.contextData = new CVContextData();\n    this.elements = [];\n    this.pendingElements = [];\n    this.transformMat = new Matrix();\n    this.completeLayers = false;\n    this.rendererType = 'canvas';\n  }\n  extendPrototype([BaseRenderer], CanvasRendererBase);\n  CanvasRendererBase.prototype.createShape = function (data) {\n    return new CVShapeElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createText = function (data) {\n    return new CVTextElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createImage = function (data) {\n    return new CVImageElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createSolid = function (data) {\n    return new CVSolidElement(data, this.globalData, this);\n  };\n  CanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n  CanvasRendererBase.prototype.ctxTransform = function (props) {\n    if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\n      return;\n    }\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\n      return;\n    }\n    this.transformMat.cloneFromProps(props);\n    var cProps = this.contextData.cTr.props;\n    this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]);\n    // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\n    var trProps = this.contextData.cTr.props;\n    this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\n  };\n  CanvasRendererBase.prototype.ctxOpacity = function (op) {\n    /* if(op === 1){\n          return;\n      } */\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\n      return;\n    }\n    this.contextData.cO *= op < 0 ? 0 : op;\n    if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\n      this.canvasContext.globalAlpha = this.contextData.cO;\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\n    }\n  };\n  CanvasRendererBase.prototype.reset = function () {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n    this.contextData.reset();\n  };\n  CanvasRendererBase.prototype.save = function (actionFlag) {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.save();\n      return;\n    }\n    if (actionFlag) {\n      this.canvasContext.save();\n    }\n    var props = this.contextData.cTr.props;\n    if (this.contextData._length <= this.contextData.cArrPos) {\n      this.contextData.duplicate();\n    }\n    var i;\n    var arr = this.contextData.saved[this.contextData.cArrPos];\n    for (i = 0; i < 16; i += 1) {\n      arr[i] = props[i];\n    }\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\n    this.contextData.cArrPos += 1;\n  };\n  CanvasRendererBase.prototype.restore = function (actionFlag) {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n    if (actionFlag) {\n      this.canvasContext.restore();\n      this.globalData.blendMode = 'source-over';\n    }\n    this.contextData.cArrPos -= 1;\n    var popped = this.contextData.saved[this.contextData.cArrPos];\n    var i;\n    var arr = this.contextData.cTr.props;\n    for (i = 0; i < 16; i += 1) {\n      arr[i] = popped[i];\n    }\n    this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\n    this.contextData.cO = popped;\n    if (this.globalData.currentGlobalAlpha !== popped) {\n      this.canvasContext.globalAlpha = popped;\n      this.globalData.currentGlobalAlpha = popped;\n    }\n  };\n  CanvasRendererBase.prototype.configAnimation = function (animData) {\n    if (this.animationItem.wrapper) {\n      this.animationItem.container = createTag('canvas');\n      var containerStyle = this.animationItem.container.style;\n      containerStyle.width = '100%';\n      containerStyle.height = '100%';\n      var origin = '0px 0px 0px';\n      containerStyle.transformOrigin = origin;\n      containerStyle.mozTransformOrigin = origin;\n      containerStyle.webkitTransformOrigin = origin;\n      containerStyle['-webkit-transform'] = origin;\n      containerStyle.contentVisibility = this.renderConfig.contentVisibility;\n      this.animationItem.wrapper.appendChild(this.animationItem.container);\n      this.canvasContext = this.animationItem.container.getContext('2d');\n      if (this.renderConfig.className) {\n        this.animationItem.container.setAttribute('class', this.renderConfig.className);\n      }\n      if (this.renderConfig.id) {\n        this.animationItem.container.setAttribute('id', this.renderConfig.id);\n      }\n    } else {\n      this.canvasContext = this.renderConfig.context;\n    }\n    this.data = animData;\n    this.layers = animData.layers;\n    this.transformCanvas = {\n      w: animData.w,\n      h: animData.h,\n      sx: 0,\n      sy: 0,\n      tx: 0,\n      ty: 0\n    };\n    this.setupGlobalData(animData, document.body);\n    this.globalData.canvasContext = this.canvasContext;\n    this.globalData.renderer = this;\n    this.globalData.isDashed = false;\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.globalData.transformCanvas = this.transformCanvas;\n    this.elements = createSizedArray(animData.layers.length);\n    this.updateContainerSize();\n  };\n  CanvasRendererBase.prototype.updateContainerSize = function () {\n    this.reset();\n    var elementWidth;\n    var elementHeight;\n    if (this.animationItem.wrapper && this.animationItem.container) {\n      elementWidth = this.animationItem.wrapper.offsetWidth;\n      elementHeight = this.animationItem.wrapper.offsetHeight;\n      this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\n      this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\n    } else {\n      elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\n      elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\n    }\n    var elementRel;\n    var animationRel;\n    if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\n      var par = this.renderConfig.preserveAspectRatio.split(' ');\n      var fillType = par[1] || 'meet';\n      var pos = par[0] || 'xMidYMid';\n      var xPos = pos.substr(0, 4);\n      var yPos = pos.substr(4);\n      elementRel = elementWidth / elementHeight;\n      animationRel = this.transformCanvas.w / this.transformCanvas.h;\n      if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      } else {\n        this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      }\n      if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\n      } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.tx = 0;\n      }\n      if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\n      } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.ty = 0;\n      }\n    } else if (this.renderConfig.preserveAspectRatio === 'none') {\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    } else {\n      this.transformCanvas.sx = this.renderConfig.dpr;\n      this.transformCanvas.sy = this.renderConfig.dpr;\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    }\n    this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\n    /* var i, len = this.elements.length;\n      for(i=0;i<len;i+=1){\n          if(this.elements[i] && this.elements[i].data.ty === 0){\n              this.elements[i].resize(this.globalData.transformCanvas);\n          }\n      } */\n    this.ctxTransform(this.transformCanvas.props);\n    this.canvasContext.beginPath();\n    this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n    this.canvasContext.closePath();\n    this.canvasContext.clip();\n    this.renderFrame(this.renderedFrame, true);\n  };\n  CanvasRendererBase.prototype.destroy = function () {\n    if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n    this.elements.length = 0;\n    this.globalData.canvasContext = null;\n    this.animationItem.container = null;\n    this.destroyed = true;\n  };\n  CanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\n    if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\n      return;\n    }\n    this.renderedFrame = num;\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\n    this.globalData.frameId += 1;\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\n    this.globalData.projectInterface.currentFrame = num;\n\n    // console.log('--------');\n    // console.log('NEW: ',num);\n    var i;\n    var len = this.layers.length;\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n    if (this.globalData._mdf) {\n      if (this.renderConfig.clearCanvas === true) {\n        this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n      } else {\n        this.save();\n      }\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n      if (this.renderConfig.clearCanvas !== true) {\n        this.restore();\n      }\n    }\n  };\n  CanvasRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n    var element = this.createItem(this.layers[pos], this, this.globalData);\n    elements[pos] = element;\n    element.initExpressions();\n    /* if(this.layers[pos].ty === 0){\n          element.resize(this.globalData.transformCanvas);\n      } */\n  };\n  CanvasRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n    }\n  };\n  CanvasRendererBase.prototype.hide = function () {\n    this.animationItem.container.style.display = 'none';\n  };\n  CanvasRendererBase.prototype.show = function () {\n    this.animationItem.container.style.display = 'block';\n  };\n  function CVCompElement(data, globalData, comp) {\n    this.completeLayers = false;\n    this.layers = data.layers;\n    this.pendingElements = [];\n    this.elements = createSizedArray(this.layers.length);\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n  extendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\n  CVCompElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(this.data.w, 0);\n    ctx.lineTo(this.data.w, this.data.h);\n    ctx.lineTo(0, this.data.h);\n    ctx.lineTo(0, 0);\n    ctx.clip();\n    var i;\n    var len = this.layers.length;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n  CVCompElement.prototype.destroy = function () {\n    var i;\n    var len = this.layers.length;\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n    this.layers = null;\n    this.elements = null;\n  };\n  CVCompElement.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n  function CanvasRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.renderConfig = {\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n      context: config && config.context || null,\n      progressiveLoad: config && config.progressiveLoad || false,\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      className: config && config.className || '',\n      id: config && config.id || ''\n    };\n    this.renderConfig.dpr = config && config.dpr || 1;\n    if (this.animationItem.wrapper) {\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n    }\n    this.renderedFrame = -1;\n    this.globalData = {\n      frameNum: -1,\n      _mdf: false,\n      renderConfig: this.renderConfig,\n      currentGlobalAlpha: -1\n    };\n    this.contextData = new CVContextData();\n    this.elements = [];\n    this.pendingElements = [];\n    this.transformMat = new Matrix();\n    this.completeLayers = false;\n    this.rendererType = 'canvas';\n  }\n  extendPrototype([CanvasRendererBase], CanvasRenderer);\n  CanvasRenderer.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n\n  // Registering renderers\n  registerRenderer('canvas', CanvasRenderer);\n\n  // Registering shape modifiers\n  ShapeModifiers.registerModifier('tm', TrimModifier);\n  ShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\n  ShapeModifiers.registerModifier('rp', RepeaterModifier);\n  ShapeModifiers.registerModifier('rd', RoundCornersModifier);\n  const Expressions = function () {\n    var ob = {};\n    ob.initExpressions = initExpressions;\n    function initExpressions(animation) {\n      var stackCount = 0;\n      var registers = [];\n      function pushExpression() {\n        stackCount += 1;\n      }\n      function popExpression() {\n        stackCount -= 1;\n        if (stackCount === 0) {\n          releaseInstances();\n        }\n      }\n      function registerExpressionProperty(expression) {\n        if (registers.indexOf(expression) === -1) {\n          registers.push(expression);\n        }\n      }\n      function releaseInstances() {\n        var i;\n        var len = registers.length;\n        for (i = 0; i < len; i += 1) {\n          registers[i].release();\n        }\n        registers.length = 0;\n      }\n      animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\n      animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\n      animation.renderer.globalData.pushExpression = pushExpression;\n      animation.renderer.globalData.popExpression = popExpression;\n      animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\n    }\n    return ob;\n  }();\n\n  /* eslint-disable */\n  /*\n   Copyright 2014 David Bau.\n  \n   Permission is hereby granted, free of charge, to any person obtaining\n   a copy of this software and associated documentation files (the\n   \"Software\"), to deal in the Software without restriction, including\n   without limitation the rights to use, copy, modify, merge, publish,\n   distribute, sublicense, and/or sell copies of the Software, and to\n   permit persons to whom the Software is furnished to do so, subject to\n   the following conditions:\n  \n   The above copyright notice and this permission notice shall be\n   included in all copies or substantial portions of the Software.\n  \n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n  \n   */\n\n  function seedRandom(pool, math) {\n    //\n    // The following constants are related to IEEE 754 limits.\n    //\n    var global = this,\n      width = 256,\n      // each RC4 output is 0 <= x < 256\n      chunks = 6,\n      // at least six RC4 outputs for each double\n      digits = 52,\n      // there are 52 significant digits in a double\n      rngname = 'random',\n      // rngname: name for Math.random and Math.seedrandom\n      startdenom = math.pow(width, chunks),\n      significance = math.pow(2, digits),\n      overflow = significance * 2,\n      mask = width - 1,\n      nodecrypto; // node.js crypto module, initialized at the bottom.\n\n    //\n    // seedrandom()\n    // This is the seedrandom function described above.\n    //\n    function seedrandom(seed, options, callback) {\n      var key = [];\n      options = options === true ? {\n        entropy: true\n      } : options || {};\n\n      // Flatten the seed string or build one from local entropy if needed.\n      var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key);\n\n      // Use the seed to initialize an ARC4 generator.\n      var arc4 = new ARC4(key);\n\n      // This function returns a random double in [0, 1) that contains\n      // randomness in every bit of the mantissa of the IEEE 754 value.\n      var prng = function () {\n        var n = arc4.g(chunks),\n          // Start with a numerator n < 2 ^ 48\n          d = startdenom,\n          //   and denominator d = 2 ^ 48.\n          x = 0; //   and no 'extra last byte'.\n        while (n < significance) {\n          // Fill up all significant digits by\n          n = (n + x) * width; //   shifting numerator and\n          d *= width; //   denominator and generating a\n          x = arc4.g(1); //   new least-significant-byte.\n        }\n        while (n >= overflow) {\n          // To avoid rounding up, before adding\n          n /= 2; //   last byte, shift everything\n          d /= 2; //   right using integer math until\n          x >>>= 1; //   we have exactly the desired bits.\n        }\n        return (n + x) / d; // Form the number within [0, 1).\n      };\n      prng.int32 = function () {\n        return arc4.g(4) | 0;\n      };\n      prng.quick = function () {\n        return arc4.g(4) / 0x100000000;\n      };\n      prng.double = prng;\n\n      // Mix the randomness into accumulated entropy.\n      mixkey(tostring(arc4.S), pool);\n\n      // Calling convention: what to return as a function of prng, seed, is_math.\n      return (options.pass || callback || function (prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) {\n            copy(state, arc4);\n          }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function () {\n            return copy(arc4, {});\n          };\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) {\n          math[rngname] = prng;\n          return seed;\n        }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n    }\n    math['seed' + rngname] = seedrandom;\n\n    //\n    // ARC4\n    //\n    // An ARC4 implementation.  The constructor takes a key in the form of\n    // an array of at most (width) integers that should be 0 <= x < (width).\n    //\n    // The g(count) method returns a pseudorandom integer that concatenates\n    // the next (count) outputs from ARC4.  Its return value is a number x\n    // that is in the range 0 <= x < (width ^ count).\n    //\n    function ARC4(key) {\n      var t,\n        keylen = key.length,\n        me = this,\n        i = 0,\n        j = me.i = me.j = 0,\n        s = me.S = [];\n\n      // The empty key [] is treated as [0].\n      if (!keylen) {\n        key = [keylen++];\n      }\n\n      // Set up S using the standard key scheduling algorithm.\n      while (i < width) {\n        s[i] = i++;\n      }\n      for (i = 0; i < width; i++) {\n        s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n        s[j] = t;\n      }\n\n      // The \"g\" method returns the next (count) outputs as one number.\n      me.g = function (count) {\n        // Using instance members instead of closure state nearly doubles speed.\n        var t,\n          r = 0,\n          i = me.i,\n          j = me.j,\n          s = me.S;\n        while (count--) {\n          t = s[i = mask & i + 1];\n          r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n        }\n        me.i = i;\n        me.j = j;\n        return r;\n        // For robust unpredictability, the function call below automatically\n        // discards an initial batch of values.  This is called RC4-drop[256].\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\n      };\n    }\n\n    //\n    // copy()\n    // Copies internal state of ARC4 to or from a plain object.\n    //\n    function copy(f, t) {\n      t.i = f.i;\n      t.j = f.j;\n      t.S = f.S.slice();\n      return t;\n    }\n\n    //\n    // flatten()\n    // Converts an object tree to nested arrays of strings.\n    //\n    function flatten(obj, depth) {\n      var result = [],\n        typ = typeof obj,\n        prop;\n      if (depth && typ == 'object') {\n        for (prop in obj) {\n          try {\n            result.push(flatten(obj[prop], depth - 1));\n          } catch (e) {}\n        }\n      }\n      return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n    }\n\n    //\n    // mixkey()\n    // Mixes a string seed into a key that is an array of integers, and\n    // returns a shortened string seed that is equivalent to the result key.\n    //\n    function mixkey(seed, key) {\n      var stringseed = seed + '',\n        smear,\n        j = 0;\n      while (j < stringseed.length) {\n        key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n      }\n      return tostring(key);\n    }\n\n    //\n    // autoseed()\n    // Returns an object for autoseeding, using window.crypto and Node crypto\n    // module if available.\n    //\n    function autoseed() {\n      try {\n        if (nodecrypto) {\n          return tostring(nodecrypto.randomBytes(width));\n        }\n        var out = new Uint8Array(width);\n        (global.crypto || global.msCrypto).getRandomValues(out);\n        return tostring(out);\n      } catch (e) {\n        var browser = global.navigator,\n          plugins = browser && browser.plugins;\n        return [+new Date(), global, plugins, global.screen, tostring(pool)];\n      }\n    }\n\n    //\n    // tostring()\n    // Converts an array of charcodes to a string\n    //\n    function tostring(a) {\n      return String.fromCharCode.apply(0, a);\n    }\n\n    //\n    // When seedrandom.js is loaded, we immediately mix a few bits\n    // from the built-in RNG into the entropy pool.  Because we do\n    // not want to interfere with deterministic PRNG state later,\n    // seedrandom will not call math.random on its own again after\n    // initialization.\n    //\n    mixkey(math.random(), pool);\n\n    //\n    // Nodejs and AMD support: export the implementation as a module using\n    // either convention.\n    //\n\n    // End anonymous scope, and pass initial values.\n  }\n  ;\n  function initialize$2(BMMath) {\n    seedRandom([], BMMath);\n  }\n  var propTypes = {\n    SHAPE: 'shape'\n  };\n\n  /* eslint-disable camelcase */\n\n  const ExpressionManager = function () {\n    'use strict';\n\n    var ob = {};\n    var Math = BMMath;\n    var window = null;\n    var document = null;\n    var XMLHttpRequest = null;\n    var fetch = null;\n    var frames = null;\n    initialize$2(BMMath);\n    function $bm_isInstanceOfArray(arr) {\n      return arr.constructor === Array || arr.constructor === Float32Array;\n    }\n    function isNumerable(tOfV, v) {\n      return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\n    }\n    function $bm_neg(a) {\n      var tOfA = typeof a;\n      if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\n        return -a;\n      }\n      if ($bm_isInstanceOfArray(a)) {\n        var i;\n        var lenA = a.length;\n        var retArr = [];\n        for (i = 0; i < lenA; i += 1) {\n          retArr[i] = -a[i];\n        }\n        return retArr;\n      }\n      if (a.propType) {\n        return a.v;\n      }\n      return -a;\n    }\n    var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\n    var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\n    var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\n    function sum(a, b) {\n      var tOfA = typeof a;\n      var tOfB = typeof b;\n      if (tOfA === 'string' || tOfB === 'string') {\n        return a + b;\n      }\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a + b;\n      }\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] += b;\n        return a;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a + b[0];\n        return b;\n      }\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] + b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n          i += 1;\n        }\n        return retArr;\n      }\n      return 0;\n    }\n    var add = sum;\n    function sub(a, b) {\n      var tOfA = typeof a;\n      var tOfB = typeof b;\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        if (tOfA === 'string') {\n          a = parseInt(a, 10);\n        }\n        if (tOfB === 'string') {\n          b = parseInt(b, 10);\n        }\n        return a - b;\n      }\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] -= b;\n        return a;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a - b[0];\n        return b;\n      }\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] - b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n          i += 1;\n        }\n        return retArr;\n      }\n      return 0;\n    }\n    function mul(a, b) {\n      var tOfA = typeof a;\n      var tOfB = typeof b;\n      var arr;\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a * b;\n      }\n      var i;\n      var len;\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] * b;\n        }\n        return arr;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a * b[i];\n        }\n        return arr;\n      }\n      return 0;\n    }\n    function div(a, b) {\n      var tOfA = typeof a;\n      var tOfB = typeof b;\n      var arr;\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a / b;\n      }\n      var i;\n      var len;\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] / b;\n        }\n        return arr;\n      }\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a / b[i];\n        }\n        return arr;\n      }\n      return 0;\n    }\n    function mod(a, b) {\n      if (typeof a === 'string') {\n        a = parseInt(a, 10);\n      }\n      if (typeof b === 'string') {\n        b = parseInt(b, 10);\n      }\n      return a % b;\n    }\n    var $bm_sum = sum;\n    var $bm_sub = sub;\n    var $bm_mul = mul;\n    var $bm_div = div;\n    var $bm_mod = mod;\n    function clamp(num, min, max) {\n      if (min > max) {\n        var mm = max;\n        max = min;\n        min = mm;\n      }\n      return Math.min(Math.max(num, min), max);\n    }\n    function radiansToDegrees(val) {\n      return val / degToRads;\n    }\n    var radians_to_degrees = radiansToDegrees;\n    function degreesToRadians(val) {\n      return val * degToRads;\n    }\n    var degrees_to_radians = radiansToDegrees;\n    var helperLengthArray = [0, 0, 0, 0, 0, 0];\n    function length(arr1, arr2) {\n      if (typeof arr1 === 'number' || arr1 instanceof Number) {\n        arr2 = arr2 || 0;\n        return Math.abs(arr1 - arr2);\n      }\n      if (!arr2) {\n        arr2 = helperLengthArray;\n      }\n      var i;\n      var len = Math.min(arr1.length, arr2.length);\n      var addedLength = 0;\n      for (i = 0; i < len; i += 1) {\n        addedLength += Math.pow(arr2[i] - arr1[i], 2);\n      }\n      return Math.sqrt(addedLength);\n    }\n    function normalize(vec) {\n      return div(vec, length(vec));\n    }\n    function rgbToHsl(val) {\n      var r = val[0];\n      var g = val[1];\n      var b = val[2];\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var h;\n      var s;\n      var l = (max + min) / 2;\n      if (max === min) {\n        h = 0; // achromatic\n        s = 0; // achromatic\n      } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n          default:\n            break;\n        }\n        h /= 6;\n      }\n      return [h, s, l, val[3]];\n    }\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    }\n    function hslToRgb(val) {\n      var h = val[0];\n      var s = val[1];\n      var l = val[2];\n      var r;\n      var g;\n      var b;\n      if (s === 0) {\n        r = l; // achromatic\n        b = l; // achromatic\n        g = l; // achromatic\n      } else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n      }\n      return [r, g, b, val[3]];\n    }\n    function linear(t, tMin, tMax, value1, value2) {\n      if (value1 === undefined || value2 === undefined) {\n        value1 = tMin;\n        value2 = tMax;\n        tMin = 0;\n        tMax = 1;\n      }\n      if (tMax < tMin) {\n        var _tMin = tMax;\n        tMax = tMin;\n        tMin = _tMin;\n      }\n      if (t <= tMin) {\n        return value1;\n      }\n      if (t >= tMax) {\n        return value2;\n      }\n      var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\n      if (!value1.length) {\n        return value1 + (value2 - value1) * perc;\n      }\n      var i;\n      var len = value1.length;\n      var arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\n      }\n      return arr;\n    }\n    function random(min, max) {\n      if (max === undefined) {\n        if (min === undefined) {\n          min = 0;\n          max = 1;\n        } else {\n          max = min;\n          min = undefined;\n        }\n      }\n      if (max.length) {\n        var i;\n        var len = max.length;\n        if (!min) {\n          min = createTypedArray('float32', len);\n        }\n        var arr = createTypedArray('float32', len);\n        var rnd = BMMath.random();\n        for (i = 0; i < len; i += 1) {\n          arr[i] = min[i] + rnd * (max[i] - min[i]);\n        }\n        return arr;\n      }\n      if (min === undefined) {\n        min = 0;\n      }\n      var rndm = BMMath.random();\n      return min + rndm * (max - min);\n    }\n    function createPath(points, inTangents, outTangents, closed) {\n      var i;\n      var len = points.length;\n      var path = shapePool.newElement();\n      path.setPathData(!!closed, len);\n      var arrPlaceholder = [0, 0];\n      var inVertexPoint;\n      var outVertexPoint;\n      for (i = 0; i < len; i += 1) {\n        inVertexPoint = inTangents && inTangents[i] ? inTangents[i] : arrPlaceholder;\n        outVertexPoint = outTangents && outTangents[i] ? outTangents[i] : arrPlaceholder;\n        path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\n      }\n      return path;\n    }\n    function initiateExpression(elem, data, property) {\n      var val = data.x;\n      var needsVelocity = /velocity(?![\\w\\d])/.test(val);\n      var _needsRandom = val.indexOf('random') !== -1;\n      var elemType = elem.data.ty;\n      var transform;\n      var $bm_transform;\n      var content;\n      var effect;\n      var thisProperty = property;\n      thisProperty.valueAtTime = thisProperty.getValueAtTime;\n      Object.defineProperty(thisProperty, 'value', {\n        get: function () {\n          return thisProperty.v;\n        }\n      });\n      elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\n      elem.comp.displayStartTime = 0;\n      var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      var outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      var width = elem.data.sw ? elem.data.sw : 0;\n      var height = elem.data.sh ? elem.data.sh : 0;\n      var name = elem.data.nm;\n      var loopIn;\n      var loop_in;\n      var loopOut;\n      var loop_out;\n      var smooth;\n      var toWorld;\n      var fromWorld;\n      var fromComp;\n      var toComp;\n      var fromCompToSurface;\n      var position;\n      var rotation;\n      var anchorPoint;\n      var scale;\n      var thisLayer;\n      var thisComp;\n      var mask;\n      var valueAtTime;\n      var velocityAtTime;\n      var scoped_bm_rt;\n      // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\n      var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\n      var numKeys = property.kf ? data.k.length : 0;\n      var active = !this.data || this.data.hd !== true;\n      var wiggle = function wiggle(freq, amp) {\n        var iWiggle;\n        var j;\n        var lenWiggle = this.pv.length ? this.pv.length : 1;\n        var addedAmps = createTypedArray('float32', lenWiggle);\n        freq = 5;\n        var iterations = Math.floor(time * freq);\n        iWiggle = 0;\n        j = 0;\n        while (iWiggle < iterations) {\n          // var rnd = BMMath.random();\n          for (j = 0; j < lenWiggle; j += 1) {\n            addedAmps[j] += -amp + amp * 2 * BMMath.random();\n            // addedAmps[j] += -amp + amp*2*rnd;\n          }\n          iWiggle += 1;\n        }\n        // var rnd2 = BMMath.random();\n        var periods = time * freq;\n        var perc = periods - Math.floor(periods);\n        var arr = createTypedArray('float32', lenWiggle);\n        if (lenWiggle > 1) {\n          for (j = 0; j < lenWiggle; j += 1) {\n            arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\n            // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\n            // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\n          }\n          return arr;\n        }\n        return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\n      }.bind(this);\n      if (thisProperty.loopIn) {\n        loopIn = thisProperty.loopIn.bind(thisProperty);\n        loop_in = loopIn;\n      }\n      if (thisProperty.loopOut) {\n        loopOut = thisProperty.loopOut.bind(thisProperty);\n        loop_out = loopOut;\n      }\n      if (thisProperty.smooth) {\n        smooth = thisProperty.smooth.bind(thisProperty);\n      }\n      function loopInDuration(type, duration) {\n        return loopIn(type, duration, true);\n      }\n      function loopOutDuration(type, duration) {\n        return loopOut(type, duration, true);\n      }\n      if (this.getValueAtTime) {\n        valueAtTime = this.getValueAtTime.bind(this);\n      }\n      if (this.getVelocityAtTime) {\n        velocityAtTime = this.getVelocityAtTime.bind(this);\n      }\n      var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\n      function lookAt(elem1, elem2) {\n        var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\n        var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\n        var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\n        return [yaw, pitch, 0];\n      }\n      function easeOut(t, tMin, tMax, val1, val2) {\n        return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\n      }\n      function easeIn(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInBez, t, tMin, tMax, val1, val2);\n      }\n      function ease(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\n      }\n      function applyEase(fn, t, tMin, tMax, val1, val2) {\n        if (val1 === undefined) {\n          val1 = tMin;\n          val2 = tMax;\n        } else {\n          t = (t - tMin) / (tMax - tMin);\n        }\n        if (t > 1) {\n          t = 1;\n        } else if (t < 0) {\n          t = 0;\n        }\n        var mult = fn(t);\n        if ($bm_isInstanceOfArray(val1)) {\n          var iKey;\n          var lenKey = val1.length;\n          var arr = createTypedArray('float32', lenKey);\n          for (iKey = 0; iKey < lenKey; iKey += 1) {\n            arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\n          }\n          return arr;\n        }\n        return (val2 - val1) * mult + val1;\n      }\n      function nearestKey(time) {\n        var iKey;\n        var lenKey = data.k.length;\n        var index;\n        var keyTime;\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          index = 0;\n          keyTime = 0;\n        } else {\n          index = -1;\n          time *= elem.comp.globalData.frameRate;\n          if (time < data.k[0].t) {\n            index = 1;\n            keyTime = data.k[0].t;\n          } else {\n            for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\n              if (time === data.k[iKey].t) {\n                index = iKey + 1;\n                keyTime = data.k[iKey].t;\n                break;\n              } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\n                if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\n                  index = iKey + 2;\n                  keyTime = data.k[iKey + 1].t;\n                } else {\n                  index = iKey + 1;\n                  keyTime = data.k[iKey].t;\n                }\n                break;\n              }\n            }\n            if (index === -1) {\n              index = iKey + 1;\n              keyTime = data.k[iKey].t;\n            }\n          }\n        }\n        var obKey = {};\n        obKey.index = index;\n        obKey.time = keyTime / elem.comp.globalData.frameRate;\n        return obKey;\n      }\n      function key(ind) {\n        var obKey;\n        var iKey;\n        var lenKey;\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          throw new Error('The property has no keyframe at index ' + ind);\n        }\n        ind -= 1;\n        obKey = {\n          time: data.k[ind].t / elem.comp.globalData.frameRate,\n          value: []\n        };\n        var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\n        lenKey = arr.length;\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\n          obKey[iKey] = arr[iKey];\n          obKey.value[iKey] = arr[iKey];\n        }\n        return obKey;\n      }\n      function framesToTime(fr, fps) {\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n        return fr / fps;\n      }\n      function timeToFrames(t, fps) {\n        if (!t && t !== 0) {\n          t = time;\n        }\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n        return t * fps;\n      }\n      function seedRandom(seed) {\n        BMMath.seedrandom(randSeed + seed);\n      }\n      function sourceRectAtTime() {\n        return elem.sourceRectAtTime();\n      }\n      function substring(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substring(init);\n          }\n          return value.substring(init, end);\n        }\n        return '';\n      }\n      function substr(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substr(init);\n          }\n          return value.substr(init, end);\n        }\n        return '';\n      }\n      function posterizeTime(framesPerSecond) {\n        time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\n        value = valueAtTime(time);\n      }\n      var time;\n      var velocity;\n      var value;\n      var text;\n      var textIndex;\n      var textTotal;\n      var selectorValue;\n      var index = elem.data.ind;\n      var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n      var parent;\n      var randSeed = Math.floor(Math.random() * 1000000);\n      var globalData = elem.globalData;\n      function executeExpression(_value) {\n        // globalData.pushExpression();\n        value = _value;\n        if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\n          return value;\n        }\n        if (this.propType === 'textSelector') {\n          textIndex = this.textIndex;\n          textTotal = this.textTotal;\n          selectorValue = this.selectorValue;\n        }\n        if (!thisLayer) {\n          text = elem.layerInterface.text;\n          thisLayer = elem.layerInterface;\n          thisComp = elem.comp.compInterface;\n          toWorld = thisLayer.toWorld.bind(thisLayer);\n          fromWorld = thisLayer.fromWorld.bind(thisLayer);\n          fromComp = thisLayer.fromComp.bind(thisLayer);\n          toComp = thisLayer.toComp.bind(thisLayer);\n          mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\n          fromCompToSurface = fromComp;\n        }\n        if (!transform) {\n          transform = elem.layerInterface('ADBE Transform Group');\n          $bm_transform = transform;\n          if (transform) {\n            anchorPoint = transform.anchorPoint;\n            /* position = transform.position;\n                      rotation = transform.rotation;\n                      scale = transform.scale; */\n          }\n        }\n        if (elemType === 4 && !content) {\n          content = thisLayer('ADBE Root Vectors Group');\n        }\n        if (!effect) {\n          effect = thisLayer(4);\n        }\n        hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n        if (hasParent && !parent) {\n          parent = elem.hierarchy[0].layerInterface;\n        }\n        time = this.comp.renderedFrame / this.comp.globalData.frameRate;\n        if (_needsRandom) {\n          seedRandom(randSeed + time);\n        }\n        if (needsVelocity) {\n          velocity = velocityAtTime(time);\n        }\n        expression_function();\n        this.frameExpressionId = elem.globalData.frameId;\n\n        // TODO: Check if it's possible to return on ShapeInterface the .v value\n        // Changed this to a ternary operation because Rollup failed compiling it correctly\n        scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE ? scoped_bm_rt.v : scoped_bm_rt;\n        return scoped_bm_rt;\n      }\n      // Bundlers will see these as dead code and unless we reference them\n      executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\n      return executeExpression;\n    }\n    ob.initiateExpression = initiateExpression;\n    ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath];\n    return ob;\n  }();\n  const expressionHelpers = function () {\n    function searchExpressions(elem, data, prop) {\n      if (data.x) {\n        prop.k = true;\n        prop.x = true;\n        prop.initiateExpression = ExpressionManager.initiateExpression;\n        prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\n      }\n    }\n    function getValueAtTime(frameNum) {\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n      if (frameNum !== this._cachingAtTime.lastFrame) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\n        this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\n        this._cachingAtTime.lastFrame = frameNum;\n      }\n      return this._cachingAtTime.value;\n    }\n    function getSpeedAtTime(frameNum) {\n      var delta = -0.01;\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var speed = 0;\n      if (v1.length) {\n        var i;\n        for (i = 0; i < v1.length; i += 1) {\n          speed += Math.pow(v2[i] - v1[i], 2);\n        }\n        speed = Math.sqrt(speed) * 100;\n      } else {\n        speed = 0;\n      }\n      return speed;\n    }\n    function getVelocityAtTime(frameNum) {\n      if (this.vel !== undefined) {\n        return this.vel;\n      }\n      var delta = -0.001;\n      // frameNum += this.elem.data.st;\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var velocity;\n      if (v1.length) {\n        velocity = createTypedArray('float32', v1.length);\n        var i;\n        for (i = 0; i < v1.length; i += 1) {\n          // removing frameRate\n          // if needed, don't add it here\n          // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\n          velocity[i] = (v2[i] - v1[i]) / delta;\n        }\n      } else {\n        velocity = (v2 - v1) / delta;\n      }\n      return velocity;\n    }\n    function getStaticValueAtTime() {\n      return this.pv;\n    }\n    function setGroupProperty(propertyGroup) {\n      this.propertyGroup = propertyGroup;\n    }\n    return {\n      searchExpressions: searchExpressions,\n      getSpeedAtTime: getSpeedAtTime,\n      getVelocityAtTime: getVelocityAtTime,\n      getValueAtTime: getValueAtTime,\n      getStaticValueAtTime: getStaticValueAtTime,\n      setGroupProperty: setGroupProperty\n    };\n  }();\n  function addPropertyDecorator() {\n    function loopOut(type, duration, durationFlag) {\n      if (!this.k || !this.keyframes) {\n        return this.pv;\n      }\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var lastKeyFrame = keyframes[keyframes.length - 1].t;\n      if (currentFrame <= lastKeyFrame) {\n        return this.pv;\n      }\n      var cycleDuration;\n      var firstKeyFrame;\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n        firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\n        } else {\n          cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\n        }\n        firstKeyFrame = lastKeyFrame - cycleDuration;\n      }\n      var i;\n      var len;\n      var ret;\n      if (type === 'pingpong') {\n        var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n        if (iterations % 2 !== 0) {\n          return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = (endV[i] - initV[i]) * repeats + current[i];\n          }\n          return ret;\n        }\n        return (endV - initV) * repeats + current;\n      } else if (type === 'continue') {\n        var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\n        if (this.pv.length) {\n          ret = new Array(lastValue.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\n          }\n          return ret;\n        }\n        return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\n      }\n      return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n    function loopIn(type, duration, durationFlag) {\n      if (!this.k) {\n        return this.pv;\n      }\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var firstKeyFrame = keyframes[0].t;\n      if (currentFrame >= firstKeyFrame) {\n        return this.pv;\n      }\n      var cycleDuration;\n      var lastKeyFrame;\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n        lastKeyFrame = keyframes[duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\n        } else {\n          cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\n        }\n        lastKeyFrame = firstKeyFrame + cycleDuration;\n      }\n      var i;\n      var len;\n      var ret;\n      if (type === 'pingpong') {\n        var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\n        if (iterations % 2 === 0) {\n          return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n        var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\n          }\n          return ret;\n        }\n        return current - (endV - initV) * repeats;\n      } else if (type === 'continue') {\n        var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\n        if (this.pv.length) {\n          ret = new Array(firstValue.length);\n          len = ret.length;\n          for (i = 0; i < len; i += 1) {\n            ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\n          }\n          return ret;\n        }\n        return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\n      }\n      return this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n    function smooth(width, samples) {\n      if (!this.k) {\n        return this.pv;\n      }\n      width = (width || 0.4) * 0.5;\n      samples = Math.floor(samples || 5);\n      if (samples <= 1) {\n        return this.pv;\n      }\n      var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\n      var initFrame = currentTime - width;\n      var endFrame = currentTime + width;\n      var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\n      var i = 0;\n      var j = 0;\n      var value;\n      if (this.pv.length) {\n        value = createTypedArray('float32', this.pv.length);\n      } else {\n        value = 0;\n      }\n      var sampleValue;\n      while (i < samples) {\n        sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\n        if (this.pv.length) {\n          for (j = 0; j < this.pv.length; j += 1) {\n            value[j] += sampleValue[j];\n          }\n        } else {\n          value += sampleValue;\n        }\n        i += 1;\n      }\n      if (this.pv.length) {\n        for (j = 0; j < this.pv.length; j += 1) {\n          value[j] /= samples;\n        }\n      } else {\n        value /= samples;\n      }\n      return value;\n    }\n    function getTransformValueAtTime(time) {\n      if (!this._transformCachingAtTime) {\n        this._transformCachingAtTime = {\n          v: new Matrix()\n        };\n      }\n      /// /\n      var matrix = this._transformCachingAtTime.v;\n      matrix.cloneFromProps(this.pre.props);\n      if (this.appliedTransformations < 1) {\n        var anchor = this.a.getValueAtTime(time);\n        matrix.translate(-anchor[0] * this.a.mult, -anchor[1] * this.a.mult, anchor[2] * this.a.mult);\n      }\n      if (this.appliedTransformations < 2) {\n        var scale = this.s.getValueAtTime(time);\n        matrix.scale(scale[0] * this.s.mult, scale[1] * this.s.mult, scale[2] * this.s.mult);\n      }\n      if (this.sk && this.appliedTransformations < 3) {\n        var skew = this.sk.getValueAtTime(time);\n        var skewAxis = this.sa.getValueAtTime(time);\n        matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\n      }\n      if (this.r && this.appliedTransformations < 4) {\n        var rotation = this.r.getValueAtTime(time);\n        matrix.rotate(-rotation * this.r.mult);\n      } else if (!this.r && this.appliedTransformations < 4) {\n        var rotationZ = this.rz.getValueAtTime(time);\n        var rotationY = this.ry.getValueAtTime(time);\n        var rotationX = this.rx.getValueAtTime(time);\n        var orientation = this.or.getValueAtTime(time);\n        matrix.rotateZ(-rotationZ * this.rz.mult).rotateY(rotationY * this.ry.mult).rotateX(rotationX * this.rx.mult).rotateZ(-orientation[2] * this.or.mult).rotateY(orientation[1] * this.or.mult).rotateX(orientation[0] * this.or.mult);\n      }\n      if (this.data.p && this.data.p.s) {\n        var positionX = this.px.getValueAtTime(time);\n        var positionY = this.py.getValueAtTime(time);\n        if (this.data.p.z) {\n          var positionZ = this.pz.getValueAtTime(time);\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, -positionZ * this.pz.mult);\n        } else {\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\n        }\n      } else {\n        var position = this.p.getValueAtTime(time);\n        matrix.translate(position[0] * this.p.mult, position[1] * this.p.mult, -position[2] * this.p.mult);\n      }\n      return matrix;\n      /// /\n    }\n    function getTransformStaticValueAtTime() {\n      return this.v.clone(new Matrix());\n    }\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\n    TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\n      var prop = getTransformProperty(elem, data, container);\n      if (prop.dynamicProperties.length) {\n        prop.getValueAtTime = getTransformValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\n      }\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      return prop;\n    };\n    var propertyGetProp = PropertyFactory.getProp;\n    PropertyFactory.getProp = function (elem, data, type, mult, container) {\n      var prop = propertyGetProp(elem, data, type, mult, container);\n      // prop.getVelocityAtTime = getVelocityAtTime;\n      // prop.loopOut = loopOut;\n      // prop.loopIn = loopIn;\n      if (prop.kf) {\n        prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\n      }\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      prop.loopOut = loopOut;\n      prop.loopIn = loopIn;\n      prop.smooth = smooth;\n      prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\n      prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\n      prop.numKeys = data.a === 1 ? data.k.length : 0;\n      prop.propertyIndex = data.ix;\n      var value = 0;\n      if (type !== 0) {\n        value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\n      }\n      prop._cachingAtTime = {\n        lastFrame: initialDefaultFrame,\n        lastIndex: 0,\n        value: value\n      };\n      expressionHelpers.searchExpressions(elem, data, prop);\n      if (prop.k) {\n        container.addDynamicProperty(prop);\n      }\n      return prop;\n    };\n    function getShapeValueAtTime(frameNum) {\n      // For now this caching object is created only when needed instead of creating it when the shape is initialized.\n      if (!this._cachingAtTime) {\n        this._cachingAtTime = {\n          shapeValue: shapePool.clone(this.pv),\n          lastIndex: 0,\n          lastTime: initialDefaultFrame\n        };\n      }\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n      if (frameNum !== this._cachingAtTime.lastTime) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\n        this._cachingAtTime.lastTime = frameNum;\n        this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\n      }\n      return this._cachingAtTime.shapeValue;\n    }\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\n    function ShapeExpressions() {}\n    ShapeExpressions.prototype = {\n      vertices: function (prop, time) {\n        if (this.k) {\n          this.getValue();\n        }\n        var shapePath = this.v;\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n        var i;\n        var len = shapePath._length;\n        var vertices = shapePath[prop];\n        var points = shapePath.v;\n        var arr = createSizedArray(len);\n        for (i = 0; i < len; i += 1) {\n          if (prop === 'i' || prop === 'o') {\n            arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\n          } else {\n            arr[i] = [vertices[i][0], vertices[i][1]];\n          }\n        }\n        return arr;\n      },\n      points: function (time) {\n        return this.vertices('v', time);\n      },\n      inTangents: function (time) {\n        return this.vertices('i', time);\n      },\n      outTangents: function (time) {\n        return this.vertices('o', time);\n      },\n      isClosed: function () {\n        return this.v.c;\n      },\n      pointOnPath: function (perc, time) {\n        var shapePath = this.v;\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n        if (!this._segmentsLength) {\n          this._segmentsLength = bez.getSegmentsLength(shapePath);\n        }\n        var segmentsLength = this._segmentsLength;\n        var lengths = segmentsLength.lengths;\n        var lengthPos = segmentsLength.totalLength * perc;\n        var i = 0;\n        var len = lengths.length;\n        var accumulatedLength = 0;\n        var pt;\n        while (i < len) {\n          if (accumulatedLength + lengths[i].addedLength > lengthPos) {\n            var initIndex = i;\n            var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\n            var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\n            pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\n            break;\n          } else {\n            accumulatedLength += lengths[i].addedLength;\n          }\n          i += 1;\n        }\n        if (!pt) {\n          pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\n        }\n        return pt;\n      },\n      vectorOnPath: function (perc, time, vectorType) {\n        // perc doesn't use triple equality because it can be a Number object as well as a primitive.\n        if (perc == 1) {\n          // eslint-disable-line eqeqeq\n          perc = this.v.c;\n        } else if (perc == 0) {\n          // eslint-disable-line eqeqeq\n          perc = 0.999;\n        }\n        var pt1 = this.pointOnPath(perc, time);\n        var pt2 = this.pointOnPath(perc + 0.001, time);\n        var xLength = pt2[0] - pt1[0];\n        var yLength = pt2[1] - pt1[1];\n        var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\n        if (magnitude === 0) {\n          return [0, 0];\n        }\n        var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\n        return unitVector;\n      },\n      tangentOnPath: function (perc, time) {\n        return this.vectorOnPath(perc, time, 'tangent');\n      },\n      normalOnPath: function (perc, time) {\n        return this.vectorOnPath(perc, time, 'normal');\n      },\n      setGroupProperty: expressionHelpers.setGroupProperty,\n      getValueAtTime: expressionHelpers.getStaticValueAtTime\n    };\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\n    ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\n      var prop = propertyGetShapeProp(elem, data, type, arr, trims);\n      prop.propertyIndex = data.ix;\n      prop.lock = false;\n      if (type === 3) {\n        expressionHelpers.searchExpressions(elem, data.pt, prop);\n      } else if (type === 4) {\n        expressionHelpers.searchExpressions(elem, data.ks, prop);\n      }\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n      return prop;\n    };\n  }\n  function initialize$1() {\n    addPropertyDecorator();\n  }\n  function addDecorator() {\n    function searchExpressions() {\n      if (this.data.d.x) {\n        this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\n        this.addEffect(this.getExpressionValue.bind(this));\n        return true;\n      }\n      return null;\n    }\n    TextProperty.prototype.getExpressionValue = function (currentValue, text) {\n      var newValue = this.calculateExpression(text);\n      if (currentValue.t !== newValue) {\n        var newData = {};\n        this.copyData(newData, currentValue);\n        newData.t = newValue.toString();\n        newData.__complete = false;\n        return newData;\n      }\n      return currentValue;\n    };\n    TextProperty.prototype.searchProperty = function () {\n      var isKeyframed = this.searchKeyframes();\n      var hasExpressions = this.searchExpressions();\n      this.kf = isKeyframed || hasExpressions;\n      return this.kf;\n    };\n    TextProperty.prototype.searchExpressions = searchExpressions;\n  }\n  function initialize() {\n    addDecorator();\n  }\n\n  // Registering expression plugin\n  setExpressionsPlugin(Expressions);\n  initialize$1();\n  initialize();\n}\nexport { lottie as default };","map":{"version":3,"names":["lottie","document","svgNS","locationHref","_useWebWorker","initialDefaultFrame","setWebWorker","flag","getWebWorker","setLocationHref","value","getLocationHref","createTag","type","createElement","extendPrototype","sources","destination","i","len","length","sourcePrototype","prototype","attr","Object","hasOwnProperty","call","getDescriptor","object","prop","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","audioControllerFactory","AudioController","audioFactory","audios","_volume","_isMuted","addAudio","audio","push","pause","resume","setRate","rateValue","createAudio","assetPath","window","Howl","src","isPlaying","play","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","createTypedArray","createRegularArray","arr","createTypedArrayFactory","Float32Array","Int16Array","Uint8ClampedArray","createSizedArray","Array","apply","subframeEnabled","expressionsPlugin","idPrefix$1","isSafari","test","navigator","userAgent","_shouldRoundValues","bmPow","Math","pow","bmSqrt","sqrt","bmFloor","floor","bmMax","max","bmMin","min","BMMath","propertyNames","ProjectInterface$1","random","abs","val","tOfVal","absArr","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","bmRnd","round","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","createID","HSVtoRGB","h","s","v","r","g","b","f","p","q","t","RGBtoHSV","d","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","colorMap","hex","toString","setSubframeEnabled","getSubframeEnabled","setExpressionsPlugin","getExpressionsPlugin","setDefaultCurveSegments","getDefaultCurveSegments","setIdPrefix","getIdPrefix","createNS","createElementNS","dataManager","_counterId","processes","workerFn","workerInstance","workerProxy","onmessage","postMessage","path","data","_workerSelf","createWorker","fn","Worker","Blob","blob","url","URL","createObjectURL","setupWorker","workerStart","e","dataFunctionManager","completeLayers","layers","comps","layerData","j","jLen","k","kLen","completed","tt","td","hasMask","maskProps","masksProperties","pt","convertPathsToAbsoluteValues","ty","findCompLayers","refId","completeShapes","shapes","completeText","completeChars","chars","assets","findComp","id","comp","__used","JSON","parse","stringify","ks","it","o","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","animationData","checkChars","charData","ip","op","st","sr","a","sk","sa","checkPathProperties","pathData","checkColors","iterateShapes","c","checkShapes","completeClosingShapes","closed","cl","completeData","__complete","moduleOb","assetLoader","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","indexOf","response","responseText","loadAsset","fullPath","callback","errorCallback","XMLHttpRequest","err","onreadystatechange","readyState","status","open","error","send","load","payload","animation","event","process","onComplete","onError","createProcess","loadAnimation","processId","location","origin","pathname","loadData","completeAnimation","anim","ImagePreloader","proxyImage","canvas","width","height","ctx","getContext","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","assetsPath","originalPath","imagePath","u","testImageLoaded","img","intervalId","setInterval","box","getBBox","_imageLoaded","clearInterval","bind","createImageData","addEventListener","ob","setAttributeNS","_elementHelper","append","appendChild","createImgData","crossOrigin","createFootageData","footageData","_footageLoaded","loadAssets","cb","images","_createImageData","setPath","setAssetsPath","getAsset","destroy","loadedImages","loadedFootages","setCacheType","elementHelper","ImagePreloaderFactory","BaseEvent","triggerEvent","eventName","args","_cbs","callbacks","removeEventListener","splice","markerParser","parsePayloadLines","lines","keys","line","keysCount","trim","Error","_markers","markers","_marker","markerData","time","tm","duration","dr","cm","_","__","name","ProjectInterface","registerComposition","compositions","_thisProjectFunction","nm","prepareFrame","xt","currentFrame","compInterface","renderers","registerRenderer","key","getRenderer","AnimationItem","isLoaded","currentRawFrame","frameRate","frameMult","playSpeed","playDirection","playCount","isPaused","autoplay","loop","renderer","animationID","timeCompleted","segmentPos","isSubframeEnabled","segments","_idle","_completedLoop","projectInterface","imagePreloader","audioController","configAnimation","onSetupError","onSegmentComplete","drawnFrameEvent","setParams","params","wrapper","container","animType","RendererClass","rendererSettings","globalData","defs","setProjectInterface","undefined","parseInt","autoloadSegments","initialSegment","setupAnimation","lastIndexOf","substr","fileName","trigger","setData","wrapperAttributes","attributes","getNamedItem","prerender","includeLayers","newLayers","fonts","fontManager","addChars","addFonts","initExpressions","loadNextSegment","segment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","animData","fr","searchExtraCompositions","updaFrameModifier","waitForFontsLoaded","triggerConfigError","setTimeout","rendererType","initItems","gotoFrame","resize","updateContainerSize","setSubframe","renderFrame","triggerRenderFrameError","togglePause","stop","setCurrentRawFrameValue","getMarkerData","markerName","marker","goToAndStop","isFrame","numValue","Number","isNaN","frameModifier","goToAndPlay","playSegments","advanceTime","nextValue","_isComplete","checkSegments","adjustSegment","setSpeed","setDirection","setSegment","init","end","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onSegmentStart","onDestroy","getPath","getAssetData","hide","show","getDuration","updateDocumentData","index","getElementByPath","animationManager","registeredAnimations","initTime","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","subtractPlayingCount","registerAnimation","elem","getRegisteredAnimations","lenAnims","animations","addPlayingCount","activate","nowTime","elapsedTime","requestAnimationFrame","first","searchAnimations","standalone","animElements","concat","slice","getElementsByClassName","setAttribute","body","getElementsByTagName","innerText","div","freeze","unfreeze","BezierFactory","getBezierEasing","beziers","str","replace","bezEasing","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","points","_p","_mSampleValues","_precomputed","get","x","mY1","mY2","_precompute","_getTForX","_calcSampleValues","mSampleValues","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","pooling","double","poolFactory","initialLength","_create","_release","_length","_maxLength","pool","newElement","release","bezierLengthPool","create","addedLength","percents","lengths","segmentsLengthPool","totalLength","bezFunction","math","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","pointOnLine3D","z1","z2","z3","dist1","dist2","dist3","diffDist","getBezierLength","pt1","pt2","pt3","pt4","curveSegments","ptCoord","perc","ptDistance","point","lastPoint","lengthData","getSegmentsLength","shapeData","segmentsLength","pathV","pathO","pathI","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","getPointInSegment","percent","t1","u1","ptX","ptY","bezierSegmentPoints","getNewSegment","startPerc","endPerc","t0","u0","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","bez","PropertyFactory","initFrame","mathAbs","interpolateValue","frameNum","caching","offsetTime","newValue","propType","pv","iterationIndex","lastIndex","keyframes","keyData","nextKeyData","keyframeMetadata","keyframesMetadata","fnc","nextKeyTime","keyTime","endValue","to","ti","ind","__fnct","y","n","distanceInLine","segmentPerc","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","quaternionToEuler","slerp","constructor","out","ax","ay","az","aw","bx","by","bz","bw","omega","cosom","sinom","scale0","scale1","acos","sin","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c1","cos","c2","c3","s1","s2","s3","w","z","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","_mdf","processEffectsSequence","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","addDynamicProperty","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","getProp","DynamicPropertyContainer","dynamicProperties","_isAnimated","iterateDynamicProperties","initDynamicPropertyContainer","pointPool","ShapePath","setPathData","setLength","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","cnt","shapePool","shapePath","clone","shape","cloned","factory","ShapeCollection","addShape","releaseShapes","shapeCollectionPool","newShapeCollection","shapeCollection","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","paths","localShapeCollection","shapesEqual","shape1","shape2","ShapeProperty","reset","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","p0","p1","s0","_cw","_v","StarShapeProperty","StarShapePropertyFactory","sy","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","or","os","numPts","angle","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","rad","roundness","perimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","v1","getShapeProp","dataProp","getConstructorFunction","getKeyframedConstructorFunction","Matrix","_cos","_sin","_tan","tan","_rnd","props","rotate","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","skew","skewFromAxis","scale","sz","setTransform","l","m","translate","tx","tz","transform","a2","b2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_identityCalculated","a1","b1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","isIdentity","_identity","equals","matr","cloneFromProps","applyToPoint","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_a","_b","_c","_d","_e","_f","setLocation","href","setSubframeRendering","setPrefix","prefix","setQuality","inBrowser","installPlugin","plugin","getFactory","useWebWorker","setIDPrefix","__getFactory","version","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","scripts","myScript","exports","module","define","amd","bodymovin","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","initModifierProperties","addShapeToModifier","setAsAnimated","processKeys","TrimModifier","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","shapeSegments","segmentOb","shapeS","shapeE","releasePathsData","processShapes","_s","shapePaths","totalShapeLength","edges","newShapesData","addShapes","lastShapeInCollection","lastShape","pop","addPaths","newPaths","addSegment","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","PuckerAndBloatModifier","amount","processPath","centerPoint","pathLength","clonedPath","TransformPropertyFactory","defaultVector","applyToMatrix","mat","rz","ry","rx","px","py","pz","forceRender","_isDirty","precalculateMatrix","pre","appliedTransformations","autoOriented","v2","getValueAtTime","autoOrient","_addDynamicProperty","TransformProperty","getTransformProperty","RepeaterModifier","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","ceil","group","ix","reloadShapes","elems","transformData","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","RoundCornersModifier","rd","currentV","currentI","currentO","closerV","distance","newPosPerc","getFontProperties","fontData","styles","fStyle","fWeight","styleName","toLowerCase","weight","FontManager","maxWaitingTime","emptyChar","size","combinedCharacters","surrogateModifiers","zeroWidthJoiner","trimFontOptions","font","familyArray","enabledFamilies","join","setUpNode","family","parentNode","fontFamily","node","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","offsetWidth","parent","checkLoadedFonts","loadedCount","loaded","fOrigin","monoCase","sansCase","removeChild","Date","now","checkLoadedFontsBinded","setIsLoadedBinded","createHelper","def","engine","helper","fontProps","tHelper","fFamily","textContent","fClass","tCanvasHelper","OffscreenCanvas","measure","text","getComputedTextLength","measureText","list","forEach","cache","fontArr","_pendingFonts","shouldLoadFont","loadedSelector","fPath","querySelectorAll","rel","sc","found","ch","getCharData","char","charCodeAt","console","warn","_warned","fontName","getFontByName","doubleSize","singleSize","fName","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","isCombinedCharacter","setIsLoaded","Font","typekitLoaded","fontPrototype","RenderableElement","initRenderable","isInRange","hidden","isTransparent","renderableComponents","addRenderableComponent","component","removeRenderableComponent","prepareRenderableFrame","num","checkLayerLimits","checkTransparency","finalTransform","mProp","renderConfig","hideOnTransparent","renderRenderable","sourceRectAtTime","getLayerSize","textData","MaskManagerInterface","MaskInterface","mask","_mask","_data","defineProperty","MaskManager","maskManager","_masksInterfaces","viewData","maskFunction","ExpressionPropertyInterface","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","property","getVelocityAtTime","numKeys","valueProp","assign","valueAtTime","speedAtTime","getSpeedAtTime","velocityAtTime","propertyGroup","UnidimensionalPropertyInterface","MultidimensionalPropertyInterface","arrValue","defaultGetter","TransformExpressionInterface","_thisFunction","rotation","xRotation","yRotation","xPosition","yPosition","zPosition","anchorPoint","opacity","_px","_py","_pz","_transformFactory","LayerExpressionInterface","getMatrix","toWorldMat","propMatrix","_elem","transformMat","toWorldVec","applyPoint","toWorld","fromWorldVec","invertPoint","fromWorld","hierarchy","fromComp","sampleImage","transformInterface","_registerMaskInterface","_thisLayerFunction","_registerEffectsInterface","effects","effect","shapeInterface","textInterface","toComp","anchorPointDescriptor","defineProperties","hasParent","layerInterface","anchor_point","active","startTime","source","inPoint","outPoint","_name","registerMaskInterface","registerEffectsInterface","propertyGroupFactory","interfaceFunction","parentPropertyGroup","PropertyInterface","propertyName","_propertyGroup","EffectsExpressionInterface","createEffectsInterface","effectsManager","effectElements","effectsData","ef","createGroupInterface","groupInterface","mn","createValueInterface","numProperties","np","enabled","en","expressionProperty","setGroupProperty","CompExpressionInterface","layer","pixelAspect","compSize","frameDuration","displayStartTime","numLayers","ShapePathInterface","pathInterfaceFactory","view","propertyIndex","ShapeExpressionInterface","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","gradientFillInterfaceFactory","defaultInterfaceFactory","contentsInterfaceFactory","interfaces","_interfaceFunction","transformInterfaceFactory","cix","content","startPoint","endPoint","_dashPropertyGroup","dashOb","addPropertyToDashOb","dataProps","strokeWidth","dash","start","skewAxis","outerRadius","outerRoundness","innerRadius","innerRoundness","radius","parentGroupWrapper","TextExpressionInterface","_prevValue","_sourceText","sourceText","textProperty","stringValue","currentData","String","getBlendMode","blendModeEnums","mode","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","EffectsManager","effectItem","GroupEffect","eff","BaseElement","checkMasks","effectsInterface","shapesData","itemsData","setBlendMode","blendModeValue","bm","baseElement","layerElement","initBaseData","layerId","getType","FrameElement","prepareProperties","isVisible","_isParent","FootageInterface","outlineInterfaceFactory","currentPropertyName","currentProperty","getFootageData","searchProperty","propertyNameIndex","dataInterfaceFactory","outlineInterface","dataInterface","FootageElement","imageLoader","getBaseElement","AudioElement","_isPlaying","_canPlay","_currentTime","_volumeMultiplier","_previousVolume","_placeholder","lv","au","timeRemapped","totalVolume","volumeValue","BaseRenderer","checkLayers","buildItem","checkPendingElements","createItem","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","buildAllItems","pInterface","progressiveLoad","buildElementParenting","parentName","addPendingElement","setAsParent","setHierarchy","pendingElements","pathValue","setupGlobalData","fontsContainer","animationItem","TransformElement","initTransform","_matMdf","_opMdf","ao","renderTransform","finalMat","globalToLocal","transforms","ptNew","mHelper","MaskElement","maskElement","solidPath","properties","count","currentMasks","rect","expansor","feMorph","maskType","maskRef","lastPath","filterID","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","getMaskProperty","isFirstFrame","getMaskelement","pathNodes","pathString","pathShapeValue","filtersFactory","createFilter","createAlphaToLuminanceFilter","filId","skipCoordinates","fil","feColorMatrix","featureSupport","registeredEffects","idPrefix","SVGEffects","filters","filterManager","Effect","countsAsEffect","registerEffect","SVGBaseElement","initRendererElement","createContainerElements","matteElement","transformedElement","_sizeChanged","layerElementParent","gg","masker","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","hd","cp","clipId","cpGroup","renderElement","destroyBaseElement","createRenderableComponents","renderableEffectsManager","setMatte","HierarchyElement","initHierarchy","checkParenting","RenderableDOMElement","_prototype","initElement","createContent","renderInnerContent","innerElem","IImageElement","sourceRect","pr","imagePreserveAspectRatio","ProcessedElement","IShapeElement","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","shouldBreakProcess","searchProcessedElement","processedElements","addProcessedElement","lineCapEnum","lineJoinEnum","SVGShapeData","transformers","level","caches","lStr","lvl","SVGStyleData","pElem","msElem","DashProperty","dashStr","dashArray","dashoffset","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGNoStyleData","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","comparePoints","diff","SVGGradientFillStyleData","initGradientData","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","maskId","opFill","lc","lj","ml","of","ms","ost","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGTransformData","buildShapeString","_o","_i","shapeString","SVGElementsRenderer","_identityMatrix","_matrixHelper","createRenderFunction","renderFill","renderGradient","renderGradientStroke","renderStroke","renderPath","renderContentTransform","renderNoop","styleData","itemData","pathStringTransformed","redraw","lLen","iterations","styleElem","hasOpacity","attr1","attr2","cValues","oValues","ang","SVGShapeElement","stylesList","animatedContents","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","GradientConstructor","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","shapeProperty","setElementStyles","render","ownStyles","ownModifiers","currentTransform","modifier","processedPos","renderShape","animatedContent","LetterProps","sw","fc","update","updated","TextProperty","_frameId","keysIndex","canResize","minimumFontSize","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","completeTextData","obj","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","charactersArray","charCode","shouldCombine","charAt","letters","newLineFlag","anchorGrouping","currentSize","currentPos","currentLine","lineWidth","maxLineWidth","trackingOffset","boxHeight","currentHeight","lastSpaceIndex","uncollapsedSpaces","currentChar","an","add","anIndexes","animatorJustifyOffset","extra","animators","animatorData","letterData","based","indexes","fh","fs","fb","rn","totalChars","currentInd","newInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorProp","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","sm","getMult","easer","tot","smoothness","threshold","newCharsFlag","divisor","getTextSelectorProp","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","TextAnimatorProperty","renderType","_hasMaskedPath","_textData","_renderType","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","searchProperties","getMeasures","matrixHelper","renderedLettersCount","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","tLength","pi","yOff","firstLine","animatorSelector","letterValue","offf","xPathPos","yPathPos","initPathPos","initSegmentInd","initPointInd","elemOpacity","letterSw","letterSc","letterFc","letterM","letterP","defaultPropsArray","letterO","animatorFirstCharOffset","justifyOffsetMult","isNewLine","animatorOffset","rot","atan","ITextElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","emptyShapeData","SVGTextLottieElement","textSpans","singleShape","textContainer","buildTextContents","textArray","textContents","currentTextContent","fromCharCode","buildShapeData","shapeItem","usesGlyphs","tSpan","tElement","justify","span","glyph","cachedSpansLength","childSpan","glyphElement","SVGCompElement","_debug","textBox","bbox","renderedLetter","textSpan","ISolidElement","NullElement","SVGRendererBase","svgElement","viewBoxSize","viewBoxOnly","contentVisibility","className","focusable","preserveAspectRatio","destroyed","appendElementInPos","nextElement","insertBefore","ICompElement","setElements","getElements","destroyElements","supports3d","SVGRenderer","config","ariaLabel","title","titleElement","titleId","description","descElement","descId","filterSize","CVContextData","saved","cArrPos","cTr","cO","savedOp","duplicate","newLength","currentSavedOp","set","ShapeTransformManager","sequences","sequenceList","transform_key_count","addTransformSequence","sequence","processSequence","processSequences","getNewKey","CVEffects","CVMaskElement","hasMasks","canvasContext","beginPath","moveTo","lineTo","bezierCurveTo","save","clip","CVBaseElement","createElements","blendMode","globalCompositeOperation","hideElement","showElement","forceRealStack","ctxTransform","ctxOpacity","restore","CVShapeData","transformsManager","styledShapes","styledShape","trNodes","CVShapeElement","transformHelper","dashResetter","preTransforms","co","wi","da","do","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","currentGlobalAlpha","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","closePath","stroke","fill","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","CVTextElement","currentRender","sWidth","fValue","hasFill","hasStroke","commands","pathArr","commandsCounter","lastFill","lastStroke","lastStrokeW","CVImageElement","imgW","imgH","imgRel","canvasRel","widthCrop","heightCrop","par","drawImage","CVSolidElement","CanvasRendererBase","clearCanvas","context","dpr","devicePixelRatio","contextData","cProps","trProps","globalAlpha","actionFlag","popped","containerStyle","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","offsetHeight","elementRel","animationRel","fillType","clearRect","CVCompElement","CanvasRenderer","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","seedRandom","global","chunks","digits","rngname","startdenom","significance","overflow","nodecrypto","seedrandom","seed","options","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","S","pass","is_math_call","state","copy","keylen","me","depth","result","typ","stringseed","smear","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","initialize$2","propTypes","SHAPE","ExpressionManager","fetch","frames","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","rndm","createPath","inTangents","outTangents","arrPlaceholder","inVertexPoint","outVertexPoint","initiateExpression","needsVelocity","_needsRandom","elemType","$bm_transform","thisProperty","loopIn","loop_in","loopOut","loop_out","smooth","fromCompToSurface","thisLayer","thisComp","scoped_bm_rt","expression_function","eval","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","lookAt","elem1","elem2","fVec","pitch","yaw","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","fps","timeToFrames","randSeed","substring","posterizeTime","framesPerSecond","velocity","textIndex","textTotal","selectorValue","executeExpression","_value","frameExpressionId","__preventDeadCodeRemoval","expressionHelpers","searchExpressions","_cachingAtTime","delta","speed","getStaticValueAtTime","addPropertyDecorator","durationFlag","lastKeyFrame","cycleDuration","firstKeyFrame","ret","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","endFrame","sampleFrequency","sampleValue","getTransformValueAtTime","_transformCachingAtTime","anchor","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","getShapeValueAtTime","shapeValue","lastTime","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","initialize$1","addDecorator","calculateExpression","getExpressionValue","isKeyframed","hasExpressions","initialize","default"],"sources":["/home/powqy/Desktop/Design/solar-system-orbits/node_modules/three/examples/jsm/libs/lottie_canvas.module.js"],"sourcesContent":["const lottie = {};\n\nif (typeof document !== 'undefined') {\n\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nlet locationHref = '';\nlet _useWebWorker = false;\n\nconst initialDefaultFrame = -999999;\n\nconst setWebWorker = (flag) => { _useWebWorker = !!flag; };\nconst getWebWorker = () => _useWebWorker;\n\nconst setLocationHref = (value) => { locationHref = value; };\nconst getLocationHref = () => locationHref;\n\nfunction createTag(type) {\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\n  return document.createElement(type);\n}\n\nfunction extendPrototype(sources, destination) {\n  var i;\n  var len = sources.length;\n  var sourcePrototype;\n  for (i = 0; i < len; i += 1) {\n    sourcePrototype = sources[i].prototype;\n    for (var attr in sourcePrototype) {\n      if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\n    }\n  }\n}\n\nfunction getDescriptor(object, prop) {\n  return Object.getOwnPropertyDescriptor(object, prop);\n}\n\nfunction createProxyFunction(prototype) {\n  function ProxyFunction() {}\n  ProxyFunction.prototype = prototype;\n  return ProxyFunction;\n}\n\n// import Howl from '../../3rd_party/howler';\n\nconst audioControllerFactory = (function () {\n  function AudioController(audioFactory) {\n    this.audios = [];\n    this.audioFactory = audioFactory;\n    this._volume = 1;\n    this._isMuted = false;\n  }\n\n  AudioController.prototype = {\n    addAudio: function (audio) {\n      this.audios.push(audio);\n    },\n    pause: function () {\n      var i;\n      var len = this.audios.length;\n      for (i = 0; i < len; i += 1) {\n        this.audios[i].pause();\n      }\n    },\n    resume: function () {\n      var i;\n      var len = this.audios.length;\n      for (i = 0; i < len; i += 1) {\n        this.audios[i].resume();\n      }\n    },\n    setRate: function (rateValue) {\n      var i;\n      var len = this.audios.length;\n      for (i = 0; i < len; i += 1) {\n        this.audios[i].setRate(rateValue);\n      }\n    },\n    createAudio: function (assetPath) {\n      if (this.audioFactory) {\n        return this.audioFactory(assetPath);\n      } if (window.Howl) {\n        return new window.Howl({\n          src: [assetPath],\n        });\n      }\n      return {\n        isPlaying: false,\n        play: function () { this.isPlaying = true; },\n        seek: function () { this.isPlaying = false; },\n        playing: function () {},\n        rate: function () {},\n        setVolume: function () {},\n      };\n    },\n    setAudioFactory: function (audioFactory) {\n      this.audioFactory = audioFactory;\n    },\n    setVolume: function (value) {\n      this._volume = value;\n      this._updateVolume();\n    },\n    mute: function () {\n      this._isMuted = true;\n      this._updateVolume();\n    },\n    unmute: function () {\n      this._isMuted = false;\n      this._updateVolume();\n    },\n    getVolume: function () {\n      return this._volume;\n    },\n    _updateVolume: function () {\n      var i;\n      var len = this.audios.length;\n      for (i = 0; i < len; i += 1) {\n        this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\n      }\n    },\n  };\n\n  return function () {\n    return new AudioController();\n  };\n}());\n\nconst createTypedArray = (function () {\n  function createRegularArray(type, len) {\n    var i = 0;\n    var arr = [];\n    var value;\n    switch (type) {\n      case 'int16':\n      case 'uint8c':\n        value = 1;\n        break;\n      default:\n        value = 1.1;\n        break;\n    }\n    for (i = 0; i < len; i += 1) {\n      arr.push(value);\n    }\n    return arr;\n  }\n  function createTypedArrayFactory(type, len) {\n    if (type === 'float32') {\n      return new Float32Array(len);\n    } if (type === 'int16') {\n      return new Int16Array(len);\n    } if (type === 'uint8c') {\n      return new Uint8ClampedArray(len);\n    }\n    return createRegularArray(type, len);\n  }\n  if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\n    return createTypedArrayFactory;\n  }\n  return createRegularArray;\n}());\n\nfunction createSizedArray(len) {\n  return Array.apply(null, { length: len });\n}\n\nlet subframeEnabled = true;\nlet expressionsPlugin = null;\nlet idPrefix$1 = '';\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nlet _shouldRoundValues = false;\nconst bmPow = Math.pow;\nconst bmSqrt = Math.sqrt;\nconst bmFloor = Math.floor;\nconst bmMax = Math.max;\nconst bmMin = Math.min;\n\nconst BMMath = {};\n(function () {\n  var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\n  var i;\n  var len = propertyNames.length;\n  for (i = 0; i < len; i += 1) {\n    BMMath[propertyNames[i]] = Math[propertyNames[i]];\n  }\n}());\n\nfunction ProjectInterface$1() { return {}; }\nBMMath.random = Math.random;\nBMMath.abs = function (val) {\n  var tOfVal = typeof val;\n  if (tOfVal === 'object' && val.length) {\n    var absArr = createSizedArray(val.length);\n    var i;\n    var len = val.length;\n    for (i = 0; i < len; i += 1) {\n      absArr[i] = Math.abs(val[i]);\n    }\n    return absArr;\n  }\n  return Math.abs(val);\n};\nlet defaultCurveSegments = 150;\nconst degToRads = Math.PI / 180;\nconst roundCorner = 0.5519;\n\nfunction roundValues(flag) {\n  _shouldRoundValues = !!flag;\n}\n\nfunction bmRnd(value) {\n  if (_shouldRoundValues) {\n    return Math.round(value);\n  }\n  return value;\n}\n\nfunction styleDiv(element) {\n  element.style.position = 'absolute';\n  element.style.top = 0;\n  element.style.left = 0;\n  element.style.display = 'block';\n  element.style.transformOrigin = '0 0';\n  element.style.webkitTransformOrigin = '0 0';\n  element.style.backfaceVisibility = 'visible';\n  element.style.webkitBackfaceVisibility = 'visible';\n  element.style.transformStyle = 'preserve-3d';\n  element.style.webkitTransformStyle = 'preserve-3d';\n  element.style.mozTransformStyle = 'preserve-3d';\n}\n\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\n  this.type = type;\n  this.currentTime = currentTime;\n  this.totalTime = totalTime;\n  this.direction = frameMultiplier < 0 ? -1 : 1;\n}\n\nfunction BMCompleteEvent(type, frameMultiplier) {\n  this.type = type;\n  this.direction = frameMultiplier < 0 ? -1 : 1;\n}\n\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\n  this.type = type;\n  this.currentLoop = currentLoop;\n  this.totalLoops = totalLoops;\n  this.direction = frameMultiplier < 0 ? -1 : 1;\n}\n\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames) {\n  this.type = type;\n  this.firstFrame = firstFrame;\n  this.totalFrames = totalFrames;\n}\n\nfunction BMDestroyEvent(type, target) {\n  this.type = type;\n  this.target = target;\n}\n\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\n  this.type = 'renderFrameError';\n  this.nativeError = nativeError;\n  this.currentTime = currentTime;\n}\n\nfunction BMConfigErrorEvent(nativeError) {\n  this.type = 'configError';\n  this.nativeError = nativeError;\n}\n\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\n  this.type = type;\n  this.nativeError = nativeError;\n}\n\nconst createElementID = (function () {\n  var _count = 0;\n  return function createID() {\n    _count += 1;\n    return idPrefix$1 + '__lottie_element_' + _count;\n  };\n}());\n\nfunction HSVtoRGB(h, s, v) {\n  var r;\n  var g;\n  var b;\n  var i;\n  var f;\n  var p;\n  var q;\n  var t;\n  i = Math.floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n    case 0: r = v; g = t; b = p; break;\n    case 1: r = q; g = v; b = p; break;\n    case 2: r = p; g = v; b = t; break;\n    case 3: r = p; g = q; b = v; break;\n    case 4: r = t; g = p; b = v; break;\n    case 5: r = v; g = p; b = q; break;\n    default: break;\n  }\n  return [r,\n    g,\n    b];\n}\n\nfunction RGBtoHSV(r, g, b) {\n  var max = Math.max(r, g, b);\n  var min = Math.min(r, g, b);\n  var d = max - min;\n  var h;\n  var s = (max === 0 ? 0 : d / max);\n  var v = max / 255;\n\n  switch (max) {\n    case min: h = 0; break;\n    case r: h = (g - b) + d * (g < b ? 6 : 0); h /= 6 * d; break;\n    case g: h = (b - r) + d * 2; h /= 6 * d; break;\n    case b: h = (r - g) + d * 4; h /= 6 * d; break;\n    default: break;\n  }\n\n  return [\n    h,\n    s,\n    v,\n  ];\n}\n\nfunction addSaturationToRGB(color, offset) {\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n  hsv[1] += offset;\n  if (hsv[1] > 1) {\n    hsv[1] = 1;\n  } else if (hsv[1] <= 0) {\n    hsv[1] = 0;\n  }\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n}\n\nfunction addBrightnessToRGB(color, offset) {\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n  hsv[2] += offset;\n  if (hsv[2] > 1) {\n    hsv[2] = 1;\n  } else if (hsv[2] < 0) {\n    hsv[2] = 0;\n  }\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n}\n\nfunction addHueToRGB(color, offset) {\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n  hsv[0] += offset / 360;\n  if (hsv[0] > 1) {\n    hsv[0] -= 1;\n  } else if (hsv[0] < 0) {\n    hsv[0] += 1;\n  }\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n}\n\nconst rgbToHex = (function () {\n  var colorMap = [];\n  var i;\n  var hex;\n  for (i = 0; i < 256; i += 1) {\n    hex = i.toString(16);\n    colorMap[i] = hex.length === 1 ? '0' + hex : hex;\n  }\n\n  return function (r, g, b) {\n    if (r < 0) {\n      r = 0;\n    }\n    if (g < 0) {\n      g = 0;\n    }\n    if (b < 0) {\n      b = 0;\n    }\n    return '#' + colorMap[r] + colorMap[g] + colorMap[b];\n  };\n}());\n\nconst setSubframeEnabled = (flag) => { subframeEnabled = !!flag; };\nconst getSubframeEnabled = () => subframeEnabled;\nconst setExpressionsPlugin = (value) => { expressionsPlugin = value; };\nconst getExpressionsPlugin = () => expressionsPlugin;\nconst setDefaultCurveSegments = (value) => { defaultCurveSegments = value; };\nconst getDefaultCurveSegments = () => defaultCurveSegments;\nconst setIdPrefix = (value) => { idPrefix$1 = value; };\nconst getIdPrefix = () => idPrefix$1;\n\nfunction createNS(type) {\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\n  return document.createElementNS(svgNS, type);\n}\n\nconst dataManager = (function () {\n  var _counterId = 1;\n  var processes = [];\n  var workerFn;\n  var workerInstance;\n  var workerProxy = {\n    onmessage: function () {\n\n    },\n    postMessage: function (path) {\n      workerFn({\n        data: path,\n      });\n    },\n  };\n  var _workerSelf = {\n    postMessage: function (data) {\n      workerProxy.onmessage({\n        data: data,\n      });\n    },\n  };\n  function createWorker(fn) {\n    if (window.Worker && window.Blob && getWebWorker()) {\n      var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], { type: 'text/javascript' });\n      // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\n      var url = URL.createObjectURL(blob);\n      return new Worker(url);\n    }\n    workerFn = fn;\n    return workerProxy;\n  }\n\n  function setupWorker() {\n    if (!workerInstance) {\n      workerInstance = createWorker(function workerStart(e) {\n        function dataFunctionManager() {\n          function completeLayers(layers, comps) {\n            var layerData;\n            var i;\n            var len = layers.length;\n            var j;\n            var jLen;\n            var k;\n            var kLen;\n            for (i = 0; i < len; i += 1) {\n              layerData = layers[i];\n              if (('ks' in layerData) && !layerData.completed) {\n                layerData.completed = true;\n                if (layerData.tt) {\n                  layers[i - 1].td = layerData.tt;\n                }\n                if (layerData.hasMask) {\n                  var maskProps = layerData.masksProperties;\n                  jLen = maskProps.length;\n                  for (j = 0; j < jLen; j += 1) {\n                    if (maskProps[j].pt.k.i) {\n                      convertPathsToAbsoluteValues(maskProps[j].pt.k);\n                    } else {\n                      kLen = maskProps[j].pt.k.length;\n                      for (k = 0; k < kLen; k += 1) {\n                        if (maskProps[j].pt.k[k].s) {\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\n                        }\n                        if (maskProps[j].pt.k[k].e) {\n                          convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\n                        }\n                      }\n                    }\n                  }\n                }\n                if (layerData.ty === 0) {\n                  layerData.layers = findCompLayers(layerData.refId, comps);\n                  completeLayers(layerData.layers, comps);\n                } else if (layerData.ty === 4) {\n                  completeShapes(layerData.shapes);\n                } else if (layerData.ty === 5) {\n                  completeText(layerData);\n                }\n              }\n            }\n          }\n\n          function completeChars(chars, assets) {\n            if (chars) {\n              var i = 0;\n              var len = chars.length;\n              for (i = 0; i < len; i += 1) {\n                if (chars[i].t === 1) {\n                  // var compData = findComp(chars[i].data.refId, assets);\n                  chars[i].data.layers = findCompLayers(chars[i].data.refId, assets);\n                  // chars[i].data.ip = 0;\n                  // chars[i].data.op = 99999;\n                  // chars[i].data.st = 0;\n                  // chars[i].data.sr = 1;\n                  // chars[i].w = compData.w;\n                  // chars[i].data.ks = {\n                  //   a: { k: [0, 0, 0], a: 0 },\n                  //   p: { k: [0, -compData.h, 0], a: 0 },\n                  //   r: { k: 0, a: 0 },\n                  //   s: { k: [100, 100], a: 0 },\n                  //   o: { k: 100, a: 0 },\n                  // };\n                  completeLayers(chars[i].data.layers, assets);\n                }\n              }\n            }\n          }\n\n          function findComp(id, comps) {\n            var i = 0;\n            var len = comps.length;\n            while (i < len) {\n              if (comps[i].id === id) {\n                return comps[i];\n              }\n              i += 1;\n            }\n            return null;\n          }\n\n          function findCompLayers(id, comps) {\n            var comp = findComp(id, comps);\n            if (comp) {\n              if (!comp.layers.__used) {\n                comp.layers.__used = true;\n                return comp.layers;\n              }\n              return JSON.parse(JSON.stringify(comp.layers));\n            }\n            return null;\n          }\n\n          function completeShapes(arr) {\n            var i;\n            var len = arr.length;\n            var j;\n            var jLen;\n            for (i = len - 1; i >= 0; i -= 1) {\n              if (arr[i].ty === 'sh') {\n                if (arr[i].ks.k.i) {\n                  convertPathsToAbsoluteValues(arr[i].ks.k);\n                } else {\n                  jLen = arr[i].ks.k.length;\n                  for (j = 0; j < jLen; j += 1) {\n                    if (arr[i].ks.k[j].s) {\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\n                    }\n                    if (arr[i].ks.k[j].e) {\n                      convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\n                    }\n                  }\n                }\n              } else if (arr[i].ty === 'gr') {\n                completeShapes(arr[i].it);\n              }\n            }\n          }\n\n          function convertPathsToAbsoluteValues(path) {\n            var i;\n            var len = path.i.length;\n            for (i = 0; i < len; i += 1) {\n              path.i[i][0] += path.v[i][0];\n              path.i[i][1] += path.v[i][1];\n              path.o[i][0] += path.v[i][0];\n              path.o[i][1] += path.v[i][1];\n            }\n          }\n\n          function checkVersion(minimum, animVersionString) {\n            var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\n            if (minimum[0] > animVersion[0]) {\n              return true;\n            } if (animVersion[0] > minimum[0]) {\n              return false;\n            }\n            if (minimum[1] > animVersion[1]) {\n              return true;\n            } if (animVersion[1] > minimum[1]) {\n              return false;\n            }\n            if (minimum[2] > animVersion[2]) {\n              return true;\n            } if (animVersion[2] > minimum[2]) {\n              return false;\n            }\n            return null;\n          }\n\n          var checkText = (function () {\n            var minimumVersion = [4, 4, 14];\n\n            function updateTextLayer(textLayer) {\n              var documentData = textLayer.t.d;\n              textLayer.t.d = {\n                k: [\n                  {\n                    s: documentData,\n                    t: 0,\n                  },\n                ],\n              };\n            }\n\n            function iterateLayers(layers) {\n              var i;\n              var len = layers.length;\n              for (i = 0; i < len; i += 1) {\n                if (layers[i].ty === 5) {\n                  updateTextLayer(layers[i]);\n                }\n              }\n            }\n\n            return function (animationData) {\n              if (checkVersion(minimumVersion, animationData.v)) {\n                iterateLayers(animationData.layers);\n                if (animationData.assets) {\n                  var i;\n                  var len = animationData.assets.length;\n                  for (i = 0; i < len; i += 1) {\n                    if (animationData.assets[i].layers) {\n                      iterateLayers(animationData.assets[i].layers);\n                    }\n                  }\n                }\n              }\n            };\n          }());\n\n          var checkChars = (function () {\n            var minimumVersion = [4, 7, 99];\n            return function (animationData) {\n              if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\n                var i;\n                var len = animationData.chars.length;\n                for (i = 0; i < len; i += 1) {\n                  var charData = animationData.chars[i];\n                  if (charData.data && charData.data.shapes) {\n                    completeShapes(charData.data.shapes);\n                    charData.data.ip = 0;\n                    charData.data.op = 99999;\n                    charData.data.st = 0;\n                    charData.data.sr = 1;\n                    charData.data.ks = {\n                      p: { k: [0, 0], a: 0 },\n                      s: { k: [100, 100], a: 0 },\n                      a: { k: [0, 0], a: 0 },\n                      r: { k: 0, a: 0 },\n                      o: { k: 100, a: 0 },\n                    };\n                    if (!animationData.chars[i].t) {\n                      charData.data.shapes.push(\n                        {\n                          ty: 'no',\n                        }\n                      );\n                      charData.data.shapes[0].it.push(\n                        {\n                          p: { k: [0, 0], a: 0 },\n                          s: { k: [100, 100], a: 0 },\n                          a: { k: [0, 0], a: 0 },\n                          r: { k: 0, a: 0 },\n                          o: { k: 100, a: 0 },\n                          sk: { k: 0, a: 0 },\n                          sa: { k: 0, a: 0 },\n                          ty: 'tr',\n                        }\n                      );\n                    }\n                  }\n                }\n              }\n            };\n          }());\n\n          var checkPathProperties = (function () {\n            var minimumVersion = [5, 7, 15];\n\n            function updateTextLayer(textLayer) {\n              var pathData = textLayer.t.p;\n              if (typeof pathData.a === 'number') {\n                pathData.a = {\n                  a: 0,\n                  k: pathData.a,\n                };\n              }\n              if (typeof pathData.p === 'number') {\n                pathData.p = {\n                  a: 0,\n                  k: pathData.p,\n                };\n              }\n              if (typeof pathData.r === 'number') {\n                pathData.r = {\n                  a: 0,\n                  k: pathData.r,\n                };\n              }\n            }\n\n            function iterateLayers(layers) {\n              var i;\n              var len = layers.length;\n              for (i = 0; i < len; i += 1) {\n                if (layers[i].ty === 5) {\n                  updateTextLayer(layers[i]);\n                }\n              }\n            }\n\n            return function (animationData) {\n              if (checkVersion(minimumVersion, animationData.v)) {\n                iterateLayers(animationData.layers);\n                if (animationData.assets) {\n                  var i;\n                  var len = animationData.assets.length;\n                  for (i = 0; i < len; i += 1) {\n                    if (animationData.assets[i].layers) {\n                      iterateLayers(animationData.assets[i].layers);\n                    }\n                  }\n                }\n              }\n            };\n          }());\n\n          var checkColors = (function () {\n            var minimumVersion = [4, 1, 9];\n\n            function iterateShapes(shapes) {\n              var i;\n              var len = shapes.length;\n              var j;\n              var jLen;\n              for (i = 0; i < len; i += 1) {\n                if (shapes[i].ty === 'gr') {\n                  iterateShapes(shapes[i].it);\n                } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\n                  if (shapes[i].c.k && shapes[i].c.k[0].i) {\n                    jLen = shapes[i].c.k.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (shapes[i].c.k[j].s) {\n                        shapes[i].c.k[j].s[0] /= 255;\n                        shapes[i].c.k[j].s[1] /= 255;\n                        shapes[i].c.k[j].s[2] /= 255;\n                        shapes[i].c.k[j].s[3] /= 255;\n                      }\n                      if (shapes[i].c.k[j].e) {\n                        shapes[i].c.k[j].e[0] /= 255;\n                        shapes[i].c.k[j].e[1] /= 255;\n                        shapes[i].c.k[j].e[2] /= 255;\n                        shapes[i].c.k[j].e[3] /= 255;\n                      }\n                    }\n                  } else {\n                    shapes[i].c.k[0] /= 255;\n                    shapes[i].c.k[1] /= 255;\n                    shapes[i].c.k[2] /= 255;\n                    shapes[i].c.k[3] /= 255;\n                  }\n                }\n              }\n            }\n\n            function iterateLayers(layers) {\n              var i;\n              var len = layers.length;\n              for (i = 0; i < len; i += 1) {\n                if (layers[i].ty === 4) {\n                  iterateShapes(layers[i].shapes);\n                }\n              }\n            }\n\n            return function (animationData) {\n              if (checkVersion(minimumVersion, animationData.v)) {\n                iterateLayers(animationData.layers);\n                if (animationData.assets) {\n                  var i;\n                  var len = animationData.assets.length;\n                  for (i = 0; i < len; i += 1) {\n                    if (animationData.assets[i].layers) {\n                      iterateLayers(animationData.assets[i].layers);\n                    }\n                  }\n                }\n              }\n            };\n          }());\n\n          var checkShapes = (function () {\n            var minimumVersion = [4, 4, 18];\n\n            function completeClosingShapes(arr) {\n              var i;\n              var len = arr.length;\n              var j;\n              var jLen;\n              for (i = len - 1; i >= 0; i -= 1) {\n                if (arr[i].ty === 'sh') {\n                  if (arr[i].ks.k.i) {\n                    arr[i].ks.k.c = arr[i].closed;\n                  } else {\n                    jLen = arr[i].ks.k.length;\n                    for (j = 0; j < jLen; j += 1) {\n                      if (arr[i].ks.k[j].s) {\n                        arr[i].ks.k[j].s[0].c = arr[i].closed;\n                      }\n                      if (arr[i].ks.k[j].e) {\n                        arr[i].ks.k[j].e[0].c = arr[i].closed;\n                      }\n                    }\n                  }\n                } else if (arr[i].ty === 'gr') {\n                  completeClosingShapes(arr[i].it);\n                }\n              }\n            }\n\n            function iterateLayers(layers) {\n              var layerData;\n              var i;\n              var len = layers.length;\n              var j;\n              var jLen;\n              var k;\n              var kLen;\n              for (i = 0; i < len; i += 1) {\n                layerData = layers[i];\n                if (layerData.hasMask) {\n                  var maskProps = layerData.masksProperties;\n                  jLen = maskProps.length;\n                  for (j = 0; j < jLen; j += 1) {\n                    if (maskProps[j].pt.k.i) {\n                      maskProps[j].pt.k.c = maskProps[j].cl;\n                    } else {\n                      kLen = maskProps[j].pt.k.length;\n                      for (k = 0; k < kLen; k += 1) {\n                        if (maskProps[j].pt.k[k].s) {\n                          maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\n                        }\n                        if (maskProps[j].pt.k[k].e) {\n                          maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\n                        }\n                      }\n                    }\n                  }\n                }\n                if (layerData.ty === 4) {\n                  completeClosingShapes(layerData.shapes);\n                }\n              }\n            }\n\n            return function (animationData) {\n              if (checkVersion(minimumVersion, animationData.v)) {\n                iterateLayers(animationData.layers);\n                if (animationData.assets) {\n                  var i;\n                  var len = animationData.assets.length;\n                  for (i = 0; i < len; i += 1) {\n                    if (animationData.assets[i].layers) {\n                      iterateLayers(animationData.assets[i].layers);\n                    }\n                  }\n                }\n              }\n            };\n          }());\n\n          function completeData(animationData) {\n            if (animationData.__complete) {\n              return;\n            }\n            checkColors(animationData);\n            checkText(animationData);\n            checkChars(animationData);\n            checkPathProperties(animationData);\n            checkShapes(animationData);\n            completeLayers(animationData.layers, animationData.assets);\n            completeChars(animationData.chars, animationData.assets);\n            animationData.__complete = true;\n          }\n\n          function completeText(data) {\n            if (data.t.a.length === 0 && !('m' in data.t.p)) {\n              // data.singleShape = true;\n            }\n          }\n\n          var moduleOb = {};\n          moduleOb.completeData = completeData;\n          moduleOb.checkColors = checkColors;\n          moduleOb.checkChars = checkChars;\n          moduleOb.checkPathProperties = checkPathProperties;\n          moduleOb.checkShapes = checkShapes;\n          moduleOb.completeLayers = completeLayers;\n\n          return moduleOb;\n        }\n        if (!_workerSelf.dataManager) {\n          _workerSelf.dataManager = dataFunctionManager();\n        }\n\n        if (!_workerSelf.assetLoader) {\n          _workerSelf.assetLoader = (function () {\n            function formatResponse(xhr) {\n              // using typeof doubles the time of execution of this method,\n              // so if available, it's better to use the header to validate the type\n              var contentTypeHeader = xhr.getResponseHeader('content-type');\n              if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\n                return xhr.response;\n              }\n              if (xhr.response && typeof xhr.response === 'object') {\n                return xhr.response;\n              } if (xhr.response && typeof xhr.response === 'string') {\n                return JSON.parse(xhr.response);\n              } if (xhr.responseText) {\n                return JSON.parse(xhr.responseText);\n              }\n              return null;\n            }\n\n            function loadAsset(path, fullPath, callback, errorCallback) {\n              var response;\n              var xhr = new XMLHttpRequest();\n              // set responseType after calling open or IE will break.\n              try {\n                // This crashes on Android WebView prior to KitKat\n                xhr.responseType = 'json';\n              } catch (err) {} // eslint-disable-line no-empty\n              xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                  if (xhr.status === 200) {\n                    response = formatResponse(xhr);\n                    callback(response);\n                  } else {\n                    try {\n                      response = formatResponse(xhr);\n                      callback(response);\n                    } catch (err) {\n                      if (errorCallback) {\n                        errorCallback(err);\n                      }\n                    }\n                  }\n                }\n              };\n              try {\n                xhr.open('GET', path, true);\n              } catch (error) {\n                xhr.open('GET', fullPath + '/' + path, true);\n              }\n              xhr.send();\n            }\n            return {\n              load: loadAsset,\n            };\n          }());\n        }\n\n        if (e.data.type === 'loadAnimation') {\n          _workerSelf.assetLoader.load(\n            e.data.path,\n            e.data.fullPath,\n            function (data) {\n              _workerSelf.dataManager.completeData(data);\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success',\n              });\n            },\n            function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error',\n              });\n            }\n          );\n        } else if (e.data.type === 'complete') {\n          var animation = e.data.animation;\n          _workerSelf.dataManager.completeData(animation);\n          _workerSelf.postMessage({\n            id: e.data.id,\n            payload: animation,\n            status: 'success',\n          });\n        } else if (e.data.type === 'loadData') {\n          _workerSelf.assetLoader.load(\n            e.data.path,\n            e.data.fullPath,\n            function (data) {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success',\n              });\n            },\n            function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error',\n              });\n            }\n          );\n        }\n      });\n\n      workerInstance.onmessage = function (event) {\n        var data = event.data;\n        var id = data.id;\n        var process = processes[id];\n        processes[id] = null;\n        if (data.status === 'success') {\n          process.onComplete(data.payload);\n        } else if (process.onError) {\n          process.onError();\n        }\n      };\n    }\n  }\n\n  function createProcess(onComplete, onError) {\n    _counterId += 1;\n    var id = 'processId_' + _counterId;\n    processes[id] = {\n      onComplete: onComplete,\n      onError: onError,\n    };\n    return id;\n  }\n\n  function loadAnimation(path, onComplete, onError) {\n    setupWorker();\n    var processId = createProcess(onComplete, onError);\n    workerInstance.postMessage({\n      type: 'loadAnimation',\n      path: path,\n      fullPath: window.location.origin + window.location.pathname,\n      id: processId,\n    });\n  }\n\n  function loadData(path, onComplete, onError) {\n    setupWorker();\n    var processId = createProcess(onComplete, onError);\n    workerInstance.postMessage({\n      type: 'loadData',\n      path: path,\n      fullPath: window.location.origin + window.location.pathname,\n      id: processId,\n    });\n  }\n\n  function completeAnimation(anim, onComplete, onError) {\n    setupWorker();\n    var processId = createProcess(onComplete, onError);\n    workerInstance.postMessage({\n      type: 'complete',\n      animation: anim,\n      id: processId,\n    });\n  }\n\n  return {\n    loadAnimation: loadAnimation,\n    loadData: loadData,\n    completeAnimation: completeAnimation,\n  };\n}());\n\nconst ImagePreloader = (function () {\n  var proxyImage = (function () {\n    var canvas = createTag('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    var ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'rgba(0,0,0,0)';\n    ctx.fillRect(0, 0, 1, 1);\n    return canvas;\n  }());\n\n  function imageLoaded() {\n    this.loadedAssets += 1;\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n      if (this.imagesLoadedCb) {\n        this.imagesLoadedCb(null);\n      }\n    }\n  }\n  function footageLoaded() {\n    this.loadedFootagesCount += 1;\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n      if (this.imagesLoadedCb) {\n        this.imagesLoadedCb(null);\n      }\n    }\n  }\n\n  function getAssetsPath(assetData, assetsPath, originalPath) {\n    var path = '';\n    if (assetData.e) {\n      path = assetData.p;\n    } else if (assetsPath) {\n      var imagePath = assetData.p;\n      if (imagePath.indexOf('images/') !== -1) {\n        imagePath = imagePath.split('/')[1];\n      }\n      path = assetsPath + imagePath;\n    } else {\n      path = originalPath;\n      path += assetData.u ? assetData.u : '';\n      path += assetData.p;\n    }\n    return path;\n  }\n\n  function testImageLoaded(img) {\n    var _count = 0;\n    var intervalId = setInterval(function () {\n      var box = img.getBBox();\n      if (box.width || _count > 500) {\n        this._imageLoaded();\n        clearInterval(intervalId);\n      }\n      _count += 1;\n    }.bind(this), 50);\n  }\n\n  function createImageData(assetData) {\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\n    var img = createNS('image');\n    if (isSafari) {\n      this.testImageLoaded(img);\n    } else {\n      img.addEventListener('load', this._imageLoaded, false);\n    }\n    img.addEventListener('error', function () {\n      ob.img = proxyImage;\n      this._imageLoaded();\n    }.bind(this), false);\n    img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\n    if (this._elementHelper.append) {\n      this._elementHelper.append(img);\n    } else {\n      this._elementHelper.appendChild(img);\n    }\n    var ob = {\n      img: img,\n      assetData: assetData,\n    };\n    return ob;\n  }\n\n  function createImgData(assetData) {\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\n    var img = createTag('img');\n    img.crossOrigin = 'anonymous';\n    img.addEventListener('load', this._imageLoaded, false);\n    img.addEventListener('error', function () {\n      ob.img = proxyImage;\n      this._imageLoaded();\n    }.bind(this), false);\n    img.src = path;\n    var ob = {\n      img: img,\n      assetData: assetData,\n    };\n    return ob;\n  }\n\n  function createFootageData(data) {\n    var ob = {\n      assetData: data,\n    };\n    var path = getAssetsPath(data, this.assetsPath, this.path);\n    dataManager.loadData(path, function (footageData) {\n      ob.img = footageData;\n      this._footageLoaded();\n    }.bind(this), function () {\n      ob.img = {};\n      this._footageLoaded();\n    }.bind(this));\n    return ob;\n  }\n\n  function loadAssets(assets, cb) {\n    this.imagesLoadedCb = cb;\n    var i;\n    var len = assets.length;\n    for (i = 0; i < len; i += 1) {\n      if (!assets[i].layers) {\n        if (!assets[i].t || assets[i].t === 'seq') {\n          this.totalImages += 1;\n          this.images.push(this._createImageData(assets[i]));\n        } else if (assets[i].t === 3) {\n          this.totalFootages += 1;\n          this.images.push(this.createFootageData(assets[i]));\n        }\n      }\n    }\n  }\n\n  function setPath(path) {\n    this.path = path || '';\n  }\n\n  function setAssetsPath(path) {\n    this.assetsPath = path || '';\n  }\n\n  function getAsset(assetData) {\n    var i = 0;\n    var len = this.images.length;\n    while (i < len) {\n      if (this.images[i].assetData === assetData) {\n        return this.images[i].img;\n      }\n      i += 1;\n    }\n    return null;\n  }\n\n  function destroy() {\n    this.imagesLoadedCb = null;\n    this.images.length = 0;\n  }\n\n  function loadedImages() {\n    return this.totalImages === this.loadedAssets;\n  }\n\n  function loadedFootages() {\n    return this.totalFootages === this.loadedFootagesCount;\n  }\n\n  function setCacheType(type, elementHelper) {\n    if (type === 'svg') {\n      this._elementHelper = elementHelper;\n      this._createImageData = this.createImageData.bind(this);\n    } else {\n      this._createImageData = this.createImgData.bind(this);\n    }\n  }\n\n  function ImagePreloaderFactory() {\n    this._imageLoaded = imageLoaded.bind(this);\n    this._footageLoaded = footageLoaded.bind(this);\n    this.testImageLoaded = testImageLoaded.bind(this);\n    this.createFootageData = createFootageData.bind(this);\n    this.assetsPath = '';\n    this.path = '';\n    this.totalImages = 0;\n    this.totalFootages = 0;\n    this.loadedAssets = 0;\n    this.loadedFootagesCount = 0;\n    this.imagesLoadedCb = null;\n    this.images = [];\n  }\n\n  ImagePreloaderFactory.prototype = {\n    loadAssets: loadAssets,\n    setAssetsPath: setAssetsPath,\n    setPath: setPath,\n    loadedImages: loadedImages,\n    loadedFootages: loadedFootages,\n    destroy: destroy,\n    getAsset: getAsset,\n    createImgData: createImgData,\n    createImageData: createImageData,\n    imageLoaded: imageLoaded,\n    footageLoaded: footageLoaded,\n    setCacheType: setCacheType,\n  };\n\n  return ImagePreloaderFactory;\n}());\n\nfunction BaseEvent() {}\nBaseEvent.prototype = {\n  triggerEvent: function (eventName, args) {\n    if (this._cbs[eventName]) {\n      var callbacks = this._cbs[eventName];\n      for (var i = 0; i < callbacks.length; i += 1) {\n        callbacks[i](args);\n      }\n    }\n  },\n  addEventListener: function (eventName, callback) {\n    if (!this._cbs[eventName]) {\n      this._cbs[eventName] = [];\n    }\n    this._cbs[eventName].push(callback);\n\n    return function () {\n      this.removeEventListener(eventName, callback);\n    }.bind(this);\n  },\n  removeEventListener: function (eventName, callback) {\n    if (!callback) {\n      this._cbs[eventName] = null;\n    } else if (this._cbs[eventName]) {\n      var i = 0;\n      var len = this._cbs[eventName].length;\n      while (i < len) {\n        if (this._cbs[eventName][i] === callback) {\n          this._cbs[eventName].splice(i, 1);\n          i -= 1;\n          len -= 1;\n        }\n        i += 1;\n      }\n      if (!this._cbs[eventName].length) {\n        this._cbs[eventName] = null;\n      }\n    }\n  },\n};\n\nconst markerParser = (\n\n  function () {\n    function parsePayloadLines(payload) {\n      var lines = payload.split('\\r\\n');\n      var keys = {};\n      var line;\n      var keysCount = 0;\n      for (var i = 0; i < lines.length; i += 1) {\n        line = lines[i].split(':');\n        if (line.length === 2) {\n          keys[line[0]] = line[1].trim();\n          keysCount += 1;\n        }\n      }\n      if (keysCount === 0) {\n        throw new Error();\n      }\n      return keys;\n    }\n\n    return function (_markers) {\n      var markers = [];\n      for (var i = 0; i < _markers.length; i += 1) {\n        var _marker = _markers[i];\n        var markerData = {\n          time: _marker.tm,\n          duration: _marker.dr,\n        };\n        try {\n          markerData.payload = JSON.parse(_markers[i].cm);\n        } catch (_) {\n          try {\n            markerData.payload = parsePayloadLines(_markers[i].cm);\n          } catch (__) {\n            markerData.payload = {\n              name: _markers[i].cm,\n            };\n          }\n        }\n        markers.push(markerData);\n      }\n      return markers;\n    };\n  }());\n\nconst ProjectInterface = (function () {\n  function registerComposition(comp) {\n    this.compositions.push(comp);\n  }\n\n  return function () {\n    function _thisProjectFunction(name) {\n      var i = 0;\n      var len = this.compositions.length;\n      while (i < len) {\n        if (this.compositions[i].data && this.compositions[i].data.nm === name) {\n          if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\n            this.compositions[i].prepareFrame(this.currentFrame);\n          }\n          return this.compositions[i].compInterface;\n        }\n        i += 1;\n      }\n      return null;\n    }\n\n    _thisProjectFunction.compositions = [];\n    _thisProjectFunction.currentFrame = 0;\n\n    _thisProjectFunction.registerComposition = registerComposition;\n\n    return _thisProjectFunction;\n  };\n}());\n\nconst renderers = {};\n\nconst registerRenderer = (key, value) => {\n  renderers[key] = value;\n};\n\nfunction getRenderer(key) {\n  return renderers[key];\n}\n\nconst AnimationItem = function () {\n  this._cbs = [];\n  this.name = '';\n  this.path = '';\n  this.isLoaded = false;\n  this.currentFrame = 0;\n  this.currentRawFrame = 0;\n  this.firstFrame = 0;\n  this.totalFrames = 0;\n  this.frameRate = 0;\n  this.frameMult = 0;\n  this.playSpeed = 1;\n  this.playDirection = 1;\n  this.playCount = 0;\n  this.animationData = {};\n  this.assets = [];\n  this.isPaused = true;\n  this.autoplay = false;\n  this.loop = true;\n  this.renderer = null;\n  this.animationID = createElementID();\n  this.assetsPath = '';\n  this.timeCompleted = 0;\n  this.segmentPos = 0;\n  this.isSubframeEnabled = getSubframeEnabled();\n  this.segments = [];\n  this._idle = true;\n  this._completedLoop = false;\n  this.projectInterface = ProjectInterface();\n  this.imagePreloader = new ImagePreloader();\n  this.audioController = audioControllerFactory();\n  this.markers = [];\n  this.configAnimation = this.configAnimation.bind(this);\n  this.onSetupError = this.onSetupError.bind(this);\n  this.onSegmentComplete = this.onSegmentComplete.bind(this);\n  this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\n};\n\nextendPrototype([BaseEvent], AnimationItem);\n\nAnimationItem.prototype.setParams = function (params) {\n  if (params.wrapper || params.container) {\n    this.wrapper = params.wrapper || params.container;\n  }\n  var animType = 'svg';\n  if (params.animType) {\n    animType = params.animType;\n  } else if (params.renderer) {\n    animType = params.renderer;\n  }\n  const RendererClass = getRenderer(animType);\n  this.renderer = new RendererClass(this, params.rendererSettings);\n  this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\n  this.renderer.setProjectInterface(this.projectInterface);\n  this.animType = animType;\n  if (params.loop === ''\n        || params.loop === null\n        || params.loop === undefined\n        || params.loop === true) {\n    this.loop = true;\n  } else if (params.loop === false) {\n    this.loop = false;\n  } else {\n    this.loop = parseInt(params.loop, 10);\n  }\n  this.autoplay = 'autoplay' in params ? params.autoplay : true;\n  this.name = params.name ? params.name : '';\n  this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\n  this.assetsPath = params.assetsPath;\n  this.initialSegment = params.initialSegment;\n  if (params.audioFactory) {\n    this.audioController.setAudioFactory(params.audioFactory);\n  }\n  if (params.animationData) {\n    this.setupAnimation(params.animationData);\n  } else if (params.path) {\n    if (params.path.lastIndexOf('\\\\') !== -1) {\n      this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\n    } else {\n      this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\n    }\n    this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\n    this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\n    dataManager.loadAnimation(\n      params.path,\n      this.configAnimation,\n      this.onSetupError\n    );\n  }\n};\n\nAnimationItem.prototype.onSetupError = function () {\n  this.trigger('data_failed');\n};\n\nAnimationItem.prototype.setupAnimation = function (data) {\n  dataManager.completeAnimation(\n    data,\n    this.configAnimation\n  );\n};\n\nAnimationItem.prototype.setData = function (wrapper, animationData) {\n  if (animationData) {\n    if (typeof animationData !== 'object') {\n      animationData = JSON.parse(animationData);\n    }\n  }\n  var params = {\n    wrapper: wrapper,\n    animationData: animationData,\n  };\n  var wrapperAttributes = wrapper.attributes;\n\n  params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-animation-path').value\n    : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-path').value\n      : wrapperAttributes.getNamedItem('bm-path')\n        ? wrapperAttributes.getNamedItem('bm-path').value\n        : '';\n  params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-type').value\n    : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-type').value\n      : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\n        ? wrapperAttributes.getNamedItem('bm-type').value\n        : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\n          ? wrapperAttributes.getNamedItem('data-bm-renderer').value\n          : wrapperAttributes.getNamedItem('bm-renderer')\n            ? wrapperAttributes.getNamedItem('bm-renderer').value\n            : 'canvas';\n\n  var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value\n    : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-loop').value\n      : wrapperAttributes.getNamedItem('bm-loop')\n        ? wrapperAttributes.getNamedItem('bm-loop').value\n        : '';\n  if (loop === 'false') {\n    params.loop = false;\n  } else if (loop === 'true') {\n    params.loop = true;\n  } else if (loop !== '') {\n    params.loop = parseInt(loop, 10);\n  }\n  var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value\n    : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-autoplay').value\n      : wrapperAttributes.getNamedItem('bm-autoplay')\n        ? wrapperAttributes.getNamedItem('bm-autoplay').value\n        : true;\n  params.autoplay = autoplay !== 'false';\n\n  params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-name').value\n    : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-name').value\n      : wrapperAttributes.getNamedItem('bm-name')\n        ? wrapperAttributes.getNamedItem('bm-name').value\n        : '';\n  var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value\n    : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\n      ? wrapperAttributes.getNamedItem('data-bm-prerender').value\n      : wrapperAttributes.getNamedItem('bm-prerender')\n        ? wrapperAttributes.getNamedItem('bm-prerender').value\n        : '';\n\n  if (prerender === 'false') {\n    params.prerender = false;\n  }\n  this.setParams(params);\n};\n\nAnimationItem.prototype.includeLayers = function (data) {\n  if (data.op > this.animationData.op) {\n    this.animationData.op = data.op;\n    this.totalFrames = Math.floor(data.op - this.animationData.ip);\n  }\n  var layers = this.animationData.layers;\n  var i;\n  var len = layers.length;\n  var newLayers = data.layers;\n  var j;\n  var jLen = newLayers.length;\n  for (j = 0; j < jLen; j += 1) {\n    i = 0;\n    while (i < len) {\n      if (layers[i].id === newLayers[j].id) {\n        layers[i] = newLayers[j];\n        break;\n      }\n      i += 1;\n    }\n  }\n  if (data.chars || data.fonts) {\n    this.renderer.globalData.fontManager.addChars(data.chars);\n    this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\n  }\n  if (data.assets) {\n    len = data.assets.length;\n    for (i = 0; i < len; i += 1) {\n      this.animationData.assets.push(data.assets[i]);\n    }\n  }\n  this.animationData.__complete = false;\n  dataManager.completeAnimation(\n    this.animationData,\n    this.onSegmentComplete\n  );\n};\n\nAnimationItem.prototype.onSegmentComplete = function (data) {\n  this.animationData = data;\n  var expressionsPlugin = getExpressionsPlugin();\n  if (expressionsPlugin) {\n    expressionsPlugin.initExpressions(this);\n  }\n  this.loadNextSegment();\n};\n\nAnimationItem.prototype.loadNextSegment = function () {\n  var segments = this.animationData.segments;\n  if (!segments || segments.length === 0 || !this.autoloadSegments) {\n    this.trigger('data_ready');\n    this.timeCompleted = this.totalFrames;\n    return;\n  }\n  var segment = segments.shift();\n  this.timeCompleted = segment.time * this.frameRate;\n  var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\n  this.segmentPos += 1;\n  dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\n    this.trigger('data_failed');\n  }.bind(this));\n};\n\nAnimationItem.prototype.loadSegments = function () {\n  var segments = this.animationData.segments;\n  if (!segments) {\n    this.timeCompleted = this.totalFrames;\n  }\n  this.loadNextSegment();\n};\n\nAnimationItem.prototype.imagesLoaded = function () {\n  this.trigger('loaded_images');\n  this.checkLoaded();\n};\n\nAnimationItem.prototype.preloadImages = function () {\n  this.imagePreloader.setAssetsPath(this.assetsPath);\n  this.imagePreloader.setPath(this.path);\n  this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\n};\n\nAnimationItem.prototype.configAnimation = function (animData) {\n  if (!this.renderer) {\n    return;\n  }\n  try {\n    this.animationData = animData;\n    if (this.initialSegment) {\n      this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\n      this.firstFrame = Math.round(this.initialSegment[0]);\n    } else {\n      this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\n      this.firstFrame = Math.round(this.animationData.ip);\n    }\n    this.renderer.configAnimation(animData);\n    if (!animData.assets) {\n      animData.assets = [];\n    }\n\n    this.assets = this.animationData.assets;\n    this.frameRate = this.animationData.fr;\n    this.frameMult = this.animationData.fr / 1000;\n    this.renderer.searchExtraCompositions(animData.assets);\n    this.markers = markerParser(animData.markers || []);\n    this.trigger('config_ready');\n    this.preloadImages();\n    this.loadSegments();\n    this.updaFrameModifier();\n    this.waitForFontsLoaded();\n    if (this.isPaused) {\n      this.audioController.pause();\n    }\n  } catch (error) {\n    this.triggerConfigError(error);\n  }\n};\n\nAnimationItem.prototype.waitForFontsLoaded = function () {\n  if (!this.renderer) {\n    return;\n  }\n  if (this.renderer.globalData.fontManager.isLoaded) {\n    this.checkLoaded();\n  } else {\n    setTimeout(this.waitForFontsLoaded.bind(this), 20);\n  }\n};\n\nAnimationItem.prototype.checkLoaded = function () {\n  if (!this.isLoaded\n        && this.renderer.globalData.fontManager.isLoaded\n        && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas')\n        && (this.imagePreloader.loadedFootages())\n  ) {\n    this.isLoaded = true;\n    var expressionsPlugin = getExpressionsPlugin();\n    if (expressionsPlugin) {\n      expressionsPlugin.initExpressions(this);\n    }\n    this.renderer.initItems();\n    setTimeout(function () {\n      this.trigger('DOMLoaded');\n    }.bind(this), 0);\n    this.gotoFrame();\n    if (this.autoplay) {\n      this.play();\n    }\n  }\n};\n\nAnimationItem.prototype.resize = function () {\n  this.renderer.updateContainerSize();\n};\n\nAnimationItem.prototype.setSubframe = function (flag) {\n  this.isSubframeEnabled = !!flag;\n};\n\nAnimationItem.prototype.gotoFrame = function () {\n  this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\n\n  if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\n    this.currentFrame = this.timeCompleted;\n  }\n  this.trigger('enterFrame');\n  this.renderFrame();\n  this.trigger('drawnFrame');\n};\n\nAnimationItem.prototype.renderFrame = function () {\n  if (this.isLoaded === false || !this.renderer) {\n    return;\n  }\n  try {\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\n  } catch (error) {\n    this.triggerRenderFrameError(error);\n  }\n};\n\nAnimationItem.prototype.play = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  if (this.isPaused === true) {\n    this.isPaused = false;\n    this.trigger('_pause');\n    this.audioController.resume();\n    if (this._idle) {\n      this._idle = false;\n      this.trigger('_active');\n    }\n  }\n};\n\nAnimationItem.prototype.pause = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  if (this.isPaused === false) {\n    this.isPaused = true;\n    this.trigger('_play');\n    this._idle = true;\n    this.trigger('_idle');\n    this.audioController.pause();\n  }\n};\n\nAnimationItem.prototype.togglePause = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  if (this.isPaused === true) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nAnimationItem.prototype.stop = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  this.pause();\n  this.playCount = 0;\n  this._completedLoop = false;\n  this.setCurrentRawFrameValue(0);\n};\n\nAnimationItem.prototype.getMarkerData = function (markerName) {\n  var marker;\n  for (var i = 0; i < this.markers.length; i += 1) {\n    marker = this.markers[i];\n    if (marker.payload && marker.payload.name === markerName) {\n      return marker;\n    }\n  }\n  return null;\n};\n\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  var numValue = Number(value);\n  if (isNaN(numValue)) {\n    var marker = this.getMarkerData(value);\n    if (marker) {\n      this.goToAndStop(marker.time, true);\n    }\n  } else if (isFrame) {\n    this.setCurrentRawFrameValue(value);\n  } else {\n    this.setCurrentRawFrameValue(value * this.frameModifier);\n  }\n  this.pause();\n};\n\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  var numValue = Number(value);\n  if (isNaN(numValue)) {\n    var marker = this.getMarkerData(value);\n    if (marker) {\n      if (!marker.duration) {\n        this.goToAndStop(marker.time, true);\n      } else {\n        this.playSegments([marker.time, marker.time + marker.duration], true);\n      }\n    }\n  } else {\n    this.goToAndStop(numValue, isFrame, name);\n  }\n  this.play();\n};\n\nAnimationItem.prototype.advanceTime = function (value) {\n  if (this.isPaused === true || this.isLoaded === false) {\n    return;\n  }\n  var nextValue = this.currentRawFrame + value * this.frameModifier;\n  var _isComplete = false;\n  // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\n  // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\n  if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\n    if (!this.loop || this.playCount === this.loop) {\n      if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\n        _isComplete = true;\n        nextValue = this.totalFrames - 1;\n      }\n    } else if (nextValue >= this.totalFrames) {\n      this.playCount += 1;\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\n        this.setCurrentRawFrameValue(nextValue % this.totalFrames);\n        this._completedLoop = true;\n        this.trigger('loopComplete');\n      }\n    } else {\n      this.setCurrentRawFrameValue(nextValue);\n    }\n  } else if (nextValue < 0) {\n    if (!this.checkSegments(nextValue % this.totalFrames)) {\n      if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) { // eslint-disable-line no-plusplus\n        this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\n        if (!this._completedLoop) {\n          this._completedLoop = true;\n        } else {\n          this.trigger('loopComplete');\n        }\n      } else {\n        _isComplete = true;\n        nextValue = 0;\n      }\n    }\n  } else {\n    this.setCurrentRawFrameValue(nextValue);\n  }\n  if (_isComplete) {\n    this.setCurrentRawFrameValue(nextValue);\n    this.pause();\n    this.trigger('complete');\n  }\n};\n\nAnimationItem.prototype.adjustSegment = function (arr, offset) {\n  this.playCount = 0;\n  if (arr[1] < arr[0]) {\n    if (this.frameModifier > 0) {\n      if (this.playSpeed < 0) {\n        this.setSpeed(-this.playSpeed);\n      } else {\n        this.setDirection(-1);\n      }\n    }\n    this.totalFrames = arr[0] - arr[1];\n    this.timeCompleted = this.totalFrames;\n    this.firstFrame = arr[1];\n    this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\n  } else if (arr[1] > arr[0]) {\n    if (this.frameModifier < 0) {\n      if (this.playSpeed < 0) {\n        this.setSpeed(-this.playSpeed);\n      } else {\n        this.setDirection(1);\n      }\n    }\n    this.totalFrames = arr[1] - arr[0];\n    this.timeCompleted = this.totalFrames;\n    this.firstFrame = arr[0];\n    this.setCurrentRawFrameValue(0.001 + offset);\n  }\n  this.trigger('segmentStart');\n};\nAnimationItem.prototype.setSegment = function (init, end) {\n  var pendingFrame = -1;\n  if (this.isPaused) {\n    if (this.currentRawFrame + this.firstFrame < init) {\n      pendingFrame = init;\n    } else if (this.currentRawFrame + this.firstFrame > end) {\n      pendingFrame = end - init;\n    }\n  }\n\n  this.firstFrame = init;\n  this.totalFrames = end - init;\n  this.timeCompleted = this.totalFrames;\n  if (pendingFrame !== -1) {\n    this.goToAndStop(pendingFrame, true);\n  }\n};\n\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\n  if (forceFlag) {\n    this.segments.length = 0;\n  }\n  if (typeof arr[0] === 'object') {\n    var i;\n    var len = arr.length;\n    for (i = 0; i < len; i += 1) {\n      this.segments.push(arr[i]);\n    }\n  } else {\n    this.segments.push(arr);\n  }\n  if (this.segments.length && forceFlag) {\n    this.adjustSegment(this.segments.shift(), 0);\n  }\n  if (this.isPaused) {\n    this.play();\n  }\n};\n\nAnimationItem.prototype.resetSegments = function (forceFlag) {\n  this.segments.length = 0;\n  this.segments.push([this.animationData.ip, this.animationData.op]);\n  if (forceFlag) {\n    this.checkSegments(0);\n  }\n};\nAnimationItem.prototype.checkSegments = function (offset) {\n  if (this.segments.length) {\n    this.adjustSegment(this.segments.shift(), offset);\n    return true;\n  }\n  return false;\n};\n\nAnimationItem.prototype.destroy = function (name) {\n  if ((name && this.name !== name) || !this.renderer) {\n    return;\n  }\n  this.renderer.destroy();\n  this.imagePreloader.destroy();\n  this.trigger('destroy');\n  this._cbs = null;\n  this.onEnterFrame = null;\n  this.onLoopComplete = null;\n  this.onComplete = null;\n  this.onSegmentStart = null;\n  this.onDestroy = null;\n  this.renderer = null;\n  this.renderer = null;\n  this.imagePreloader = null;\n  this.projectInterface = null;\n};\n\nAnimationItem.prototype.setCurrentRawFrameValue = function (value) {\n  this.currentRawFrame = value;\n  this.gotoFrame();\n};\n\nAnimationItem.prototype.setSpeed = function (val) {\n  this.playSpeed = val;\n  this.updaFrameModifier();\n};\n\nAnimationItem.prototype.setDirection = function (val) {\n  this.playDirection = val < 0 ? -1 : 1;\n  this.updaFrameModifier();\n};\n\nAnimationItem.prototype.setVolume = function (val, name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  this.audioController.setVolume(val);\n};\n\nAnimationItem.prototype.getVolume = function () {\n  return this.audioController.getVolume();\n};\n\nAnimationItem.prototype.mute = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  this.audioController.mute();\n};\n\nAnimationItem.prototype.unmute = function (name) {\n  if (name && this.name !== name) {\n    return;\n  }\n  this.audioController.unmute();\n};\n\nAnimationItem.prototype.updaFrameModifier = function () {\n  this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\n  this.audioController.setRate(this.playSpeed * this.playDirection);\n};\n\nAnimationItem.prototype.getPath = function () {\n  return this.path;\n};\n\nAnimationItem.prototype.getAssetsPath = function (assetData) {\n  var path = '';\n  if (assetData.e) {\n    path = assetData.p;\n  } else if (this.assetsPath) {\n    var imagePath = assetData.p;\n    if (imagePath.indexOf('images/') !== -1) {\n      imagePath = imagePath.split('/')[1];\n    }\n    path = this.assetsPath + imagePath;\n  } else {\n    path = this.path;\n    path += assetData.u ? assetData.u : '';\n    path += assetData.p;\n  }\n  return path;\n};\n\nAnimationItem.prototype.getAssetData = function (id) {\n  var i = 0;\n  var len = this.assets.length;\n  while (i < len) {\n    if (id === this.assets[i].id) {\n      return this.assets[i];\n    }\n    i += 1;\n  }\n  return null;\n};\n\nAnimationItem.prototype.hide = function () {\n  this.renderer.hide();\n};\n\nAnimationItem.prototype.show = function () {\n  this.renderer.show();\n};\n\nAnimationItem.prototype.getDuration = function (isFrame) {\n  return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\n};\n\nAnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\n  try {\n    var element = this.renderer.getElementByPath(path);\n    element.updateDocumentData(documentData, index);\n  } catch (error) {\n    // TODO: decide how to handle catch case\n  }\n};\n\nAnimationItem.prototype.trigger = function (name) {\n  if (this._cbs && this._cbs[name]) {\n    switch (name) {\n      case 'enterFrame':\n        this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\n        break;\n      case 'drawnFrame':\n        this.drawnFrameEvent.currentTime = this.currentFrame;\n        this.drawnFrameEvent.totalTime = this.totalFrames;\n        this.drawnFrameEvent.direction = this.frameModifier;\n        this.triggerEvent(name, this.drawnFrameEvent);\n        break;\n      case 'loopComplete':\n        this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n        break;\n      case 'complete':\n        this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\n        break;\n      case 'segmentStart':\n        this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n        break;\n      case 'destroy':\n        this.triggerEvent(name, new BMDestroyEvent(name, this));\n        break;\n      default:\n        this.triggerEvent(name);\n    }\n  }\n  if (name === 'enterFrame' && this.onEnterFrame) {\n    this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\n  }\n  if (name === 'loopComplete' && this.onLoopComplete) {\n    this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n  }\n  if (name === 'complete' && this.onComplete) {\n    this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\n  }\n  if (name === 'segmentStart' && this.onSegmentStart) {\n    this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n  }\n  if (name === 'destroy' && this.onDestroy) {\n    this.onDestroy.call(this, new BMDestroyEvent(name, this));\n  }\n};\n\nAnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\n  var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\n  this.triggerEvent('error', error);\n\n  if (this.onError) {\n    this.onError.call(this, error);\n  }\n};\n\nAnimationItem.prototype.triggerConfigError = function (nativeError) {\n  var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\n  this.triggerEvent('error', error);\n\n  if (this.onError) {\n    this.onError.call(this, error);\n  }\n};\n\nconst animationManager = (function () {\n  var moduleOb = {};\n  var registeredAnimations = [];\n  var initTime = 0;\n  var len = 0;\n  var playingAnimationsNum = 0;\n  var _stopped = true;\n  var _isFrozen = false;\n\n  function removeElement(ev) {\n    var i = 0;\n    var animItem = ev.target;\n    while (i < len) {\n      if (registeredAnimations[i].animation === animItem) {\n        registeredAnimations.splice(i, 1);\n        i -= 1;\n        len -= 1;\n        if (!animItem.isPaused) {\n          subtractPlayingCount();\n        }\n      }\n      i += 1;\n    }\n  }\n\n  function registerAnimation(element, animationData) {\n    if (!element) {\n      return null;\n    }\n    var i = 0;\n    while (i < len) {\n      if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\n        return registeredAnimations[i].animation;\n      }\n      i += 1;\n    }\n    var animItem = new AnimationItem();\n    setupAnimation(animItem, element);\n    animItem.setData(element, animationData);\n    return animItem;\n  }\n\n  function getRegisteredAnimations() {\n    var i;\n    var lenAnims = registeredAnimations.length;\n    var animations = [];\n    for (i = 0; i < lenAnims; i += 1) {\n      animations.push(registeredAnimations[i].animation);\n    }\n    return animations;\n  }\n\n  function addPlayingCount() {\n    playingAnimationsNum += 1;\n    activate();\n  }\n\n  function subtractPlayingCount() {\n    playingAnimationsNum -= 1;\n  }\n\n  function setupAnimation(animItem, element) {\n    animItem.addEventListener('destroy', removeElement);\n    animItem.addEventListener('_active', addPlayingCount);\n    animItem.addEventListener('_idle', subtractPlayingCount);\n    registeredAnimations.push({ elem: element, animation: animItem });\n    len += 1;\n  }\n\n  function loadAnimation(params) {\n    var animItem = new AnimationItem();\n    setupAnimation(animItem, null);\n    animItem.setParams(params);\n    return animItem;\n  }\n\n  function setSpeed(val, animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.setSpeed(val, animation);\n    }\n  }\n\n  function setDirection(val, animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.setDirection(val, animation);\n    }\n  }\n\n  function play(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.play(animation);\n    }\n  }\n  function resume(nowTime) {\n    var elapsedTime = nowTime - initTime;\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.advanceTime(elapsedTime);\n    }\n    initTime = nowTime;\n    if (playingAnimationsNum && !_isFrozen) {\n      window.requestAnimationFrame(resume);\n    } else {\n      _stopped = true;\n    }\n  }\n\n  function first(nowTime) {\n    initTime = nowTime;\n    window.requestAnimationFrame(resume);\n  }\n\n  function pause(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.pause(animation);\n    }\n  }\n\n  function goToAndStop(value, isFrame, animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\n    }\n  }\n\n  function stop(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.stop(animation);\n    }\n  }\n\n  function togglePause(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.togglePause(animation);\n    }\n  }\n\n  function destroy(animation) {\n    var i;\n    for (i = (len - 1); i >= 0; i -= 1) {\n      registeredAnimations[i].animation.destroy(animation);\n    }\n  }\n\n  function searchAnimations(animationData, standalone, renderer) {\n    var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\n      [].slice.call(document.getElementsByClassName('bodymovin')));\n    var i;\n    var lenAnims = animElements.length;\n    for (i = 0; i < lenAnims; i += 1) {\n      if (renderer) {\n        animElements[i].setAttribute('data-bm-type', renderer);\n      }\n      registerAnimation(animElements[i], animationData);\n    }\n    if (standalone && lenAnims === 0) {\n      if (!renderer) {\n        renderer = 'svg';\n      }\n      var body = document.getElementsByTagName('body')[0];\n      body.innerText = '';\n      var div = createTag('div');\n      div.style.width = '100%';\n      div.style.height = '100%';\n      div.setAttribute('data-bm-type', renderer);\n      body.appendChild(div);\n      registerAnimation(div, animationData);\n    }\n  }\n\n  function resize() {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.resize();\n    }\n  }\n\n  function activate() {\n    if (!_isFrozen && playingAnimationsNum) {\n      if (_stopped) {\n        window.requestAnimationFrame(first);\n        _stopped = false;\n      }\n    }\n  }\n\n  function freeze() {\n    _isFrozen = true;\n  }\n\n  function unfreeze() {\n    _isFrozen = false;\n    activate();\n  }\n\n  function setVolume(val, animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.setVolume(val, animation);\n    }\n  }\n\n  function mute(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.mute(animation);\n    }\n  }\n\n  function unmute(animation) {\n    var i;\n    for (i = 0; i < len; i += 1) {\n      registeredAnimations[i].animation.unmute(animation);\n    }\n  }\n\n  moduleOb.registerAnimation = registerAnimation;\n  moduleOb.loadAnimation = loadAnimation;\n  moduleOb.setSpeed = setSpeed;\n  moduleOb.setDirection = setDirection;\n  moduleOb.play = play;\n  moduleOb.pause = pause;\n  moduleOb.stop = stop;\n  moduleOb.togglePause = togglePause;\n  moduleOb.searchAnimations = searchAnimations;\n  moduleOb.resize = resize;\n  // moduleOb.start = start;\n  moduleOb.goToAndStop = goToAndStop;\n  moduleOb.destroy = destroy;\n  moduleOb.freeze = freeze;\n  moduleOb.unfreeze = unfreeze;\n  moduleOb.setVolume = setVolume;\n  moduleOb.mute = mute;\n  moduleOb.unmute = unmute;\n  moduleOb.getRegisteredAnimations = getRegisteredAnimations;\n  return moduleOb;\n}());\n\n/* eslint-disable */\nconst BezierFactory = (function () {\n  /**\n     * BezierEasing - use bezier curve for transition easing function\n     * by Gatan Renaudeau 2014 - 2015  MIT License\n     *\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\n     * Usage:\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\n     *\n     */\n\n  var ob = {};\n  ob.getBezierEasing = getBezierEasing;\n  var beziers = {};\n\n  function getBezierEasing(a, b, c, d, nm) {\n    var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\n    if (beziers[str]) {\n      return beziers[str];\n    }\n    var bezEasing = new BezierEasing([a, b, c, d]);\n    beziers[str] = bezEasing;\n    return bezEasing;\n  }\n\n  // These values are established by empiricism with tests (tradeoff: performance VS precision)\n  var NEWTON_ITERATIONS = 4;\n  var NEWTON_MIN_SLOPE = 0.001;\n  var SUBDIVISION_PRECISION = 0.0000001;\n  var SUBDIVISION_MAX_ITERATIONS = 10;\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  var float32ArraySupported = typeof Float32Array === 'function';\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\n  function C(aA1) { return 3.0 * aA1; }\n\n  // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n  function calcBezier(aT, aA1, aA2) {\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n  }\n\n  // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n  function getSlope(aT, aA1, aA2) {\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n  }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX,\n      currentT,\n      i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) {\n        aB = currentT;\n      } else {\n        aA = currentT;\n      }\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) return aGuessT;\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  /**\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\n     */\n  function BezierEasing(points) {\n    this._p = points;\n    this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n    this._precomputed = false;\n\n    this.get = this.get.bind(this);\n  }\n\n  BezierEasing.prototype = {\n\n    get: function (x) {\n      var mX1 = this._p[0],\n        mY1 = this._p[1],\n        mX2 = this._p[2],\n        mY2 = this._p[3];\n      if (!this._precomputed) this._precompute();\n      if (mX1 === mY1 && mX2 === mY2) return x; // linear\n      // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n      if (x === 0) return 0;\n      if (x === 1) return 1;\n      return calcBezier(this._getTForX(x), mY1, mY2);\n    },\n\n    // Private part\n\n    _precompute: function () {\n      var mX1 = this._p[0],\n        mY1 = this._p[1],\n        mX2 = this._p[2],\n        mY2 = this._p[3];\n      this._precomputed = true;\n      if (mX1 !== mY1 || mX2 !== mY2) { this._calcSampleValues(); }\n    },\n\n    _calcSampleValues: function () {\n      var mX1 = this._p[0],\n        mX2 = this._p[2];\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    },\n\n    /**\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\n         */\n    _getTForX: function (aX) {\n      var mX1 = this._p[0],\n        mX2 = this._p[2],\n        mSampleValues = this._mSampleValues;\n\n      var intervalStart = 0.0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n      --currentSample;\n\n      // Interpolate to provide an initial guess for t\n      var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n      if (initialSlope >= NEWTON_MIN_SLOPE) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } if (initialSlope === 0.0) {\n        return guessForT;\n      }\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    },\n  };\n\n  return ob;\n}());\n\nconst pooling = (function () {\n  function double(arr) {\n    return arr.concat(createSizedArray(arr.length));\n  }\n\n  return {\n    double: double,\n  };\n}());\n\nconst poolFactory = (function () {\n  return function (initialLength, _create, _release) {\n    var _length = 0;\n    var _maxLength = initialLength;\n    var pool = createSizedArray(_maxLength);\n\n    var ob = {\n      newElement: newElement,\n      release: release,\n    };\n\n    function newElement() {\n      var element;\n      if (_length) {\n        _length -= 1;\n        element = pool[_length];\n      } else {\n        element = _create();\n      }\n      return element;\n    }\n\n    function release(element) {\n      if (_length === _maxLength) {\n        pool = pooling.double(pool);\n        _maxLength *= 2;\n      }\n      if (_release) {\n        _release(element);\n      }\n      pool[_length] = element;\n      _length += 1;\n    }\n\n    return ob;\n  };\n}());\n\nconst bezierLengthPool = (function () {\n  function create() {\n    return {\n      addedLength: 0,\n      percents: createTypedArray('float32', getDefaultCurveSegments()),\n      lengths: createTypedArray('float32', getDefaultCurveSegments()),\n    };\n  }\n  return poolFactory(8, create);\n}());\n\nconst segmentsLengthPool = (function () {\n  function create() {\n    return {\n      lengths: [],\n      totalLength: 0,\n    };\n  }\n\n  function release(element) {\n    var i;\n    var len = element.lengths.length;\n    for (i = 0; i < len; i += 1) {\n      bezierLengthPool.release(element.lengths[i]);\n    }\n    element.lengths.length = 0;\n  }\n\n  return poolFactory(8, create, release);\n}());\n\nfunction bezFunction() {\n  var math = Math;\n\n  function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\n    var det1 = (x1 * y2) + (y1 * x3) + (x2 * y3) - (x3 * y2) - (y3 * x1) - (x2 * y1);\n    return det1 > -0.001 && det1 < 0.001;\n  }\n\n  function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\n    if (z1 === 0 && z2 === 0 && z3 === 0) {\n      return pointOnLine2D(x1, y1, x2, y2, x3, y3);\n    }\n    var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\n    var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\n    var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\n    var diffDist;\n    if (dist1 > dist2) {\n      if (dist1 > dist3) {\n        diffDist = dist1 - dist2 - dist3;\n      } else {\n        diffDist = dist3 - dist2 - dist1;\n      }\n    } else if (dist3 > dist2) {\n      diffDist = dist3 - dist2 - dist1;\n    } else {\n      diffDist = dist2 - dist1 - dist3;\n    }\n    return diffDist > -0.0001 && diffDist < 0.0001;\n  }\n\n  var getBezierLength = (function () {\n    return function (pt1, pt2, pt3, pt4) {\n      var curveSegments = getDefaultCurveSegments();\n      var k;\n      var i;\n      var len;\n      var ptCoord;\n      var perc;\n      var addedLength = 0;\n      var ptDistance;\n      var point = [];\n      var lastPoint = [];\n      var lengthData = bezierLengthPool.newElement();\n      len = pt3.length;\n      for (k = 0; k < curveSegments; k += 1) {\n        perc = k / (curveSegments - 1);\n        ptDistance = 0;\n        for (i = 0; i < len; i += 1) {\n          ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\n          point[i] = ptCoord;\n          if (lastPoint[i] !== null) {\n            ptDistance += bmPow(point[i] - lastPoint[i], 2);\n          }\n          lastPoint[i] = point[i];\n        }\n        if (ptDistance) {\n          ptDistance = bmSqrt(ptDistance);\n          addedLength += ptDistance;\n        }\n        lengthData.percents[k] = perc;\n        lengthData.lengths[k] = addedLength;\n      }\n      lengthData.addedLength = addedLength;\n      return lengthData;\n    };\n  }());\n\n  function getSegmentsLength(shapeData) {\n    var segmentsLength = segmentsLengthPool.newElement();\n    var closed = shapeData.c;\n    var pathV = shapeData.v;\n    var pathO = shapeData.o;\n    var pathI = shapeData.i;\n    var i;\n    var len = shapeData._length;\n    var lengths = segmentsLength.lengths;\n    var totalLength = 0;\n    for (i = 0; i < len - 1; i += 1) {\n      lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\n      totalLength += lengths[i].addedLength;\n    }\n    if (closed && len) {\n      lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\n      totalLength += lengths[i].addedLength;\n    }\n    segmentsLength.totalLength = totalLength;\n    return segmentsLength;\n  }\n\n  function BezierData(length) {\n    this.segmentLength = 0;\n    this.points = new Array(length);\n  }\n\n  function PointData(partial, point) {\n    this.partialLength = partial;\n    this.point = point;\n  }\n\n  var buildBezierData = (function () {\n    var storedData = {};\n\n    return function (pt1, pt2, pt3, pt4) {\n      var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\n      if (!storedData[bezierName]) {\n        var curveSegments = getDefaultCurveSegments();\n        var k;\n        var i;\n        var len;\n        var ptCoord;\n        var perc;\n        var addedLength = 0;\n        var ptDistance;\n        var point;\n        var lastPoint = null;\n        if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\n          curveSegments = 2;\n        }\n        var bezierData = new BezierData(curveSegments);\n        len = pt3.length;\n        for (k = 0; k < curveSegments; k += 1) {\n          point = createSizedArray(len);\n          perc = k / (curveSegments - 1);\n          ptDistance = 0;\n          for (i = 0; i < len; i += 1) {\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\n            point[i] = ptCoord;\n            if (lastPoint !== null) {\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\n            }\n          }\n          ptDistance = bmSqrt(ptDistance);\n          addedLength += ptDistance;\n          bezierData.points[k] = new PointData(ptDistance, point);\n          lastPoint = point;\n        }\n        bezierData.segmentLength = addedLength;\n        storedData[bezierName] = bezierData;\n      }\n      return storedData[bezierName];\n    };\n  }());\n\n  function getDistancePerc(perc, bezierData) {\n    var percents = bezierData.percents;\n    var lengths = bezierData.lengths;\n    var len = percents.length;\n    var initPos = bmFloor((len - 1) * perc);\n    var lengthPos = perc * bezierData.addedLength;\n    var lPerc = 0;\n    if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\n      return percents[initPos];\n    }\n    var dir = lengths[initPos] > lengthPos ? -1 : 1;\n    var flag = true;\n    while (flag) {\n      if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\n        lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\n        flag = false;\n      } else {\n        initPos += dir;\n      }\n      if (initPos < 0 || initPos >= len - 1) {\n        // FIX for TypedArrays that don't store floating point values with enough accuracy\n        if (initPos === len - 1) {\n          return percents[initPos];\n        }\n        flag = false;\n      }\n    }\n    return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\n  }\n\n  function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\n    var t1 = getDistancePerc(percent, bezierData);\n    var u1 = 1 - t1;\n    var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\n    var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\n    return [ptX, ptY];\n  }\n\n  var bezierSegmentPoints = createTypedArray('float32', 8);\n\n  function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\n    if (startPerc < 0) {\n      startPerc = 0;\n    } else if (startPerc > 1) {\n      startPerc = 1;\n    }\n    var t0 = getDistancePerc(startPerc, bezierData);\n    endPerc = endPerc > 1 ? 1 : endPerc;\n    var t1 = getDistancePerc(endPerc, bezierData);\n    var i;\n    var len = pt1.length;\n    var u0 = 1 - t0;\n    var u1 = 1 - t1;\n    var u0u0u0 = u0 * u0 * u0;\n    var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\n    var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\n    var t0t0t0 = t0 * t0 * t0;\n    //\n    var u0u0u1 = u0 * u0 * u1;\n    var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\n    var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\n    var t0t0t1 = t0 * t0 * t1;\n    //\n    var u0u1u1 = u0 * u1 * u1;\n    var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\n    var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\n    var t0t1t1 = t0 * t1 * t1;\n    //\n    var u1u1u1 = u1 * u1 * u1;\n    var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\n    var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\n    var t1t1t1 = t1 * t1 * t1;\n    for (i = 0; i < len; i += 1) {\n      bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n    }\n\n    return bezierSegmentPoints;\n  }\n\n  return {\n    getSegmentsLength: getSegmentsLength,\n    getNewSegment: getNewSegment,\n    getPointInSegment: getPointInSegment,\n    buildBezierData: buildBezierData,\n    pointOnLine2D: pointOnLine2D,\n    pointOnLine3D: pointOnLine3D,\n  };\n}\n\nconst bez = bezFunction();\n\nconst PropertyFactory = (function () {\n  var initFrame = initialDefaultFrame;\n  var mathAbs = Math.abs;\n\n  function interpolateValue(frameNum, caching) {\n    var offsetTime = this.offsetTime;\n    var newValue;\n    if (this.propType === 'multidimensional') {\n      newValue = createTypedArray('float32', this.pv.length);\n    }\n    var iterationIndex = caching.lastIndex;\n    var i = iterationIndex;\n    var len = this.keyframes.length - 1;\n    var flag = true;\n    var keyData;\n    var nextKeyData;\n    var keyframeMetadata;\n\n    while (flag) {\n      keyData = this.keyframes[i];\n      nextKeyData = this.keyframes[i + 1];\n      if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\n        if (keyData.h) {\n          keyData = nextKeyData;\n        }\n        iterationIndex = 0;\n        break;\n      }\n      if ((nextKeyData.t - offsetTime) > frameNum) {\n        iterationIndex = i;\n        break;\n      }\n      if (i < len - 1) {\n        i += 1;\n      } else {\n        iterationIndex = 0;\n        flag = false;\n      }\n    }\n    keyframeMetadata = this.keyframesMetadata[i] || {};\n\n    var k;\n    var kLen;\n    var perc;\n    var jLen;\n    var j;\n    var fnc;\n    var nextKeyTime = nextKeyData.t - offsetTime;\n    var keyTime = keyData.t - offsetTime;\n    var endValue;\n    if (keyData.to) {\n      if (!keyframeMetadata.bezierData) {\n        keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\n      }\n      var bezierData = keyframeMetadata.bezierData;\n      if (frameNum >= nextKeyTime || frameNum < keyTime) {\n        var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\n        kLen = bezierData.points[ind].point.length;\n        for (k = 0; k < kLen; k += 1) {\n          newValue[k] = bezierData.points[ind].point[k];\n        }\n        // caching._lastKeyframeIndex = -1;\n      } else {\n        if (keyframeMetadata.__fnct) {\n          fnc = keyframeMetadata.__fnct;\n        } else {\n          fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\n          keyframeMetadata.__fnct = fnc;\n        }\n        perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n        var distanceInLine = bezierData.segmentLength * perc;\n\n        var segmentPerc;\n        var addedLength = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\n        j = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\n        flag = true;\n        jLen = bezierData.points.length;\n        while (flag) {\n          addedLength += bezierData.points[j].partialLength;\n          if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\n            kLen = bezierData.points[j].point.length;\n            for (k = 0; k < kLen; k += 1) {\n              newValue[k] = bezierData.points[j].point[k];\n            }\n            break;\n          } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\n            segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\n            kLen = bezierData.points[j].point.length;\n            for (k = 0; k < kLen; k += 1) {\n              newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\n            }\n            break;\n          }\n          if (j < jLen - 1) {\n            j += 1;\n          } else {\n            flag = false;\n          }\n        }\n        caching._lastPoint = j;\n        caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\n        caching._lastKeyframeIndex = i;\n      }\n    } else {\n      var outX;\n      var outY;\n      var inX;\n      var inY;\n      var keyValue;\n      len = keyData.s.length;\n      endValue = nextKeyData.s || keyData.e;\n      if (this.sh && keyData.h !== 1) {\n        if (frameNum >= nextKeyTime) {\n          newValue[0] = endValue[0];\n          newValue[1] = endValue[1];\n          newValue[2] = endValue[2];\n        } else if (frameNum <= keyTime) {\n          newValue[0] = keyData.s[0];\n          newValue[1] = keyData.s[1];\n          newValue[2] = keyData.s[2];\n        } else {\n          var quatStart = createQuaternion(keyData.s);\n          var quatEnd = createQuaternion(endValue);\n          var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\n          quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\n        }\n      } else {\n        for (i = 0; i < len; i += 1) {\n          if (keyData.h !== 1) {\n            if (frameNum >= nextKeyTime) {\n              perc = 1;\n            } else if (frameNum < keyTime) {\n              perc = 0;\n            } else {\n              if (keyData.o.x.constructor === Array) {\n                if (!keyframeMetadata.__fnct) {\n                  keyframeMetadata.__fnct = [];\n                }\n                if (!keyframeMetadata.__fnct[i]) {\n                  outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\n                  outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\n                  inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\n                  inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                  keyframeMetadata.__fnct[i] = fnc;\n                } else {\n                  fnc = keyframeMetadata.__fnct[i];\n                }\n              } else if (!keyframeMetadata.__fnct) {\n                outX = keyData.o.x;\n                outY = keyData.o.y;\n                inX = keyData.i.x;\n                inY = keyData.i.y;\n                fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                keyData.keyframeMetadata = fnc;\n              } else {\n                fnc = keyframeMetadata.__fnct;\n              }\n              perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n            }\n          }\n\n          endValue = nextKeyData.s || keyData.e;\n          keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\n\n          if (this.propType === 'multidimensional') {\n            newValue[i] = keyValue;\n          } else {\n            newValue = keyValue;\n          }\n        }\n      }\n    }\n    caching.lastIndex = iterationIndex;\n    return newValue;\n  }\n\n  // based on @Toji's https://github.com/toji/gl-matrix/\n  function slerp(a, b, t) {\n    var out = [];\n    var ax = a[0];\n    var ay = a[1];\n    var az = a[2];\n    var aw = a[3];\n    var bx = b[0];\n    var by = b[1];\n    var bz = b[2];\n    var bw = b[3];\n\n    var omega;\n    var cosom;\n    var sinom;\n    var scale0;\n    var scale1;\n\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    if (cosom < 0.0) {\n      cosom = -cosom;\n      bx = -bx;\n      by = -by;\n      bz = -bz;\n      bw = -bw;\n    }\n    if ((1.0 - cosom) > 0.000001) {\n      omega = Math.acos(cosom);\n      sinom = Math.sin(omega);\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\n      scale1 = Math.sin(t * omega) / sinom;\n    } else {\n      scale0 = 1.0 - t;\n      scale1 = t;\n    }\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n  }\n\n  function quaternionToEuler(out, quat) {\n    var qx = quat[0];\n    var qy = quat[1];\n    var qz = quat[2];\n    var qw = quat[3];\n    var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\n    var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\n    var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\n    out[0] = heading / degToRads;\n    out[1] = attitude / degToRads;\n    out[2] = bank / degToRads;\n  }\n\n  function createQuaternion(values) {\n    var heading = values[0] * degToRads;\n    var attitude = values[1] * degToRads;\n    var bank = values[2] * degToRads;\n    var c1 = Math.cos(heading / 2);\n    var c2 = Math.cos(attitude / 2);\n    var c3 = Math.cos(bank / 2);\n    var s1 = Math.sin(heading / 2);\n    var s2 = Math.sin(attitude / 2);\n    var s3 = Math.sin(bank / 2);\n    var w = c1 * c2 * c3 - s1 * s2 * s3;\n    var x = s1 * s2 * c3 + c1 * c2 * s3;\n    var y = s1 * c2 * c3 + c1 * s2 * s3;\n    var z = c1 * s2 * c3 - s1 * c2 * s3;\n\n    return [x, y, z, w];\n  }\n\n  function getValueAtCurrentTime() {\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\n    var initTime = this.keyframes[0].t - this.offsetTime;\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n    if (!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))) {\n      if (this._caching.lastFrame >= frameNum) {\n        this._caching._lastKeyframeIndex = -1;\n        this._caching.lastIndex = 0;\n      }\n\n      var renderResult = this.interpolateValue(frameNum, this._caching);\n      this.pv = renderResult;\n    }\n    this._caching.lastFrame = frameNum;\n    return this.pv;\n  }\n\n  function setVValue(val) {\n    var multipliedValue;\n    if (this.propType === 'unidimensional') {\n      multipliedValue = val * this.mult;\n      if (mathAbs(this.v - multipliedValue) > 0.00001) {\n        this.v = multipliedValue;\n        this._mdf = true;\n      }\n    } else {\n      var i = 0;\n      var len = this.v.length;\n      while (i < len) {\n        multipliedValue = val[i] * this.mult;\n        if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\n          this.v[i] = multipliedValue;\n          this._mdf = true;\n        }\n        i += 1;\n      }\n    }\n  }\n\n  function processEffectsSequence() {\n    if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\n      return;\n    }\n    if (this.lock) {\n      this.setVValue(this.pv);\n      return;\n    }\n    this.lock = true;\n    this._mdf = this._isFirstFrame;\n    var i;\n    var len = this.effectsSequence.length;\n    var finalValue = this.kf ? this.pv : this.data.k;\n    for (i = 0; i < len; i += 1) {\n      finalValue = this.effectsSequence[i](finalValue);\n    }\n    this.setVValue(finalValue);\n    this._isFirstFrame = false;\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  }\n\n  function addEffect(effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.container.addDynamicProperty(this);\n  }\n\n  function ValueProperty(elem, data, mult, container) {\n    this.propType = 'unidimensional';\n    this.mult = mult || 1;\n    this.data = data;\n    this.v = mult ? data.k * mult : data.k;\n    this.pv = data.k;\n    this._mdf = false;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.k = false;\n    this.kf = false;\n    this.vel = 0;\n    this.effectsSequence = [];\n    this._isFirstFrame = true;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.addEffect = addEffect;\n  }\n\n  function MultiDimensionalProperty(elem, data, mult, container) {\n    this.propType = 'multidimensional';\n    this.mult = mult || 1;\n    this.data = data;\n    this._mdf = false;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.k = false;\n    this.kf = false;\n    this.frameId = -1;\n    var i;\n    var len = data.k.length;\n    this.v = createTypedArray('float32', len);\n    this.pv = createTypedArray('float32', len);\n    this.vel = createTypedArray('float32', len);\n    for (i = 0; i < len; i += 1) {\n      this.v[i] = data.k[i] * this.mult;\n      this.pv[i] = data.k[i];\n    }\n    this._isFirstFrame = true;\n    this.effectsSequence = [];\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.addEffect = addEffect;\n  }\n\n  function KeyframedValueProperty(elem, data, mult, container) {\n    this.propType = 'unidimensional';\n    this.keyframes = data.k;\n    this.keyframesMetadata = [];\n    this.offsetTime = elem.data.st;\n    this.frameId = -1;\n    this._caching = {\n      lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1,\n    };\n    this.k = true;\n    this.kf = true;\n    this.data = data;\n    this.mult = mult || 1;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.v = initFrame;\n    this.pv = initFrame;\n    this._isFirstFrame = true;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.interpolateValue = interpolateValue;\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n    this.addEffect = addEffect;\n  }\n\n  function KeyframedMultidimensionalProperty(elem, data, mult, container) {\n    this.propType = 'multidimensional';\n    var i;\n    var len = data.k.length;\n    var s;\n    var e;\n    var to;\n    var ti;\n    for (i = 0; i < len - 1; i += 1) {\n      if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\n        s = data.k[i].s;\n        e = data.k[i + 1].s;\n        to = data.k[i].to;\n        ti = data.k[i].ti;\n        if ((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2]))) {\n          data.k[i].to = null;\n          data.k[i].ti = null;\n        }\n        if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\n          if (s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\n            data.k[i].to = null;\n            data.k[i].ti = null;\n          }\n        }\n      }\n    }\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n    this.data = data;\n    this.keyframes = data.k;\n    this.keyframesMetadata = [];\n    this.offsetTime = elem.data.st;\n    this.k = true;\n    this.kf = true;\n    this._isFirstFrame = true;\n    this.mult = mult || 1;\n    this.elem = elem;\n    this.container = container;\n    this.comp = elem.comp;\n    this.getValue = processEffectsSequence;\n    this.setVValue = setVValue;\n    this.interpolateValue = interpolateValue;\n    this.frameId = -1;\n    var arrLen = data.k[0].s.length;\n    this.v = createTypedArray('float32', arrLen);\n    this.pv = createTypedArray('float32', arrLen);\n    for (i = 0; i < arrLen; i += 1) {\n      this.v[i] = initFrame;\n      this.pv[i] = initFrame;\n    }\n    this._caching = { lastFrame: initFrame, lastIndex: 0, value: createTypedArray('float32', arrLen) };\n    this.addEffect = addEffect;\n  }\n\n  function getProp(elem, data, type, mult, container) {\n    var p;\n    if (!data.k.length) {\n      p = new ValueProperty(elem, data, mult, container);\n    } else if (typeof (data.k[0]) === 'number') {\n      p = new MultiDimensionalProperty(elem, data, mult, container);\n    } else {\n      switch (type) {\n        case 0:\n          p = new KeyframedValueProperty(elem, data, mult, container);\n          break;\n        case 1:\n          p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\n          break;\n        default:\n          break;\n      }\n    }\n    if (p.effectsSequence.length) {\n      container.addDynamicProperty(p);\n    }\n    return p;\n  }\n\n  var ob = {\n    getProp: getProp,\n  };\n  return ob;\n}());\n\nfunction DynamicPropertyContainer() {}\nDynamicPropertyContainer.prototype = {\n  addDynamicProperty: function (prop) {\n    if (this.dynamicProperties.indexOf(prop) === -1) {\n      this.dynamicProperties.push(prop);\n      this.container.addDynamicProperty(this);\n      this._isAnimated = true;\n    }\n  },\n  iterateDynamicProperties: function () {\n    this._mdf = false;\n    var i;\n    var len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n      if (this.dynamicProperties[i]._mdf) {\n        this._mdf = true;\n      }\n    }\n  },\n  initDynamicPropertyContainer: function (container) {\n    this.container = container;\n    this.dynamicProperties = [];\n    this._mdf = false;\n    this._isAnimated = false;\n  },\n};\n\nconst pointPool = (function () {\n  function create() {\n    return createTypedArray('float32', 2);\n  }\n  return poolFactory(8, create);\n}());\n\nfunction ShapePath() {\n  this.c = false;\n  this._length = 0;\n  this._maxLength = 8;\n  this.v = createSizedArray(this._maxLength);\n  this.o = createSizedArray(this._maxLength);\n  this.i = createSizedArray(this._maxLength);\n}\n\nShapePath.prototype.setPathData = function (closed, len) {\n  this.c = closed;\n  this.setLength(len);\n  var i = 0;\n  while (i < len) {\n    this.v[i] = pointPool.newElement();\n    this.o[i] = pointPool.newElement();\n    this.i[i] = pointPool.newElement();\n    i += 1;\n  }\n};\n\nShapePath.prototype.setLength = function (len) {\n  while (this._maxLength < len) {\n    this.doubleArrayLength();\n  }\n  this._length = len;\n};\n\nShapePath.prototype.doubleArrayLength = function () {\n  this.v = this.v.concat(createSizedArray(this._maxLength));\n  this.i = this.i.concat(createSizedArray(this._maxLength));\n  this.o = this.o.concat(createSizedArray(this._maxLength));\n  this._maxLength *= 2;\n};\n\nShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\n  var arr;\n  this._length = Math.max(this._length, pos + 1);\n  if (this._length >= this._maxLength) {\n    this.doubleArrayLength();\n  }\n  switch (type) {\n    case 'v':\n      arr = this.v;\n      break;\n    case 'i':\n      arr = this.i;\n      break;\n    case 'o':\n      arr = this.o;\n      break;\n    default:\n      arr = [];\n      break;\n  }\n  if (!arr[pos] || (arr[pos] && !replace)) {\n    arr[pos] = pointPool.newElement();\n  }\n  arr[pos][0] = x;\n  arr[pos][1] = y;\n};\n\nShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\n  this.setXYAt(vX, vY, 'v', pos, replace);\n  this.setXYAt(oX, oY, 'o', pos, replace);\n  this.setXYAt(iX, iY, 'i', pos, replace);\n};\n\nShapePath.prototype.reverse = function () {\n  var newPath = new ShapePath();\n  newPath.setPathData(this.c, this._length);\n  var vertices = this.v;\n  var outPoints = this.o;\n  var inPoints = this.i;\n  var init = 0;\n  if (this.c) {\n    newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\n    init = 1;\n  }\n  var cnt = this._length - 1;\n  var len = this._length;\n\n  var i;\n  for (i = init; i < len; i += 1) {\n    newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\n    cnt -= 1;\n  }\n  return newPath;\n};\n\nconst shapePool = (function () {\n  function create() {\n    return new ShapePath();\n  }\n\n  function release(shapePath) {\n    var len = shapePath._length;\n    var i;\n    for (i = 0; i < len; i += 1) {\n      pointPool.release(shapePath.v[i]);\n      pointPool.release(shapePath.i[i]);\n      pointPool.release(shapePath.o[i]);\n      shapePath.v[i] = null;\n      shapePath.i[i] = null;\n      shapePath.o[i] = null;\n    }\n    shapePath._length = 0;\n    shapePath.c = false;\n  }\n\n  function clone(shape) {\n    var cloned = factory.newElement();\n    var i;\n    var len = shape._length === undefined ? shape.v.length : shape._length;\n    cloned.setLength(len);\n    cloned.c = shape.c;\n\n    for (i = 0; i < len; i += 1) {\n      cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\n    }\n    return cloned;\n  }\n\n  var factory = poolFactory(4, create, release);\n  factory.clone = clone;\n\n  return factory;\n}());\n\nfunction ShapeCollection() {\n  this._length = 0;\n  this._maxLength = 4;\n  this.shapes = createSizedArray(this._maxLength);\n}\n\nShapeCollection.prototype.addShape = function (shapeData) {\n  if (this._length === this._maxLength) {\n    this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\n    this._maxLength *= 2;\n  }\n  this.shapes[this._length] = shapeData;\n  this._length += 1;\n};\n\nShapeCollection.prototype.releaseShapes = function () {\n  var i;\n  for (i = 0; i < this._length; i += 1) {\n    shapePool.release(this.shapes[i]);\n  }\n  this._length = 0;\n};\n\nconst shapeCollectionPool = (function () {\n  var ob = {\n    newShapeCollection: newShapeCollection,\n    release: release,\n  };\n\n  var _length = 0;\n  var _maxLength = 4;\n  var pool = createSizedArray(_maxLength);\n\n  function newShapeCollection() {\n    var shapeCollection;\n    if (_length) {\n      _length -= 1;\n      shapeCollection = pool[_length];\n    } else {\n      shapeCollection = new ShapeCollection();\n    }\n    return shapeCollection;\n  }\n\n  function release(shapeCollection) {\n    var i;\n    var len = shapeCollection._length;\n    for (i = 0; i < len; i += 1) {\n      shapePool.release(shapeCollection.shapes[i]);\n    }\n    shapeCollection._length = 0;\n\n    if (_length === _maxLength) {\n      pool = pooling.double(pool);\n      _maxLength *= 2;\n    }\n    pool[_length] = shapeCollection;\n    _length += 1;\n  }\n\n  return ob;\n}());\n\nconst ShapePropertyFactory = (function () {\n  var initFrame = -999999;\n\n  function interpolateShape(frameNum, previousValue, caching) {\n    var iterationIndex = caching.lastIndex;\n    var keyPropS;\n    var keyPropE;\n    var isHold;\n    var j;\n    var k;\n    var jLen;\n    var kLen;\n    var perc;\n    var vertexValue;\n    var kf = this.keyframes;\n    if (frameNum < kf[0].t - this.offsetTime) {\n      keyPropS = kf[0].s[0];\n      isHold = true;\n      iterationIndex = 0;\n    } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\n      keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\n      /* if(kf[kf.length - 1].s){\n                keyPropS = kf[kf.length - 1].s[0];\n            }else{\n                keyPropS = kf[kf.length - 2].e[0];\n            } */\n      isHold = true;\n    } else {\n      var i = iterationIndex;\n      var len = kf.length - 1;\n      var flag = true;\n      var keyData;\n      var nextKeyData;\n      var keyframeMetadata;\n      while (flag) {\n        keyData = kf[i];\n        nextKeyData = kf[i + 1];\n        if ((nextKeyData.t - this.offsetTime) > frameNum) {\n          break;\n        }\n        if (i < len - 1) {\n          i += 1;\n        } else {\n          flag = false;\n        }\n      }\n      keyframeMetadata = this.keyframesMetadata[i] || {};\n      isHold = keyData.h === 1;\n      iterationIndex = i;\n      if (!isHold) {\n        if (frameNum >= nextKeyData.t - this.offsetTime) {\n          perc = 1;\n        } else if (frameNum < keyData.t - this.offsetTime) {\n          perc = 0;\n        } else {\n          var fnc;\n          if (keyframeMetadata.__fnct) {\n            fnc = keyframeMetadata.__fnct;\n          } else {\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\n            keyframeMetadata.__fnct = fnc;\n          }\n          perc = fnc((frameNum - (keyData.t - this.offsetTime)) / ((nextKeyData.t - this.offsetTime) - (keyData.t - this.offsetTime)));\n        }\n        keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\n      }\n      keyPropS = keyData.s[0];\n    }\n    jLen = previousValue._length;\n    kLen = keyPropS.i[0].length;\n    caching.lastIndex = iterationIndex;\n\n    for (j = 0; j < jLen; j += 1) {\n      for (k = 0; k < kLen; k += 1) {\n        vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\n        previousValue.i[j][k] = vertexValue;\n        vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\n        previousValue.o[j][k] = vertexValue;\n        vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\n        previousValue.v[j][k] = vertexValue;\n      }\n    }\n  }\n\n  function interpolateShapeCurrentTime() {\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\n    var initTime = this.keyframes[0].t - this.offsetTime;\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n    var lastFrame = this._caching.lastFrame;\n    if (!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))) {\n      /// /\n      this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\n      this.interpolateShape(frameNum, this.pv, this._caching);\n      /// /\n    }\n    this._caching.lastFrame = frameNum;\n    return this.pv;\n  }\n\n  function resetShape() {\n    this.paths = this.localShapeCollection;\n  }\n\n  function shapesEqual(shape1, shape2) {\n    if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\n      return false;\n    }\n    var i;\n    var len = shape1._length;\n    for (i = 0; i < len; i += 1) {\n      if (shape1.v[i][0] !== shape2.v[i][0]\n            || shape1.v[i][1] !== shape2.v[i][1]\n            || shape1.o[i][0] !== shape2.o[i][0]\n            || shape1.o[i][1] !== shape2.o[i][1]\n            || shape1.i[i][0] !== shape2.i[i][0]\n            || shape1.i[i][1] !== shape2.i[i][1]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function setVValue(newPath) {\n    if (!shapesEqual(this.v, newPath)) {\n      this.v = shapePool.clone(newPath);\n      this.localShapeCollection.releaseShapes();\n      this.localShapeCollection.addShape(this.v);\n      this._mdf = true;\n      this.paths = this.localShapeCollection;\n    }\n  }\n\n  function processEffectsSequence() {\n    if (this.elem.globalData.frameId === this.frameId) {\n      return;\n    } if (!this.effectsSequence.length) {\n      this._mdf = false;\n      return;\n    }\n    if (this.lock) {\n      this.setVValue(this.pv);\n      return;\n    }\n    this.lock = true;\n    this._mdf = false;\n    var finalValue;\n    if (this.kf) {\n      finalValue = this.pv;\n    } else if (this.data.ks) {\n      finalValue = this.data.ks.k;\n    } else {\n      finalValue = this.data.pt.k;\n    }\n    var i;\n    var len = this.effectsSequence.length;\n    for (i = 0; i < len; i += 1) {\n      finalValue = this.effectsSequence[i](finalValue);\n    }\n    this.setVValue(finalValue);\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  }\n\n  function ShapeProperty(elem, data, type) {\n    this.propType = 'shape';\n    this.comp = elem.comp;\n    this.container = elem;\n    this.elem = elem;\n    this.data = data;\n    this.k = false;\n    this.kf = false;\n    this._mdf = false;\n    var pathData = type === 3 ? data.pt.k : data.ks.k;\n    this.v = shapePool.clone(pathData);\n    this.pv = shapePool.clone(this.v);\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n    this.paths = this.localShapeCollection;\n    this.paths.addShape(this.v);\n    this.reset = resetShape;\n    this.effectsSequence = [];\n  }\n\n  function addEffect(effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.container.addDynamicProperty(this);\n  }\n\n  ShapeProperty.prototype.interpolateShape = interpolateShape;\n  ShapeProperty.prototype.getValue = processEffectsSequence;\n  ShapeProperty.prototype.setVValue = setVValue;\n  ShapeProperty.prototype.addEffect = addEffect;\n\n  function KeyframedShapeProperty(elem, data, type) {\n    this.propType = 'shape';\n    this.comp = elem.comp;\n    this.elem = elem;\n    this.container = elem;\n    this.offsetTime = elem.data.st;\n    this.keyframes = type === 3 ? data.pt.k : data.ks.k;\n    this.keyframesMetadata = [];\n    this.k = true;\n    this.kf = true;\n    var len = this.keyframes[0].s[0].i.length;\n    this.v = shapePool.newElement();\n    this.v.setPathData(this.keyframes[0].s[0].c, len);\n    this.pv = shapePool.clone(this.v);\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n    this.paths = this.localShapeCollection;\n    this.paths.addShape(this.v);\n    this.lastFrame = initFrame;\n    this.reset = resetShape;\n    this._caching = { lastFrame: initFrame, lastIndex: 0 };\n    this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\n  }\n  KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\n  KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\n  KeyframedShapeProperty.prototype.setVValue = setVValue;\n  KeyframedShapeProperty.prototype.addEffect = addEffect;\n\n  var EllShapeProperty = (function () {\n    var cPoint = roundCorner;\n\n    function EllShapePropertyFactory(elem, data) {\n      this.v = shapePool.newElement();\n      this.v.setPathData(true, 4);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.localShapeCollection.addShape(this.v);\n      this.d = data.d;\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.frameId = -1;\n      this.initDynamicPropertyContainer(elem);\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n      if (this.dynamicProperties.length) {\n        this.k = true;\n      } else {\n        this.k = false;\n        this.convertEllToPath();\n      }\n    }\n\n    EllShapePropertyFactory.prototype = {\n      reset: resetShape,\n      getValue: function () {\n        if (this.elem.globalData.frameId === this.frameId) {\n          return;\n        }\n        this.frameId = this.elem.globalData.frameId;\n        this.iterateDynamicProperties();\n\n        if (this._mdf) {\n          this.convertEllToPath();\n        }\n      },\n      convertEllToPath: function () {\n        var p0 = this.p.v[0];\n        var p1 = this.p.v[1];\n        var s0 = this.s.v[0] / 2;\n        var s1 = this.s.v[1] / 2;\n        var _cw = this.d !== 3;\n        var _v = this.v;\n        _v.v[0][0] = p0;\n        _v.v[0][1] = p1 - s1;\n        _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\n        _v.v[1][1] = p1;\n        _v.v[2][0] = p0;\n        _v.v[2][1] = p1 + s1;\n        _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\n        _v.v[3][1] = p1;\n        _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n        _v.i[0][1] = p1 - s1;\n        _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\n        _v.i[1][1] = p1 - s1 * cPoint;\n        _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n        _v.i[2][1] = p1 + s1;\n        _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\n        _v.i[3][1] = p1 + s1 * cPoint;\n        _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n        _v.o[0][1] = p1 - s1;\n        _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\n        _v.o[1][1] = p1 + s1 * cPoint;\n        _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n        _v.o[2][1] = p1 + s1;\n        _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\n        _v.o[3][1] = p1 - s1 * cPoint;\n      },\n    };\n\n    extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\n\n    return EllShapePropertyFactory;\n  }());\n\n  var StarShapeProperty = (function () {\n    function StarShapePropertyFactory(elem, data) {\n      this.v = shapePool.newElement();\n      this.v.setPathData(true, 0);\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.data = data;\n      this.frameId = -1;\n      this.d = data.d;\n      this.initDynamicPropertyContainer(elem);\n      if (data.sy === 1) {\n        this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\n        this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\n        this.convertToPath = this.convertStarToPath;\n      } else {\n        this.convertToPath = this.convertPolygonToPath;\n      }\n      this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n      this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\n      this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\n      this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.localShapeCollection.addShape(this.v);\n      this.paths = this.localShapeCollection;\n      if (this.dynamicProperties.length) {\n        this.k = true;\n      } else {\n        this.k = false;\n        this.convertToPath();\n      }\n    }\n\n    StarShapePropertyFactory.prototype = {\n      reset: resetShape,\n      getValue: function () {\n        if (this.elem.globalData.frameId === this.frameId) {\n          return;\n        }\n        this.frameId = this.elem.globalData.frameId;\n        this.iterateDynamicProperties();\n        if (this._mdf) {\n          this.convertToPath();\n        }\n      },\n      convertStarToPath: function () {\n        var numPts = Math.floor(this.pt.v) * 2;\n        var angle = (Math.PI * 2) / numPts;\n        /* this.v.v.length = numPts;\n                this.v.i.length = numPts;\n                this.v.o.length = numPts; */\n        var longFlag = true;\n        var longRad = this.or.v;\n        var shortRad = this.ir.v;\n        var longRound = this.os.v;\n        var shortRound = this.is.v;\n        var longPerimSegment = (2 * Math.PI * longRad) / (numPts * 2);\n        var shortPerimSegment = (2 * Math.PI * shortRad) / (numPts * 2);\n        var i;\n        var rad;\n        var roundness;\n        var perimSegment;\n        var currentAng = -Math.PI / 2;\n        currentAng += this.r.v;\n        var dir = this.data.d === 3 ? -1 : 1;\n        this.v._length = 0;\n        for (i = 0; i < numPts; i += 1) {\n          rad = longFlag ? longRad : shortRad;\n          roundness = longFlag ? longRound : shortRound;\n          perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\n          var x = rad * Math.cos(currentAng);\n          var y = rad * Math.sin(currentAng);\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n          x += +this.p.v[0];\n          y += +this.p.v[1];\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n\n          /* this.v.v[i] = [x,y];\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\n                    this.v._length = numPts; */\n          longFlag = !longFlag;\n          currentAng += angle * dir;\n        }\n      },\n      convertPolygonToPath: function () {\n        var numPts = Math.floor(this.pt.v);\n        var angle = (Math.PI * 2) / numPts;\n        var rad = this.or.v;\n        var roundness = this.os.v;\n        var perimSegment = (2 * Math.PI * rad) / (numPts * 4);\n        var i;\n        var currentAng = -Math.PI * 0.5;\n        var dir = this.data.d === 3 ? -1 : 1;\n        currentAng += this.r.v;\n        this.v._length = 0;\n        for (i = 0; i < numPts; i += 1) {\n          var x = rad * Math.cos(currentAng);\n          var y = rad * Math.sin(currentAng);\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n          x += +this.p.v[0];\n          y += +this.p.v[1];\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n          currentAng += angle * dir;\n        }\n        this.paths.length = 0;\n        this.paths[0] = this.v;\n      },\n\n    };\n    extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\n\n    return StarShapePropertyFactory;\n  }());\n\n  var RectShapeProperty = (function () {\n    function RectShapePropertyFactory(elem, data) {\n      this.v = shapePool.newElement();\n      this.v.c = true;\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.localShapeCollection.addShape(this.v);\n      this.paths = this.localShapeCollection;\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.frameId = -1;\n      this.d = data.d;\n      this.initDynamicPropertyContainer(elem);\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n      this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\n      if (this.dynamicProperties.length) {\n        this.k = true;\n      } else {\n        this.k = false;\n        this.convertRectToPath();\n      }\n    }\n\n    RectShapePropertyFactory.prototype = {\n      convertRectToPath: function () {\n        var p0 = this.p.v[0];\n        var p1 = this.p.v[1];\n        var v0 = this.s.v[0] / 2;\n        var v1 = this.s.v[1] / 2;\n        var round = bmMin(v0, v1, this.r.v);\n        var cPoint = round * (1 - roundCorner);\n        this.v._length = 0;\n\n        if (this.d === 2 || this.d === 1) {\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\n          this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\n          if (round !== 0) {\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\n          } else {\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\n          }\n        } else {\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\n          if (round !== 0) {\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\n          } else {\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\n            this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\n          }\n        }\n      },\n      getValue: function () {\n        if (this.elem.globalData.frameId === this.frameId) {\n          return;\n        }\n        this.frameId = this.elem.globalData.frameId;\n        this.iterateDynamicProperties();\n        if (this._mdf) {\n          this.convertRectToPath();\n        }\n      },\n      reset: resetShape,\n    };\n    extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\n\n    return RectShapePropertyFactory;\n  }());\n\n  function getShapeProp(elem, data, type) {\n    var prop;\n    if (type === 3 || type === 4) {\n      var dataProp = type === 3 ? data.pt : data.ks;\n      var keys = dataProp.k;\n      if (keys.length) {\n        prop = new KeyframedShapeProperty(elem, data, type);\n      } else {\n        prop = new ShapeProperty(elem, data, type);\n      }\n    } else if (type === 5) {\n      prop = new RectShapeProperty(elem, data);\n    } else if (type === 6) {\n      prop = new EllShapeProperty(elem, data);\n    } else if (type === 7) {\n      prop = new StarShapeProperty(elem, data);\n    }\n    if (prop.k) {\n      elem.addDynamicProperty(prop);\n    }\n    return prop;\n  }\n\n  function getConstructorFunction() {\n    return ShapeProperty;\n  }\n\n  function getKeyframedConstructorFunction() {\n    return KeyframedShapeProperty;\n  }\n\n  var ob = {};\n  ob.getShapeProp = getShapeProp;\n  ob.getConstructorFunction = getConstructorFunction;\n  ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\n  return ob;\n}());\n\n/*!\n Transformation Matrix v2.0\n (c) Epistemex 2014-2015\n www.epistemex.com\n By Ken Fyrstenberg\n Contributions by leeoniya.\n License: MIT, header required.\n */\n\n/**\n * 2D transformation matrix object initialized with identity matrix.\n *\n * The matrix can synchronize a canvas context by supplying the context\n * as an argument, or later apply current absolute transform to an\n * existing context.\n *\n * All values are handled as floating point values.\n *\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\n * @prop {number} a - scale x\n * @prop {number} b - shear y\n * @prop {number} c - shear x\n * @prop {number} d - scale y\n * @prop {number} e - translate x\n * @prop {number} f - translate y\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\n * @constructor\n */\n\nconst Matrix = (function () {\n  var _cos = Math.cos;\n  var _sin = Math.sin;\n  var _tan = Math.tan;\n  var _rnd = Math.round;\n\n  function reset() {\n    this.props[0] = 1;\n    this.props[1] = 0;\n    this.props[2] = 0;\n    this.props[3] = 0;\n    this.props[4] = 0;\n    this.props[5] = 1;\n    this.props[6] = 0;\n    this.props[7] = 0;\n    this.props[8] = 0;\n    this.props[9] = 0;\n    this.props[10] = 1;\n    this.props[11] = 0;\n    this.props[12] = 0;\n    this.props[13] = 0;\n    this.props[14] = 0;\n    this.props[15] = 1;\n    return this;\n  }\n\n  function rotate(angle) {\n    if (angle === 0) {\n      return this;\n    }\n    var mCos = _cos(angle);\n    var mSin = _sin(angle);\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n  }\n\n  function rotateX(angle) {\n    if (angle === 0) {\n      return this;\n    }\n    var mCos = _cos(angle);\n    var mSin = _sin(angle);\n    return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\n  }\n\n  function rotateY(angle) {\n    if (angle === 0) {\n      return this;\n    }\n    var mCos = _cos(angle);\n    var mSin = _sin(angle);\n    return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\n  }\n\n  function rotateZ(angle) {\n    if (angle === 0) {\n      return this;\n    }\n    var mCos = _cos(angle);\n    var mSin = _sin(angle);\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n  }\n\n  function shear(sx, sy) {\n    return this._t(1, sy, sx, 1, 0, 0);\n  }\n\n  function skew(ax, ay) {\n    return this.shear(_tan(ax), _tan(ay));\n  }\n\n  function skewFromAxis(ax, angle) {\n    var mCos = _cos(angle);\n    var mSin = _sin(angle);\n    return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\n      ._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\n      ._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\n  }\n\n  function scale(sx, sy, sz) {\n    if (!sz && sz !== 0) {\n      sz = 1;\n    }\n    if (sx === 1 && sy === 1 && sz === 1) {\n      return this;\n    }\n    return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\n  }\n\n  function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\n    this.props[0] = a;\n    this.props[1] = b;\n    this.props[2] = c;\n    this.props[3] = d;\n    this.props[4] = e;\n    this.props[5] = f;\n    this.props[6] = g;\n    this.props[7] = h;\n    this.props[8] = i;\n    this.props[9] = j;\n    this.props[10] = k;\n    this.props[11] = l;\n    this.props[12] = m;\n    this.props[13] = n;\n    this.props[14] = o;\n    this.props[15] = p;\n    return this;\n  }\n\n  function translate(tx, ty, tz) {\n    tz = tz || 0;\n    if (tx !== 0 || ty !== 0 || tz !== 0) {\n      return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\n    }\n    return this;\n  }\n\n  function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\n    var _p = this.props;\n\n    if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\n      // NOTE: commenting this condition because TurboFan deoptimizes code when present\n      // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\n      _p[12] = _p[12] * a2 + _p[15] * m2;\n      _p[13] = _p[13] * f2 + _p[15] * n2;\n      _p[14] = _p[14] * k2 + _p[15] * o2;\n      _p[15] *= p2;\n      // }\n      this._identityCalculated = false;\n      return this;\n    }\n\n    var a1 = _p[0];\n    var b1 = _p[1];\n    var c1 = _p[2];\n    var d1 = _p[3];\n    var e1 = _p[4];\n    var f1 = _p[5];\n    var g1 = _p[6];\n    var h1 = _p[7];\n    var i1 = _p[8];\n    var j1 = _p[9];\n    var k1 = _p[10];\n    var l1 = _p[11];\n    var m1 = _p[12];\n    var n1 = _p[13];\n    var o1 = _p[14];\n    var p1 = _p[15];\n\n    /* matrix order (canvas compatible):\n         * ace\n         * bdf\n         * 001\n         */\n    _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\n    _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\n    _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\n    _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\n\n    _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\n    _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\n    _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\n    _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\n\n    _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\n    _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\n    _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\n    _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\n\n    _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\n    _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\n    _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\n    _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\n\n    this._identityCalculated = false;\n    return this;\n  }\n\n  function isIdentity() {\n    if (!this._identityCalculated) {\n      this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\n      this._identityCalculated = true;\n    }\n    return this._identity;\n  }\n\n  function equals(matr) {\n    var i = 0;\n    while (i < 16) {\n      if (matr.props[i] !== this.props[i]) {\n        return false;\n      }\n      i += 1;\n    }\n    return true;\n  }\n\n  function clone(matr) {\n    var i;\n    for (i = 0; i < 16; i += 1) {\n      matr.props[i] = this.props[i];\n    }\n    return matr;\n  }\n\n  function cloneFromProps(props) {\n    var i;\n    for (i = 0; i < 16; i += 1) {\n      this.props[i] = props[i];\n    }\n  }\n\n  function applyToPoint(x, y, z) {\n    return {\n      x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n      y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n      z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\n    };\n    /* return {\n         x: x * me.a + y * me.c + me.e,\n         y: x * me.b + y * me.d + me.f\n         }; */\n  }\n  function applyToX(x, y, z) {\n    return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\n  }\n  function applyToY(x, y, z) {\n    return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\n  }\n  function applyToZ(x, y, z) {\n    return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\n  }\n\n  function getInverseMatrix() {\n    var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\n    var a = this.props[5] / determinant;\n    var b = -this.props[1] / determinant;\n    var c = -this.props[4] / determinant;\n    var d = this.props[0] / determinant;\n    var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\n    var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\n    var inverseMatrix = new Matrix();\n    inverseMatrix.props[0] = a;\n    inverseMatrix.props[1] = b;\n    inverseMatrix.props[4] = c;\n    inverseMatrix.props[5] = d;\n    inverseMatrix.props[12] = e;\n    inverseMatrix.props[13] = f;\n    return inverseMatrix;\n  }\n\n  function inversePoint(pt) {\n    var inverseMatrix = this.getInverseMatrix();\n    return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\n  }\n\n  function inversePoints(pts) {\n    var i;\n    var len = pts.length;\n    var retPts = [];\n    for (i = 0; i < len; i += 1) {\n      retPts[i] = inversePoint(pts[i]);\n    }\n    return retPts;\n  }\n\n  function applyToTriplePoints(pt1, pt2, pt3) {\n    var arr = createTypedArray('float32', 6);\n    if (this.isIdentity()) {\n      arr[0] = pt1[0];\n      arr[1] = pt1[1];\n      arr[2] = pt2[0];\n      arr[3] = pt2[1];\n      arr[4] = pt3[0];\n      arr[5] = pt3[1];\n    } else {\n      var p0 = this.props[0];\n      var p1 = this.props[1];\n      var p4 = this.props[4];\n      var p5 = this.props[5];\n      var p12 = this.props[12];\n      var p13 = this.props[13];\n      arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\n      arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\n      arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\n      arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\n      arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\n      arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\n    }\n    return arr;\n  }\n\n  function applyToPointArray(x, y, z) {\n    var arr;\n    if (this.isIdentity()) {\n      arr = [x, y, z];\n    } else {\n      arr = [\n        x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n        x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n        x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\n      ];\n    }\n    return arr;\n  }\n\n  function applyToPointStringified(x, y) {\n    if (this.isIdentity()) {\n      return x + ',' + y;\n    }\n    var _p = this.props;\n    return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\n  }\n\n  function toCSS() {\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n    /* if(this.isIdentity()) {\n            return '';\n        } */\n    var i = 0;\n    var props = this.props;\n    var cssValue = 'matrix3d(';\n    var v = 10000;\n    while (i < 16) {\n      cssValue += _rnd(props[i] * v) / v;\n      cssValue += i === 15 ? ')' : ',';\n      i += 1;\n    }\n    return cssValue;\n  }\n\n  function roundMatrixProperty(val) {\n    var v = 10000;\n    if ((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\n      return _rnd(val * v) / v;\n    }\n    return val;\n  }\n\n  function to2dCSS() {\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n    /* if(this.isIdentity()) {\n            return '';\n        } */\n    var props = this.props;\n    var _a = roundMatrixProperty(props[0]);\n    var _b = roundMatrixProperty(props[1]);\n    var _c = roundMatrixProperty(props[4]);\n    var _d = roundMatrixProperty(props[5]);\n    var _e = roundMatrixProperty(props[12]);\n    var _f = roundMatrixProperty(props[13]);\n    return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\n  }\n\n  return function () {\n    this.reset = reset;\n    this.rotate = rotate;\n    this.rotateX = rotateX;\n    this.rotateY = rotateY;\n    this.rotateZ = rotateZ;\n    this.skew = skew;\n    this.skewFromAxis = skewFromAxis;\n    this.shear = shear;\n    this.scale = scale;\n    this.setTransform = setTransform;\n    this.translate = translate;\n    this.transform = transform;\n    this.applyToPoint = applyToPoint;\n    this.applyToX = applyToX;\n    this.applyToY = applyToY;\n    this.applyToZ = applyToZ;\n    this.applyToPointArray = applyToPointArray;\n    this.applyToTriplePoints = applyToTriplePoints;\n    this.applyToPointStringified = applyToPointStringified;\n    this.toCSS = toCSS;\n    this.to2dCSS = to2dCSS;\n    this.clone = clone;\n    this.cloneFromProps = cloneFromProps;\n    this.equals = equals;\n    this.inversePoints = inversePoints;\n    this.inversePoint = inversePoint;\n    this.getInverseMatrix = getInverseMatrix;\n    this._t = this.transform;\n    this.isIdentity = isIdentity;\n    this._identity = true;\n    this._identityCalculated = false;\n\n    this.props = createTypedArray('float32', 16);\n    this.reset();\n  };\n}());\n\nvar standalone = '__[STANDALONE]__';\nvar animationData = '__[ANIMATIONDATA]__';\nvar renderer = '';\n\nfunction setLocation(href) {\n  setLocationHref(href);\n}\n\nfunction searchAnimations() {\n  if (standalone === true) {\n    animationManager.searchAnimations(animationData, standalone, renderer);\n  } else {\n    animationManager.searchAnimations();\n  }\n}\n\nfunction setSubframeRendering(flag) {\n  setSubframeEnabled(flag);\n}\n\nfunction setPrefix(prefix) {\n  setIdPrefix(prefix);\n}\n\nfunction loadAnimation(params) {\n  if (standalone === true) {\n    params.animationData = JSON.parse(animationData);\n  }\n  return animationManager.loadAnimation(params);\n}\n\nfunction setQuality(value) {\n  if (typeof value === 'string') {\n    switch (value) {\n      case 'high':\n        setDefaultCurveSegments(200);\n        break;\n      default:\n      case 'medium':\n        setDefaultCurveSegments(50);\n        break;\n      case 'low':\n        setDefaultCurveSegments(10);\n        break;\n    }\n  } else if (!isNaN(value) && value > 1) {\n    setDefaultCurveSegments(value);\n  }\n  if (getDefaultCurveSegments() >= 50) {\n    roundValues(false);\n  } else {\n    roundValues(true);\n  }\n}\n\nfunction inBrowser() {\n  return typeof navigator !== 'undefined';\n}\n\nfunction installPlugin(type, plugin) {\n  if (type === 'expressions') {\n    setExpressionsPlugin(plugin);\n  }\n}\n\nfunction getFactory(name) {\n  switch (name) {\n    case 'propertyFactory':\n      return PropertyFactory;\n    case 'shapePropertyFactory':\n      return ShapePropertyFactory;\n    case 'matrix':\n      return Matrix;\n    default:\n      return null;\n  }\n}\n\nlottie.play = animationManager.play;\nlottie.pause = animationManager.pause;\nlottie.setLocationHref = setLocation;\nlottie.togglePause = animationManager.togglePause;\nlottie.setSpeed = animationManager.setSpeed;\nlottie.setDirection = animationManager.setDirection;\nlottie.stop = animationManager.stop;\nlottie.searchAnimations = searchAnimations;\nlottie.registerAnimation = animationManager.registerAnimation;\nlottie.loadAnimation = loadAnimation;\nlottie.setSubframeRendering = setSubframeRendering;\nlottie.resize = animationManager.resize;\n// lottie.start = start;\nlottie.goToAndStop = animationManager.goToAndStop;\nlottie.destroy = animationManager.destroy;\nlottie.setQuality = setQuality;\nlottie.inBrowser = inBrowser;\nlottie.installPlugin = installPlugin;\nlottie.freeze = animationManager.freeze;\nlottie.unfreeze = animationManager.unfreeze;\nlottie.setVolume = animationManager.setVolume;\nlottie.mute = animationManager.mute;\nlottie.unmute = animationManager.unmute;\nlottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\nlottie.useWebWorker = setWebWorker;\nlottie.setIDPrefix = setPrefix;\nlottie.__getFactory = getFactory;\nlottie.version = '[[BM_VERSION]]';\n\nfunction checkReady() {\n  if (document.readyState === 'complete') {\n    clearInterval(readyStateCheckInterval);\n    searchAnimations();\n  }\n}\n\nfunction getQueryVariable(variable) {\n  var vars = queryString.split('&');\n  for (var i = 0; i < vars.length; i += 1) {\n    var pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) == variable) { // eslint-disable-line eqeqeq\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  return null;\n}\nvar queryString = '';\nif (standalone) {\n  var scripts = document.getElementsByTagName('script');\n  var index = scripts.length - 1;\n  var myScript = scripts[index] || {\n    src: '',\n  };\n  queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\n  renderer = getQueryVariable('renderer');\n}\nvar readyStateCheckInterval = setInterval(checkReady, 100);\n\n// this adds bodymovin to the window object for backwards compatibility\ntry {\n  if (!(typeof exports === 'object' && typeof module !== 'undefined')\n    && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\n  ) {\n    window.bodymovin = lottie;\n  }\n} catch (err) {\n  //\n}\n\nconst ShapeModifiers = (function () {\n  var ob = {};\n  var modifiers = {};\n  ob.registerModifier = registerModifier;\n  ob.getModifier = getModifier;\n\n  function registerModifier(nm, factory) {\n    if (!modifiers[nm]) {\n      modifiers[nm] = factory;\n    }\n  }\n\n  function getModifier(nm, elem, data) {\n    return new modifiers[nm](elem, data);\n  }\n\n  return ob;\n}());\n\nfunction ShapeModifier() {}\nShapeModifier.prototype.initModifierProperties = function () {};\nShapeModifier.prototype.addShapeToModifier = function () {};\nShapeModifier.prototype.addShape = function (data) {\n  if (!this.closed) {\n    // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\n    data.sh.container.addDynamicProperty(data.sh);\n    var shapeData = { shape: data.sh, data: data, localShapeCollection: shapeCollectionPool.newShapeCollection() };\n    this.shapes.push(shapeData);\n    this.addShapeToModifier(shapeData);\n    if (this._isAnimated) {\n      data.setAsAnimated();\n    }\n  }\n};\nShapeModifier.prototype.init = function (elem, data) {\n  this.shapes = [];\n  this.elem = elem;\n  this.initDynamicPropertyContainer(elem);\n  this.initModifierProperties(elem, data);\n  this.frameId = initialDefaultFrame;\n  this.closed = false;\n  this.k = false;\n  if (this.dynamicProperties.length) {\n    this.k = true;\n  } else {\n    this.getValue(true);\n  }\n};\nShapeModifier.prototype.processKeys = function () {\n  if (this.elem.globalData.frameId === this.frameId) {\n    return;\n  }\n  this.frameId = this.elem.globalData.frameId;\n  this.iterateDynamicProperties();\n};\n\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\n\nfunction TrimModifier() {\n}\nextendPrototype([ShapeModifier], TrimModifier);\nTrimModifier.prototype.initModifierProperties = function (elem, data) {\n  this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\n  this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\n  this.sValue = 0;\n  this.eValue = 0;\n  this.getValue = this.processKeys;\n  this.m = data.m;\n  this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\n};\n\nTrimModifier.prototype.addShapeToModifier = function (shapeData) {\n  shapeData.pathsData = [];\n};\n\nTrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\n  var segments = [];\n  if (e <= 1) {\n    segments.push({\n      s: s,\n      e: e,\n    });\n  } else if (s >= 1) {\n    segments.push({\n      s: s - 1,\n      e: e - 1,\n    });\n  } else {\n    segments.push({\n      s: s,\n      e: 1,\n    });\n    segments.push({\n      s: 0,\n      e: e - 1,\n    });\n  }\n  var shapeSegments = [];\n  var i;\n  var len = segments.length;\n  var segmentOb;\n  for (i = 0; i < len; i += 1) {\n    segmentOb = segments[i];\n    if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\n      var shapeS;\n      var shapeE;\n      if (segmentOb.s * totalModifierLength <= addedLength) {\n        shapeS = 0;\n      } else {\n        shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\n      }\n      if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\n        shapeE = 1;\n      } else {\n        shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\n      }\n      shapeSegments.push([shapeS, shapeE]);\n    }\n  }\n  if (!shapeSegments.length) {\n    shapeSegments.push([0, 0]);\n  }\n  return shapeSegments;\n};\n\nTrimModifier.prototype.releasePathsData = function (pathsData) {\n  var i;\n  var len = pathsData.length;\n  for (i = 0; i < len; i += 1) {\n    segmentsLengthPool.release(pathsData[i]);\n  }\n  pathsData.length = 0;\n  return pathsData;\n};\n\nTrimModifier.prototype.processShapes = function (_isFirstFrame) {\n  var s;\n  var e;\n  if (this._mdf || _isFirstFrame) {\n    var o = (this.o.v % 360) / 360;\n    if (o < 0) {\n      o += 1;\n    }\n    if (this.s.v > 1) {\n      s = 1 + o;\n    } else if (this.s.v < 0) {\n      s = 0 + o;\n    } else {\n      s = this.s.v + o;\n    }\n    if (this.e.v > 1) {\n      e = 1 + o;\n    } else if (this.e.v < 0) {\n      e = 0 + o;\n    } else {\n      e = this.e.v + o;\n    }\n\n    if (s > e) {\n      var _s = s;\n      s = e;\n      e = _s;\n    }\n    s = Math.round(s * 10000) * 0.0001;\n    e = Math.round(e * 10000) * 0.0001;\n    this.sValue = s;\n    this.eValue = e;\n  } else {\n    s = this.sValue;\n    e = this.eValue;\n  }\n  var shapePaths;\n  var i;\n  var len = this.shapes.length;\n  var j;\n  var jLen;\n  var pathsData;\n  var pathData;\n  var totalShapeLength;\n  var totalModifierLength = 0;\n\n  if (e === s) {\n    for (i = 0; i < len; i += 1) {\n      this.shapes[i].localShapeCollection.releaseShapes();\n      this.shapes[i].shape._mdf = true;\n      this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\n      if (this._mdf) {\n        this.shapes[i].pathsData.length = 0;\n      }\n    }\n  } else if (!((e === 1 && s === 0) || (e === 0 && s === 1))) {\n    var segments = [];\n    var shapeData;\n    var localShapeCollection;\n    for (i = 0; i < len; i += 1) {\n      shapeData = this.shapes[i];\n      // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\n      if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      } else {\n        shapePaths = shapeData.shape.paths;\n        jLen = shapePaths._length;\n        totalShapeLength = 0;\n        if (!shapeData.shape._mdf && shapeData.pathsData.length) {\n          totalShapeLength = shapeData.totalShapeLength;\n        } else {\n          pathsData = this.releasePathsData(shapeData.pathsData);\n          for (j = 0; j < jLen; j += 1) {\n            pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\n            pathsData.push(pathData);\n            totalShapeLength += pathData.totalLength;\n          }\n          shapeData.totalShapeLength = totalShapeLength;\n          shapeData.pathsData = pathsData;\n        }\n\n        totalModifierLength += totalShapeLength;\n        shapeData.shape._mdf = true;\n      }\n    }\n    var shapeS = s;\n    var shapeE = e;\n    var addedLength = 0;\n    var edges;\n    for (i = len - 1; i >= 0; i -= 1) {\n      shapeData = this.shapes[i];\n      if (shapeData.shape._mdf) {\n        localShapeCollection = shapeData.localShapeCollection;\n        localShapeCollection.releaseShapes();\n        // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\n        if (this.m === 2 && len > 1) {\n          edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\n          addedLength += shapeData.totalShapeLength;\n        } else {\n          edges = [[shapeS, shapeE]];\n        }\n        jLen = edges.length;\n        for (j = 0; j < jLen; j += 1) {\n          shapeS = edges[j][0];\n          shapeE = edges[j][1];\n          segments.length = 0;\n          if (shapeE <= 1) {\n            segments.push({\n              s: shapeData.totalShapeLength * shapeS,\n              e: shapeData.totalShapeLength * shapeE,\n            });\n          } else if (shapeS >= 1) {\n            segments.push({\n              s: shapeData.totalShapeLength * (shapeS - 1),\n              e: shapeData.totalShapeLength * (shapeE - 1),\n            });\n          } else {\n            segments.push({\n              s: shapeData.totalShapeLength * shapeS,\n              e: shapeData.totalShapeLength,\n            });\n            segments.push({\n              s: 0,\n              e: shapeData.totalShapeLength * (shapeE - 1),\n            });\n          }\n          var newShapesData = this.addShapes(shapeData, segments[0]);\n          if (segments[0].s !== segments[0].e) {\n            if (segments.length > 1) {\n              var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\n              if (lastShapeInCollection.c) {\n                var lastShape = newShapesData.pop();\n                this.addPaths(newShapesData, localShapeCollection);\n                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\n              } else {\n                this.addPaths(newShapesData, localShapeCollection);\n                newShapesData = this.addShapes(shapeData, segments[1]);\n              }\n            }\n            this.addPaths(newShapesData, localShapeCollection);\n          }\n        }\n        shapeData.shape.paths = localShapeCollection;\n      }\n    }\n  } else if (this._mdf) {\n    for (i = 0; i < len; i += 1) {\n      // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\n      // Don't remove this even if it's losing cached info.\n      this.shapes[i].pathsData.length = 0;\n      this.shapes[i].shape._mdf = true;\n    }\n  }\n};\n\nTrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\n  var i;\n  var len = newPaths.length;\n  for (i = 0; i < len; i += 1) {\n    localShapeCollection.addShape(newPaths[i]);\n  }\n};\n\nTrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\n  shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\n  shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\n  if (newShape) {\n    shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\n  }\n  shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\n};\n\nTrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\n  shapePath.setXYAt(points[1], points[5], 'o', pos);\n  shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\n  if (newShape) {\n    shapePath.setXYAt(points[0], points[4], 'v', pos);\n  }\n  shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\n};\n\nTrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\n  var pathsData = shapeData.pathsData;\n  var shapePaths = shapeData.shape.paths.shapes;\n  var i;\n  var len = shapeData.shape.paths._length;\n  var j;\n  var jLen;\n  var addedLength = 0;\n  var currentLengthData;\n  var segmentCount;\n  var lengths;\n  var segment;\n  var shapes = [];\n  var initPos;\n  var newShape = true;\n  if (!shapePath) {\n    shapePath = shapePool.newElement();\n    segmentCount = 0;\n    initPos = 0;\n  } else {\n    segmentCount = shapePath._length;\n    initPos = shapePath._length;\n  }\n  shapes.push(shapePath);\n  for (i = 0; i < len; i += 1) {\n    lengths = pathsData[i].lengths;\n    shapePath.c = shapePaths[i].c;\n    jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\n    for (j = 1; j < jLen; j += 1) {\n      currentLengthData = lengths[j - 1];\n      if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\n        addedLength += currentLengthData.addedLength;\n        shapePath.c = false;\n      } else if (addedLength > shapeSegment.e) {\n        shapePath.c = false;\n        break;\n      } else {\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\n          newShape = false;\n        } else {\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n          newShape = false;\n          shapePath.c = false;\n        }\n        addedLength += currentLengthData.addedLength;\n        segmentCount += 1;\n      }\n    }\n    if (shapePaths[i].c && lengths.length) {\n      currentLengthData = lengths[j - 1];\n      if (addedLength <= shapeSegment.e) {\n        var segmentLength = lengths[j - 1].addedLength;\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\n          newShape = false;\n        } else {\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n          newShape = false;\n          shapePath.c = false;\n        }\n      } else {\n        shapePath.c = false;\n      }\n      addedLength += currentLengthData.addedLength;\n      segmentCount += 1;\n    }\n    if (shapePath._length) {\n      shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\n      shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\n    }\n    if (addedLength > shapeSegment.e) {\n      break;\n    }\n    if (i < len - 1) {\n      shapePath = shapePool.newElement();\n      newShape = true;\n      shapes.push(shapePath);\n      segmentCount = 0;\n    }\n  }\n  return shapes;\n};\n\nfunction PuckerAndBloatModifier() {}\nextendPrototype([ShapeModifier], PuckerAndBloatModifier);\nPuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\n  this.getValue = this.processKeys;\n  this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\n  this._isAnimated = !!this.amount.effectsSequence.length;\n};\n\nPuckerAndBloatModifier.prototype.processPath = function (path, amount) {\n  var percent = amount / 100;\n  var centerPoint = [0, 0];\n  var pathLength = path._length;\n  var i = 0;\n  for (i = 0; i < pathLength; i += 1) {\n    centerPoint[0] += path.v[i][0];\n    centerPoint[1] += path.v[i][1];\n  }\n  centerPoint[0] /= pathLength;\n  centerPoint[1] /= pathLength;\n  var clonedPath = shapePool.newElement();\n  clonedPath.c = path.c;\n  var vX;\n  var vY;\n  var oX;\n  var oY;\n  var iX;\n  var iY;\n  for (i = 0; i < pathLength; i += 1) {\n    vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\n    vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\n    oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\n    oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\n    iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\n    iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\n    clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\n  }\n  return clonedPath;\n};\n\nPuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\n  var shapePaths;\n  var i;\n  var len = this.shapes.length;\n  var j;\n  var jLen;\n  var amount = this.amount.v;\n\n  if (amount !== 0) {\n    var shapeData;\n    var localShapeCollection;\n    for (i = 0; i < len; i += 1) {\n      shapeData = this.shapes[i];\n      localShapeCollection = shapeData.localShapeCollection;\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n        localShapeCollection.releaseShapes();\n        shapeData.shape._mdf = true;\n        shapePaths = shapeData.shape.paths.shapes;\n        jLen = shapeData.shape.paths._length;\n        for (j = 0; j < jLen; j += 1) {\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\n        }\n      }\n      shapeData.shape.paths = shapeData.localShapeCollection;\n    }\n  }\n  if (!this.dynamicProperties.length) {\n    this._mdf = false;\n  }\n};\n\nconst TransformPropertyFactory = (function () {\n  var defaultVector = [0, 0];\n\n  function applyToMatrix(mat) {\n    var _mdf = this._mdf;\n    this.iterateDynamicProperties();\n    this._mdf = this._mdf || _mdf;\n    if (this.a) {\n      mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n    }\n    if (this.s) {\n      mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n    }\n    if (this.sk) {\n      mat.skewFromAxis(-this.sk.v, this.sa.v);\n    }\n    if (this.r) {\n      mat.rotate(-this.r.v);\n    } else {\n      mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\n        .rotateY(this.or.v[1])\n        .rotateX(this.or.v[0]);\n    }\n    if (this.data.p.s) {\n      if (this.data.p.z) {\n        mat.translate(this.px.v, this.py.v, -this.pz.v);\n      } else {\n        mat.translate(this.px.v, this.py.v, 0);\n      }\n    } else {\n      mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n    }\n  }\n  function processKeys(forceRender) {\n    if (this.elem.globalData.frameId === this.frameId) {\n      return;\n    }\n    if (this._isDirty) {\n      this.precalculateMatrix();\n      this._isDirty = false;\n    }\n\n    this.iterateDynamicProperties();\n\n    if (this._mdf || forceRender) {\n      var frameRate;\n      this.v.cloneFromProps(this.pre.props);\n      if (this.appliedTransformations < 1) {\n        this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n      }\n      if (this.appliedTransformations < 2) {\n        this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n      }\n      if (this.sk && this.appliedTransformations < 3) {\n        this.v.skewFromAxis(-this.sk.v, this.sa.v);\n      }\n      if (this.r && this.appliedTransformations < 4) {\n        this.v.rotate(-this.r.v);\n      } else if (!this.r && this.appliedTransformations < 4) {\n        this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\n          .rotateY(this.or.v[1])\n          .rotateX(this.or.v[0]);\n      }\n      if (this.autoOriented) {\n        var v1;\n        var v2;\n        frameRate = this.elem.globalData.frameRate;\n        if (this.p && this.p.keyframes && this.p.getValueAtTime) {\n          if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\n            v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\n            v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\n          } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\n            v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\n            v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\n          } else {\n            v1 = this.p.pv;\n            v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\n          }\n        } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\n          v1 = [];\n          v2 = [];\n          var px = this.px;\n          var py = this.py;\n          if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\n            v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\n            v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\n            v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate, 0);\n            v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate, 0);\n          } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\n            v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate), 0);\n            v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate), 0);\n            v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\n            v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\n          } else {\n            v1 = [px.pv, py.pv];\n            v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\n            v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\n          }\n        } else {\n          v2 = defaultVector;\n          v1 = v2;\n        }\n        this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\n      }\n      if (this.data.p && this.data.p.s) {\n        if (this.data.p.z) {\n          this.v.translate(this.px.v, this.py.v, -this.pz.v);\n        } else {\n          this.v.translate(this.px.v, this.py.v, 0);\n        }\n      } else {\n        this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n      }\n    }\n    this.frameId = this.elem.globalData.frameId;\n  }\n\n  function precalculateMatrix() {\n    if (!this.a.k) {\n      this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n      this.appliedTransformations = 1;\n    } else {\n      return;\n    }\n    if (!this.s.effectsSequence.length) {\n      this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n      this.appliedTransformations = 2;\n    } else {\n      return;\n    }\n    if (this.sk) {\n      if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\n        this.pre.skewFromAxis(-this.sk.v, this.sa.v);\n        this.appliedTransformations = 3;\n      } else {\n        return;\n      }\n    }\n    if (this.r) {\n      if (!this.r.effectsSequence.length) {\n        this.pre.rotate(-this.r.v);\n        this.appliedTransformations = 4;\n      }\n    } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\n      this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\n        .rotateY(this.or.v[1])\n        .rotateX(this.or.v[0]);\n      this.appliedTransformations = 4;\n    }\n  }\n\n  function autoOrient() {\n    //\n    // var prevP = this.getValueAtTime();\n  }\n\n  function addDynamicProperty(prop) {\n    this._addDynamicProperty(prop);\n    this.elem.addDynamicProperty(prop);\n    this._isDirty = true;\n  }\n\n  function TransformProperty(elem, data, container) {\n    this.elem = elem;\n    this.frameId = -1;\n    this.propType = 'transform';\n    this.data = data;\n    this.v = new Matrix();\n    // Precalculated matrix with non animated properties\n    this.pre = new Matrix();\n    this.appliedTransformations = 0;\n    this.initDynamicPropertyContainer(container || elem);\n    if (data.p && data.p.s) {\n      this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\n      this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\n      if (data.p.z) {\n        this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\n      }\n    } else {\n      this.p = PropertyFactory.getProp(elem, data.p || { k: [0, 0, 0] }, 1, 0, this);\n    }\n    if (data.rx) {\n      this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\n      this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\n      this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\n      if (data.or.k[0].ti) {\n        var i;\n        var len = data.or.k.length;\n        for (i = 0; i < len; i += 1) {\n          data.or.k[i].to = null;\n          data.or.k[i].ti = null;\n        }\n      }\n      this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\n      // sh Indicates it needs to be capped between -180 and 180\n      this.or.sh = true;\n    } else {\n      this.r = PropertyFactory.getProp(elem, data.r || { k: 0 }, 0, degToRads, this);\n    }\n    if (data.sk) {\n      this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\n      this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\n    }\n    this.a = PropertyFactory.getProp(elem, data.a || { k: [0, 0, 0] }, 1, 0, this);\n    this.s = PropertyFactory.getProp(elem, data.s || { k: [100, 100, 100] }, 1, 0.01, this);\n    // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\n    if (data.o) {\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\n    } else {\n      this.o = { _mdf: false, v: 1 };\n    }\n    this._isDirty = true;\n    if (!this.dynamicProperties.length) {\n      this.getValue(true);\n    }\n  }\n\n  TransformProperty.prototype = {\n    applyToMatrix: applyToMatrix,\n    getValue: processKeys,\n    precalculateMatrix: precalculateMatrix,\n    autoOrient: autoOrient,\n  };\n\n  extendPrototype([DynamicPropertyContainer], TransformProperty);\n  TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\n  TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\n\n  function getTransformProperty(elem, data, container) {\n    return new TransformProperty(elem, data, container);\n  }\n\n  return {\n    getTransformProperty: getTransformProperty,\n  };\n}());\n\nfunction RepeaterModifier() {}\nextendPrototype([ShapeModifier], RepeaterModifier);\n\nRepeaterModifier.prototype.initModifierProperties = function (elem, data) {\n  this.getValue = this.processKeys;\n  this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\n  this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\n  this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\n  this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\n  this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\n  this.data = data;\n  if (!this.dynamicProperties.length) {\n    this.getValue(true);\n  }\n  this._isAnimated = !!this.dynamicProperties.length;\n  this.pMatrix = new Matrix();\n  this.rMatrix = new Matrix();\n  this.sMatrix = new Matrix();\n  this.tMatrix = new Matrix();\n  this.matrix = new Matrix();\n};\n\nRepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\n  var dir = inv ? -1 : 1;\n  var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\n  var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\n  pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\n  rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n  rMatrix.rotate(-transform.r.v * dir * perc);\n  rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n  sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n  sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\n  sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n};\n\nRepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\n  this.elem = elem;\n  this.arr = arr;\n  this.pos = pos;\n  this.elemsData = elemsData;\n  this._currentCopies = 0;\n  this._elements = [];\n  this._groups = [];\n  this.frameId = -1;\n  this.initDynamicPropertyContainer(elem);\n  this.initModifierProperties(elem, arr[pos]);\n  while (pos > 0) {\n    pos -= 1;\n    // this._elements.unshift(arr.splice(pos,1)[0]);\n    this._elements.unshift(arr[pos]);\n  }\n  if (this.dynamicProperties.length) {\n    this.k = true;\n  } else {\n    this.getValue(true);\n  }\n};\n\nRepeaterModifier.prototype.resetElements = function (elements) {\n  var i;\n  var len = elements.length;\n  for (i = 0; i < len; i += 1) {\n    elements[i]._processed = false;\n    if (elements[i].ty === 'gr') {\n      this.resetElements(elements[i].it);\n    }\n  }\n};\n\nRepeaterModifier.prototype.cloneElements = function (elements) {\n  var newElements = JSON.parse(JSON.stringify(elements));\n  this.resetElements(newElements);\n  return newElements;\n};\n\nRepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\n  var i;\n  var len = elements.length;\n  for (i = 0; i < len; i += 1) {\n    elements[i]._render = renderFlag;\n    if (elements[i].ty === 'gr') {\n      this.changeGroupRender(elements[i].it, renderFlag);\n    }\n  }\n};\n\nRepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\n  var items;\n  var itemsTransform;\n  var i;\n  var dir;\n  var cont;\n  var hasReloaded = false;\n  if (this._mdf || _isFirstFrame) {\n    var copies = Math.ceil(this.c.v);\n    if (this._groups.length < copies) {\n      while (this._groups.length < copies) {\n        var group = {\n          it: this.cloneElements(this._elements),\n          ty: 'gr',\n        };\n        group.it.push({\n          a: { a: 0, ix: 1, k: [0, 0] }, nm: 'Transform', o: { a: 0, ix: 7, k: 100 }, p: { a: 0, ix: 2, k: [0, 0] }, r: { a: 1, ix: 6, k: [{ s: 0, e: 0, t: 0 }, { s: 0, e: 0, t: 1 }] }, s: { a: 0, ix: 3, k: [100, 100] }, sa: { a: 0, ix: 5, k: 0 }, sk: { a: 0, ix: 4, k: 0 }, ty: 'tr',\n        });\n\n        this.arr.splice(0, 0, group);\n        this._groups.splice(0, 0, group);\n        this._currentCopies += 1;\n      }\n      this.elem.reloadShapes();\n      hasReloaded = true;\n    }\n    cont = 0;\n    var renderFlag;\n    for (i = 0; i <= this._groups.length - 1; i += 1) {\n      renderFlag = cont < copies;\n      this._groups[i]._render = renderFlag;\n      this.changeGroupRender(this._groups[i].it, renderFlag);\n      if (!renderFlag) {\n        var elems = this.elemsData[i].it;\n        var transformData = elems[elems.length - 1];\n        if (transformData.transform.op.v !== 0) {\n          transformData.transform.op._mdf = true;\n          transformData.transform.op.v = 0;\n        } else {\n          transformData.transform.op._mdf = false;\n        }\n      }\n      cont += 1;\n    }\n\n    this._currentCopies = copies;\n    /// /\n\n    var offset = this.o.v;\n    var offsetModulo = offset % 1;\n    var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n    var pProps = this.pMatrix.props;\n    var rProps = this.rMatrix.props;\n    var sProps = this.sMatrix.props;\n    this.pMatrix.reset();\n    this.rMatrix.reset();\n    this.sMatrix.reset();\n    this.tMatrix.reset();\n    this.matrix.reset();\n    var iteration = 0;\n\n    if (offset > 0) {\n      while (iteration < roundOffset) {\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n        iteration += 1;\n      }\n      if (offsetModulo) {\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\n        iteration += offsetModulo;\n      }\n    } else if (offset < 0) {\n      while (iteration > roundOffset) {\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\n        iteration -= 1;\n      }\n      if (offsetModulo) {\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\n        iteration -= offsetModulo;\n      }\n    }\n    i = this.data.m === 1 ? 0 : this._currentCopies - 1;\n    dir = this.data.m === 1 ? 1 : -1;\n    cont = this._currentCopies;\n    var j;\n    var jLen;\n    while (cont) {\n      items = this.elemsData[i].it;\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\n      jLen = itemsTransform.length;\n      items[items.length - 1].transform.mProps._mdf = true;\n      items[items.length - 1].transform.op._mdf = true;\n      items[items.length - 1].transform.op.v = this._currentCopies === 1\n        ? this.so.v\n        : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\n\n      if (iteration !== 0) {\n        if ((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n        }\n        this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\n        this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\n        this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\n\n        for (j = 0; j < jLen; j += 1) {\n          itemsTransform[j] = this.matrix.props[j];\n        }\n        this.matrix.reset();\n      } else {\n        this.matrix.reset();\n        for (j = 0; j < jLen; j += 1) {\n          itemsTransform[j] = this.matrix.props[j];\n        }\n      }\n      iteration += 1;\n      cont -= 1;\n      i += dir;\n    }\n  } else {\n    cont = this._currentCopies;\n    i = 0;\n    dir = 1;\n    while (cont) {\n      items = this.elemsData[i].it;\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\n      items[items.length - 1].transform.mProps._mdf = false;\n      items[items.length - 1].transform.op._mdf = false;\n      cont -= 1;\n      i += dir;\n    }\n  }\n  return hasReloaded;\n};\n\nRepeaterModifier.prototype.addShape = function () {};\n\nfunction RoundCornersModifier() {}\nextendPrototype([ShapeModifier], RoundCornersModifier);\nRoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\n  this.getValue = this.processKeys;\n  this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\n  this._isAnimated = !!this.rd.effectsSequence.length;\n};\n\nRoundCornersModifier.prototype.processPath = function (path, round) {\n  var clonedPath = shapePool.newElement();\n  clonedPath.c = path.c;\n  var i;\n  var len = path._length;\n  var currentV;\n  var currentI;\n  var currentO;\n  var closerV;\n  var distance;\n  var newPosPerc;\n  var index = 0;\n  var vX;\n  var vY;\n  var oX;\n  var oY;\n  var iX;\n  var iY;\n  for (i = 0; i < len; i += 1) {\n    currentV = path.v[i];\n    currentO = path.o[i];\n    currentI = path.i[i];\n    if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\n      if ((i === 0 || i === len - 1) && !path.c) {\n        clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\n        /* clonedPath.v[index] = currentV;\n                clonedPath.o[index] = currentO;\n                clonedPath.i[index] = currentI; */\n        index += 1;\n      } else {\n        if (i === 0) {\n          closerV = path.v[len - 1];\n        } else {\n          closerV = path.v[i - 1];\n        }\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n        iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n        vX = iX;\n        iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\n        vY = iY;\n        oX = vX - (vX - currentV[0]) * roundCorner;\n        oY = vY - (vY - currentV[1]) * roundCorner;\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n        index += 1;\n\n        if (i === len - 1) {\n          closerV = path.v[0];\n        } else {\n          closerV = path.v[i + 1];\n        }\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n        oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n        vX = oX;\n        oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\n        vY = oY;\n        iX = vX - (vX - currentV[0]) * roundCorner;\n        iY = vY - (vY - currentV[1]) * roundCorner;\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n        index += 1;\n      }\n    } else {\n      clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\n      index += 1;\n    }\n  }\n  return clonedPath;\n};\n\nRoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\n  var shapePaths;\n  var i;\n  var len = this.shapes.length;\n  var j;\n  var jLen;\n  var rd = this.rd.v;\n\n  if (rd !== 0) {\n    var shapeData;\n    var localShapeCollection;\n    for (i = 0; i < len; i += 1) {\n      shapeData = this.shapes[i];\n      localShapeCollection = shapeData.localShapeCollection;\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n        localShapeCollection.releaseShapes();\n        shapeData.shape._mdf = true;\n        shapePaths = shapeData.shape.paths.shapes;\n        jLen = shapeData.shape.paths._length;\n        for (j = 0; j < jLen; j += 1) {\n          localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\n        }\n      }\n      shapeData.shape.paths = shapeData.localShapeCollection;\n    }\n  }\n  if (!this.dynamicProperties.length) {\n    this._mdf = false;\n  }\n};\n\nfunction getFontProperties(fontData) {\n  var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\n\n  var fWeight = 'normal'; var\n    fStyle = 'normal';\n  var len = styles.length;\n  var styleName;\n  for (var i = 0; i < len; i += 1) {\n    styleName = styles[i].toLowerCase();\n    switch (styleName) {\n      case 'italic':\n        fStyle = 'italic';\n        break;\n      case 'bold':\n        fWeight = '700';\n        break;\n      case 'black':\n        fWeight = '900';\n        break;\n      case 'medium':\n        fWeight = '500';\n        break;\n      case 'regular':\n      case 'normal':\n        fWeight = '400';\n        break;\n      case 'light':\n      case 'thin':\n        fWeight = '200';\n        break;\n      default:\n        break;\n    }\n  }\n\n  return {\n    style: fStyle,\n    weight: fontData.fWeight || fWeight,\n  };\n}\n\nconst FontManager = (function () {\n  var maxWaitingTime = 5000;\n  var emptyChar = {\n    w: 0,\n    size: 0,\n    shapes: [],\n    data: {\n      shapes: [],\n    },\n  };\n  var combinedCharacters = [];\n  // Hindi characters\n  combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366,\n    2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379,\n    2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\n\n  var surrogateModifiers = [\n    'd83cdffb',\n    'd83cdffc',\n    'd83cdffd',\n    'd83cdffe',\n    'd83cdfff',\n  ];\n\n  var zeroWidthJoiner = [65039, 8205];\n\n  function trimFontOptions(font) {\n    var familyArray = font.split(',');\n    var i;\n    var len = familyArray.length;\n    var enabledFamilies = [];\n    for (i = 0; i < len; i += 1) {\n      if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\n        enabledFamilies.push(familyArray[i]);\n      }\n    }\n    return enabledFamilies.join(',');\n  }\n\n  function setUpNode(font, family) {\n    var parentNode = createTag('span');\n    // Node is invisible to screen readers.\n    parentNode.setAttribute('aria-hidden', true);\n    parentNode.style.fontFamily = family;\n    var node = createTag('span');\n    // Characters that vary significantly among different fonts\n    node.innerText = 'giItT1WQy@!-/#';\n    // Visible - so we can measure it - but not on the screen\n    parentNode.style.position = 'absolute';\n    parentNode.style.left = '-10000px';\n    parentNode.style.top = '-10000px';\n    // Large font size makes even subtle changes obvious\n    parentNode.style.fontSize = '300px';\n    // Reset any font properties\n    parentNode.style.fontVariant = 'normal';\n    parentNode.style.fontStyle = 'normal';\n    parentNode.style.fontWeight = 'normal';\n    parentNode.style.letterSpacing = '0';\n    parentNode.appendChild(node);\n    document.body.appendChild(parentNode);\n\n    // Remember width with no applied web font\n    var width = node.offsetWidth;\n    node.style.fontFamily = trimFontOptions(font) + ', ' + family;\n    return { node: node, w: width, parent: parentNode };\n  }\n\n  function checkLoadedFonts() {\n    var i;\n    var len = this.fonts.length;\n    var node;\n    var w;\n    var loadedCount = len;\n    for (i = 0; i < len; i += 1) {\n      if (this.fonts[i].loaded) {\n        loadedCount -= 1;\n      } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\n        this.fonts[i].loaded = true;\n      } else {\n        node = this.fonts[i].monoCase.node;\n        w = this.fonts[i].monoCase.w;\n        if (node.offsetWidth !== w) {\n          loadedCount -= 1;\n          this.fonts[i].loaded = true;\n        } else {\n          node = this.fonts[i].sansCase.node;\n          w = this.fonts[i].sansCase.w;\n          if (node.offsetWidth !== w) {\n            loadedCount -= 1;\n            this.fonts[i].loaded = true;\n          }\n        }\n        if (this.fonts[i].loaded) {\n          this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\n          this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\n        }\n      }\n    }\n\n    if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\n      setTimeout(this.checkLoadedFontsBinded, 20);\n    } else {\n      setTimeout(this.setIsLoadedBinded, 10);\n    }\n  }\n\n  function createHelper(fontData, def) {\n    var engine = (document.body && def) ? 'svg' : 'canvas';\n    var helper;\n    var fontProps = getFontProperties(fontData);\n    if (engine === 'svg') {\n      var tHelper = createNS('text');\n      tHelper.style.fontSize = '100px';\n      // tHelper.style.fontFamily = fontData.fFamily;\n      tHelper.setAttribute('font-family', fontData.fFamily);\n      tHelper.setAttribute('font-style', fontProps.style);\n      tHelper.setAttribute('font-weight', fontProps.weight);\n      tHelper.textContent = '1';\n      if (fontData.fClass) {\n        tHelper.style.fontFamily = 'inherit';\n        tHelper.setAttribute('class', fontData.fClass);\n      } else {\n        tHelper.style.fontFamily = fontData.fFamily;\n      }\n      def.appendChild(tHelper);\n      helper = tHelper;\n    } else {\n      var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\n      tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\n      helper = tCanvasHelper;\n    }\n    function measure(text) {\n      if (engine === 'svg') {\n        helper.textContent = text;\n        return helper.getComputedTextLength();\n      }\n      return helper.measureText(text).width;\n    }\n    return {\n      measureText: measure,\n    };\n  }\n\n  function addFonts(fontData, defs) {\n    if (!fontData) {\n      this.isLoaded = true;\n      return;\n    }\n    if (this.chars) {\n      this.isLoaded = true;\n      this.fonts = fontData.list;\n      return;\n    }\n    if (!document.body) {\n      this.isLoaded = true;\n      fontData.list.forEach((data) => {\n        data.helper = createHelper(data);\n        data.cache = {};\n      });\n      this.fonts = fontData.list;\n      return;\n    }\n\n    var fontArr = fontData.list;\n    var i;\n    var len = fontArr.length;\n    var _pendingFonts = len;\n    for (i = 0; i < len; i += 1) {\n      var shouldLoadFont = true;\n      var loadedSelector;\n      var j;\n      fontArr[i].loaded = false;\n      fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\n      fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\n      if (!fontArr[i].fPath) {\n        fontArr[i].loaded = true;\n        _pendingFonts -= 1;\n      } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\n        loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\n\n        if (loadedSelector.length > 0) {\n          shouldLoadFont = false;\n        }\n\n        if (shouldLoadFont) {\n          var s = createTag('style');\n          s.setAttribute('f-forigin', fontArr[i].fOrigin);\n          s.setAttribute('f-origin', fontArr[i].origin);\n          s.setAttribute('f-family', fontArr[i].fFamily);\n          s.type = 'text/css';\n          s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\n          defs.appendChild(s);\n        }\n      } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\n        loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\n\n        for (j = 0; j < loadedSelector.length; j += 1) {\n          if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\n            // Font is already loaded\n            shouldLoadFont = false;\n          }\n        }\n\n        if (shouldLoadFont) {\n          var l = createTag('link');\n          l.setAttribute('f-forigin', fontArr[i].fOrigin);\n          l.setAttribute('f-origin', fontArr[i].origin);\n          l.type = 'text/css';\n          l.rel = 'stylesheet';\n          l.href = fontArr[i].fPath;\n          document.body.appendChild(l);\n        }\n      } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\n        loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\n\n        for (j = 0; j < loadedSelector.length; j += 1) {\n          if (fontArr[i].fPath === loadedSelector[j].src) {\n            // Font is already loaded\n            shouldLoadFont = false;\n          }\n        }\n\n        if (shouldLoadFont) {\n          var sc = createTag('link');\n          sc.setAttribute('f-forigin', fontArr[i].fOrigin);\n          sc.setAttribute('f-origin', fontArr[i].origin);\n          sc.setAttribute('rel', 'stylesheet');\n          sc.setAttribute('href', fontArr[i].fPath);\n          defs.appendChild(sc);\n        }\n      }\n      fontArr[i].helper = createHelper(fontArr[i], defs);\n      fontArr[i].cache = {};\n      this.fonts.push(fontArr[i]);\n    }\n    if (_pendingFonts === 0) {\n      this.isLoaded = true;\n    } else {\n      // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\n      // Adding this timeout seems to fix it\n      setTimeout(this.checkLoadedFonts.bind(this), 100);\n    }\n  }\n\n  function addChars(chars) {\n    if (!chars) {\n      return;\n    }\n    if (!this.chars) {\n      this.chars = [];\n    }\n    var i;\n    var len = chars.length;\n    var j;\n    var jLen = this.chars.length;\n    var found;\n    for (i = 0; i < len; i += 1) {\n      j = 0;\n      found = false;\n      while (j < jLen) {\n        if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\n          found = true;\n        }\n        j += 1;\n      }\n      if (!found) {\n        this.chars.push(chars[i]);\n        jLen += 1;\n      }\n    }\n  }\n\n  function getCharData(char, style, font) {\n    var i = 0;\n    var len = this.chars.length;\n    while (i < len) {\n      if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\n        return this.chars[i];\n      }\n      i += 1;\n    }\n    if (((typeof char === 'string' && char.charCodeAt(0) !== 13) || !char)\n            && console\n            && console.warn // eslint-disable-line no-console\n            && !this._warned\n    ) {\n      this._warned = true;\n      console.warn('Missing character from exported characters list: ', char, style, font); // eslint-disable-line no-console\n    }\n    return emptyChar;\n  }\n\n  function measureText(char, fontName, size) {\n    var fontData = this.getFontByName(fontName);\n    var index = char.charCodeAt(0);\n    if (!fontData.cache[index + 1]) {\n      var tHelper = fontData.helper;\n      if (char === ' ') {\n        var doubleSize = tHelper.measureText('|' + char + '|');\n        var singleSize = tHelper.measureText('||');\n        fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\n      } else {\n        fontData.cache[index + 1] = tHelper.measureText(char) / 100;\n      }\n    }\n    return fontData.cache[index + 1] * size;\n  }\n\n  function getFontByName(name) {\n    var i = 0;\n    var len = this.fonts.length;\n    while (i < len) {\n      if (this.fonts[i].fName === name) {\n        return this.fonts[i];\n      }\n      i += 1;\n    }\n    return this.fonts[0];\n  }\n\n  function isModifier(firstCharCode, secondCharCode) {\n    var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\n    return surrogateModifiers.indexOf(sum) !== -1;\n  }\n\n  function isZeroWidthJoiner(firstCharCode, secondCharCode) {\n    if (!secondCharCode) {\n      return firstCharCode === zeroWidthJoiner[1];\n    }\n    return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\n  }\n\n  function isCombinedCharacter(char) {\n    return combinedCharacters.indexOf(char) !== -1;\n  }\n\n  function setIsLoaded() {\n    this.isLoaded = true;\n  }\n\n  var Font = function () {\n    this.fonts = [];\n    this.chars = null;\n    this.typekitLoaded = 0;\n    this.isLoaded = false;\n    this._warned = false;\n    this.initTime = Date.now();\n    this.setIsLoadedBinded = this.setIsLoaded.bind(this);\n    this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\n  };\n  Font.isModifier = isModifier;\n  Font.isZeroWidthJoiner = isZeroWidthJoiner;\n  Font.isCombinedCharacter = isCombinedCharacter;\n\n  var fontPrototype = {\n    addChars: addChars,\n    addFonts: addFonts,\n    getCharData: getCharData,\n    getFontByName: getFontByName,\n    measureText: measureText,\n    checkLoadedFonts: checkLoadedFonts,\n    setIsLoaded: setIsLoaded,\n  };\n\n  Font.prototype = fontPrototype;\n\n  return Font;\n}());\n\nfunction RenderableElement() {\n\n}\n\nRenderableElement.prototype = {\n  initRenderable: function () {\n    // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\n    this.isInRange = false;\n    // layer's display state\n    this.hidden = false;\n    // If layer's transparency equals 0, it can be hidden\n    this.isTransparent = false;\n    // list of animated components\n    this.renderableComponents = [];\n  },\n  addRenderableComponent: function (component) {\n    if (this.renderableComponents.indexOf(component) === -1) {\n      this.renderableComponents.push(component);\n    }\n  },\n  removeRenderableComponent: function (component) {\n    if (this.renderableComponents.indexOf(component) !== -1) {\n      this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\n    }\n  },\n  prepareRenderableFrame: function (num) {\n    this.checkLayerLimits(num);\n  },\n  checkTransparency: function () {\n    if (this.finalTransform.mProp.o.v <= 0) {\n      if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\n        this.isTransparent = true;\n        this.hide();\n      }\n    } else if (this.isTransparent) {\n      this.isTransparent = false;\n      this.show();\n    }\n  },\n  /**\n     * @function\n     * Initializes frame related properties.\n     *\n     * @param {number} num\n     * current frame number in Layer's time\n     *\n     */\n  checkLayerLimits: function (num) {\n    if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\n      if (this.isInRange !== true) {\n        this.globalData._mdf = true;\n        this._mdf = true;\n        this.isInRange = true;\n        this.show();\n      }\n    } else if (this.isInRange !== false) {\n      this.globalData._mdf = true;\n      this.isInRange = false;\n      this.hide();\n    }\n  },\n  renderRenderable: function () {\n    var i;\n    var len = this.renderableComponents.length;\n    for (i = 0; i < len; i += 1) {\n      this.renderableComponents[i].renderFrame(this._isFirstFrame);\n    }\n    /* this.maskManager.renderFrame(this.finalTransform.mat);\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\n  },\n  sourceRectAtTime: function () {\n    return {\n      top: 0,\n      left: 0,\n      width: 100,\n      height: 100,\n    };\n  },\n  getLayerSize: function () {\n    if (this.data.ty === 5) {\n      return { w: this.data.textData.width, h: this.data.textData.height };\n    }\n    return { w: this.data.width, h: this.data.height };\n  },\n};\n\nconst MaskManagerInterface = (function () {\n  function MaskInterface(mask, data) {\n    this._mask = mask;\n    this._data = data;\n  }\n  Object.defineProperty(MaskInterface.prototype, 'maskPath', {\n    get: function () {\n      if (this._mask.prop.k) {\n        this._mask.prop.getValue();\n      }\n      return this._mask.prop;\n    },\n  });\n  Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\n    get: function () {\n      if (this._mask.op.k) {\n        this._mask.op.getValue();\n      }\n      return this._mask.op.v * 100;\n    },\n  });\n\n  var MaskManager = function (maskManager) {\n    var _masksInterfaces = createSizedArray(maskManager.viewData.length);\n    var i;\n    var len = maskManager.viewData.length;\n    for (i = 0; i < len; i += 1) {\n      _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\n    }\n\n    var maskFunction = function (name) {\n      i = 0;\n      while (i < len) {\n        if (maskManager.masksProperties[i].nm === name) {\n          return _masksInterfaces[i];\n        }\n        i += 1;\n      }\n      return null;\n    };\n    return maskFunction;\n  };\n  return MaskManager;\n}());\n\nconst ExpressionPropertyInterface = (function () {\n  var defaultUnidimensionalValue = { pv: 0, v: 0, mult: 1 };\n  var defaultMultidimensionalValue = { pv: [0, 0, 0], v: [0, 0, 0], mult: 1 };\n\n  function completeProperty(expressionValue, property, type) {\n    Object.defineProperty(expressionValue, 'velocity', {\n      get: function () {\n        return property.getVelocityAtTime(property.comp.currentFrame);\n      },\n    });\n    expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\n    expressionValue.key = function (pos) {\n      if (!expressionValue.numKeys) {\n        return 0;\n      }\n      var value = '';\n      if ('s' in property.keyframes[pos - 1]) {\n        value = property.keyframes[pos - 1].s;\n      } else if ('e' in property.keyframes[pos - 2]) {\n        value = property.keyframes[pos - 2].e;\n      } else {\n        value = property.keyframes[pos - 2].s;\n      }\n      var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\n      valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\n      valueProp.value = type === 'unidimensional' ? value[0] : value;\n      return valueProp;\n    };\n    expressionValue.valueAtTime = property.getValueAtTime;\n    expressionValue.speedAtTime = property.getSpeedAtTime;\n    expressionValue.velocityAtTime = property.getVelocityAtTime;\n    expressionValue.propertyGroup = property.propertyGroup;\n  }\n\n  function UnidimensionalPropertyInterface(property) {\n    if (!property || !('pv' in property)) {\n      property = defaultUnidimensionalValue;\n    }\n    var mult = 1 / property.mult;\n    var val = property.pv * mult;\n    var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n    expressionValue.value = val;\n    completeProperty(expressionValue, property, 'unidimensional');\n\n    return function () {\n      if (property.k) {\n        property.getValue();\n      }\n      val = property.v * mult;\n      if (expressionValue.value !== val) {\n        expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n        expressionValue.value = val;\n        completeProperty(expressionValue, property, 'unidimensional');\n      }\n      return expressionValue;\n    };\n  }\n\n  function MultidimensionalPropertyInterface(property) {\n    if (!property || !('pv' in property)) {\n      property = defaultMultidimensionalValue;\n    }\n    var mult = 1 / property.mult;\n    var len = (property.data && property.data.l) || property.pv.length;\n    var expressionValue = createTypedArray('float32', len);\n    var arrValue = createTypedArray('float32', len);\n    expressionValue.value = arrValue;\n    completeProperty(expressionValue, property, 'multidimensional');\n\n    return function () {\n      if (property.k) {\n        property.getValue();\n      }\n      for (var i = 0; i < len; i += 1) {\n        arrValue[i] = property.v[i] * mult;\n        expressionValue[i] = arrValue[i];\n      }\n      return expressionValue;\n    };\n  }\n\n  // TODO: try to avoid using this getter\n  function defaultGetter() {\n    return defaultUnidimensionalValue;\n  }\n\n  return function (property) {\n    if (!property) {\n      return defaultGetter;\n    } if (property.propType === 'unidimensional') {\n      return UnidimensionalPropertyInterface(property);\n    }\n    return MultidimensionalPropertyInterface(property);\n  };\n}());\n\nconst TransformExpressionInterface = (function () {\n  return function (transform) {\n    function _thisFunction(name) {\n      switch (name) {\n        case 'scale':\n        case 'Scale':\n        case 'ADBE Scale':\n        case 6:\n          return _thisFunction.scale;\n        case 'rotation':\n        case 'Rotation':\n        case 'ADBE Rotation':\n        case 'ADBE Rotate Z':\n        case 10:\n          return _thisFunction.rotation;\n        case 'ADBE Rotate X':\n          return _thisFunction.xRotation;\n        case 'ADBE Rotate Y':\n          return _thisFunction.yRotation;\n        case 'position':\n        case 'Position':\n        case 'ADBE Position':\n        case 2:\n          return _thisFunction.position;\n        case 'ADBE Position_0':\n          return _thisFunction.xPosition;\n        case 'ADBE Position_1':\n          return _thisFunction.yPosition;\n        case 'ADBE Position_2':\n          return _thisFunction.zPosition;\n        case 'anchorPoint':\n        case 'AnchorPoint':\n        case 'Anchor Point':\n        case 'ADBE AnchorPoint':\n        case 1:\n          return _thisFunction.anchorPoint;\n        case 'opacity':\n        case 'Opacity':\n        case 11:\n          return _thisFunction.opacity;\n        default:\n          return null;\n      }\n    }\n    Object.defineProperty(_thisFunction, 'rotation', {\n      get: ExpressionPropertyInterface(transform.r || transform.rz),\n    });\n\n    Object.defineProperty(_thisFunction, 'zRotation', {\n      get: ExpressionPropertyInterface(transform.rz || transform.r),\n    });\n\n    Object.defineProperty(_thisFunction, 'xRotation', {\n      get: ExpressionPropertyInterface(transform.rx),\n    });\n\n    Object.defineProperty(_thisFunction, 'yRotation', {\n      get: ExpressionPropertyInterface(transform.ry),\n    });\n    Object.defineProperty(_thisFunction, 'scale', {\n      get: ExpressionPropertyInterface(transform.s),\n    });\n    var _px;\n    var _py;\n    var _pz;\n    var _transformFactory;\n    if (transform.p) {\n      _transformFactory = ExpressionPropertyInterface(transform.p);\n    } else {\n      _px = ExpressionPropertyInterface(transform.px);\n      _py = ExpressionPropertyInterface(transform.py);\n      if (transform.pz) {\n        _pz = ExpressionPropertyInterface(transform.pz);\n      }\n    }\n    Object.defineProperty(_thisFunction, 'position', {\n      get: function () {\n        if (transform.p) {\n          return _transformFactory();\n        }\n        return [\n          _px(),\n          _py(),\n          _pz ? _pz() : 0];\n      },\n    });\n\n    Object.defineProperty(_thisFunction, 'xPosition', {\n      get: ExpressionPropertyInterface(transform.px),\n    });\n\n    Object.defineProperty(_thisFunction, 'yPosition', {\n      get: ExpressionPropertyInterface(transform.py),\n    });\n\n    Object.defineProperty(_thisFunction, 'zPosition', {\n      get: ExpressionPropertyInterface(transform.pz),\n    });\n\n    Object.defineProperty(_thisFunction, 'anchorPoint', {\n      get: ExpressionPropertyInterface(transform.a),\n    });\n\n    Object.defineProperty(_thisFunction, 'opacity', {\n      get: ExpressionPropertyInterface(transform.o),\n    });\n\n    Object.defineProperty(_thisFunction, 'skew', {\n      get: ExpressionPropertyInterface(transform.sk),\n    });\n\n    Object.defineProperty(_thisFunction, 'skewAxis', {\n      get: ExpressionPropertyInterface(transform.sa),\n    });\n\n    Object.defineProperty(_thisFunction, 'orientation', {\n      get: ExpressionPropertyInterface(transform.or),\n    });\n\n    return _thisFunction;\n  };\n}());\n\nconst LayerExpressionInterface = (function () {\n  function getMatrix(time) {\n    var toWorldMat = new Matrix();\n    if (time !== undefined) {\n      var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\n      propMatrix.clone(toWorldMat);\n    } else {\n      var transformMat = this._elem.finalTransform.mProp;\n      transformMat.applyToMatrix(toWorldMat);\n    }\n    return toWorldMat;\n  }\n\n  function toWorldVec(arr, time) {\n    var toWorldMat = this.getMatrix(time);\n    toWorldMat.props[12] = 0;\n    toWorldMat.props[13] = 0;\n    toWorldMat.props[14] = 0;\n    return this.applyPoint(toWorldMat, arr);\n  }\n\n  function toWorld(arr, time) {\n    var toWorldMat = this.getMatrix(time);\n    return this.applyPoint(toWorldMat, arr);\n  }\n\n  function fromWorldVec(arr, time) {\n    var toWorldMat = this.getMatrix(time);\n    toWorldMat.props[12] = 0;\n    toWorldMat.props[13] = 0;\n    toWorldMat.props[14] = 0;\n    return this.invertPoint(toWorldMat, arr);\n  }\n\n  function fromWorld(arr, time) {\n    var toWorldMat = this.getMatrix(time);\n    return this.invertPoint(toWorldMat, arr);\n  }\n\n  function applyPoint(matrix, arr) {\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\n      var i;\n      var len = this._elem.hierarchy.length;\n      for (i = 0; i < len; i += 1) {\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n      }\n    }\n    return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n  }\n\n  function invertPoint(matrix, arr) {\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\n      var i;\n      var len = this._elem.hierarchy.length;\n      for (i = 0; i < len; i += 1) {\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n      }\n    }\n    return matrix.inversePoint(arr);\n  }\n\n  function fromComp(arr) {\n    var toWorldMat = new Matrix();\n    toWorldMat.reset();\n    this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\n      var i;\n      var len = this._elem.hierarchy.length;\n      for (i = 0; i < len; i += 1) {\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n      }\n      return toWorldMat.inversePoint(arr);\n    }\n    return toWorldMat.inversePoint(arr);\n  }\n\n  function sampleImage() {\n    return [1, 1, 1, 1];\n  }\n\n  return function (elem) {\n    var transformInterface;\n\n    function _registerMaskInterface(maskManager) {\n      _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\n    }\n    function _registerEffectsInterface(effects) {\n      _thisLayerFunction.effect = effects;\n    }\n\n    function _thisLayerFunction(name) {\n      switch (name) {\n        case 'ADBE Root Vectors Group':\n        case 'Contents':\n        case 2:\n          return _thisLayerFunction.shapeInterface;\n        case 1:\n        case 6:\n        case 'Transform':\n        case 'transform':\n        case 'ADBE Transform Group':\n          return transformInterface;\n        case 4:\n        case 'ADBE Effect Parade':\n        case 'effects':\n        case 'Effects':\n          return _thisLayerFunction.effect;\n        case 'ADBE Text Properties':\n          return _thisLayerFunction.textInterface;\n        default:\n          return null;\n      }\n    }\n    _thisLayerFunction.getMatrix = getMatrix;\n    _thisLayerFunction.invertPoint = invertPoint;\n    _thisLayerFunction.applyPoint = applyPoint;\n    _thisLayerFunction.toWorld = toWorld;\n    _thisLayerFunction.toWorldVec = toWorldVec;\n    _thisLayerFunction.fromWorld = fromWorld;\n    _thisLayerFunction.fromWorldVec = fromWorldVec;\n    _thisLayerFunction.toComp = toWorld;\n    _thisLayerFunction.fromComp = fromComp;\n    _thisLayerFunction.sampleImage = sampleImage;\n    _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\n    _thisLayerFunction._elem = elem;\n    transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\n    var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\n    Object.defineProperties(_thisLayerFunction, {\n      hasParent: {\n        get: function () {\n          return elem.hierarchy.length;\n        },\n      },\n      parent: {\n        get: function () {\n          return elem.hierarchy[0].layerInterface;\n        },\n      },\n      rotation: getDescriptor(transformInterface, 'rotation'),\n      scale: getDescriptor(transformInterface, 'scale'),\n      position: getDescriptor(transformInterface, 'position'),\n      opacity: getDescriptor(transformInterface, 'opacity'),\n      anchorPoint: anchorPointDescriptor,\n      anchor_point: anchorPointDescriptor,\n      transform: {\n        get: function () {\n          return transformInterface;\n        },\n      },\n      active: {\n        get: function () {\n          return elem.isInRange;\n        },\n      },\n    });\n\n    _thisLayerFunction.startTime = elem.data.st;\n    _thisLayerFunction.index = elem.data.ind;\n    _thisLayerFunction.source = elem.data.refId;\n    _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\n    _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\n    _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n    _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\n    _thisLayerFunction._name = elem.data.nm;\n\n    _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\n    _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\n    return _thisLayerFunction;\n  };\n}());\n\nconst propertyGroupFactory = (function () {\n  return function (interfaceFunction, parentPropertyGroup) {\n    return function (val) {\n      val = val === undefined ? 1 : val;\n      if (val <= 0) {\n        return interfaceFunction;\n      }\n      return parentPropertyGroup(val - 1);\n    };\n  };\n}());\n\nconst PropertyInterface = (function () {\n  return function (propertyName, propertyGroup) {\n    var interfaceFunction = {\n      _name: propertyName,\n    };\n\n    function _propertyGroup(val) {\n      val = val === undefined ? 1 : val;\n      if (val <= 0) {\n        return interfaceFunction;\n      }\n      return propertyGroup(val - 1);\n    }\n\n    return _propertyGroup;\n  };\n}());\n\nconst EffectsExpressionInterface = (function () {\n  var ob = {\n    createEffectsInterface: createEffectsInterface,\n  };\n\n  function createEffectsInterface(elem, propertyGroup) {\n    if (elem.effectsManager) {\n      var effectElements = [];\n      var effectsData = elem.data.ef;\n      var i;\n      var len = elem.effectsManager.effectElements.length;\n      for (i = 0; i < len; i += 1) {\n        effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\n      }\n\n      var effects = elem.data.ef || [];\n      var groupInterface = function (name) {\n        i = 0;\n        len = effects.length;\n        while (i < len) {\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n            return effectElements[i];\n          }\n          i += 1;\n        }\n        return null;\n      };\n      Object.defineProperty(groupInterface, 'numProperties', {\n        get: function () {\n          return effects.length;\n        },\n      });\n      return groupInterface;\n    }\n    return null;\n  }\n\n  function createGroupInterface(data, elements, propertyGroup, elem) {\n    function groupInterface(name) {\n      var effects = data.ef;\n      var i = 0;\n      var len = effects.length;\n      while (i < len) {\n        if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n          if (effects[i].ty === 5) {\n            return effectElements[i];\n          }\n          return effectElements[i]();\n        }\n        i += 1;\n      }\n      throw new Error();\n    }\n    var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\n\n    var effectElements = [];\n    var i;\n    var len = data.ef.length;\n    for (i = 0; i < len; i += 1) {\n      if (data.ef[i].ty === 5) {\n        effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\n      } else {\n        effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\n      }\n    }\n\n    if (data.mn === 'ADBE Color Control') {\n      Object.defineProperty(groupInterface, 'color', {\n        get: function () {\n          return effectElements[0]();\n        },\n      });\n    }\n    Object.defineProperties(groupInterface, {\n      numProperties: {\n        get: function () {\n          return data.np;\n        },\n      },\n      _name: { value: data.nm },\n      propertyGroup: { value: _propertyGroup },\n    });\n    groupInterface.enabled = data.en !== 0;\n    groupInterface.active = groupInterface.enabled;\n    return groupInterface;\n  }\n\n  function createValueInterface(element, type, elem, propertyGroup) {\n    var expressionProperty = ExpressionPropertyInterface(element.p);\n    function interfaceFunction() {\n      if (type === 10) {\n        return elem.comp.compInterface(element.p.v);\n      }\n      return expressionProperty();\n    }\n\n    if (element.p.setGroupProperty) {\n      element.p.setGroupProperty(PropertyInterface('', propertyGroup));\n    }\n\n    return interfaceFunction;\n  }\n\n  return ob;\n}());\n\nconst CompExpressionInterface = (function () {\n  return function (comp) {\n    function _thisLayerFunction(name) {\n      var i = 0;\n      var len = comp.layers.length;\n      while (i < len) {\n        if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\n          return comp.elements[i].layerInterface;\n        }\n        i += 1;\n      }\n      return null;\n      // return {active:false};\n    }\n    Object.defineProperty(_thisLayerFunction, '_name', { value: comp.data.nm });\n    _thisLayerFunction.layer = _thisLayerFunction;\n    _thisLayerFunction.pixelAspect = 1;\n    _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\n    _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\n    _thisLayerFunction.pixelAspect = 1;\n    _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\n    _thisLayerFunction.displayStartTime = 0;\n    _thisLayerFunction.numLayers = comp.layers.length;\n    return _thisLayerFunction;\n  };\n}());\n\nconst ShapePathInterface = (\n\n  function () {\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\n      var prop = view.sh;\n\n      function interfaceFunction(val) {\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\n          return interfaceFunction.path;\n        }\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        path: {\n          get: function () {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          },\n        },\n        shape: {\n          get: function () {\n            if (prop.k) {\n              prop.getValue();\n            }\n            return prop;\n          },\n        },\n        _name: { value: shape.nm },\n        ix: { value: shape.ix },\n        propertyIndex: { value: shape.ix },\n        mn: { value: shape.mn },\n        propertyGroup: { value: propertyGroup },\n      });\n      return interfaceFunction;\n    };\n  }()\n);\n\nconst ShapeExpressionInterface = (function () {\n  function iterateElements(shapes, view, propertyGroup) {\n    var arr = [];\n    var i;\n    var len = shapes ? shapes.length : 0;\n    for (i = 0; i < len; i += 1) {\n      if (shapes[i].ty === 'gr') {\n        arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'fl') {\n        arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'st') {\n        arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'tm') {\n        arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'tr') {\n        // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\n      } else if (shapes[i].ty === 'el') {\n        arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'sr') {\n        arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'sh') {\n        arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'rc') {\n        arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'rd') {\n        arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'rp') {\n        arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else if (shapes[i].ty === 'gf') {\n        arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\n      } else {\n        arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\n      }\n    }\n    return arr;\n  }\n\n  function contentsInterfaceFactory(shape, view, propertyGroup) {\n    var interfaces;\n    var interfaceFunction = function _interfaceFunction(value) {\n      var i = 0;\n      var len = interfaces.length;\n      while (i < len) {\n        if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\n          return interfaces[i];\n        }\n        i += 1;\n      }\n      if (typeof value === 'number') {\n        return interfaces[value - 1];\n      }\n      return null;\n    };\n\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\n    interfaceFunction.numProperties = interfaces.length;\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n    interfaceFunction.transform = transformInterface;\n    interfaceFunction.propertyIndex = shape.cix;\n    interfaceFunction._name = shape.nm;\n\n    return interfaceFunction;\n  }\n\n  function groupInterfaceFactory(shape, view, propertyGroup) {\n    var interfaceFunction = function _interfaceFunction(value) {\n      switch (value) {\n        case 'ADBE Vectors Group':\n        case 'Contents':\n        case 2:\n          return interfaceFunction.content;\n          // Not necessary for now. Keeping them here in case a new case appears\n          // case 'ADBE Vector Transform Group':\n          // case 3:\n        default:\n          return interfaceFunction.transform;\n      }\n    };\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n    interfaceFunction.content = content;\n    interfaceFunction.transform = transformInterface;\n    Object.defineProperty(interfaceFunction, '_name', {\n      get: function () {\n        return shape.nm;\n      },\n    });\n    // interfaceFunction.content = interfaceFunction;\n    interfaceFunction.numProperties = shape.np;\n    interfaceFunction.propertyIndex = shape.ix;\n    interfaceFunction.nm = shape.nm;\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function fillInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(val) {\n      if (val === 'Color' || val === 'color') {\n        return interfaceFunction.color;\n      } if (val === 'Opacity' || val === 'opacity') {\n        return interfaceFunction.opacity;\n      }\n      return null;\n    }\n    Object.defineProperties(interfaceFunction, {\n      color: {\n        get: ExpressionPropertyInterface(view.c),\n      },\n      opacity: {\n        get: ExpressionPropertyInterface(view.o),\n      },\n      _name: { value: shape.nm },\n      mn: { value: shape.mn },\n    });\n\n    view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n    return interfaceFunction;\n  }\n\n  function gradientFillInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(val) {\n      if (val === 'Start Point' || val === 'start point') {\n        return interfaceFunction.startPoint;\n      }\n      if (val === 'End Point' || val === 'end point') {\n        return interfaceFunction.endPoint;\n      }\n      if (val === 'Opacity' || val === 'opacity') {\n        return interfaceFunction.opacity;\n      }\n      return null;\n    }\n    Object.defineProperties(interfaceFunction, {\n      startPoint: {\n        get: ExpressionPropertyInterface(view.s),\n      },\n      endPoint: {\n        get: ExpressionPropertyInterface(view.e),\n      },\n      opacity: {\n        get: ExpressionPropertyInterface(view.o),\n      },\n      type: {\n        get: function () {\n          return 'a';\n        },\n      },\n      _name: { value: shape.nm },\n      mn: { value: shape.mn },\n    });\n\n    view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\n    view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n    return interfaceFunction;\n  }\n  function defaultInterfaceFactory() {\n    function interfaceFunction() {\n      return null;\n    }\n    return interfaceFunction;\n  }\n\n  function strokeInterfaceFactory(shape, view, propertyGroup) {\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\n    function addPropertyToDashOb(i) {\n      Object.defineProperty(dashOb, shape.d[i].nm, {\n        get: ExpressionPropertyInterface(view.d.dataProps[i].p),\n      });\n    }\n    var i;\n    var len = shape.d ? shape.d.length : 0;\n    var dashOb = {};\n    for (i = 0; i < len; i += 1) {\n      addPropertyToDashOb(i);\n      view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\n    }\n\n    function interfaceFunction(val) {\n      if (val === 'Color' || val === 'color') {\n        return interfaceFunction.color;\n      } if (val === 'Opacity' || val === 'opacity') {\n        return interfaceFunction.opacity;\n      } if (val === 'Stroke Width' || val === 'stroke width') {\n        return interfaceFunction.strokeWidth;\n      }\n      return null;\n    }\n    Object.defineProperties(interfaceFunction, {\n      color: {\n        get: ExpressionPropertyInterface(view.c),\n      },\n      opacity: {\n        get: ExpressionPropertyInterface(view.o),\n      },\n      strokeWidth: {\n        get: ExpressionPropertyInterface(view.w),\n      },\n      dash: {\n        get: function () {\n          return dashOb;\n        },\n      },\n      _name: { value: shape.nm },\n      mn: { value: shape.mn },\n    });\n\n    view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\n    view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n    view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\n    return interfaceFunction;\n  }\n\n  function trimInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(val) {\n      if (val === shape.e.ix || val === 'End' || val === 'end') {\n        return interfaceFunction.end;\n      }\n      if (val === shape.s.ix) {\n        return interfaceFunction.start;\n      }\n      if (val === shape.o.ix) {\n        return interfaceFunction.offset;\n      }\n      return null;\n    }\n\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    interfaceFunction.propertyIndex = shape.ix;\n\n    view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\n    view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\n    view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n    interfaceFunction.propertyIndex = shape.ix;\n    interfaceFunction.propertyGroup = propertyGroup;\n\n    Object.defineProperties(interfaceFunction, {\n      start: {\n        get: ExpressionPropertyInterface(view.s),\n      },\n      end: {\n        get: ExpressionPropertyInterface(view.e),\n      },\n      offset: {\n        get: ExpressionPropertyInterface(view.o),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function transformInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.a.ix === value || value === 'Anchor Point') {\n        return interfaceFunction.anchorPoint;\n      }\n      if (shape.o.ix === value || value === 'Opacity') {\n        return interfaceFunction.opacity;\n      }\n      if (shape.p.ix === value || value === 'Position') {\n        return interfaceFunction.position;\n      }\n      if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\n        return interfaceFunction.rotation;\n      }\n      if (shape.s.ix === value || value === 'Scale') {\n        return interfaceFunction.scale;\n      }\n      if ((shape.sk && shape.sk.ix === value) || value === 'Skew') {\n        return interfaceFunction.skew;\n      }\n      if ((shape.sa && shape.sa.ix === value) || value === 'Skew Axis') {\n        return interfaceFunction.skewAxis;\n      }\n      return null;\n    }\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n    view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n    view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\n    view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\n    view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n    if (view.transform.mProps.sk) {\n      view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\n      view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\n    }\n    view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n    Object.defineProperties(interfaceFunction, {\n      opacity: {\n        get: ExpressionPropertyInterface(view.transform.mProps.o),\n      },\n      position: {\n        get: ExpressionPropertyInterface(view.transform.mProps.p),\n      },\n      anchorPoint: {\n        get: ExpressionPropertyInterface(view.transform.mProps.a),\n      },\n      scale: {\n        get: ExpressionPropertyInterface(view.transform.mProps.s),\n      },\n      rotation: {\n        get: ExpressionPropertyInterface(view.transform.mProps.r),\n      },\n      skew: {\n        get: ExpressionPropertyInterface(view.transform.mProps.sk),\n      },\n      skewAxis: {\n        get: ExpressionPropertyInterface(view.transform.mProps.sa),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.ty = 'tr';\n    interfaceFunction.mn = shape.mn;\n    interfaceFunction.propertyGroup = propertyGroup;\n    return interfaceFunction;\n  }\n\n  function ellipseInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.p.ix === value) {\n        return interfaceFunction.position;\n      }\n      if (shape.s.ix === value) {\n        return interfaceFunction.size;\n      }\n      return null;\n    }\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    interfaceFunction.propertyIndex = shape.ix;\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n\n    Object.defineProperties(interfaceFunction, {\n      size: {\n        get: ExpressionPropertyInterface(prop.s),\n      },\n      position: {\n        get: ExpressionPropertyInterface(prop.p),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function starInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.p.ix === value) {\n        return interfaceFunction.position;\n      }\n      if (shape.r.ix === value) {\n        return interfaceFunction.rotation;\n      }\n      if (shape.pt.ix === value) {\n        return interfaceFunction.points;\n      }\n      if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\n        return interfaceFunction.outerRadius;\n      }\n      if (shape.os.ix === value) {\n        return interfaceFunction.outerRoundness;\n      }\n      if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\n        return interfaceFunction.innerRadius;\n      }\n      if (shape.is && shape.is.ix === value) {\n        return interfaceFunction.innerRoundness;\n      }\n      return null;\n    }\n\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n    interfaceFunction.propertyIndex = shape.ix;\n    prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\n    prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\n    prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n    if (shape.ir) {\n      prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\n      prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\n    }\n\n    Object.defineProperties(interfaceFunction, {\n      position: {\n        get: ExpressionPropertyInterface(prop.p),\n      },\n      rotation: {\n        get: ExpressionPropertyInterface(prop.r),\n      },\n      points: {\n        get: ExpressionPropertyInterface(prop.pt),\n      },\n      outerRadius: {\n        get: ExpressionPropertyInterface(prop.or),\n      },\n      outerRoundness: {\n        get: ExpressionPropertyInterface(prop.os),\n      },\n      innerRadius: {\n        get: ExpressionPropertyInterface(prop.ir),\n      },\n      innerRoundness: {\n        get: ExpressionPropertyInterface(prop.is),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function rectInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.p.ix === value) {\n        return interfaceFunction.position;\n      }\n      if (shape.r.ix === value) {\n        return interfaceFunction.roundness;\n      }\n      if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\n        return interfaceFunction.size;\n      }\n      return null;\n    }\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n    interfaceFunction.propertyIndex = shape.ix;\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n\n    Object.defineProperties(interfaceFunction, {\n      position: {\n        get: ExpressionPropertyInterface(prop.p),\n      },\n      roundness: {\n        get: ExpressionPropertyInterface(prop.r),\n      },\n      size: {\n        get: ExpressionPropertyInterface(prop.s),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function roundedInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.r.ix === value || value === 'Round Corners 1') {\n        return interfaceFunction.radius;\n      }\n      return null;\n    }\n\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    var prop = view;\n    interfaceFunction.propertyIndex = shape.ix;\n    prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\n\n    Object.defineProperties(interfaceFunction, {\n      radius: {\n        get: ExpressionPropertyInterface(prop.rd),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  function repeaterInterfaceFactory(shape, view, propertyGroup) {\n    function interfaceFunction(value) {\n      if (shape.c.ix === value || value === 'Copies') {\n        return interfaceFunction.copies;\n      } if (shape.o.ix === value || value === 'Offset') {\n        return interfaceFunction.offset;\n      }\n      return null;\n    }\n\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n    var prop = view;\n    interfaceFunction.propertyIndex = shape.ix;\n    prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\n    prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n    Object.defineProperties(interfaceFunction, {\n      copies: {\n        get: ExpressionPropertyInterface(prop.c),\n      },\n      offset: {\n        get: ExpressionPropertyInterface(prop.o),\n      },\n      _name: { value: shape.nm },\n    });\n    interfaceFunction.mn = shape.mn;\n    return interfaceFunction;\n  }\n\n  return function (shapes, view, propertyGroup) {\n    var interfaces;\n    function _interfaceFunction(value) {\n      if (typeof value === 'number') {\n        value = value === undefined ? 1 : value;\n        if (value === 0) {\n          return propertyGroup;\n        }\n        return interfaces[value - 1];\n      }\n      var i = 0;\n      var len = interfaces.length;\n      while (i < len) {\n        if (interfaces[i]._name === value) {\n          return interfaces[i];\n        }\n        i += 1;\n      }\n      return null;\n    }\n    function parentGroupWrapper() {\n      return propertyGroup;\n    }\n    _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\n    interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\n    _interfaceFunction.numProperties = interfaces.length;\n    _interfaceFunction._name = 'Contents';\n    return _interfaceFunction;\n  };\n}());\n\nconst TextExpressionInterface = (function () {\n  return function (elem) {\n    var _prevValue;\n    var _sourceText;\n    function _thisLayerFunction(name) {\n      switch (name) {\n        case 'ADBE Text Document':\n          return _thisLayerFunction.sourceText;\n        default:\n          return null;\n      }\n    }\n    Object.defineProperty(_thisLayerFunction, 'sourceText', {\n      get: function () {\n        elem.textProperty.getValue();\n        var stringValue = elem.textProperty.currentData.t;\n        if (stringValue !== _prevValue) {\n          elem.textProperty.currentData.t = _prevValue;\n          _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\n          // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\n          _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\n        }\n        return _sourceText;\n      },\n    });\n    return _thisLayerFunction;\n  };\n}());\n\nconst getBlendMode = (function () {\n  var blendModeEnums = {\n    0: 'source-over',\n    1: 'multiply',\n    2: 'screen',\n    3: 'overlay',\n    4: 'darken',\n    5: 'lighten',\n    6: 'color-dodge',\n    7: 'color-burn',\n    8: 'hard-light',\n    9: 'soft-light',\n    10: 'difference',\n    11: 'exclusion',\n    12: 'hue',\n    13: 'saturation',\n    14: 'color',\n    15: 'luminosity',\n  };\n\n  return function (mode) {\n    return blendModeEnums[mode] || '';\n  };\n}());\n\nfunction SliderEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n}\nfunction AngleEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n}\nfunction ColorEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n}\nfunction PointEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n}\nfunction LayerIndexEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n}\nfunction MaskIndexEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n}\nfunction CheckboxEffect(data, elem, container) {\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n}\nfunction NoValueEffect() {\n  this.p = {};\n}\n\nfunction EffectsManager(data, element) {\n  var effects = data.ef || [];\n  this.effectElements = [];\n  var i;\n  var len = effects.length;\n  var effectItem;\n  for (i = 0; i < len; i += 1) {\n    effectItem = new GroupEffect(effects[i], element);\n    this.effectElements.push(effectItem);\n  }\n}\n\nfunction GroupEffect(data, element) {\n  this.init(data, element);\n}\n\nextendPrototype([DynamicPropertyContainer], GroupEffect);\n\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\n\nGroupEffect.prototype.init = function (data, element) {\n  this.data = data;\n  this.effectElements = [];\n  this.initDynamicPropertyContainer(element);\n  var i;\n  var len = this.data.ef.length;\n  var eff;\n  var effects = this.data.ef;\n  for (i = 0; i < len; i += 1) {\n    eff = null;\n    switch (effects[i].ty) {\n      case 0:\n        eff = new SliderEffect(effects[i], element, this);\n        break;\n      case 1:\n        eff = new AngleEffect(effects[i], element, this);\n        break;\n      case 2:\n        eff = new ColorEffect(effects[i], element, this);\n        break;\n      case 3:\n        eff = new PointEffect(effects[i], element, this);\n        break;\n      case 4:\n      case 7:\n        eff = new CheckboxEffect(effects[i], element, this);\n        break;\n      case 10:\n        eff = new LayerIndexEffect(effects[i], element, this);\n        break;\n      case 11:\n        eff = new MaskIndexEffect(effects[i], element, this);\n        break;\n      case 5:\n        eff = new EffectsManager(effects[i], element, this);\n        break;\n        // case 6:\n      default:\n        eff = new NoValueEffect(effects[i], element, this);\n        break;\n    }\n    if (eff) {\n      this.effectElements.push(eff);\n    }\n  }\n};\n\nfunction BaseElement() {\n}\n\nBaseElement.prototype = {\n  checkMasks: function () {\n    if (!this.data.hasMask) {\n      return false;\n    }\n    var i = 0;\n    var len = this.data.masksProperties.length;\n    while (i < len) {\n      if ((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\n        return true;\n      }\n      i += 1;\n    }\n    return false;\n  },\n  initExpressions: function () {\n    this.layerInterface = LayerExpressionInterface(this);\n    if (this.data.hasMask && this.maskManager) {\n      this.layerInterface.registerMaskInterface(this.maskManager);\n    }\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\n    this.layerInterface.registerEffectsInterface(effectsInterface);\n\n    if (this.data.ty === 0 || this.data.xt) {\n      this.compInterface = CompExpressionInterface(this);\n    } else if (this.data.ty === 4) {\n      this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\n      this.layerInterface.content = this.layerInterface.shapeInterface;\n    } else if (this.data.ty === 5) {\n      this.layerInterface.textInterface = TextExpressionInterface(this);\n      this.layerInterface.text = this.layerInterface.textInterface;\n    }\n  },\n  setBlendMode: function () {\n    var blendModeValue = getBlendMode(this.data.bm);\n    var elem = this.baseElement || this.layerElement;\n\n    elem.style['mix-blend-mode'] = blendModeValue;\n  },\n  initBaseData: function (data, globalData, comp) {\n    this.globalData = globalData;\n    this.comp = comp;\n    this.data = data;\n    this.layerId = createElementID();\n\n    // Stretch factor for old animations missing this property.\n    if (!this.data.sr) {\n      this.data.sr = 1;\n    }\n    // effects manager\n    this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\n  },\n  getType: function () {\n    return this.type;\n  },\n  sourceRectAtTime: function () {},\n};\n\n/**\n * @file\n * Handles element's layer frame update.\n * Checks layer in point and out point\n *\n */\n\nfunction FrameElement() {}\n\nFrameElement.prototype = {\n  /**\n     * @function\n     * Initializes frame related properties.\n     *\n     */\n  initFrame: function () {\n    // set to true when inpoint is rendered\n    this._isFirstFrame = false;\n    // list of animated properties\n    this.dynamicProperties = [];\n    // If layer has been modified in current tick this will be true\n    this._mdf = false;\n  },\n  /**\n     * @function\n     * Calculates all dynamic values\n     *\n     * @param {number} num\n     * current frame number in Layer's time\n     * @param {boolean} isVisible\n     * if layers is currently in range\n     *\n     */\n  prepareProperties: function (num, isVisible) {\n    var i;\n    var len = this.dynamicProperties.length;\n    for (i = 0; i < len; i += 1) {\n      if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\n        this.dynamicProperties[i].getValue();\n        if (this.dynamicProperties[i]._mdf) {\n          this.globalData._mdf = true;\n          this._mdf = true;\n        }\n      }\n    }\n  },\n  addDynamicProperty: function (prop) {\n    if (this.dynamicProperties.indexOf(prop) === -1) {\n      this.dynamicProperties.push(prop);\n    }\n  },\n};\n\nconst FootageInterface = (function () {\n  var outlineInterfaceFactory = (function (elem) {\n    var currentPropertyName = '';\n    var currentProperty = elem.getFootageData();\n    function init() {\n      currentPropertyName = '';\n      currentProperty = elem.getFootageData();\n      return searchProperty;\n    }\n    function searchProperty(value) {\n      if (currentProperty[value]) {\n        currentPropertyName = value;\n        currentProperty = currentProperty[value];\n        if (typeof currentProperty === 'object') {\n          return searchProperty;\n        }\n        return currentProperty;\n      }\n      var propertyNameIndex = value.indexOf(currentPropertyName);\n      if (propertyNameIndex !== -1) {\n        var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\n        currentProperty = currentProperty[index];\n        if (typeof currentProperty === 'object') {\n          return searchProperty;\n        }\n        return currentProperty;\n      }\n      return '';\n    }\n    return init;\n  });\n\n  var dataInterfaceFactory = function (elem) {\n    function interfaceFunction(value) {\n      if (value === 'Outline') {\n        return interfaceFunction.outlineInterface();\n      }\n      return null;\n    }\n\n    interfaceFunction._name = 'Outline';\n    interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\n    return interfaceFunction;\n  };\n\n  return function (elem) {\n    function _interfaceFunction(value) {\n      if (value === 'Data') {\n        return _interfaceFunction.dataInterface;\n      }\n      return null;\n    }\n\n    _interfaceFunction._name = 'Data';\n    _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\n    return _interfaceFunction;\n  };\n}());\n\nfunction FootageElement(data, globalData, comp) {\n  this.initFrame();\n  this.initRenderable();\n  this.assetData = globalData.getAssetData(data.refId);\n  this.footageData = globalData.imageLoader.getAsset(this.assetData);\n  this.initBaseData(data, globalData, comp);\n}\n\nFootageElement.prototype.prepareFrame = function () {\n};\n\nextendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\n\nFootageElement.prototype.getBaseElement = function () {\n  return null;\n};\n\nFootageElement.prototype.renderFrame = function () {\n};\n\nFootageElement.prototype.destroy = function () {\n};\n\nFootageElement.prototype.initExpressions = function () {\n  this.layerInterface = FootageInterface(this);\n};\n\nFootageElement.prototype.getFootageData = function () {\n  return this.footageData;\n};\n\nfunction AudioElement(data, globalData, comp) {\n  this.initFrame();\n  this.initRenderable();\n  this.assetData = globalData.getAssetData(data.refId);\n  this.initBaseData(data, globalData, comp);\n  this._isPlaying = false;\n  this._canPlay = false;\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\n  this.audio = this.globalData.audioController.createAudio(assetPath);\n  this._currentTime = 0;\n  this.globalData.audioController.addAudio(this);\n  this._volumeMultiplier = 1;\n  this._volume = 1;\n  this._previousVolume = null;\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\n  this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : { k: [100] }, 1, 0.01, this);\n}\n\nAudioElement.prototype.prepareFrame = function (num) {\n  this.prepareRenderableFrame(num, true);\n  this.prepareProperties(num, true);\n  if (!this.tm._placeholder) {\n    var timeRemapped = this.tm.v;\n    this._currentTime = timeRemapped;\n  } else {\n    this._currentTime = num / this.data.sr;\n  }\n  this._volume = this.lv.v[0];\n  var totalVolume = this._volume * this._volumeMultiplier;\n  if (this._previousVolume !== totalVolume) {\n    this._previousVolume = totalVolume;\n    this.audio.volume(totalVolume);\n  }\n};\n\nextendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\n\nAudioElement.prototype.renderFrame = function () {\n  if (this.isInRange && this._canPlay) {\n    if (!this._isPlaying) {\n      this.audio.play();\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\n      this._isPlaying = true;\n    } else if (!this.audio.playing()\n      || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1\n    ) {\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\n    }\n  }\n};\n\nAudioElement.prototype.show = function () {\n  // this.audio.play()\n};\n\nAudioElement.prototype.hide = function () {\n  this.audio.pause();\n  this._isPlaying = false;\n};\n\nAudioElement.prototype.pause = function () {\n  this.audio.pause();\n  this._isPlaying = false;\n  this._canPlay = false;\n};\n\nAudioElement.prototype.resume = function () {\n  this._canPlay = true;\n};\n\nAudioElement.prototype.setRate = function (rateValue) {\n  this.audio.rate(rateValue);\n};\n\nAudioElement.prototype.volume = function (volumeValue) {\n  this._volumeMultiplier = volumeValue;\n  this._previousVolume = volumeValue * this._volume;\n  this.audio.volume(this._previousVolume);\n};\n\nAudioElement.prototype.getBaseElement = function () {\n  return null;\n};\n\nAudioElement.prototype.destroy = function () {\n};\n\nAudioElement.prototype.sourceRectAtTime = function () {\n};\n\nAudioElement.prototype.initExpressions = function () {\n};\n\nfunction BaseRenderer() {}\nBaseRenderer.prototype.checkLayers = function (num) {\n  var i;\n  var len = this.layers.length;\n  var data;\n  this.completeLayers = true;\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (!this.elements[i]) {\n      data = this.layers[i];\n      if (data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st)) {\n        this.buildItem(i);\n      }\n    }\n    this.completeLayers = this.elements[i] ? this.completeLayers : false;\n  }\n  this.checkPendingElements();\n};\n\nBaseRenderer.prototype.createItem = function (layer) {\n  switch (layer.ty) {\n    case 2:\n      return this.createImage(layer);\n    case 0:\n      return this.createComp(layer);\n    case 1:\n      return this.createSolid(layer);\n    case 3:\n      return this.createNull(layer);\n    case 4:\n      return this.createShape(layer);\n    case 5:\n      return this.createText(layer);\n    case 6:\n      return this.createAudio(layer);\n    case 13:\n      return this.createCamera(layer);\n    case 15:\n      return this.createFootage(layer);\n    default:\n      return this.createNull(layer);\n  }\n};\n\nBaseRenderer.prototype.createCamera = function () {\n  throw new Error('You\\'re using a 3d camera. Try the html renderer.');\n};\n\nBaseRenderer.prototype.createAudio = function (data) {\n  return new AudioElement(data, this.globalData, this);\n};\n\nBaseRenderer.prototype.createFootage = function (data) {\n  return new FootageElement(data, this.globalData, this);\n};\n\nBaseRenderer.prototype.buildAllItems = function () {\n  var i;\n  var len = this.layers.length;\n  for (i = 0; i < len; i += 1) {\n    this.buildItem(i);\n  }\n  this.checkPendingElements();\n};\n\nBaseRenderer.prototype.includeLayers = function (newLayers) {\n  this.completeLayers = false;\n  var i;\n  var len = newLayers.length;\n  var j;\n  var jLen = this.layers.length;\n  for (i = 0; i < len; i += 1) {\n    j = 0;\n    while (j < jLen) {\n      if (this.layers[j].id === newLayers[i].id) {\n        this.layers[j] = newLayers[i];\n        break;\n      }\n      j += 1;\n    }\n  }\n};\n\nBaseRenderer.prototype.setProjectInterface = function (pInterface) {\n  this.globalData.projectInterface = pInterface;\n};\n\nBaseRenderer.prototype.initItems = function () {\n  if (!this.globalData.progressiveLoad) {\n    this.buildAllItems();\n  }\n};\nBaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\n  var elements = this.elements;\n  var layers = this.layers;\n  var i = 0;\n  var len = layers.length;\n  while (i < len) {\n    if (layers[i].ind == parentName) { // eslint-disable-line eqeqeq\n      if (!elements[i] || elements[i] === true) {\n        this.buildItem(i);\n        this.addPendingElement(element);\n      } else {\n        hierarchy.push(elements[i]);\n        elements[i].setAsParent();\n        if (layers[i].parent !== undefined) {\n          this.buildElementParenting(element, layers[i].parent, hierarchy);\n        } else {\n          element.setHierarchy(hierarchy);\n        }\n      }\n    }\n    i += 1;\n  }\n};\n\nBaseRenderer.prototype.addPendingElement = function (element) {\n  this.pendingElements.push(element);\n};\n\nBaseRenderer.prototype.searchExtraCompositions = function (assets) {\n  var i;\n  var len = assets.length;\n  for (i = 0; i < len; i += 1) {\n    if (assets[i].xt) {\n      var comp = this.createComp(assets[i]);\n      comp.initExpressions();\n      this.globalData.projectInterface.registerComposition(comp);\n    }\n  }\n};\n\nBaseRenderer.prototype.getElementByPath = function (path) {\n  var pathValue = path.shift();\n  var element;\n  if (typeof pathValue === 'number') {\n    element = this.elements[pathValue];\n  } else {\n    var i;\n    var len = this.elements.length;\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i].data.nm === pathValue) {\n        element = this.elements[i];\n        break;\n      }\n    }\n  }\n  if (path.length === 0) {\n    return element;\n  }\n  return element.getElementByPath(path);\n};\n\nBaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\n  this.globalData.fontManager = new FontManager();\n  this.globalData.fontManager.addChars(animData.chars);\n  this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\n  this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\n  this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\n  this.globalData.imageLoader = this.animationItem.imagePreloader;\n  this.globalData.audioController = this.animationItem.audioController;\n  this.globalData.frameId = 0;\n  this.globalData.frameRate = animData.fr;\n  this.globalData.nm = animData.nm;\n  this.globalData.compSize = {\n    w: animData.w,\n    h: animData.h,\n  };\n};\n\nfunction TransformElement() {}\n\nTransformElement.prototype = {\n  initTransform: function () {\n    this.finalTransform = {\n      mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : { o: 0 },\n      _matMdf: false,\n      _opMdf: false,\n      mat: new Matrix(),\n    };\n    if (this.data.ao) {\n      this.finalTransform.mProp.autoOriented = true;\n    }\n\n    // TODO: check TYPE 11: Guided elements\n    if (this.data.ty !== 11) {\n      // this.createElements();\n    }\n  },\n  renderTransform: function () {\n    this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\n    this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\n\n    if (this.hierarchy) {\n      var mat;\n      var finalMat = this.finalTransform.mat;\n      var i = 0;\n      var len = this.hierarchy.length;\n      // Checking if any of the transformation matrices in the hierarchy chain has changed.\n      if (!this.finalTransform._matMdf) {\n        while (i < len) {\n          if (this.hierarchy[i].finalTransform.mProp._mdf) {\n            this.finalTransform._matMdf = true;\n            break;\n          }\n          i += 1;\n        }\n      }\n\n      if (this.finalTransform._matMdf) {\n        mat = this.finalTransform.mProp.v.props;\n        finalMat.cloneFromProps(mat);\n        for (i = 0; i < len; i += 1) {\n          mat = this.hierarchy[i].finalTransform.mProp.v.props;\n          finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\n        }\n      }\n    }\n  },\n  globalToLocal: function (pt) {\n    var transforms = [];\n    transforms.push(this.finalTransform);\n    var flag = true;\n    var comp = this.comp;\n    while (flag) {\n      if (comp.finalTransform) {\n        if (comp.data.hasMask) {\n          transforms.splice(0, 0, comp.finalTransform);\n        }\n        comp = comp.comp;\n      } else {\n        flag = false;\n      }\n    }\n    var i;\n    var len = transforms.length;\n    var ptNew;\n    for (i = 0; i < len; i += 1) {\n      ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\n      // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\n      pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\n    }\n    return pt;\n  },\n  mHelper: new Matrix(),\n};\n\nfunction MaskElement(data, element, globalData) {\n  this.data = data;\n  this.element = element;\n  this.globalData = globalData;\n  this.storedData = [];\n  this.masksProperties = this.data.masksProperties || [];\n  this.maskElement = null;\n  var defs = this.globalData.defs;\n  var i;\n  var len = this.masksProperties ? this.masksProperties.length : 0;\n  this.viewData = createSizedArray(len);\n  this.solidPath = '';\n\n  var path;\n  var properties = this.masksProperties;\n  var count = 0;\n  var currentMasks = [];\n  var j;\n  var jLen;\n  var layerId = createElementID();\n  var rect;\n  var expansor;\n  var feMorph;\n  var x;\n  var maskType = 'clipPath';\n  var maskRef = 'clip-path';\n  for (i = 0; i < len; i += 1) {\n    if ((properties[i].mode !== 'a' && properties[i].mode !== 'n') || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\n      maskType = 'mask';\n      maskRef = 'mask';\n    }\n\n    if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\n      rect = createNS('rect');\n      rect.setAttribute('fill', '#ffffff');\n      rect.setAttribute('width', this.element.comp.data.w || 0);\n      rect.setAttribute('height', this.element.comp.data.h || 0);\n      currentMasks.push(rect);\n    } else {\n      rect = null;\n    }\n\n    path = createNS('path');\n    if (properties[i].mode === 'n') {\n      // TODO move this to a factory or to a constructor\n      this.viewData[i] = {\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n        elem: path,\n        lastPath: '',\n      };\n      defs.appendChild(path);\n    } else {\n      count += 1;\n\n      path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\n      path.setAttribute('clip-rule', 'nonzero');\n      var filterID;\n\n      if (properties[i].x.k !== 0) {\n        maskType = 'mask';\n        maskRef = 'mask';\n        x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\n        filterID = createElementID();\n        expansor = createNS('filter');\n        expansor.setAttribute('id', filterID);\n        feMorph = createNS('feMorphology');\n        feMorph.setAttribute('operator', 'erode');\n        feMorph.setAttribute('in', 'SourceGraphic');\n        feMorph.setAttribute('radius', '0');\n        expansor.appendChild(feMorph);\n        defs.appendChild(expansor);\n        path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\n      } else {\n        feMorph = null;\n        x = null;\n      }\n\n      // TODO move this to a factory or to a constructor\n      this.storedData[i] = {\n        elem: path,\n        x: x,\n        expan: feMorph,\n        lastPath: '',\n        lastOperator: '',\n        filterId: filterID,\n        lastRadius: 0,\n      };\n      if (properties[i].mode === 'i') {\n        jLen = currentMasks.length;\n        var g = createNS('g');\n        for (j = 0; j < jLen; j += 1) {\n          g.appendChild(currentMasks[j]);\n        }\n        var mask = createNS('mask');\n        mask.setAttribute('mask-type', 'alpha');\n        mask.setAttribute('id', layerId + '_' + count);\n        mask.appendChild(path);\n        defs.appendChild(mask);\n        g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\n\n        currentMasks.length = 0;\n        currentMasks.push(g);\n      } else {\n        currentMasks.push(path);\n      }\n      if (properties[i].inv && !this.solidPath) {\n        this.solidPath = this.createLayerSolidPath();\n      }\n      // TODO move this to a factory or to a constructor\n      this.viewData[i] = {\n        elem: path,\n        lastPath: '',\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n        invRect: rect,\n      };\n      if (!this.viewData[i].prop.k) {\n        this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\n      }\n    }\n  }\n\n  this.maskElement = createNS(maskType);\n\n  len = currentMasks.length;\n  for (i = 0; i < len; i += 1) {\n    this.maskElement.appendChild(currentMasks[i]);\n  }\n\n  if (count > 0) {\n    this.maskElement.setAttribute('id', layerId);\n    this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\n    defs.appendChild(this.maskElement);\n  }\n  if (this.viewData.length) {\n    this.element.addRenderableComponent(this);\n  }\n}\n\nMaskElement.prototype.getMaskProperty = function (pos) {\n  return this.viewData[pos].prop;\n};\n\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\n  var finalMat = this.element.finalTransform.mat;\n  var i;\n  var len = this.masksProperties.length;\n  for (i = 0; i < len; i += 1) {\n    if (this.viewData[i].prop._mdf || isFirstFrame) {\n      this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\n    }\n    if (this.viewData[i].op._mdf || isFirstFrame) {\n      this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\n    }\n    if (this.masksProperties[i].mode !== 'n') {\n      if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\n        this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\n      }\n      if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\n        var feMorph = this.storedData[i].expan;\n        if (this.storedData[i].x.v < 0) {\n          if (this.storedData[i].lastOperator !== 'erode') {\n            this.storedData[i].lastOperator = 'erode';\n            this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\n          }\n          feMorph.setAttribute('radius', -this.storedData[i].x.v);\n        } else {\n          if (this.storedData[i].lastOperator !== 'dilate') {\n            this.storedData[i].lastOperator = 'dilate';\n            this.storedData[i].elem.setAttribute('filter', null);\n          }\n          this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\n        }\n      }\n    }\n  }\n};\n\nMaskElement.prototype.getMaskelement = function () {\n  return this.maskElement;\n};\n\nMaskElement.prototype.createLayerSolidPath = function () {\n  var path = 'M0,0 ';\n  path += ' h' + this.globalData.compSize.w;\n  path += ' v' + this.globalData.compSize.h;\n  path += ' h-' + this.globalData.compSize.w;\n  path += ' v-' + this.globalData.compSize.h + ' ';\n  return path;\n};\n\nMaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\n  var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n  var i;\n  var len;\n  len = pathNodes._length;\n  for (i = 1; i < len; i += 1) {\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\n  }\n  // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\n  if (pathNodes.c && len > 1) {\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n  }\n  // pathNodes.__renderedString = pathString;\n\n  if (viewData.lastPath !== pathString) {\n    var pathShapeValue = '';\n    if (viewData.elem) {\n      if (pathNodes.c) {\n        pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\n      }\n      viewData.elem.setAttribute('d', pathShapeValue);\n    }\n    viewData.lastPath = pathString;\n  }\n};\n\nMaskElement.prototype.destroy = function () {\n  this.element = null;\n  this.globalData = null;\n  this.maskElement = null;\n  this.data = null;\n  this.masksProperties = null;\n};\n\nconst filtersFactory = (function () {\n  var ob = {};\n  ob.createFilter = createFilter;\n  ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\n\n  function createFilter(filId, skipCoordinates) {\n    var fil = createNS('filter');\n    fil.setAttribute('id', filId);\n    if (skipCoordinates !== true) {\n      fil.setAttribute('filterUnits', 'objectBoundingBox');\n      fil.setAttribute('x', '0%');\n      fil.setAttribute('y', '0%');\n      fil.setAttribute('width', '100%');\n      fil.setAttribute('height', '100%');\n    }\n    return fil;\n  }\n\n  function createAlphaToLuminanceFilter() {\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n    feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\n    return feColorMatrix;\n  }\n\n  return ob;\n}());\n\nconst featureSupport = (function () {\n  var ob = {\n    maskType: true,\n  };\n  if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\n    ob.maskType = false;\n  }\n  return ob;\n}());\n\nvar registeredEffects = {};\nvar idPrefix = 'filter_result_';\n\nfunction SVGEffects(elem) {\n  var i;\n  var source = 'SourceGraphic';\n  var len = elem.data.ef ? elem.data.ef.length : 0;\n  var filId = createElementID();\n  var fil = filtersFactory.createFilter(filId, true);\n  var count = 0;\n  this.filters = [];\n  var filterManager;\n  for (i = 0; i < len; i += 1) {\n    filterManager = null;\n    var type = elem.data.ef[i].ty;\n    if (registeredEffects[type]) {\n      var Effect = registeredEffects[type].effect;\n      filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\n      source = idPrefix + count;\n      if (registeredEffects[type].countsAsEffect) {\n        count += 1;\n      }\n    }\n    if (filterManager) {\n      this.filters.push(filterManager);\n    }\n  }\n  if (count) {\n    elem.globalData.defs.appendChild(fil);\n    elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n  }\n  if (this.filters.length) {\n    elem.addRenderableComponent(this);\n  }\n}\n\nSVGEffects.prototype.renderFrame = function (_isFirstFrame) {\n  var i;\n  var len = this.filters.length;\n  for (i = 0; i < len; i += 1) {\n    this.filters[i].renderFrame(_isFirstFrame);\n  }\n};\n\nfunction registerEffect(id, effect, countsAsEffect) {\n  registeredEffects[id] = {\n    effect,\n    countsAsEffect,\n  };\n}\n\nfunction SVGBaseElement() {\n}\n\nSVGBaseElement.prototype = {\n  initRendererElement: function () {\n    this.layerElement = createNS('g');\n  },\n  createContainerElements: function () {\n    this.matteElement = createNS('g');\n    this.transformedElement = this.layerElement;\n    this.maskedElement = this.layerElement;\n    this._sizeChanged = false;\n    var layerElementParent = null;\n    // If this layer acts as a mask for the following layer\n    var filId;\n    var fil;\n    var gg;\n    if (this.data.td) {\n      if (this.data.td == 3 || this.data.td == 1) { // eslint-disable-line eqeqeq\n        var masker = createNS('mask');\n        masker.setAttribute('id', this.layerId);\n        masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha'); // eslint-disable-line eqeqeq\n        masker.appendChild(this.layerElement);\n        layerElementParent = masker;\n        this.globalData.defs.appendChild(masker);\n        // This is only for IE and Edge when mask if of type alpha\n        if (!featureSupport.maskType && this.data.td == 1) { // eslint-disable-line eqeqeq\n          masker.setAttribute('mask-type', 'luminance');\n          filId = createElementID();\n          fil = filtersFactory.createFilter(filId);\n          this.globalData.defs.appendChild(fil);\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n          gg = createNS('g');\n          gg.appendChild(this.layerElement);\n          layerElementParent = gg;\n          masker.appendChild(gg);\n          gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n        }\n      } else if (this.data.td == 2) { // eslint-disable-line eqeqeq\n        var maskGroup = createNS('mask');\n        maskGroup.setAttribute('id', this.layerId);\n        maskGroup.setAttribute('mask-type', 'alpha');\n        var maskGrouper = createNS('g');\n        maskGroup.appendChild(maskGrouper);\n        filId = createElementID();\n        fil = filtersFactory.createFilter(filId);\n        /// /\n\n        // This solution doesn't work on Android when meta tag with viewport attribute is set\n        /* var feColorMatrix = createNS('feColorMatrix');\n                feColorMatrix.setAttribute('type', 'matrix');\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\n                fil.appendChild(feColorMatrix); */\n        /// /\n        var feCTr = createNS('feComponentTransfer');\n        feCTr.setAttribute('in', 'SourceGraphic');\n        fil.appendChild(feCTr);\n        var feFunc = createNS('feFuncA');\n        feFunc.setAttribute('type', 'table');\n        feFunc.setAttribute('tableValues', '1.0 0.0');\n        feCTr.appendChild(feFunc);\n        /// /\n        this.globalData.defs.appendChild(fil);\n        var alphaRect = createNS('rect');\n        alphaRect.setAttribute('width', this.comp.data.w);\n        alphaRect.setAttribute('height', this.comp.data.h);\n        alphaRect.setAttribute('x', '0');\n        alphaRect.setAttribute('y', '0');\n        alphaRect.setAttribute('fill', '#ffffff');\n        alphaRect.setAttribute('opacity', '0');\n        maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n        maskGrouper.appendChild(alphaRect);\n        maskGrouper.appendChild(this.layerElement);\n        layerElementParent = maskGrouper;\n        if (!featureSupport.maskType) {\n          maskGroup.setAttribute('mask-type', 'luminance');\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n          gg = createNS('g');\n          maskGrouper.appendChild(alphaRect);\n          gg.appendChild(this.layerElement);\n          layerElementParent = gg;\n          maskGrouper.appendChild(gg);\n        }\n        this.globalData.defs.appendChild(maskGroup);\n      }\n    } else if (this.data.tt) {\n      this.matteElement.appendChild(this.layerElement);\n      layerElementParent = this.matteElement;\n      this.baseElement = this.matteElement;\n    } else {\n      this.baseElement = this.layerElement;\n    }\n    if (this.data.ln) {\n      this.layerElement.setAttribute('id', this.data.ln);\n    }\n    if (this.data.cl) {\n      this.layerElement.setAttribute('class', this.data.cl);\n    }\n    // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\n    if (this.data.ty === 0 && !this.data.hd) {\n      var cp = createNS('clipPath');\n      var pt = createNS('path');\n      pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\n      var clipId = createElementID();\n      cp.setAttribute('id', clipId);\n      cp.appendChild(pt);\n      this.globalData.defs.appendChild(cp);\n\n      if (this.checkMasks()) {\n        var cpGroup = createNS('g');\n        cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n        cpGroup.appendChild(this.layerElement);\n        this.transformedElement = cpGroup;\n        if (layerElementParent) {\n          layerElementParent.appendChild(this.transformedElement);\n        } else {\n          this.baseElement = this.transformedElement;\n        }\n      } else {\n        this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n      }\n    }\n    if (this.data.bm !== 0) {\n      this.setBlendMode();\n    }\n  },\n  renderElement: function () {\n    if (this.finalTransform._matMdf) {\n      this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\n    }\n    if (this.finalTransform._opMdf) {\n      this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\n    }\n  },\n  destroyBaseElement: function () {\n    this.layerElement = null;\n    this.matteElement = null;\n    this.maskManager.destroy();\n  },\n  getBaseElement: function () {\n    if (this.data.hd) {\n      return null;\n    }\n    return this.baseElement;\n  },\n  createRenderableComponents: function () {\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\n    this.renderableEffectsManager = new SVGEffects(this);\n  },\n  setMatte: function (id) {\n    if (!this.matteElement) {\n      return;\n    }\n    this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n  },\n};\n\n/**\n * @file\n * Handles AE's layer parenting property.\n *\n */\n\nfunction HierarchyElement() {}\n\nHierarchyElement.prototype = {\n  /**\n     * @function\n     * Initializes hierarchy properties\n     *\n     */\n  initHierarchy: function () {\n    // element's parent list\n    this.hierarchy = [];\n    // if element is parent of another layer _isParent will be true\n    this._isParent = false;\n    this.checkParenting();\n  },\n  /**\n     * @function\n     * Sets layer's hierarchy.\n     * @param {array} hierarch\n     * layer's parent list\n     *\n     */\n  setHierarchy: function (hierarchy) {\n    this.hierarchy = hierarchy;\n  },\n  /**\n     * @function\n     * Sets layer as parent.\n     *\n     */\n  setAsParent: function () {\n    this._isParent = true;\n  },\n  /**\n     * @function\n     * Searches layer's parenting chain\n     *\n     */\n  checkParenting: function () {\n    if (this.data.parent !== undefined) {\n      this.comp.buildElementParenting(this, this.data.parent, []);\n    }\n  },\n};\n\nfunction RenderableDOMElement() {}\n\n(function () {\n  var _prototype = {\n    initElement: function (data, globalData, comp) {\n      this.initFrame();\n      this.initBaseData(data, globalData, comp);\n      this.initTransform(data, globalData, comp);\n      this.initHierarchy();\n      this.initRenderable();\n      this.initRendererElement();\n      this.createContainerElements();\n      this.createRenderableComponents();\n      this.createContent();\n      this.hide();\n    },\n    hide: function () {\n      // console.log('HIDE', this);\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n        var elem = this.baseElement || this.layerElement;\n        elem.style.display = 'none';\n        this.hidden = true;\n      }\n    },\n    show: function () {\n      // console.log('SHOW', this);\n      if (this.isInRange && !this.isTransparent) {\n        if (!this.data.hd) {\n          var elem = this.baseElement || this.layerElement;\n          elem.style.display = 'block';\n        }\n        this.hidden = false;\n        this._isFirstFrame = true;\n      }\n    },\n    renderFrame: function () {\n      // If it is exported as hidden (data.hd === true) no need to render\n      // If it is not visible no need to render\n      if (this.data.hd || this.hidden) {\n        return;\n      }\n      this.renderTransform();\n      this.renderRenderable();\n      this.renderElement();\n      this.renderInnerContent();\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    renderInnerContent: function () {},\n    prepareFrame: function (num) {\n      this._mdf = false;\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n      this.checkTransparency();\n    },\n    destroy: function () {\n      this.innerElem = null;\n      this.destroyBaseElement();\n    },\n  };\n  extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\n}());\n\nfunction IImageElement(data, globalData, comp) {\n  this.assetData = globalData.getAssetData(data.refId);\n  this.initElement(data, globalData, comp);\n  this.sourceRect = {\n    top: 0, left: 0, width: this.assetData.w, height: this.assetData.h,\n  };\n}\n\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\n\nIImageElement.prototype.createContent = function () {\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\n\n  this.innerElem = createNS('image');\n  this.innerElem.setAttribute('width', this.assetData.w + 'px');\n  this.innerElem.setAttribute('height', this.assetData.h + 'px');\n  this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\n  this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n\n  this.layerElement.appendChild(this.innerElem);\n};\n\nIImageElement.prototype.sourceRectAtTime = function () {\n  return this.sourceRect;\n};\n\nfunction ProcessedElement(element, position) {\n  this.elem = element;\n  this.pos = position;\n}\n\nfunction IShapeElement() {\n}\n\nIShapeElement.prototype = {\n  addShapeToModifiers: function (data) {\n    var i;\n    var len = this.shapeModifiers.length;\n    for (i = 0; i < len; i += 1) {\n      this.shapeModifiers[i].addShape(data);\n    }\n  },\n  isShapeInAnimatedModifiers: function (data) {\n    var i = 0;\n    var len = this.shapeModifiers.length;\n    while (i < len) {\n      if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\n        return true;\n      }\n    }\n    return false;\n  },\n  renderModifiers: function () {\n    if (!this.shapeModifiers.length) {\n      return;\n    }\n    var i;\n    var len = this.shapes.length;\n    for (i = 0; i < len; i += 1) {\n      this.shapes[i].sh.reset();\n    }\n\n    len = this.shapeModifiers.length;\n    var shouldBreakProcess;\n    for (i = len - 1; i >= 0; i -= 1) {\n      shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\n      // workaround to fix cases where a repeater resets the shape so the following processes get called twice\n      // TODO: find a better solution for this\n      if (shouldBreakProcess) {\n        break;\n      }\n    }\n  },\n\n  searchProcessedElement: function (elem) {\n    var elements = this.processedElements;\n    var i = 0;\n    var len = elements.length;\n    while (i < len) {\n      if (elements[i].elem === elem) {\n        return elements[i].pos;\n      }\n      i += 1;\n    }\n    return 0;\n  },\n  addProcessedElement: function (elem, pos) {\n    var elements = this.processedElements;\n    var i = elements.length;\n    while (i) {\n      i -= 1;\n      if (elements[i].elem === elem) {\n        elements[i].pos = pos;\n        return;\n      }\n    }\n    elements.push(new ProcessedElement(elem, pos));\n  },\n  prepareFrame: function (num) {\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n  },\n};\n\nconst lineCapEnum = {\n  1: 'butt',\n  2: 'round',\n  3: 'square',\n};\n\nconst lineJoinEnum = {\n  1: 'miter',\n  2: 'round',\n  3: 'bevel',\n};\n\nfunction SVGShapeData(transformers, level, shape) {\n  this.caches = [];\n  this.styles = [];\n  this.transformers = transformers;\n  this.lStr = '';\n  this.sh = shape;\n  this.lvl = level;\n  // TODO find if there are some cases where _isAnimated can be false.\n  // For now, since shapes add up with other shapes. They have to be calculated every time.\n  // One way of finding out is checking if all styles associated to this shape depend only of this shape\n  this._isAnimated = !!shape.k;\n  // TODO: commenting this for now since all shapes are animated\n  var i = 0;\n  var len = transformers.length;\n  while (i < len) {\n    if (transformers[i].mProps.dynamicProperties.length) {\n      this._isAnimated = true;\n      break;\n    }\n    i += 1;\n  }\n}\n\nSVGShapeData.prototype.setAsAnimated = function () {\n  this._isAnimated = true;\n};\n\nfunction SVGStyleData(data, level) {\n  this.data = data;\n  this.type = data.ty;\n  this.d = '';\n  this.lvl = level;\n  this._mdf = false;\n  this.closed = data.hd === true;\n  this.pElem = createNS('path');\n  this.msElem = null;\n}\n\nSVGStyleData.prototype.reset = function () {\n  this.d = '';\n  this._mdf = false;\n};\n\nfunction DashProperty(elem, data, renderer, container) {\n  this.elem = elem;\n  this.frameId = -1;\n  this.dataProps = createSizedArray(data.length);\n  this.renderer = renderer;\n  this.k = false;\n  this.dashStr = '';\n  this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\n  this.dashoffset = createTypedArray('float32', 1);\n  this.initDynamicPropertyContainer(container);\n  var i;\n  var len = data.length || 0;\n  var prop;\n  for (i = 0; i < len; i += 1) {\n    prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\n    this.k = prop.k || this.k;\n    this.dataProps[i] = { n: data[i].n, p: prop };\n  }\n  if (!this.k) {\n    this.getValue(true);\n  }\n  this._isAnimated = this.k;\n}\n\nDashProperty.prototype.getValue = function (forceRender) {\n  if (this.elem.globalData.frameId === this.frameId && !forceRender) {\n    return;\n  }\n  this.frameId = this.elem.globalData.frameId;\n  this.iterateDynamicProperties();\n  this._mdf = this._mdf || forceRender;\n  if (this._mdf) {\n    var i = 0;\n    var len = this.dataProps.length;\n    if (this.renderer === 'svg') {\n      this.dashStr = '';\n    }\n    for (i = 0; i < len; i += 1) {\n      if (this.dataProps[i].n !== 'o') {\n        if (this.renderer === 'svg') {\n          this.dashStr += ' ' + this.dataProps[i].p.v;\n        } else {\n          this.dashArray[i] = this.dataProps[i].p.v;\n        }\n      } else {\n        this.dashoffset[0] = this.dataProps[i].p.v;\n      }\n    }\n  }\n};\nextendPrototype([DynamicPropertyContainer], DashProperty);\n\nfunction SVGStrokeStyleData(elem, data, styleOb) {\n  this.initDynamicPropertyContainer(elem);\n  this.getValue = this.iterateDynamicProperties;\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n  this.style = styleOb;\n  this._isAnimated = !!this._isAnimated;\n}\n\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n\nfunction SVGFillStyleData(elem, data, styleOb) {\n  this.initDynamicPropertyContainer(elem);\n  this.getValue = this.iterateDynamicProperties;\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n  this.style = styleOb;\n}\n\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n\nfunction SVGNoStyleData(elem, data, styleOb) {\n  this.initDynamicPropertyContainer(elem);\n  this.getValue = this.iterateDynamicProperties;\n  this.style = styleOb;\n}\n\nextendPrototype([DynamicPropertyContainer], SVGNoStyleData);\n\nfunction GradientProperty(elem, data, container) {\n  this.data = data;\n  this.c = createTypedArray('uint8c', data.p * 4);\n  var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p * 4) : data.k.k.length - data.p * 4;\n  this.o = createTypedArray('float32', cLength);\n  this._cmdf = false;\n  this._omdf = false;\n  this._collapsable = this.checkCollapsable();\n  this._hasOpacity = cLength;\n  this.initDynamicPropertyContainer(container);\n  this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\n  this.k = this.prop.k;\n  this.getValue(true);\n}\n\nGradientProperty.prototype.comparePoints = function (values, points) {\n  var i = 0;\n  var len = this.o.length / 2;\n  var diff;\n  while (i < len) {\n    diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\n    if (diff > 0.01) {\n      return false;\n    }\n    i += 1;\n  }\n  return true;\n};\n\nGradientProperty.prototype.checkCollapsable = function () {\n  if (this.o.length / 2 !== this.c.length / 4) {\n    return false;\n  }\n  if (this.data.k.k[0].s) {\n    var i = 0;\n    var len = this.data.k.k.length;\n    while (i < len) {\n      if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\n        return false;\n      }\n      i += 1;\n    }\n  } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\n    return false;\n  }\n  return true;\n};\n\nGradientProperty.prototype.getValue = function (forceRender) {\n  this.prop.getValue();\n  this._mdf = false;\n  this._cmdf = false;\n  this._omdf = false;\n  if (this.prop._mdf || forceRender) {\n    var i;\n    var len = this.data.p * 4;\n    var mult;\n    var val;\n    for (i = 0; i < len; i += 1) {\n      mult = i % 4 === 0 ? 100 : 255;\n      val = Math.round(this.prop.v[i] * mult);\n      if (this.c[i] !== val) {\n        this.c[i] = val;\n        this._cmdf = !forceRender;\n      }\n    }\n    if (this.o.length) {\n      len = this.prop.v.length;\n      for (i = this.data.p * 4; i < len; i += 1) {\n        mult = i % 2 === 0 ? 100 : 1;\n        val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\n        if (this.o[i - this.data.p * 4] !== val) {\n          this.o[i - this.data.p * 4] = val;\n          this._omdf = !forceRender;\n        }\n      }\n    }\n    this._mdf = !forceRender;\n  }\n};\n\nextendPrototype([DynamicPropertyContainer], GradientProperty);\n\nfunction SVGGradientFillStyleData(elem, data, styleOb) {\n  this.initDynamicPropertyContainer(elem);\n  this.getValue = this.iterateDynamicProperties;\n  this.initGradientData(elem, data, styleOb);\n}\n\nSVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n  this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\n  this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\n  this.h = PropertyFactory.getProp(elem, data.h || { k: 0 }, 0, 0.01, this);\n  this.a = PropertyFactory.getProp(elem, data.a || { k: 0 }, 0, degToRads, this);\n  this.g = new GradientProperty(elem, data.g, this);\n  this.style = styleOb;\n  this.stops = [];\n  this.setGradientData(styleOb.pElem, data);\n  this.setGradientOpacity(data, styleOb);\n  this._isAnimated = !!this._isAnimated;\n};\n\nSVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\n  var gradientId = createElementID();\n  var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n  gfill.setAttribute('id', gradientId);\n  gfill.setAttribute('spreadMethod', 'pad');\n  gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\n  var stops = [];\n  var stop;\n  var j;\n  var jLen;\n  jLen = data.g.p * 4;\n  for (j = 0; j < jLen; j += 4) {\n    stop = createNS('stop');\n    gfill.appendChild(stop);\n    stops.push(stop);\n  }\n  pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\n  this.gf = gfill;\n  this.cst = stops;\n};\n\nSVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\n  if (this.g._hasOpacity && !this.g._collapsable) {\n    var stop;\n    var j;\n    var jLen;\n    var mask = createNS('mask');\n    var maskElement = createNS('path');\n    mask.appendChild(maskElement);\n    var opacityId = createElementID();\n    var maskId = createElementID();\n    mask.setAttribute('id', maskId);\n    var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n    opFill.setAttribute('id', opacityId);\n    opFill.setAttribute('spreadMethod', 'pad');\n    opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\n    jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\n    var stops = this.stops;\n    for (j = data.g.p * 4; j < jLen; j += 2) {\n      stop = createNS('stop');\n      stop.setAttribute('stop-color', 'rgb(255,255,255)');\n      opFill.appendChild(stop);\n      stops.push(stop);\n    }\n    maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\n    if (data.ty === 'gs') {\n      maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n      maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n      if (data.lj === 1) {\n        maskElement.setAttribute('stroke-miterlimit', data.ml);\n      }\n    }\n    this.of = opFill;\n    this.ms = mask;\n    this.ost = stops;\n    this.maskId = maskId;\n    styleOb.msElem = maskElement;\n  }\n};\n\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n\nfunction SVGGradientStrokeStyleData(elem, data, styleOb) {\n  this.initDynamicPropertyContainer(elem);\n  this.getValue = this.iterateDynamicProperties;\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n  this.initGradientData(elem, data, styleOb);\n  this._isAnimated = !!this._isAnimated;\n}\n\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n\nfunction ShapeGroupData() {\n  this.it = [];\n  this.prevViewData = [];\n  this.gr = createNS('g');\n}\n\nfunction SVGTransformData(mProps, op, container) {\n  this.transform = {\n    mProps: mProps,\n    op: op,\n    container: container,\n  };\n  this.elements = [];\n  this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\n}\n\nconst buildShapeString = function (pathNodes, length, closed, mat) {\n  if (length === 0) {\n    return '';\n  }\n  var _o = pathNodes.o;\n  var _i = pathNodes.i;\n  var _v = pathNodes.v;\n  var i;\n  var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n  for (i = 1; i < length; i += 1) {\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\n  }\n  if (closed && length) {\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n    shapeString += 'z';\n  }\n  return shapeString;\n};\n\nconst SVGElementsRenderer = (function () {\n  var _identityMatrix = new Matrix();\n  var _matrixHelper = new Matrix();\n\n  var ob = {\n    createRenderFunction: createRenderFunction,\n  };\n\n  function createRenderFunction(data) {\n    switch (data.ty) {\n      case 'fl':\n        return renderFill;\n      case 'gf':\n        return renderGradient;\n      case 'gs':\n        return renderGradientStroke;\n      case 'st':\n        return renderStroke;\n      case 'sh':\n      case 'el':\n      case 'rc':\n      case 'sr':\n        return renderPath;\n      case 'tr':\n        return renderContentTransform;\n      case 'no':\n        return renderNoop;\n      default:\n        return null;\n    }\n  }\n\n  function renderContentTransform(styleData, itemData, isFirstFrame) {\n    if (isFirstFrame || itemData.transform.op._mdf) {\n      itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\n    }\n    if (isFirstFrame || itemData.transform.mProps._mdf) {\n      itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\n    }\n  }\n\n  function renderNoop() {\n\n  }\n\n  function renderPath(styleData, itemData, isFirstFrame) {\n    var j;\n    var jLen;\n    var pathStringTransformed;\n    var redraw;\n    var pathNodes;\n    var l;\n    var lLen = itemData.styles.length;\n    var lvl = itemData.lvl;\n    var paths;\n    var mat;\n    var props;\n    var iterations;\n    var k;\n    for (l = 0; l < lLen; l += 1) {\n      redraw = itemData.sh._mdf || isFirstFrame;\n      if (itemData.styles[l].lvl < lvl) {\n        mat = _matrixHelper.reset();\n        iterations = lvl - itemData.styles[l].lvl;\n        k = itemData.transformers.length - 1;\n        while (!redraw && iterations > 0) {\n          redraw = itemData.transformers[k].mProps._mdf || redraw;\n          iterations -= 1;\n          k -= 1;\n        }\n        if (redraw) {\n          iterations = lvl - itemData.styles[l].lvl;\n          k = itemData.transformers.length - 1;\n          while (iterations > 0) {\n            props = itemData.transformers[k].mProps.v.props;\n            mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n            iterations -= 1;\n            k -= 1;\n          }\n        }\n      } else {\n        mat = _identityMatrix;\n      }\n      paths = itemData.sh.paths;\n      jLen = paths._length;\n      if (redraw) {\n        pathStringTransformed = '';\n        for (j = 0; j < jLen; j += 1) {\n          pathNodes = paths.shapes[j];\n          if (pathNodes && pathNodes._length) {\n            pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\n          }\n        }\n        itemData.caches[l] = pathStringTransformed;\n      } else {\n        pathStringTransformed = itemData.caches[l];\n      }\n      itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\n      itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\n    }\n  }\n\n  function renderFill(styleData, itemData, isFirstFrame) {\n    var styleElem = itemData.style;\n\n    if (itemData.c._mdf || isFirstFrame) {\n      styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n    }\n    if (itemData.o._mdf || isFirstFrame) {\n      styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\n    }\n  }\n\n  function renderGradientStroke(styleData, itemData, isFirstFrame) {\n    renderGradient(styleData, itemData, isFirstFrame);\n    renderStroke(styleData, itemData, isFirstFrame);\n  }\n\n  function renderGradient(styleData, itemData, isFirstFrame) {\n    var gfill = itemData.gf;\n    var hasOpacity = itemData.g._hasOpacity;\n    var pt1 = itemData.s.v;\n    var pt2 = itemData.e.v;\n\n    if (itemData.o._mdf || isFirstFrame) {\n      var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\n      itemData.style.pElem.setAttribute(attr, itemData.o.v);\n    }\n    if (itemData.s._mdf || isFirstFrame) {\n      var attr1 = styleData.t === 1 ? 'x1' : 'cx';\n      var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\n      gfill.setAttribute(attr1, pt1[0]);\n      gfill.setAttribute(attr2, pt1[1]);\n      if (hasOpacity && !itemData.g._collapsable) {\n        itemData.of.setAttribute(attr1, pt1[0]);\n        itemData.of.setAttribute(attr2, pt1[1]);\n      }\n    }\n    var stops;\n    var i;\n    var len;\n    var stop;\n    if (itemData.g._cmdf || isFirstFrame) {\n      stops = itemData.cst;\n      var cValues = itemData.g.c;\n      len = stops.length;\n      for (i = 0; i < len; i += 1) {\n        stop = stops[i];\n        stop.setAttribute('offset', cValues[i * 4] + '%');\n        stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\n      }\n    }\n    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\n      var oValues = itemData.g.o;\n      if (itemData.g._collapsable) {\n        stops = itemData.cst;\n      } else {\n        stops = itemData.ost;\n      }\n      len = stops.length;\n      for (i = 0; i < len; i += 1) {\n        stop = stops[i];\n        if (!itemData.g._collapsable) {\n          stop.setAttribute('offset', oValues[i * 2] + '%');\n        }\n        stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\n      }\n    }\n    if (styleData.t === 1) {\n      if (itemData.e._mdf || isFirstFrame) {\n        gfill.setAttribute('x2', pt2[0]);\n        gfill.setAttribute('y2', pt2[1]);\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute('x2', pt2[0]);\n          itemData.of.setAttribute('y2', pt2[1]);\n        }\n      }\n    } else {\n      var rad;\n      if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\n        rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n        gfill.setAttribute('r', rad);\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute('r', rad);\n        }\n      }\n      if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\n        if (!rad) {\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n        }\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n\n        var percent = itemData.h.v;\n        if (percent >= 1) {\n          percent = 0.99;\n        } else if (percent <= -1) {\n          percent = -0.99;\n        }\n        var dist = rad * percent;\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n        gfill.setAttribute('fx', x);\n        gfill.setAttribute('fy', y);\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute('fx', x);\n          itemData.of.setAttribute('fy', y);\n        }\n      }\n      // gfill.setAttribute('fy','200');\n    }\n  }\n\n  function renderStroke(styleData, itemData, isFirstFrame) {\n    var styleElem = itemData.style;\n    var d = itemData.d;\n    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\n      styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\n      styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\n    }\n    if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\n      styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n    }\n    if (itemData.o._mdf || isFirstFrame) {\n      styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\n    }\n    if (itemData.w._mdf || isFirstFrame) {\n      styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\n      if (styleElem.msElem) {\n        styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\n      }\n    }\n  }\n\n  return ob;\n}());\n\nfunction SVGShapeElement(data, globalData, comp) {\n  // List of drawable elements\n  this.shapes = [];\n  // Full shape data\n  this.shapesData = data.shapes;\n  // List of styles that will be applied to shapes\n  this.stylesList = [];\n  // List of modifiers that will be applied to shapes\n  this.shapeModifiers = [];\n  // List of items in shape tree\n  this.itemsData = [];\n  // List of items in previous shape tree\n  this.processedElements = [];\n  // List of animated components\n  this.animatedContents = [];\n  this.initElement(data, globalData, comp);\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n  // List of elements that have been created\n  this.prevViewData = [];\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n}\n\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\n\nSVGShapeElement.prototype.initSecondaryElement = function () {\n};\n\nSVGShapeElement.prototype.identityMatrix = new Matrix();\n\nSVGShapeElement.prototype.buildExpressionInterface = function () {};\n\nSVGShapeElement.prototype.createContent = function () {\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n  this.filterUniqueShapes();\n};\n\n/*\nThis method searches for multiple shapes that affect a single element and one of them is animated\n*/\nSVGShapeElement.prototype.filterUniqueShapes = function () {\n  var i;\n  var len = this.shapes.length;\n  var shape;\n  var j;\n  var jLen = this.stylesList.length;\n  var style;\n  var tempShapes = [];\n  var areAnimated = false;\n  for (j = 0; j < jLen; j += 1) {\n    style = this.stylesList[j];\n    areAnimated = false;\n    tempShapes.length = 0;\n    for (i = 0; i < len; i += 1) {\n      shape = this.shapes[i];\n      if (shape.styles.indexOf(style) !== -1) {\n        tempShapes.push(shape);\n        areAnimated = shape._isAnimated || areAnimated;\n      }\n    }\n    if (tempShapes.length > 1 && areAnimated) {\n      this.setShapesAsAnimated(tempShapes);\n    }\n  }\n};\n\nSVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\n  var i;\n  var len = shapes.length;\n  for (i = 0; i < len; i += 1) {\n    shapes[i].setAsAnimated();\n  }\n};\n\nSVGShapeElement.prototype.createStyleElement = function (data, level) {\n  // TODO: prevent drawing of hidden styles\n  var elementData;\n  var styleOb = new SVGStyleData(data, level);\n\n  var pathElement = styleOb.pElem;\n  if (data.ty === 'st') {\n    elementData = new SVGStrokeStyleData(this, data, styleOb);\n  } else if (data.ty === 'fl') {\n    elementData = new SVGFillStyleData(this, data, styleOb);\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\n    var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\n    elementData = new GradientConstructor(this, data, styleOb);\n    this.globalData.defs.appendChild(elementData.gf);\n    if (elementData.maskId) {\n      this.globalData.defs.appendChild(elementData.ms);\n      this.globalData.defs.appendChild(elementData.of);\n      pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\n    }\n  } else if (data.ty === 'no') {\n    elementData = new SVGNoStyleData(this, data, styleOb);\n  }\n\n  if (data.ty === 'st' || data.ty === 'gs') {\n    pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n    pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n    pathElement.setAttribute('fill-opacity', '0');\n    if (data.lj === 1) {\n      pathElement.setAttribute('stroke-miterlimit', data.ml);\n    }\n  }\n\n  if (data.r === 2) {\n    pathElement.setAttribute('fill-rule', 'evenodd');\n  }\n\n  if (data.ln) {\n    pathElement.setAttribute('id', data.ln);\n  }\n  if (data.cl) {\n    pathElement.setAttribute('class', data.cl);\n  }\n  if (data.bm) {\n    pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\n  }\n  this.stylesList.push(styleOb);\n  this.addToAnimatedContents(data, elementData);\n  return elementData;\n};\n\nSVGShapeElement.prototype.createGroupElement = function (data) {\n  var elementData = new ShapeGroupData();\n  if (data.ln) {\n    elementData.gr.setAttribute('id', data.ln);\n  }\n  if (data.cl) {\n    elementData.gr.setAttribute('class', data.cl);\n  }\n  if (data.bm) {\n    elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\n  }\n  return elementData;\n};\n\nSVGShapeElement.prototype.createTransformElement = function (data, container) {\n  var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\n  var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\n  this.addToAnimatedContents(data, elementData);\n  return elementData;\n};\n\nSVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\n  var ty = 4;\n  if (data.ty === 'rc') {\n    ty = 5;\n  } else if (data.ty === 'el') {\n    ty = 6;\n  } else if (data.ty === 'sr') {\n    ty = 7;\n  }\n  var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\n  var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\n  this.shapes.push(elementData);\n  this.addShapeToModifiers(elementData);\n  this.addToAnimatedContents(data, elementData);\n  return elementData;\n};\n\nSVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\n  var i = 0;\n  var len = this.animatedContents.length;\n  while (i < len) {\n    if (this.animatedContents[i].element === element) {\n      return;\n    }\n    i += 1;\n  }\n  this.animatedContents.push({\n    fn: SVGElementsRenderer.createRenderFunction(data),\n    element: element,\n    data: data,\n  });\n};\n\nSVGShapeElement.prototype.setElementStyles = function (elementData) {\n  var arr = elementData.styles;\n  var j;\n  var jLen = this.stylesList.length;\n  for (j = 0; j < jLen; j += 1) {\n    if (!this.stylesList[j].closed) {\n      arr.push(this.stylesList[j]);\n    }\n  }\n};\n\nSVGShapeElement.prototype.reloadShapes = function () {\n  this._isFirstFrame = true;\n  var i;\n  var len = this.itemsData.length;\n  for (i = 0; i < len; i += 1) {\n    this.prevViewData[i] = this.itemsData[i];\n  }\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n  this.filterUniqueShapes();\n  len = this.dynamicProperties.length;\n  for (i = 0; i < len; i += 1) {\n    this.dynamicProperties[i].getValue();\n  }\n  this.renderModifiers();\n};\n\nSVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\n  var ownTransformers = [].concat(transformers);\n  var i;\n  var len = arr.length - 1;\n  var j;\n  var jLen;\n  var ownStyles = [];\n  var ownModifiers = [];\n  var currentTransform;\n  var modifier;\n  var processedPos;\n  for (i = len; i >= 0; i -= 1) {\n    processedPos = this.searchProcessedElement(arr[i]);\n    if (!processedPos) {\n      arr[i]._render = render;\n    } else {\n      itemsData[i] = prevViewData[processedPos - 1];\n    }\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\n      if (!processedPos) {\n        itemsData[i] = this.createStyleElement(arr[i], level);\n      } else {\n        itemsData[i].style.closed = false;\n      }\n      if (arr[i]._render) {\n        if (itemsData[i].style.pElem.parentNode !== container) {\n          container.appendChild(itemsData[i].style.pElem);\n        }\n      }\n      ownStyles.push(itemsData[i].style);\n    } else if (arr[i].ty === 'gr') {\n      if (!processedPos) {\n        itemsData[i] = this.createGroupElement(arr[i]);\n      } else {\n        jLen = itemsData[i].it.length;\n        for (j = 0; j < jLen; j += 1) {\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\n        }\n      }\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\n      if (arr[i]._render) {\n        if (itemsData[i].gr.parentNode !== container) {\n          container.appendChild(itemsData[i].gr);\n        }\n      }\n    } else if (arr[i].ty === 'tr') {\n      if (!processedPos) {\n        itemsData[i] = this.createTransformElement(arr[i], container);\n      }\n      currentTransform = itemsData[i].transform;\n      ownTransformers.push(currentTransform);\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n      if (!processedPos) {\n        itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\n      }\n      this.setElementStyles(itemsData[i]);\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb') {\n      if (!processedPos) {\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\n        modifier.init(this, arr[i]);\n        itemsData[i] = modifier;\n        this.shapeModifiers.push(modifier);\n      } else {\n        modifier = itemsData[i];\n        modifier.closed = false;\n      }\n      ownModifiers.push(modifier);\n    } else if (arr[i].ty === 'rp') {\n      if (!processedPos) {\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\n        itemsData[i] = modifier;\n        modifier.init(this, arr, i, itemsData);\n        this.shapeModifiers.push(modifier);\n        render = false;\n      } else {\n        modifier = itemsData[i];\n        modifier.closed = true;\n      }\n      ownModifiers.push(modifier);\n    }\n    this.addProcessedElement(arr[i], i + 1);\n  }\n  len = ownStyles.length;\n  for (i = 0; i < len; i += 1) {\n    ownStyles[i].closed = true;\n  }\n  len = ownModifiers.length;\n  for (i = 0; i < len; i += 1) {\n    ownModifiers[i].closed = true;\n  }\n};\n\nSVGShapeElement.prototype.renderInnerContent = function () {\n  this.renderModifiers();\n  var i;\n  var len = this.stylesList.length;\n  for (i = 0; i < len; i += 1) {\n    this.stylesList[i].reset();\n  }\n  this.renderShape();\n  for (i = 0; i < len; i += 1) {\n    if (this.stylesList[i]._mdf || this._isFirstFrame) {\n      if (this.stylesList[i].msElem) {\n        this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\n        // Adding M0 0 fixes same mask bug on all browsers\n        this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\n      }\n      this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\n    }\n  }\n};\n\nSVGShapeElement.prototype.renderShape = function () {\n  var i;\n  var len = this.animatedContents.length;\n  var animatedContent;\n  for (i = 0; i < len; i += 1) {\n    animatedContent = this.animatedContents[i];\n    if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\n      animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\n    }\n  }\n};\n\nSVGShapeElement.prototype.destroy = function () {\n  this.destroyBaseElement();\n  this.shapesData = null;\n  this.itemsData = null;\n};\n\nfunction LetterProps(o, sw, sc, fc, m, p) {\n  this.o = o;\n  this.sw = sw;\n  this.sc = sc;\n  this.fc = fc;\n  this.m = m;\n  this.p = p;\n  this._mdf = {\n    o: true,\n    sw: !!sw,\n    sc: !!sc,\n    fc: !!fc,\n    m: true,\n    p: true,\n  };\n}\n\nLetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\n  this._mdf.o = false;\n  this._mdf.sw = false;\n  this._mdf.sc = false;\n  this._mdf.fc = false;\n  this._mdf.m = false;\n  this._mdf.p = false;\n  var updated = false;\n\n  if (this.o !== o) {\n    this.o = o;\n    this._mdf.o = true;\n    updated = true;\n  }\n  if (this.sw !== sw) {\n    this.sw = sw;\n    this._mdf.sw = true;\n    updated = true;\n  }\n  if (this.sc !== sc) {\n    this.sc = sc;\n    this._mdf.sc = true;\n    updated = true;\n  }\n  if (this.fc !== fc) {\n    this.fc = fc;\n    this._mdf.fc = true;\n    updated = true;\n  }\n  if (this.m !== m) {\n    this.m = m;\n    this._mdf.m = true;\n    updated = true;\n  }\n  if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\n    this.p = p;\n    this._mdf.p = true;\n    updated = true;\n  }\n  return updated;\n};\n\nfunction TextProperty(elem, data) {\n  this._frameId = initialDefaultFrame;\n  this.pv = '';\n  this.v = '';\n  this.kf = false;\n  this._isFirstFrame = true;\n  this._mdf = false;\n  this.data = data;\n  this.elem = elem;\n  this.comp = this.elem.comp;\n  this.keysIndex = 0;\n  this.canResize = false;\n  this.minimumFontSize = 1;\n  this.effectsSequence = [];\n  this.currentData = {\n    ascent: 0,\n    boxWidth: this.defaultBoxWidth,\n    f: '',\n    fStyle: '',\n    fWeight: '',\n    fc: '',\n    j: '',\n    justifyOffset: '',\n    l: [],\n    lh: 0,\n    lineWidths: [],\n    ls: '',\n    of: '',\n    s: '',\n    sc: '',\n    sw: 0,\n    t: 0,\n    tr: 0,\n    sz: 0,\n    ps: null,\n    fillColorAnim: false,\n    strokeColorAnim: false,\n    strokeWidthAnim: false,\n    yOffset: 0,\n    finalSize: 0,\n    finalText: [],\n    finalLineHeight: 0,\n    __complete: false,\n\n  };\n  this.copyData(this.currentData, this.data.d.k[0].s);\n\n  if (!this.searchProperty()) {\n    this.completeTextData(this.currentData);\n  }\n}\n\nTextProperty.prototype.defaultBoxWidth = [0, 0];\n\nTextProperty.prototype.copyData = function (obj, data) {\n  for (var s in data) {\n    if (Object.prototype.hasOwnProperty.call(data, s)) {\n      obj[s] = data[s];\n    }\n  }\n  return obj;\n};\n\nTextProperty.prototype.setCurrentData = function (data) {\n  if (!data.__complete) {\n    this.completeTextData(data);\n  }\n  this.currentData = data;\n  this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\n  this._mdf = true;\n};\n\nTextProperty.prototype.searchProperty = function () {\n  return this.searchKeyframes();\n};\n\nTextProperty.prototype.searchKeyframes = function () {\n  this.kf = this.data.d.k.length > 1;\n  if (this.kf) {\n    this.addEffect(this.getKeyframeValue.bind(this));\n  }\n  return this.kf;\n};\n\nTextProperty.prototype.addEffect = function (effectFunction) {\n  this.effectsSequence.push(effectFunction);\n  this.elem.addDynamicProperty(this);\n};\n\nTextProperty.prototype.getValue = function (_finalValue) {\n  if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\n    return;\n  }\n  this.currentData.t = this.data.d.k[this.keysIndex].s.t;\n  var currentValue = this.currentData;\n  var currentIndex = this.keysIndex;\n  if (this.lock) {\n    this.setCurrentData(this.currentData);\n    return;\n  }\n  this.lock = true;\n  this._mdf = false;\n  var i; var\n    len = this.effectsSequence.length;\n  var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\n  for (i = 0; i < len; i += 1) {\n    // Checking if index changed to prevent creating a new object every time the expression updates.\n    if (currentIndex !== this.keysIndex) {\n      finalValue = this.effectsSequence[i](finalValue, finalValue.t);\n    } else {\n      finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\n    }\n  }\n  if (currentValue !== finalValue) {\n    this.setCurrentData(finalValue);\n  }\n  this.v = this.currentData;\n  this.pv = this.v;\n  this.lock = false;\n  this.frameId = this.elem.globalData.frameId;\n};\n\nTextProperty.prototype.getKeyframeValue = function () {\n  var textKeys = this.data.d.k;\n  var frameNum = this.elem.comp.renderedFrame;\n  var i = 0; var\n    len = textKeys.length;\n  while (i <= len - 1) {\n    if (i === len - 1 || textKeys[i + 1].t > frameNum) {\n      break;\n    }\n    i += 1;\n  }\n  if (this.keysIndex !== i) {\n    this.keysIndex = i;\n  }\n  return this.data.d.k[this.keysIndex].s;\n};\n\nTextProperty.prototype.buildFinalText = function (text) {\n  var charactersArray = [];\n  var i = 0;\n  var len = text.length;\n  var charCode;\n  var secondCharCode;\n  var shouldCombine = false;\n  while (i < len) {\n    charCode = text.charCodeAt(i);\n    if (FontManager.isCombinedCharacter(charCode)) {\n      charactersArray[charactersArray.length - 1] += text.charAt(i);\n    } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      secondCharCode = text.charCodeAt(i + 1);\n      if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\n        if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n          shouldCombine = false;\n        } else {\n          charactersArray.push(text.substr(i, 2));\n        }\n        i += 1;\n      } else {\n        charactersArray.push(text.charAt(i));\n      }\n    } else if (charCode > 0xDBFF) {\n      secondCharCode = text.charCodeAt(i + 1);\n      if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\n        shouldCombine = true;\n        charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n        i += 1;\n      } else {\n        charactersArray.push(text.charAt(i));\n      }\n    } else if (FontManager.isZeroWidthJoiner(charCode)) {\n      charactersArray[charactersArray.length - 1] += text.charAt(i);\n      shouldCombine = true;\n    } else {\n      charactersArray.push(text.charAt(i));\n    }\n    i += 1;\n  }\n  return charactersArray;\n};\n\nTextProperty.prototype.completeTextData = function (documentData) {\n  documentData.__complete = true;\n  var fontManager = this.elem.globalData.fontManager;\n  var data = this.data;\n  var letters = [];\n  var i; var\n    len;\n  var newLineFlag; var index = 0; var\n    val;\n  var anchorGrouping = data.m.g;\n  var currentSize = 0; var currentPos = 0; var currentLine = 0; var\n    lineWidths = [];\n  var lineWidth = 0;\n  var maxLineWidth = 0;\n  var j; var\n    jLen;\n  var fontData = fontManager.getFontByName(documentData.f);\n  var charData; var\n    cLength = 0;\n\n  var fontProps = getFontProperties(fontData);\n  documentData.fWeight = fontProps.weight;\n  documentData.fStyle = fontProps.style;\n  documentData.finalSize = documentData.s;\n  documentData.finalText = this.buildFinalText(documentData.t);\n  len = documentData.finalText.length;\n  documentData.finalLineHeight = documentData.lh;\n  var trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\n  var charCode;\n  if (documentData.sz) {\n    var flag = true;\n    var boxWidth = documentData.sz[0];\n    var boxHeight = documentData.sz[1];\n    var currentHeight; var\n      finalText;\n    while (flag) {\n      finalText = this.buildFinalText(documentData.t);\n      currentHeight = 0;\n      lineWidth = 0;\n      len = finalText.length;\n      trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\n      var lastSpaceIndex = -1;\n      for (i = 0; i < len; i += 1) {\n        charCode = finalText[i].charCodeAt(0);\n        newLineFlag = false;\n        if (finalText[i] === ' ') {\n          lastSpaceIndex = i;\n        } else if (charCode === 13 || charCode === 3) {\n          lineWidth = 0;\n          newLineFlag = true;\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n        }\n        if (fontManager.chars) {\n          charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\n          cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\n        } else {\n          // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\n          cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\n        }\n        if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\n          if (lastSpaceIndex === -1) {\n            len += 1;\n          } else {\n            i = lastSpaceIndex;\n          }\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n          finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\n          // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\n          lastSpaceIndex = -1;\n          lineWidth = 0;\n        } else {\n          lineWidth += cLength;\n          lineWidth += trackingOffset;\n        }\n      }\n      currentHeight += (fontData.ascent * documentData.finalSize) / 100;\n      if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\n        documentData.finalSize -= 1;\n        documentData.finalLineHeight = (documentData.finalSize * documentData.lh) / documentData.s;\n      } else {\n        documentData.finalText = finalText;\n        len = documentData.finalText.length;\n        flag = false;\n      }\n    }\n  }\n  lineWidth = -trackingOffset;\n  cLength = 0;\n  var uncollapsedSpaces = 0;\n  var currentChar;\n  for (i = 0; i < len; i += 1) {\n    newLineFlag = false;\n    currentChar = documentData.finalText[i];\n    charCode = currentChar.charCodeAt(0);\n    if (charCode === 13 || charCode === 3) {\n      uncollapsedSpaces = 0;\n      lineWidths.push(lineWidth);\n      maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n      lineWidth = -2 * trackingOffset;\n      val = '';\n      newLineFlag = true;\n      currentLine += 1;\n    } else {\n      val = currentChar;\n    }\n    if (fontManager.chars) {\n      charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\n      cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\n    } else {\n      // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\n      // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\n      cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\n    }\n\n    //\n    if (currentChar === ' ') {\n      uncollapsedSpaces += cLength + trackingOffset;\n    } else {\n      lineWidth += cLength + trackingOffset + uncollapsedSpaces;\n      uncollapsedSpaces = 0;\n    }\n    letters.push({\n      l: cLength, an: cLength, add: currentSize, n: newLineFlag, anIndexes: [], val: val, line: currentLine, animatorJustifyOffset: 0,\n    });\n    if (anchorGrouping == 2) { // eslint-disable-line eqeqeq\n      currentSize += cLength;\n      if (val === '' || val === ' ' || i === len - 1) {\n        if (val === '' || val === ' ') {\n          currentSize -= cLength;\n        }\n        while (currentPos <= i) {\n          letters[currentPos].an = currentSize;\n          letters[currentPos].ind = index;\n          letters[currentPos].extra = cLength;\n          currentPos += 1;\n        }\n        index += 1;\n        currentSize = 0;\n      }\n    } else if (anchorGrouping == 3) { // eslint-disable-line eqeqeq\n      currentSize += cLength;\n      if (val === '' || i === len - 1) {\n        if (val === '') {\n          currentSize -= cLength;\n        }\n        while (currentPos <= i) {\n          letters[currentPos].an = currentSize;\n          letters[currentPos].ind = index;\n          letters[currentPos].extra = cLength;\n          currentPos += 1;\n        }\n        currentSize = 0;\n        index += 1;\n      }\n    } else {\n      letters[index].ind = index;\n      letters[index].extra = 0;\n      index += 1;\n    }\n  }\n  documentData.l = letters;\n  maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n  lineWidths.push(lineWidth);\n  if (documentData.sz) {\n    documentData.boxWidth = documentData.sz[0];\n    documentData.justifyOffset = 0;\n  } else {\n    documentData.boxWidth = maxLineWidth;\n    switch (documentData.j) {\n      case 1:\n        documentData.justifyOffset = -documentData.boxWidth;\n        break;\n      case 2:\n        documentData.justifyOffset = -documentData.boxWidth / 2;\n        break;\n      default:\n        documentData.justifyOffset = 0;\n    }\n  }\n  documentData.lineWidths = lineWidths;\n\n  var animators = data.a; var animatorData; var\n    letterData;\n  jLen = animators.length;\n  var based; var ind; var\n    indexes = [];\n  for (j = 0; j < jLen; j += 1) {\n    animatorData = animators[j];\n    if (animatorData.a.sc) {\n      documentData.strokeColorAnim = true;\n    }\n    if (animatorData.a.sw) {\n      documentData.strokeWidthAnim = true;\n    }\n    if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\n      documentData.fillColorAnim = true;\n    }\n    ind = 0;\n    based = animatorData.s.b;\n    for (i = 0; i < len; i += 1) {\n      letterData = letters[i];\n      letterData.anIndexes[j] = ind;\n      if ((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== ' ') || (based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))) { // eslint-disable-line eqeqeq\n        if (animatorData.s.rn === 1) {\n          indexes.push(ind);\n        }\n        ind += 1;\n      }\n    }\n    data.a[j].s.totalChars = ind;\n    var currentInd = -1; var\n      newInd;\n    if (animatorData.s.rn === 1) {\n      for (i = 0; i < len; i += 1) {\n        letterData = letters[i];\n        if (currentInd != letterData.anIndexes[j]) { // eslint-disable-line eqeqeq\n          currentInd = letterData.anIndexes[j];\n          newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\n        }\n        letterData.anIndexes[j] = newInd;\n      }\n    }\n  }\n  documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\n  documentData.ls = documentData.ls || 0;\n  documentData.ascent = (fontData.ascent * documentData.finalSize) / 100;\n};\n\nTextProperty.prototype.updateDocumentData = function (newData, index) {\n  index = index === undefined ? this.keysIndex : index;\n  var dData = this.copyData({}, this.data.d.k[index].s);\n  dData = this.copyData(dData, newData);\n  this.data.d.k[index].s = dData;\n  this.recalculate(index);\n  this.elem.addDynamicProperty(this);\n};\n\nTextProperty.prototype.recalculate = function (index) {\n  var dData = this.data.d.k[index].s;\n  dData.__complete = false;\n  this.keysIndex = 0;\n  this._isFirstFrame = true;\n  this.getValue(dData);\n};\n\nTextProperty.prototype.canResizeFont = function (_canResize) {\n  this.canResize = _canResize;\n  this.recalculate(this.keysIndex);\n  this.elem.addDynamicProperty(this);\n};\n\nTextProperty.prototype.setMinimumFontSize = function (_fontValue) {\n  this.minimumFontSize = Math.floor(_fontValue) || 1;\n  this.recalculate(this.keysIndex);\n  this.elem.addDynamicProperty(this);\n};\n\nconst TextSelectorProp = (function () {\n  var max = Math.max;\n  var min = Math.min;\n  var floor = Math.floor;\n\n  function TextSelectorPropFactory(elem, data) {\n    this._currentTextLength = -1;\n    this.k = false;\n    this.data = data;\n    this.elem = elem;\n    this.comp = elem.comp;\n    this.finalS = 0;\n    this.finalE = 0;\n    this.initDynamicPropertyContainer(elem);\n    this.s = PropertyFactory.getProp(elem, data.s || { k: 0 }, 0, 0, this);\n    if ('e' in data) {\n      this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\n    } else {\n      this.e = { v: 100 };\n    }\n    this.o = PropertyFactory.getProp(elem, data.o || { k: 0 }, 0, 0, this);\n    this.xe = PropertyFactory.getProp(elem, data.xe || { k: 0 }, 0, 0, this);\n    this.ne = PropertyFactory.getProp(elem, data.ne || { k: 0 }, 0, 0, this);\n    this.sm = PropertyFactory.getProp(elem, data.sm || { k: 100 }, 0, 0, this);\n    this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\n    if (!this.dynamicProperties.length) {\n      this.getValue();\n    }\n  }\n\n  TextSelectorPropFactory.prototype = {\n    getMult: function (ind) {\n      if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\n        this.getValue();\n      }\n      var x1 = 0;\n      var y1 = 0;\n      var x2 = 1;\n      var y2 = 1;\n      if (this.ne.v > 0) {\n        x1 = this.ne.v / 100.0;\n      } else {\n        y1 = -this.ne.v / 100.0;\n      }\n      if (this.xe.v > 0) {\n        x2 = 1.0 - this.xe.v / 100.0;\n      } else {\n        y2 = 1.0 + this.xe.v / 100.0;\n      }\n      var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\n\n      var mult = 0;\n      var s = this.finalS;\n      var e = this.finalE;\n      var type = this.data.sh;\n      if (type === 2) {\n        if (e === s) {\n          mult = ind >= e ? 1 : 0;\n        } else {\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n        }\n        mult = easer(mult);\n      } else if (type === 3) {\n        if (e === s) {\n          mult = ind >= e ? 0 : 1;\n        } else {\n          mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n        }\n\n        mult = easer(mult);\n      } else if (type === 4) {\n        if (e === s) {\n          mult = 0;\n        } else {\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          if (mult < 0.5) {\n            mult *= 2;\n          } else {\n            mult = 1 - 2 * (mult - 0.5);\n          }\n        }\n        mult = easer(mult);\n      } else if (type === 5) {\n        if (e === s) {\n          mult = 0;\n        } else {\n          var tot = e - s;\n          /* ind += 0.5;\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\n          ind = min(max(0, ind + 0.5 - s), e - s);\n          var x = -tot / 2 + ind;\n          var a = tot / 2;\n          mult = Math.sqrt(1 - (x * x) / (a * a));\n        }\n        mult = easer(mult);\n      } else if (type === 6) {\n        if (e === s) {\n          mult = 0;\n        } else {\n          ind = min(max(0, ind + 0.5 - s), e - s);\n          mult = (1 + (Math.cos((Math.PI + Math.PI * 2 * (ind) / (e - s))))) / 2; // eslint-disable-line\n        }\n        mult = easer(mult);\n      } else {\n        if (ind >= floor(s)) {\n          if (ind - s < 0) {\n            mult = max(0, min(min(e, 1) - (s - ind), 1));\n          } else {\n            mult = max(0, min(e - ind, 1));\n          }\n        }\n        mult = easer(mult);\n      }\n      // Smoothness implementation.\n      // The smoothness represents a reduced range of the original [0; 1] range.\n      // if smoothness is 25%, the new range will be [0.375; 0.625]\n      // Steps are:\n      // - find the lower value of the new range (threshold)\n      // - if multiplier is smaller than that value, floor it to 0\n      // - if it is larger,\n      //     - subtract the threshold\n      //     - divide it by the smoothness (this will return the range to [0; 1])\n      // Note: If it doesn't work on some scenarios, consider applying it before the easer.\n      if (this.sm.v !== 100) {\n        var smoothness = this.sm.v * 0.01;\n        if (smoothness === 0) {\n          smoothness = 0.00000001;\n        }\n        var threshold = 0.5 - smoothness * 0.5;\n        if (mult < threshold) {\n          mult = 0;\n        } else {\n          mult = (mult - threshold) / smoothness;\n          if (mult > 1) {\n            mult = 1;\n          }\n        }\n      }\n      return mult * this.a.v;\n    },\n    getValue: function (newCharsFlag) {\n      this.iterateDynamicProperties();\n      this._mdf = newCharsFlag || this._mdf;\n      this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\n      if (newCharsFlag && this.data.r === 2) {\n        this.e.v = this._currentTextLength;\n      }\n      var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\n      var o = this.o.v / divisor;\n      var s = this.s.v / divisor + o;\n      var e = (this.e.v / divisor) + o;\n      if (s > e) {\n        var _s = s;\n        s = e;\n        e = _s;\n      }\n      this.finalS = s;\n      this.finalE = e;\n    },\n  };\n  extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\n\n  function getTextSelectorProp(elem, data, arr) {\n    return new TextSelectorPropFactory(elem, data, arr);\n  }\n\n  return {\n    getTextSelectorProp: getTextSelectorProp,\n  };\n}());\n\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\n  var defaultData = { propType: false };\n  var getProp = PropertyFactory.getProp;\n  var textAnimatorAnimatables = animatorProps.a;\n  this.a = {\n    r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\n    rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\n    ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\n    sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\n    sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\n    s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\n    a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\n    o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\n    p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\n    sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\n    sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\n    fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\n    fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\n    fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\n    fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\n    t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData,\n  };\n\n  this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\n  this.s.t = animatorProps.s.t;\n}\n\nfunction TextAnimatorProperty(textData, renderType, elem) {\n  this._isFirstFrame = true;\n  this._hasMaskedPath = false;\n  this._frameId = -1;\n  this._textData = textData;\n  this._renderType = renderType;\n  this._elem = elem;\n  this._animatorsData = createSizedArray(this._textData.a.length);\n  this._pathData = {};\n  this._moreOptions = {\n    alignment: {},\n  };\n  this.renderedLetters = [];\n  this.lettersChangedFlag = false;\n  this.initDynamicPropertyContainer(elem);\n}\n\nTextAnimatorProperty.prototype.searchProperties = function () {\n  var i;\n  var len = this._textData.a.length;\n  var animatorProps;\n  var getProp = PropertyFactory.getProp;\n  for (i = 0; i < len; i += 1) {\n    animatorProps = this._textData.a[i];\n    this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\n  }\n  if (this._textData.p && 'm' in this._textData.p) {\n    this._pathData = {\n      a: getProp(this._elem, this._textData.p.a, 0, 0, this),\n      f: getProp(this._elem, this._textData.p.f, 0, 0, this),\n      l: getProp(this._elem, this._textData.p.l, 0, 0, this),\n      r: getProp(this._elem, this._textData.p.r, 0, 0, this),\n      p: getProp(this._elem, this._textData.p.p, 0, 0, this),\n      m: this._elem.maskManager.getMaskProperty(this._textData.p.m),\n    };\n    this._hasMaskedPath = true;\n  } else {\n    this._hasMaskedPath = false;\n  }\n  this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\n};\n\nTextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\n  this.lettersChangedFlag = lettersChangedFlag;\n  if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\n    return;\n  }\n  this._isFirstFrame = false;\n  var alignment = this._moreOptions.alignment.v;\n  var animators = this._animatorsData;\n  var textData = this._textData;\n  var matrixHelper = this.mHelper;\n  var renderType = this._renderType;\n  var renderedLettersCount = this.renderedLetters.length;\n  var xPos;\n  var yPos;\n  var i;\n  var len;\n  var letters = documentData.l;\n  var pathInfo;\n  var currentLength;\n  var currentPoint;\n  var segmentLength;\n  var flag;\n  var pointInd;\n  var segmentInd;\n  var prevPoint;\n  var points;\n  var segments;\n  var partialLength;\n  var totalLength;\n  var perc;\n  var tanAngle;\n  var mask;\n  if (this._hasMaskedPath) {\n    mask = this._pathData.m;\n    if (!this._pathData.n || this._pathData._mdf) {\n      var paths = mask.v;\n      if (this._pathData.r.v) {\n        paths = paths.reverse();\n      }\n      // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\n      pathInfo = {\n        tLength: 0,\n        segments: [],\n      };\n      len = paths._length - 1;\n      var bezierData;\n      totalLength = 0;\n      for (i = 0; i < len; i += 1) {\n        bezierData = bez.buildBezierData(paths.v[i],\n          paths.v[i + 1],\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\n          [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\n        pathInfo.tLength += bezierData.segmentLength;\n        pathInfo.segments.push(bezierData);\n        totalLength += bezierData.segmentLength;\n      }\n      i = len;\n      if (mask.v.c) {\n        bezierData = bez.buildBezierData(paths.v[i],\n          paths.v[0],\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\n          [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\n        pathInfo.tLength += bezierData.segmentLength;\n        pathInfo.segments.push(bezierData);\n        totalLength += bezierData.segmentLength;\n      }\n      this._pathData.pi = pathInfo;\n    }\n    pathInfo = this._pathData.pi;\n\n    currentLength = this._pathData.f.v;\n    segmentInd = 0;\n    pointInd = 1;\n    segmentLength = 0;\n    flag = true;\n    segments = pathInfo.segments;\n    if (currentLength < 0 && mask.v.c) {\n      if (pathInfo.tLength < Math.abs(currentLength)) {\n        currentLength = -Math.abs(currentLength) % pathInfo.tLength;\n      }\n      segmentInd = segments.length - 1;\n      points = segments[segmentInd].points;\n      pointInd = points.length - 1;\n      while (currentLength < 0) {\n        currentLength += points[pointInd].partialLength;\n        pointInd -= 1;\n        if (pointInd < 0) {\n          segmentInd -= 1;\n          points = segments[segmentInd].points;\n          pointInd = points.length - 1;\n        }\n      }\n    }\n    points = segments[segmentInd].points;\n    prevPoint = points[pointInd - 1];\n    currentPoint = points[pointInd];\n    partialLength = currentPoint.partialLength;\n  }\n\n  len = letters.length;\n  xPos = 0;\n  yPos = 0;\n  var yOff = documentData.finalSize * 1.2 * 0.714;\n  var firstLine = true;\n  var animatorProps;\n  var animatorSelector;\n  var j;\n  var jLen;\n  var letterValue;\n\n  jLen = animators.length;\n\n  var mult;\n  var ind = -1;\n  var offf;\n  var xPathPos;\n  var yPathPos;\n  var initPathPos = currentLength;\n  var initSegmentInd = segmentInd;\n  var initPointInd = pointInd;\n  var currentLine = -1;\n  var elemOpacity;\n  var sc;\n  var sw;\n  var fc;\n  var k;\n  var letterSw;\n  var letterSc;\n  var letterFc;\n  var letterM = '';\n  var letterP = this.defaultPropsArray;\n  var letterO;\n\n  //\n  if (documentData.j === 2 || documentData.j === 1) {\n    var animatorJustifyOffset = 0;\n    var animatorFirstCharOffset = 0;\n    var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\n    var lastIndex = 0;\n    var isNewLine = true;\n\n    for (i = 0; i < len; i += 1) {\n      if (letters[i].n) {\n        if (animatorJustifyOffset) {\n          animatorJustifyOffset += animatorFirstCharOffset;\n        }\n        while (lastIndex < i) {\n          letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n          lastIndex += 1;\n        }\n        animatorJustifyOffset = 0;\n        isNewLine = true;\n      } else {\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.t.propType) {\n            if (isNewLine && documentData.j === 2) {\n              animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\n            }\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\n            } else {\n              animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\n            }\n          }\n        }\n        isNewLine = false;\n      }\n    }\n    if (animatorJustifyOffset) {\n      animatorJustifyOffset += animatorFirstCharOffset;\n    }\n    while (lastIndex < i) {\n      letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n      lastIndex += 1;\n    }\n  }\n  //\n\n  for (i = 0; i < len; i += 1) {\n    matrixHelper.reset();\n    elemOpacity = 1;\n    if (letters[i].n) {\n      xPos = 0;\n      yPos += documentData.yOffset;\n      yPos += firstLine ? 1 : 0;\n      currentLength = initPathPos;\n      firstLine = false;\n      if (this._hasMaskedPath) {\n        segmentInd = initSegmentInd;\n        pointInd = initPointInd;\n        points = segments[segmentInd].points;\n        prevPoint = points[pointInd - 1];\n        currentPoint = points[pointInd];\n        partialLength = currentPoint.partialLength;\n        segmentLength = 0;\n      }\n      letterM = '';\n      letterFc = '';\n      letterSw = '';\n      letterO = '';\n      letterP = this.defaultPropsArray;\n    } else {\n      if (this._hasMaskedPath) {\n        if (currentLine !== letters[i].line) {\n          switch (documentData.j) {\n            case 1:\n              currentLength += totalLength - documentData.lineWidths[letters[i].line];\n              break;\n            case 2:\n              currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\n              break;\n            default:\n              break;\n          }\n          currentLine = letters[i].line;\n        }\n        if (ind !== letters[i].ind) {\n          if (letters[ind]) {\n            currentLength += letters[ind].extra;\n          }\n          currentLength += letters[i].an / 2;\n          ind = letters[i].ind;\n        }\n        currentLength += (alignment[0] * letters[i].an) * 0.005;\n        var animatorOffset = 0;\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          if (animatorProps.p.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              animatorOffset += animatorProps.p.v[0] * mult[0];\n            } else {\n              animatorOffset += animatorProps.p.v[0] * mult;\n            }\n          }\n          if (animatorProps.a.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n            if (mult.length) {\n              animatorOffset += animatorProps.a.v[0] * mult[0];\n            } else {\n              animatorOffset += animatorProps.a.v[0] * mult;\n            }\n          }\n        }\n        flag = true;\n        // Force alignment only works with a single line for now\n        if (this._pathData.a.v) {\n          currentLength = letters[0].an * 0.5 + ((totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind) / (len - 1);\n          currentLength += this._pathData.f.v;\n        }\n        while (flag) {\n          if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\n            perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\n            xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\n            yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\n            matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, -(alignment[1] * yOff) * 0.01);\n            flag = false;\n          } else if (points) {\n            segmentLength += currentPoint.partialLength;\n            pointInd += 1;\n            if (pointInd >= points.length) {\n              pointInd = 0;\n              segmentInd += 1;\n              if (!segments[segmentInd]) {\n                if (mask.v.c) {\n                  pointInd = 0;\n                  segmentInd = 0;\n                  points = segments[segmentInd].points;\n                } else {\n                  segmentLength -= currentPoint.partialLength;\n                  points = null;\n                }\n              } else {\n                points = segments[segmentInd].points;\n              }\n            }\n            if (points) {\n              prevPoint = currentPoint;\n              currentPoint = points[pointInd];\n              partialLength = currentPoint.partialLength;\n            }\n          }\n        }\n        offf = letters[i].an / 2 - letters[i].add;\n        matrixHelper.translate(-offf, 0, 0);\n      } else {\n        offf = letters[i].an / 2 - letters[i].add;\n        matrixHelper.translate(-offf, 0, 0);\n\n        // Grouping alignment\n        matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, (-alignment[1] * yOff) * 0.01, 0);\n      }\n\n      for (j = 0; j < jLen; j += 1) {\n        animatorProps = animators[j].a;\n        if (animatorProps.t.propType) {\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n          // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\n          if (xPos !== 0 || documentData.j !== 0) {\n            if (this._hasMaskedPath) {\n              if (mult.length) {\n                currentLength += animatorProps.t.v * mult[0];\n              } else {\n                currentLength += animatorProps.t.v * mult;\n              }\n            } else if (mult.length) {\n              xPos += animatorProps.t.v * mult[0];\n            } else {\n              xPos += animatorProps.t.v * mult;\n            }\n          }\n        }\n      }\n      if (documentData.strokeWidthAnim) {\n        sw = documentData.sw || 0;\n      }\n      if (documentData.strokeColorAnim) {\n        if (documentData.sc) {\n          sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\n        } else {\n          sc = [0, 0, 0];\n        }\n      }\n      if (documentData.fillColorAnim && documentData.fc) {\n        fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\n      }\n      for (j = 0; j < jLen; j += 1) {\n        animatorProps = animators[j].a;\n        if (animatorProps.a.propType) {\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n          if (mult.length) {\n            matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\n          } else {\n            matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\n          }\n        }\n      }\n      for (j = 0; j < jLen; j += 1) {\n        animatorProps = animators[j].a;\n        if (animatorProps.s.propType) {\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n          if (mult.length) {\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult[0]), 1 + ((animatorProps.s.v[1] - 1) * mult[1]), 1);\n          } else {\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult), 1 + ((animatorProps.s.v[1] - 1) * mult), 1);\n          }\n        }\n      }\n      for (j = 0; j < jLen; j += 1) {\n        animatorProps = animators[j].a;\n        animatorSelector = animators[j].s;\n        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n        if (animatorProps.sk.propType) {\n          if (mult.length) {\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\n          } else {\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\n          }\n        }\n        if (animatorProps.r.propType) {\n          if (mult.length) {\n            matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\n          } else {\n            matrixHelper.rotateZ(-animatorProps.r.v * mult);\n          }\n        }\n        if (animatorProps.ry.propType) {\n          if (mult.length) {\n            matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\n          } else {\n            matrixHelper.rotateY(animatorProps.ry.v * mult);\n          }\n        }\n        if (animatorProps.rx.propType) {\n          if (mult.length) {\n            matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\n          } else {\n            matrixHelper.rotateX(animatorProps.rx.v * mult);\n          }\n        }\n        if (animatorProps.o.propType) {\n          if (mult.length) {\n            elemOpacity += ((animatorProps.o.v) * mult[0] - elemOpacity) * mult[0];\n          } else {\n            elemOpacity += ((animatorProps.o.v) * mult - elemOpacity) * mult;\n          }\n        }\n        if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\n          if (mult.length) {\n            sw += animatorProps.sw.v * mult[0];\n          } else {\n            sw += animatorProps.sw.v * mult;\n          }\n        }\n        if (documentData.strokeColorAnim && animatorProps.sc.propType) {\n          for (k = 0; k < 3; k += 1) {\n            if (mult.length) {\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\n            } else {\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\n            }\n          }\n        }\n        if (documentData.fillColorAnim && documentData.fc) {\n          if (animatorProps.fc.propType) {\n            for (k = 0; k < 3; k += 1) {\n              if (mult.length) {\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\n              } else {\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\n              }\n            }\n          }\n          if (animatorProps.fh.propType) {\n            if (mult.length) {\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\n            } else {\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult);\n            }\n          }\n          if (animatorProps.fs.propType) {\n            if (mult.length) {\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\n            } else {\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\n            }\n          }\n          if (animatorProps.fb.propType) {\n            if (mult.length) {\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\n            } else {\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\n            }\n          }\n        }\n      }\n\n      for (j = 0; j < jLen; j += 1) {\n        animatorProps = animators[j].a;\n\n        if (animatorProps.p.propType) {\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n          if (this._hasMaskedPath) {\n            if (mult.length) {\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\n            } else {\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n            }\n          } else if (mult.length) {\n            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\n          } else {\n            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n          }\n        }\n      }\n      if (documentData.strokeWidthAnim) {\n        letterSw = sw < 0 ? 0 : sw;\n      }\n      if (documentData.strokeColorAnim) {\n        letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\n      }\n      if (documentData.fillColorAnim && documentData.fc) {\n        letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\n      }\n\n      if (this._hasMaskedPath) {\n        matrixHelper.translate(0, -documentData.ls);\n\n        matrixHelper.translate(0, (alignment[1] * yOff) * 0.01 + yPos, 0);\n        if (this._pathData.p.v) {\n          tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\n          var rot = (Math.atan(tanAngle) * 180) / Math.PI;\n          if (currentPoint.point[0] < prevPoint.point[0]) {\n            rot += 180;\n          }\n          matrixHelper.rotate((-rot * Math.PI) / 180);\n        }\n        matrixHelper.translate(xPathPos, yPathPos, 0);\n        currentLength -= (alignment[0] * letters[i].an) * 0.005;\n        if (letters[i + 1] && ind !== letters[i + 1].ind) {\n          currentLength += letters[i].an / 2;\n          currentLength += (documentData.tr * 0.001) * documentData.finalSize;\n        }\n      } else {\n        matrixHelper.translate(xPos, yPos, 0);\n\n        if (documentData.ps) {\n          // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\n          matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n        }\n        switch (documentData.j) {\n          case 1:\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\n            break;\n          case 2:\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\n            break;\n          default:\n            break;\n        }\n        matrixHelper.translate(0, -documentData.ls);\n        matrixHelper.translate(offf, 0, 0);\n        matrixHelper.translate((alignment[0] * letters[i].an) * 0.005, (alignment[1] * yOff) * 0.01, 0);\n        xPos += letters[i].l + (documentData.tr * 0.001) * documentData.finalSize;\n      }\n      if (renderType === 'html') {\n        letterM = matrixHelper.toCSS();\n      } else if (renderType === 'svg') {\n        letterM = matrixHelper.to2dCSS();\n      } else {\n        letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\n      }\n      letterO = elemOpacity;\n    }\n\n    if (renderedLettersCount <= i) {\n      letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\n      this.renderedLetters.push(letterValue);\n      renderedLettersCount += 1;\n      this.lettersChangedFlag = true;\n    } else {\n      letterValue = this.renderedLetters[i];\n      this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\n    }\n  }\n};\n\nTextAnimatorProperty.prototype.getValue = function () {\n  if (this._elem.globalData.frameId === this._frameId) {\n    return;\n  }\n  this._frameId = this._elem.globalData.frameId;\n  this.iterateDynamicProperties();\n};\n\nTextAnimatorProperty.prototype.mHelper = new Matrix();\nTextAnimatorProperty.prototype.defaultPropsArray = [];\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n\nfunction ITextElement() {\n}\n\nITextElement.prototype.initElement = function (data, globalData, comp) {\n  this.lettersChangedFlag = true;\n  this.initFrame();\n  this.initBaseData(data, globalData, comp);\n  this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\n  this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\n  this.initTransform(data, globalData, comp);\n  this.initHierarchy();\n  this.initRenderable();\n  this.initRendererElement();\n  this.createContainerElements();\n  this.createRenderableComponents();\n  this.createContent();\n  this.hide();\n  this.textAnimator.searchProperties(this.dynamicProperties);\n};\n\nITextElement.prototype.prepareFrame = function (num) {\n  this._mdf = false;\n  this.prepareRenderableFrame(num);\n  this.prepareProperties(num, this.isInRange);\n  if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\n    this.buildNewText();\n    this.textProperty._isFirstFrame = false;\n    this.textProperty._mdf = false;\n  }\n};\n\nITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\n  var j;\n  var jLen = shapes.length;\n  var pathNodes;\n  var shapeStr = '';\n  for (j = 0; j < jLen; j += 1) {\n    if (shapes[j].ty === 'sh') {\n      pathNodes = shapes[j].ks.k;\n      shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\n    }\n  }\n  return shapeStr;\n};\n\nITextElement.prototype.updateDocumentData = function (newData, index) {\n  this.textProperty.updateDocumentData(newData, index);\n};\n\nITextElement.prototype.canResizeFont = function (_canResize) {\n  this.textProperty.canResizeFont(_canResize);\n};\n\nITextElement.prototype.setMinimumFontSize = function (_fontSize) {\n  this.textProperty.setMinimumFontSize(_fontSize);\n};\n\nITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\n  if (documentData.ps) {\n    matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n  }\n  matrixHelper.translate(0, -documentData.ls, 0);\n  switch (documentData.j) {\n    case 1:\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\n      break;\n    case 2:\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\n      break;\n    default:\n      break;\n  }\n  matrixHelper.translate(xPos, yPos, 0);\n};\n\nITextElement.prototype.buildColor = function (colorData) {\n  return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\n};\n\nITextElement.prototype.emptyProp = new LetterProps();\n\nITextElement.prototype.destroy = function () {\n\n};\n\nvar emptyShapeData = {\n  shapes: [],\n};\n\nfunction SVGTextLottieElement(data, globalData, comp) {\n  this.textSpans = [];\n  this.renderType = 'svg';\n  this.initElement(data, globalData, comp);\n}\n\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\n\nSVGTextLottieElement.prototype.createContent = function () {\n  if (this.data.singleShape && !this.globalData.fontManager.chars) {\n    this.textContainer = createNS('text');\n  }\n};\n\nSVGTextLottieElement.prototype.buildTextContents = function (textArray) {\n  var i = 0;\n  var len = textArray.length;\n  var textContents = [];\n  var currentTextContent = '';\n  while (i < len) {\n    if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\n      textContents.push(currentTextContent);\n      currentTextContent = '';\n    } else {\n      currentTextContent += textArray[i];\n    }\n    i += 1;\n  }\n  textContents.push(currentTextContent);\n  return textContents;\n};\n\nSVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\n  // data should probably be cloned to apply scale separately to each instance of a text on different layers\n  // but since text internal content gets only rendered once and then it's never rerendered,\n  // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\n  // Avoiding cloning is preferred since cloning each character shape data is expensive\n  if (data.shapes && data.shapes.length) {\n    var shape = data.shapes[0];\n    if (shape.it) {\n      var shapeItem = shape.it[shape.it.length - 1];\n      if (shapeItem.s) {\n        shapeItem.s.k[0] = scale;\n        shapeItem.s.k[1] = scale;\n      }\n    }\n  }\n  return data;\n};\n\nSVGTextLottieElement.prototype.buildNewText = function () {\n  this.addDynamicProperty(this);\n  var i;\n  var len;\n\n  var documentData = this.textProperty.currentData;\n  this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\n  if (documentData.fc) {\n    this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\n  } else {\n    this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\n  }\n  if (documentData.sc) {\n    this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\n    this.layerElement.setAttribute('stroke-width', documentData.sw);\n  }\n  this.layerElement.setAttribute('font-size', documentData.finalSize);\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n  if (fontData.fClass) {\n    this.layerElement.setAttribute('class', fontData.fClass);\n  } else {\n    this.layerElement.setAttribute('font-family', fontData.fFamily);\n    var fWeight = documentData.fWeight;\n    var fStyle = documentData.fStyle;\n    this.layerElement.setAttribute('font-style', fStyle);\n    this.layerElement.setAttribute('font-weight', fWeight);\n  }\n  this.layerElement.setAttribute('aria-label', documentData.t);\n\n  var letters = documentData.l || [];\n  var usesGlyphs = !!this.globalData.fontManager.chars;\n  len = letters.length;\n\n  var tSpan;\n  var matrixHelper = this.mHelper;\n  var shapeStr = '';\n  var singleShape = this.data.singleShape;\n  var xPos = 0;\n  var yPos = 0;\n  var firstLine = true;\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n  if (singleShape && !usesGlyphs && !documentData.sz) {\n    var tElement = this.textContainer;\n    var justify = 'start';\n    switch (documentData.j) {\n      case 1:\n        justify = 'end';\n        break;\n      case 2:\n        justify = 'middle';\n        break;\n      default:\n        justify = 'start';\n        break;\n    }\n    tElement.setAttribute('text-anchor', justify);\n    tElement.setAttribute('letter-spacing', trackingOffset);\n    var textContent = this.buildTextContents(documentData.finalText);\n    len = textContent.length;\n    yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\n    for (i = 0; i < len; i += 1) {\n      tSpan = this.textSpans[i].span || createNS('tspan');\n      tSpan.textContent = textContent[i];\n      tSpan.setAttribute('x', 0);\n      tSpan.setAttribute('y', yPos);\n      tSpan.style.display = 'inherit';\n      tElement.appendChild(tSpan);\n      if (!this.textSpans[i]) {\n        this.textSpans[i] = {\n          span: null,\n          glyph: null,\n        };\n      }\n      this.textSpans[i].span = tSpan;\n      yPos += documentData.finalLineHeight;\n    }\n\n    this.layerElement.appendChild(tElement);\n  } else {\n    var cachedSpansLength = this.textSpans.length;\n    var charData;\n    for (i = 0; i < len; i += 1) {\n      if (!this.textSpans[i]) {\n        this.textSpans[i] = {\n          span: null,\n          childSpan: null,\n          glyph: null,\n        };\n      }\n      if (!usesGlyphs || !singleShape || i === 0) {\n        tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\n        if (cachedSpansLength <= i) {\n          tSpan.setAttribute('stroke-linecap', 'butt');\n          tSpan.setAttribute('stroke-linejoin', 'round');\n          tSpan.setAttribute('stroke-miterlimit', '4');\n          this.textSpans[i].span = tSpan;\n          if (usesGlyphs) {\n            var childSpan = createNS('g');\n            tSpan.appendChild(childSpan);\n            this.textSpans[i].childSpan = childSpan;\n          }\n          this.textSpans[i].span = tSpan;\n          this.layerElement.appendChild(tSpan);\n        }\n        tSpan.style.display = 'inherit';\n      }\n\n      matrixHelper.reset();\n      if (singleShape) {\n        if (letters[i].n) {\n          xPos = -trackingOffset;\n          yPos += documentData.yOffset;\n          yPos += firstLine ? 1 : 0;\n          firstLine = false;\n        }\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n        xPos += letters[i].l || 0;\n        // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\n        xPos += trackingOffset;\n      }\n      if (usesGlyphs) {\n        charData = this.globalData.fontManager.getCharData(\n          documentData.finalText[i],\n          fontData.fStyle,\n          this.globalData.fontManager.getFontByName(documentData.f).fFamily\n        );\n        var glyphElement;\n        // t === 1 means the character has been replaced with an animated shaped\n        if (charData.t === 1) {\n          glyphElement = new SVGCompElement(charData.data, this.globalData, this);\n        } else {\n          var data = emptyShapeData;\n          if (charData.data && charData.data.shapes) {\n            data = this.buildShapeData(charData.data, documentData.finalSize);\n          }\n          glyphElement = new SVGShapeElement(data, this.globalData, this);\n        }\n        if (this.textSpans[i].glyph) {\n          var glyph = this.textSpans[i].glyph;\n          this.textSpans[i].childSpan.removeChild(glyph.layerElement);\n          glyph.destroy();\n        }\n        this.textSpans[i].glyph = glyphElement;\n        glyphElement._debug = true;\n        glyphElement.prepareFrame(0);\n        glyphElement.renderFrame();\n        this.textSpans[i].childSpan.appendChild(glyphElement.layerElement);\n        // when using animated shapes, the layer will be scaled instead of replacing the internal scale\n        // this might have issues with strokes and might need a different solution\n        if (charData.t === 1) {\n          this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\n        }\n      } else {\n        if (singleShape) {\n          tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\n        }\n        tSpan.textContent = letters[i].val;\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n      }\n      //\n    }\n    if (singleShape && tSpan) {\n      tSpan.setAttribute('d', shapeStr);\n    }\n  }\n  while (i < this.textSpans.length) {\n    this.textSpans[i].span.style.display = 'none';\n    i += 1;\n  }\n\n  this._sizeChanged = true;\n};\n\nSVGTextLottieElement.prototype.sourceRectAtTime = function () {\n  this.prepareFrame(this.comp.renderedFrame - this.data.st);\n  this.renderInnerContent();\n  if (this._sizeChanged) {\n    this._sizeChanged = false;\n    var textBox = this.layerElement.getBBox();\n    this.bbox = {\n      top: textBox.y,\n      left: textBox.x,\n      width: textBox.width,\n      height: textBox.height,\n    };\n  }\n  return this.bbox;\n};\n\nSVGTextLottieElement.prototype.getValue = function () {\n  var i;\n  var len = this.textSpans.length;\n  var glyphElement;\n  this.renderedFrame = this.comp.renderedFrame;\n  for (i = 0; i < len; i += 1) {\n    glyphElement = this.textSpans[i].glyph;\n    if (glyphElement) {\n      glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\n      if (glyphElement._mdf) {\n        this._mdf = true;\n      }\n    }\n  }\n};\n\nSVGTextLottieElement.prototype.renderInnerContent = function () {\n  if (!this.data.singleShape || this._mdf) {\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n    if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\n      this._sizeChanged = true;\n      var i;\n      var len;\n      var renderedLetters = this.textAnimator.renderedLetters;\n\n      var letters = this.textProperty.currentData.l;\n\n      len = letters.length;\n      var renderedLetter;\n      var textSpan;\n      var glyphElement;\n      for (i = 0; i < len; i += 1) {\n        if (!letters[i].n) {\n          renderedLetter = renderedLetters[i];\n          textSpan = this.textSpans[i].span;\n          glyphElement = this.textSpans[i].glyph;\n          if (glyphElement) {\n            glyphElement.renderFrame();\n          }\n          if (renderedLetter._mdf.m) {\n            textSpan.setAttribute('transform', renderedLetter.m);\n          }\n          if (renderedLetter._mdf.o) {\n            textSpan.setAttribute('opacity', renderedLetter.o);\n          }\n          if (renderedLetter._mdf.sw) {\n            textSpan.setAttribute('stroke-width', renderedLetter.sw);\n          }\n          if (renderedLetter._mdf.sc) {\n            textSpan.setAttribute('stroke', renderedLetter.sc);\n          }\n          if (renderedLetter._mdf.fc) {\n            textSpan.setAttribute('fill', renderedLetter.fc);\n          }\n        }\n      }\n    }\n  }\n};\n\nfunction ISolidElement(data, globalData, comp) {\n  this.initElement(data, globalData, comp);\n}\nextendPrototype([IImageElement], ISolidElement);\n\nISolidElement.prototype.createContent = function () {\n  var rect = createNS('rect');\n  /// /rect.style.width = this.data.sw;\n  /// /rect.style.height = this.data.sh;\n  /// /rect.style.fill = this.data.sc;\n  rect.setAttribute('width', this.data.sw);\n  rect.setAttribute('height', this.data.sh);\n  rect.setAttribute('fill', this.data.sc);\n  this.layerElement.appendChild(rect);\n};\n\nfunction NullElement(data, globalData, comp) {\n  this.initFrame();\n  this.initBaseData(data, globalData, comp);\n  this.initFrame();\n  this.initTransform(data, globalData, comp);\n  this.initHierarchy();\n}\n\nNullElement.prototype.prepareFrame = function (num) {\n  this.prepareProperties(num, true);\n};\n\nNullElement.prototype.renderFrame = function () {\n};\n\nNullElement.prototype.getBaseElement = function () {\n  return null;\n};\n\nNullElement.prototype.destroy = function () {\n};\n\nNullElement.prototype.sourceRectAtTime = function () {\n};\n\nNullElement.prototype.hide = function () {\n};\n\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n\nfunction SVGRendererBase() {\n}\n\nextendPrototype([BaseRenderer], SVGRendererBase);\n\nSVGRendererBase.prototype.createNull = function (data) {\n  return new NullElement(data, this.globalData, this);\n};\n\nSVGRendererBase.prototype.createShape = function (data) {\n  return new SVGShapeElement(data, this.globalData, this);\n};\n\nSVGRendererBase.prototype.createText = function (data) {\n  return new SVGTextLottieElement(data, this.globalData, this);\n};\n\nSVGRendererBase.prototype.createImage = function (data) {\n  return new IImageElement(data, this.globalData, this);\n};\n\nSVGRendererBase.prototype.createSolid = function (data) {\n  return new ISolidElement(data, this.globalData, this);\n};\n\nSVGRendererBase.prototype.configAnimation = function (animData) {\n  this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n  if (this.renderConfig.viewBoxSize) {\n    this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\n  } else {\n    this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\n  }\n\n  if (!this.renderConfig.viewBoxOnly) {\n    this.svgElement.setAttribute('width', animData.w);\n    this.svgElement.setAttribute('height', animData.h);\n    this.svgElement.style.width = '100%';\n    this.svgElement.style.height = '100%';\n    this.svgElement.style.transform = 'translate3d(0,0,0)';\n    this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\n  }\n  if (this.renderConfig.width) {\n    this.svgElement.setAttribute('width', this.renderConfig.width);\n  }\n  if (this.renderConfig.height) {\n    this.svgElement.setAttribute('height', this.renderConfig.height);\n  }\n  if (this.renderConfig.className) {\n    this.svgElement.setAttribute('class', this.renderConfig.className);\n  }\n  if (this.renderConfig.id) {\n    this.svgElement.setAttribute('id', this.renderConfig.id);\n  }\n  if (this.renderConfig.focusable !== undefined) {\n    this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\n  }\n  this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\n  // this.layerElement.style.transform = 'translate3d(0,0,0)';\n  // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\n  this.animationItem.wrapper.appendChild(this.svgElement);\n  // Mask animation\n  var defs = this.globalData.defs;\n\n  this.setupGlobalData(animData, defs);\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n  this.data = animData;\n\n  var maskElement = createNS('clipPath');\n  var rect = createNS('rect');\n  rect.setAttribute('width', animData.w);\n  rect.setAttribute('height', animData.h);\n  rect.setAttribute('x', 0);\n  rect.setAttribute('y', 0);\n  var maskId = createElementID();\n  maskElement.setAttribute('id', maskId);\n  maskElement.appendChild(rect);\n  this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\n\n  defs.appendChild(maskElement);\n  this.layers = animData.layers;\n  this.elements = createSizedArray(animData.layers.length);\n};\n\nSVGRendererBase.prototype.destroy = function () {\n  if (this.animationItem.wrapper) {\n    this.animationItem.wrapper.innerText = '';\n  }\n  this.layerElement = null;\n  this.globalData.defs = null;\n  var i;\n  var len = this.layers ? this.layers.length : 0;\n  for (i = 0; i < len; i += 1) {\n    if (this.elements[i]) {\n      this.elements[i].destroy();\n    }\n  }\n  this.elements.length = 0;\n  this.destroyed = true;\n  this.animationItem = null;\n};\n\nSVGRendererBase.prototype.updateContainerSize = function () {\n};\n\nSVGRendererBase.prototype.buildItem = function (pos) {\n  var elements = this.elements;\n  if (elements[pos] || this.layers[pos].ty === 99) {\n    return;\n  }\n  elements[pos] = true;\n  var element = this.createItem(this.layers[pos]);\n\n  elements[pos] = element;\n  if (getExpressionsPlugin()) {\n    if (this.layers[pos].ty === 0) {\n      this.globalData.projectInterface.registerComposition(element);\n    }\n    element.initExpressions();\n  }\n  this.appendElementInPos(element, pos);\n  if (this.layers[pos].tt) {\n    if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\n      this.buildItem(pos - 1);\n      this.addPendingElement(element);\n    } else {\n      element.setMatte(elements[pos - 1].layerId);\n    }\n  }\n};\n\nSVGRendererBase.prototype.checkPendingElements = function () {\n  while (this.pendingElements.length) {\n    var element = this.pendingElements.pop();\n    element.checkParenting();\n    if (element.data.tt) {\n      var i = 0;\n      var len = this.elements.length;\n      while (i < len) {\n        if (this.elements[i] === element) {\n          element.setMatte(this.elements[i - 1].layerId);\n          break;\n        }\n        i += 1;\n      }\n    }\n  }\n};\n\nSVGRendererBase.prototype.renderFrame = function (num) {\n  if (this.renderedFrame === num || this.destroyed) {\n    return;\n  }\n  if (num === null) {\n    num = this.renderedFrame;\n  } else {\n    this.renderedFrame = num;\n  }\n  // console.log('-------');\n  // console.log('FRAME ',num);\n  this.globalData.frameNum = num;\n  this.globalData.frameId += 1;\n  this.globalData.projectInterface.currentFrame = num;\n  this.globalData._mdf = false;\n  var i;\n  var len = this.layers.length;\n  if (!this.completeLayers) {\n    this.checkLayers(num);\n  }\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (this.completeLayers || this.elements[i]) {\n      this.elements[i].prepareFrame(num - this.layers[i].st);\n    }\n  }\n  if (this.globalData._mdf) {\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  }\n};\n\nSVGRendererBase.prototype.appendElementInPos = function (element, pos) {\n  var newElement = element.getBaseElement();\n  if (!newElement) {\n    return;\n  }\n  var i = 0;\n  var nextElement;\n  while (i < pos) {\n    if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\n      nextElement = this.elements[i].getBaseElement();\n    }\n    i += 1;\n  }\n  if (nextElement) {\n    this.layerElement.insertBefore(newElement, nextElement);\n  } else {\n    this.layerElement.appendChild(newElement);\n  }\n};\n\nSVGRendererBase.prototype.hide = function () {\n  this.layerElement.style.display = 'none';\n};\n\nSVGRendererBase.prototype.show = function () {\n  this.layerElement.style.display = 'block';\n};\n\nfunction ICompElement() {}\n\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\n\nICompElement.prototype.initElement = function (data, globalData, comp) {\n  this.initFrame();\n  this.initBaseData(data, globalData, comp);\n  this.initTransform(data, globalData, comp);\n  this.initRenderable();\n  this.initHierarchy();\n  this.initRendererElement();\n  this.createContainerElements();\n  this.createRenderableComponents();\n  if (this.data.xt || !globalData.progressiveLoad) {\n    this.buildAllItems();\n  }\n  this.hide();\n};\n\n/* ICompElement.prototype.hide = function(){\n    if(!this.hidden){\n        this.hideElement();\n        var i,len = this.elements.length;\n        for( i = 0; i < len; i+=1 ){\n            if(this.elements[i]){\n                this.elements[i].hide();\n            }\n        }\n    }\n}; */\n\nICompElement.prototype.prepareFrame = function (num) {\n  this._mdf = false;\n  this.prepareRenderableFrame(num);\n  this.prepareProperties(num, this.isInRange);\n  if (!this.isInRange && !this.data.xt) {\n    return;\n  }\n\n  if (!this.tm._placeholder) {\n    var timeRemapped = this.tm.v;\n    if (timeRemapped === this.data.op) {\n      timeRemapped = this.data.op - 1;\n    }\n    this.renderedFrame = timeRemapped;\n  } else {\n    this.renderedFrame = num / this.data.sr;\n  }\n  var i;\n  var len = this.elements.length;\n  if (!this.completeLayers) {\n    this.checkLayers(this.renderedFrame);\n  }\n  // This iteration needs to be backwards because of how expressions connect between each other\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (this.completeLayers || this.elements[i]) {\n      this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\n      if (this.elements[i]._mdf) {\n        this._mdf = true;\n      }\n    }\n  }\n};\n\nICompElement.prototype.renderInnerContent = function () {\n  var i;\n  var len = this.layers.length;\n  for (i = 0; i < len; i += 1) {\n    if (this.completeLayers || this.elements[i]) {\n      this.elements[i].renderFrame();\n    }\n  }\n};\n\nICompElement.prototype.setElements = function (elems) {\n  this.elements = elems;\n};\n\nICompElement.prototype.getElements = function () {\n  return this.elements;\n};\n\nICompElement.prototype.destroyElements = function () {\n  var i;\n  var len = this.layers.length;\n  for (i = 0; i < len; i += 1) {\n    if (this.elements[i]) {\n      this.elements[i].destroy();\n    }\n  }\n};\n\nICompElement.prototype.destroy = function () {\n  this.destroyElements();\n  this.destroyBaseElement();\n};\n\nfunction SVGCompElement(data, globalData, comp) {\n  this.layers = data.layers;\n  this.supports3d = true;\n  this.completeLayers = false;\n  this.pendingElements = [];\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n  this.initElement(data, globalData, comp);\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\n}\n\nextendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\n\nSVGCompElement.prototype.createComp = function (data) {\n  return new SVGCompElement(data, this.globalData, this);\n};\n\nfunction SVGRenderer(animationItem, config) {\n  this.animationItem = animationItem;\n  this.layers = null;\n  this.renderedFrame = -1;\n  this.svgElement = createNS('svg');\n  var ariaLabel = '';\n  if (config && config.title) {\n    var titleElement = createNS('title');\n    var titleId = createElementID();\n    titleElement.setAttribute('id', titleId);\n    titleElement.textContent = config.title;\n    this.svgElement.appendChild(titleElement);\n    ariaLabel += titleId;\n  }\n  if (config && config.description) {\n    var descElement = createNS('desc');\n    var descId = createElementID();\n    descElement.setAttribute('id', descId);\n    descElement.textContent = config.description;\n    this.svgElement.appendChild(descElement);\n    ariaLabel += ' ' + descId;\n  }\n  if (ariaLabel) {\n    this.svgElement.setAttribute('aria-labelledby', ariaLabel);\n  }\n  var defs = createNS('defs');\n  this.svgElement.appendChild(defs);\n  var maskElement = createNS('g');\n  this.svgElement.appendChild(maskElement);\n  this.layerElement = maskElement;\n  this.renderConfig = {\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\n    contentVisibility: (config && config.contentVisibility) || 'visible',\n    progressiveLoad: (config && config.progressiveLoad) || false,\n    hideOnTransparent: !((config && config.hideOnTransparent === false)),\n    viewBoxOnly: (config && config.viewBoxOnly) || false,\n    viewBoxSize: (config && config.viewBoxSize) || false,\n    className: (config && config.className) || '',\n    id: (config && config.id) || '',\n    focusable: config && config.focusable,\n    filterSize: {\n      width: (config && config.filterSize && config.filterSize.width) || '100%',\n      height: (config && config.filterSize && config.filterSize.height) || '100%',\n      x: (config && config.filterSize && config.filterSize.x) || '0%',\n      y: (config && config.filterSize && config.filterSize.y) || '0%',\n    },\n    width: (config && config.width),\n    height: (config && config.height),\n  };\n\n  this.globalData = {\n    _mdf: false,\n    frameNum: -1,\n    defs: defs,\n    renderConfig: this.renderConfig,\n  };\n  this.elements = [];\n  this.pendingElements = [];\n  this.destroyed = false;\n  this.rendererType = 'svg';\n}\n\nextendPrototype([SVGRendererBase], SVGRenderer);\n\nSVGRenderer.prototype.createComp = function (data) {\n  return new SVGCompElement(data, this.globalData, this);\n};\n\nfunction CVContextData() {\n  this.saved = [];\n  this.cArrPos = 0;\n  this.cTr = new Matrix();\n  this.cO = 1;\n  var i;\n  var len = 15;\n  this.savedOp = createTypedArray('float32', len);\n  for (i = 0; i < len; i += 1) {\n    this.saved[i] = createTypedArray('float32', 16);\n  }\n  this._length = len;\n}\n\nCVContextData.prototype.duplicate = function () {\n  var newLength = this._length * 2;\n  var currentSavedOp = this.savedOp;\n  this.savedOp = createTypedArray('float32', newLength);\n  this.savedOp.set(currentSavedOp);\n  var i = 0;\n  for (i = this._length; i < newLength; i += 1) {\n    this.saved[i] = createTypedArray('float32', 16);\n  }\n  this._length = newLength;\n};\n\nCVContextData.prototype.reset = function () {\n  this.cArrPos = 0;\n  this.cTr.reset();\n  this.cO = 1;\n};\n\nfunction ShapeTransformManager() {\n  this.sequences = {};\n  this.sequenceList = [];\n  this.transform_key_count = 0;\n}\n\nShapeTransformManager.prototype = {\n  addTransformSequence: function (transforms) {\n    var i;\n    var len = transforms.length;\n    var key = '_';\n    for (i = 0; i < len; i += 1) {\n      key += transforms[i].transform.key + '_';\n    }\n    var sequence = this.sequences[key];\n    if (!sequence) {\n      sequence = {\n        transforms: [].concat(transforms),\n        finalTransform: new Matrix(),\n        _mdf: false,\n      };\n      this.sequences[key] = sequence;\n      this.sequenceList.push(sequence);\n    }\n    return sequence;\n  },\n  processSequence: function (sequence, isFirstFrame) {\n    var i = 0;\n    var len = sequence.transforms.length;\n    var _mdf = isFirstFrame;\n    while (i < len && !isFirstFrame) {\n      if (sequence.transforms[i].transform.mProps._mdf) {\n        _mdf = true;\n        break;\n      }\n      i += 1;\n    }\n    if (_mdf) {\n      var props;\n      sequence.finalTransform.reset();\n      for (i = len - 1; i >= 0; i -= 1) {\n        props = sequence.transforms[i].transform.mProps.v.props;\n        sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n      }\n    }\n    sequence._mdf = _mdf;\n  },\n  processSequences: function (isFirstFrame) {\n    var i;\n    var len = this.sequenceList.length;\n    for (i = 0; i < len; i += 1) {\n      this.processSequence(this.sequenceList[i], isFirstFrame);\n    }\n  },\n  getNewKey: function () {\n    this.transform_key_count += 1;\n    return '_' + this.transform_key_count;\n  },\n};\n\nfunction CVEffects() {\n\n}\nCVEffects.prototype.renderFrame = function () {};\n\nfunction CVMaskElement(data, element) {\n  this.data = data;\n  this.element = element;\n  this.masksProperties = this.data.masksProperties || [];\n  this.viewData = createSizedArray(this.masksProperties.length);\n  var i;\n  var len = this.masksProperties.length;\n  var hasMasks = false;\n  for (i = 0; i < len; i += 1) {\n    if (this.masksProperties[i].mode !== 'n') {\n      hasMasks = true;\n    }\n    this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\n  }\n  this.hasMasks = hasMasks;\n  if (hasMasks) {\n    this.element.addRenderableComponent(this);\n  }\n}\n\nCVMaskElement.prototype.renderFrame = function () {\n  if (!this.hasMasks) {\n    return;\n  }\n  var transform = this.element.finalTransform.mat;\n  var ctx = this.element.canvasContext;\n  var i;\n  var len = this.masksProperties.length;\n  var pt;\n  var pts;\n  var data;\n  ctx.beginPath();\n  for (i = 0; i < len; i += 1) {\n    if (this.masksProperties[i].mode !== 'n') {\n      if (this.masksProperties[i].inv) {\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.element.globalData.compSize.w, 0);\n        ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\n        ctx.lineTo(0, this.element.globalData.compSize.h);\n        ctx.lineTo(0, 0);\n      }\n      data = this.viewData[i].v;\n      pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\n      ctx.moveTo(pt[0], pt[1]);\n      var j;\n      var jLen = data._length;\n      for (j = 1; j < jLen; j += 1) {\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n      }\n      pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\n      ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n    }\n  }\n  this.element.globalData.renderer.save(true);\n  ctx.clip();\n};\n\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\n\nCVMaskElement.prototype.destroy = function () {\n  this.element = null;\n};\n\nfunction CVBaseElement() {\n}\n\nCVBaseElement.prototype = {\n  createElements: function () {},\n  initRendererElement: function () {},\n  createContainerElements: function () {\n    this.canvasContext = this.globalData.canvasContext;\n    this.renderableEffectsManager = new CVEffects(this);\n  },\n  createContent: function () {},\n  setBlendMode: function () {\n    var globalData = this.globalData;\n    if (globalData.blendMode !== this.data.bm) {\n      globalData.blendMode = this.data.bm;\n      var blendModeValue = getBlendMode(this.data.bm);\n      globalData.canvasContext.globalCompositeOperation = blendModeValue;\n    }\n  },\n  createRenderableComponents: function () {\n    this.maskManager = new CVMaskElement(this.data, this);\n  },\n  hideElement: function () {\n    if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n      this.hidden = true;\n    }\n  },\n  showElement: function () {\n    if (this.isInRange && !this.isTransparent) {\n      this.hidden = false;\n      this._isFirstFrame = true;\n      this.maskManager._isFirstFrame = true;\n    }\n  },\n  renderFrame: function () {\n    if (this.hidden || this.data.hd) {\n      return;\n    }\n    this.renderTransform();\n    this.renderRenderable();\n    this.setBlendMode();\n    var forceRealStack = this.data.ty === 0;\n    this.globalData.renderer.save(forceRealStack);\n    this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\n    this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\n    this.renderInnerContent();\n    this.globalData.renderer.restore(forceRealStack);\n    if (this.maskManager.hasMasks) {\n      this.globalData.renderer.restore(true);\n    }\n    if (this._isFirstFrame) {\n      this._isFirstFrame = false;\n    }\n  },\n  destroy: function () {\n    this.canvasContext = null;\n    this.data = null;\n    this.globalData = null;\n    this.maskManager.destroy();\n  },\n  mHelper: new Matrix(),\n};\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n\nfunction CVShapeData(element, data, styles, transformsManager) {\n  this.styledShapes = [];\n  this.tr = [0, 0, 0, 0, 0, 0];\n  var ty = 4;\n  if (data.ty === 'rc') {\n    ty = 5;\n  } else if (data.ty === 'el') {\n    ty = 6;\n  } else if (data.ty === 'sr') {\n    ty = 7;\n  }\n  this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\n  var i;\n  var len = styles.length;\n  var styledShape;\n  for (i = 0; i < len; i += 1) {\n    if (!styles[i].closed) {\n      styledShape = {\n        transforms: transformsManager.addTransformSequence(styles[i].transforms),\n        trNodes: [],\n      };\n      this.styledShapes.push(styledShape);\n      styles[i].elements.push(styledShape);\n    }\n  }\n}\n\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n\nfunction CVShapeElement(data, globalData, comp) {\n  this.shapes = [];\n  this.shapesData = data.shapes;\n  this.stylesList = [];\n  this.itemsData = [];\n  this.prevViewData = [];\n  this.shapeModifiers = [];\n  this.processedElements = [];\n  this.transformsManager = new ShapeTransformManager();\n  this.initElement(data, globalData, comp);\n}\n\nextendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\n\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\n\nCVShapeElement.prototype.transformHelper = { opacity: 1, _opMdf: false };\n\nCVShapeElement.prototype.dashResetter = [];\n\nCVShapeElement.prototype.createContent = function () {\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n};\n\nCVShapeElement.prototype.createStyleElement = function (data, transforms) {\n  var styleElem = {\n    data: data,\n    type: data.ty,\n    preTransforms: this.transformsManager.addTransformSequence(transforms),\n    transforms: [],\n    elements: [],\n    closed: data.hd === true,\n  };\n  var elementData = {};\n  if (data.ty === 'fl' || data.ty === 'st') {\n    elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\n    if (!elementData.c.k) {\n      styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\n    }\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\n    elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\n    elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\n    elementData.h = PropertyFactory.getProp(this, data.h || { k: 0 }, 0, 0.01, this);\n    elementData.a = PropertyFactory.getProp(this, data.a || { k: 0 }, 0, degToRads, this);\n    elementData.g = new GradientProperty(this, data.g, this);\n  }\n  elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\n  if (data.ty === 'st' || data.ty === 'gs') {\n    styleElem.lc = lineCapEnum[data.lc || 2];\n    styleElem.lj = lineJoinEnum[data.lj || 2];\n    if (data.lj == 1) { // eslint-disable-line eqeqeq\n      styleElem.ml = data.ml;\n    }\n    elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\n    if (!elementData.w.k) {\n      styleElem.wi = elementData.w.v;\n    }\n    if (data.d) {\n      var d = new DashProperty(this, data.d, 'canvas', this);\n      elementData.d = d;\n      if (!elementData.d.k) {\n        styleElem.da = elementData.d.dashArray;\n        styleElem.do = elementData.d.dashoffset[0];\n      }\n    }\n  } else {\n    styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\n  }\n  this.stylesList.push(styleElem);\n  elementData.style = styleElem;\n  return elementData;\n};\n\nCVShapeElement.prototype.createGroupElement = function () {\n  var elementData = {\n    it: [],\n    prevViewData: [],\n  };\n  return elementData;\n};\n\nCVShapeElement.prototype.createTransformElement = function (data) {\n  var elementData = {\n    transform: {\n      opacity: 1,\n      _opMdf: false,\n      key: this.transformsManager.getNewKey(),\n      op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\n      mProps: TransformPropertyFactory.getTransformProperty(this, data, this),\n    },\n  };\n  return elementData;\n};\n\nCVShapeElement.prototype.createShapeElement = function (data) {\n  var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\n\n  this.shapes.push(elementData);\n  this.addShapeToModifiers(elementData);\n  return elementData;\n};\n\nCVShapeElement.prototype.reloadShapes = function () {\n  this._isFirstFrame = true;\n  var i;\n  var len = this.itemsData.length;\n  for (i = 0; i < len; i += 1) {\n    this.prevViewData[i] = this.itemsData[i];\n  }\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n  len = this.dynamicProperties.length;\n  for (i = 0; i < len; i += 1) {\n    this.dynamicProperties[i].getValue();\n  }\n  this.renderModifiers();\n  this.transformsManager.processSequences(this._isFirstFrame);\n};\n\nCVShapeElement.prototype.addTransformToStyleList = function (transform) {\n  var i;\n  var len = this.stylesList.length;\n  for (i = 0; i < len; i += 1) {\n    if (!this.stylesList[i].closed) {\n      this.stylesList[i].transforms.push(transform);\n    }\n  }\n};\n\nCVShapeElement.prototype.removeTransformFromStyleList = function () {\n  var i;\n  var len = this.stylesList.length;\n  for (i = 0; i < len; i += 1) {\n    if (!this.stylesList[i].closed) {\n      this.stylesList[i].transforms.pop();\n    }\n  }\n};\n\nCVShapeElement.prototype.closeStyles = function (styles) {\n  var i;\n  var len = styles.length;\n  for (i = 0; i < len; i += 1) {\n    styles[i].closed = true;\n  }\n};\n\nCVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\n  var i;\n  var len = arr.length - 1;\n  var j;\n  var jLen;\n  var ownStyles = [];\n  var ownModifiers = [];\n  var processedPos;\n  var modifier;\n  var currentTransform;\n  var ownTransforms = [].concat(transforms);\n  for (i = len; i >= 0; i -= 1) {\n    processedPos = this.searchProcessedElement(arr[i]);\n    if (!processedPos) {\n      arr[i]._shouldRender = shouldRender;\n    } else {\n      itemsData[i] = prevViewData[processedPos - 1];\n    }\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\n      if (!processedPos) {\n        itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\n      } else {\n        itemsData[i].style.closed = false;\n      }\n\n      ownStyles.push(itemsData[i].style);\n    } else if (arr[i].ty === 'gr') {\n      if (!processedPos) {\n        itemsData[i] = this.createGroupElement(arr[i]);\n      } else {\n        jLen = itemsData[i].it.length;\n        for (j = 0; j < jLen; j += 1) {\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\n        }\n      }\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\n    } else if (arr[i].ty === 'tr') {\n      if (!processedPos) {\n        currentTransform = this.createTransformElement(arr[i]);\n        itemsData[i] = currentTransform;\n      }\n      ownTransforms.push(itemsData[i]);\n      this.addTransformToStyleList(itemsData[i]);\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n      if (!processedPos) {\n        itemsData[i] = this.createShapeElement(arr[i]);\n      }\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb') {\n      if (!processedPos) {\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\n        modifier.init(this, arr[i]);\n        itemsData[i] = modifier;\n        this.shapeModifiers.push(modifier);\n      } else {\n        modifier = itemsData[i];\n        modifier.closed = false;\n      }\n      ownModifiers.push(modifier);\n    } else if (arr[i].ty === 'rp') {\n      if (!processedPos) {\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\n        itemsData[i] = modifier;\n        modifier.init(this, arr, i, itemsData);\n        this.shapeModifiers.push(modifier);\n        shouldRender = false;\n      } else {\n        modifier = itemsData[i];\n        modifier.closed = true;\n      }\n      ownModifiers.push(modifier);\n    }\n    this.addProcessedElement(arr[i], i + 1);\n  }\n  this.removeTransformFromStyleList();\n  this.closeStyles(ownStyles);\n  len = ownModifiers.length;\n  for (i = 0; i < len; i += 1) {\n    ownModifiers[i].closed = true;\n  }\n};\n\nCVShapeElement.prototype.renderInnerContent = function () {\n  this.transformHelper.opacity = 1;\n  this.transformHelper._opMdf = false;\n  this.renderModifiers();\n  this.transformsManager.processSequences(this._isFirstFrame);\n  this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\n};\n\nCVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\n  if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\n    groupTransform.opacity = parentTransform.opacity;\n    groupTransform.opacity *= groupTransform.op.v;\n    groupTransform._opMdf = true;\n  }\n};\n\nCVShapeElement.prototype.drawLayer = function () {\n  var i;\n  var len = this.stylesList.length;\n  var j;\n  var jLen;\n  var k;\n  var kLen;\n  var elems;\n  var nodes;\n  var renderer = this.globalData.renderer;\n  var ctx = this.globalData.canvasContext;\n  var type;\n  var currentStyle;\n  for (i = 0; i < len; i += 1) {\n    currentStyle = this.stylesList[i];\n    type = currentStyle.type;\n\n    // Skipping style when\n    // Stroke width equals 0\n    // style should not be rendered (extra unused repeaters)\n    // current opacity equals 0\n    // global opacity equals 0\n    if (!(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\n      renderer.save();\n      elems = currentStyle.elements;\n      if (type === 'st' || type === 'gs') {\n        ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\n        ctx.lineWidth = currentStyle.wi;\n        ctx.lineCap = currentStyle.lc;\n        ctx.lineJoin = currentStyle.lj;\n        ctx.miterLimit = currentStyle.ml || 0;\n      } else {\n        ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\n      }\n      renderer.ctxOpacity(currentStyle.coOp);\n      if (type !== 'st' && type !== 'gs') {\n        ctx.beginPath();\n      }\n      renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\n      jLen = elems.length;\n      for (j = 0; j < jLen; j += 1) {\n        if (type === 'st' || type === 'gs') {\n          ctx.beginPath();\n          if (currentStyle.da) {\n            ctx.setLineDash(currentStyle.da);\n            ctx.lineDashOffset = currentStyle.do;\n          }\n        }\n        nodes = elems[j].trNodes;\n        kLen = nodes.length;\n\n        for (k = 0; k < kLen; k += 1) {\n          if (nodes[k].t === 'm') {\n            ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\n          } else if (nodes[k].t === 'c') {\n            ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\n          } else {\n            ctx.closePath();\n          }\n        }\n        if (type === 'st' || type === 'gs') {\n          ctx.stroke();\n          if (currentStyle.da) {\n            ctx.setLineDash(this.dashResetter);\n          }\n        }\n      }\n      if (type !== 'st' && type !== 'gs') {\n        ctx.fill(currentStyle.r);\n      }\n      renderer.restore();\n    }\n  }\n};\n\nCVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\n  var i;\n  var len = items.length - 1;\n  var groupTransform;\n  groupTransform = parentTransform;\n  for (i = len; i >= 0; i -= 1) {\n    if (items[i].ty === 'tr') {\n      groupTransform = data[i].transform;\n      this.renderShapeTransform(parentTransform, groupTransform);\n    } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\n      this.renderPath(items[i], data[i]);\n    } else if (items[i].ty === 'fl') {\n      this.renderFill(items[i], data[i], groupTransform);\n    } else if (items[i].ty === 'st') {\n      this.renderStroke(items[i], data[i], groupTransform);\n    } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\n      this.renderGradientFill(items[i], data[i], groupTransform);\n    } else if (items[i].ty === 'gr') {\n      this.renderShape(groupTransform, items[i].it, data[i].it);\n    } else if (items[i].ty === 'tm') {\n      //\n    }\n  }\n  if (isMain) {\n    this.drawLayer();\n  }\n};\n\nCVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\n  if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\n    var shapeNodes = styledShape.trNodes;\n    var paths = shape.paths;\n    var i;\n    var len;\n    var j;\n    var jLen = paths._length;\n    shapeNodes.length = 0;\n    var groupTransformMat = styledShape.transforms.finalTransform;\n    for (j = 0; j < jLen; j += 1) {\n      var pathNodes = paths.shapes[j];\n      if (pathNodes && pathNodes.v) {\n        len = pathNodes._length;\n        for (i = 1; i < len; i += 1) {\n          if (i === 1) {\n            shapeNodes.push({\n              t: 'm',\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\n            });\n          }\n          shapeNodes.push({\n            t: 'c',\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i]),\n          });\n        }\n        if (len === 1) {\n          shapeNodes.push({\n            t: 'm',\n            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\n          });\n        }\n        if (pathNodes.c && len) {\n          shapeNodes.push({\n            t: 'c',\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0]),\n          });\n          shapeNodes.push({\n            t: 'z',\n          });\n        }\n      }\n    }\n    styledShape.trNodes = shapeNodes;\n  }\n};\n\nCVShapeElement.prototype.renderPath = function (pathData, itemData) {\n  if (pathData.hd !== true && pathData._shouldRender) {\n    var i;\n    var len = itemData.styledShapes.length;\n    for (i = 0; i < len; i += 1) {\n      this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\n    }\n  }\n};\n\nCVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\n  var styleElem = itemData.style;\n\n  if (itemData.c._mdf || this._isFirstFrame) {\n    styleElem.co = 'rgb('\n        + bmFloor(itemData.c.v[0]) + ','\n        + bmFloor(itemData.c.v[1]) + ','\n        + bmFloor(itemData.c.v[2]) + ')';\n  }\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\n  }\n};\n\nCVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\n  var styleElem = itemData.style;\n  var grd;\n  if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\n    var ctx = this.globalData.canvasContext;\n    var pt1 = itemData.s.v;\n    var pt2 = itemData.e.v;\n    if (styleData.t === 1) {\n      grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\n    } else {\n      var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n      var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n\n      var percent = itemData.h.v;\n      if (percent >= 1) {\n        percent = 0.99;\n      } else if (percent <= -1) {\n        percent = -0.99;\n      }\n      var dist = rad * percent;\n      var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n      var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n      grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\n    }\n\n    var i;\n    var len = styleData.g.p;\n    var cValues = itemData.g.c;\n    var opacity = 1;\n\n    for (i = 0; i < len; i += 1) {\n      if (itemData.g._hasOpacity && itemData.g._collapsable) {\n        opacity = itemData.g.o[i * 2 + 1];\n      }\n      grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\n    }\n    styleElem.grd = grd;\n  }\n  styleElem.coOp = itemData.o.v * groupTransform.opacity;\n};\n\nCVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\n  var styleElem = itemData.style;\n  var d = itemData.d;\n  if (d && (d._mdf || this._isFirstFrame)) {\n    styleElem.da = d.dashArray;\n    styleElem.do = d.dashoffset[0];\n  }\n  if (itemData.c._mdf || this._isFirstFrame) {\n    styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n  }\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\n  }\n  if (itemData.w._mdf || this._isFirstFrame) {\n    styleElem.wi = itemData.w.v;\n  }\n};\n\nCVShapeElement.prototype.destroy = function () {\n  this.shapesData = null;\n  this.globalData = null;\n  this.canvasContext = null;\n  this.stylesList.length = 0;\n  this.itemsData.length = 0;\n};\n\nfunction CVTextElement(data, globalData, comp) {\n  this.textSpans = [];\n  this.yOffset = 0;\n  this.fillColorAnim = false;\n  this.strokeColorAnim = false;\n  this.strokeWidthAnim = false;\n  this.stroke = false;\n  this.fill = false;\n  this.justifyOffset = 0;\n  this.currentRender = null;\n  this.renderType = 'canvas';\n  this.values = {\n    fill: 'rgba(0,0,0,0)',\n    stroke: 'rgba(0,0,0,0)',\n    sWidth: 0,\n    fValue: '',\n  };\n  this.initElement(data, globalData, comp);\n}\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\n\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\n\nCVTextElement.prototype.buildNewText = function () {\n  var documentData = this.textProperty.currentData;\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n\n  var hasFill = false;\n  if (documentData.fc) {\n    hasFill = true;\n    this.values.fill = this.buildColor(documentData.fc);\n  } else {\n    this.values.fill = 'rgba(0,0,0,0)';\n  }\n  this.fill = hasFill;\n  var hasStroke = false;\n  if (documentData.sc) {\n    hasStroke = true;\n    this.values.stroke = this.buildColor(documentData.sc);\n    this.values.sWidth = documentData.sw;\n  }\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n  var i;\n  var len;\n  var letters = documentData.l;\n  var matrixHelper = this.mHelper;\n  this.stroke = hasStroke;\n  this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\n  len = documentData.finalText.length;\n  // this.tHelper.font = this.values.fValue;\n  var charData;\n  var shapeData;\n  var k;\n  var kLen;\n  var shapes;\n  var j;\n  var jLen;\n  var pathNodes;\n  var commands;\n  var pathArr;\n  var singleShape = this.data.singleShape;\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n  var xPos = 0;\n  var yPos = 0;\n  var firstLine = true;\n  var cnt = 0;\n  for (i = 0; i < len; i += 1) {\n    charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n    shapeData = (charData && charData.data) || {};\n    matrixHelper.reset();\n    if (singleShape && letters[i].n) {\n      xPos = -trackingOffset;\n      yPos += documentData.yOffset;\n      yPos += firstLine ? 1 : 0;\n      firstLine = false;\n    }\n    shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n    jLen = shapes.length;\n    matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n    if (singleShape) {\n      this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n    }\n    commands = createSizedArray(jLen - 1);\n    var commandsCounter = 0;\n    for (j = 0; j < jLen; j += 1) {\n      if (shapes[j].ty === 'sh') {\n        kLen = shapes[j].ks.k.i.length;\n        pathNodes = shapes[j].ks.k;\n        pathArr = [];\n        for (k = 1; k < kLen; k += 1) {\n          if (k === 1) {\n            pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n          }\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\n        }\n        pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n        commands[commandsCounter] = pathArr;\n        commandsCounter += 1;\n      }\n    }\n    if (singleShape) {\n      xPos += letters[i].l;\n      xPos += trackingOffset;\n    }\n    if (this.textSpans[cnt]) {\n      this.textSpans[cnt].elem = commands;\n    } else {\n      this.textSpans[cnt] = { elem: commands };\n    }\n    cnt += 1;\n  }\n};\n\nCVTextElement.prototype.renderInnerContent = function () {\n  var ctx = this.canvasContext;\n  ctx.font = this.values.fValue;\n  ctx.lineCap = 'butt';\n  ctx.lineJoin = 'miter';\n  ctx.miterLimit = 4;\n\n  if (!this.data.singleShape) {\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n  }\n\n  var i;\n  var len;\n  var j;\n  var jLen;\n  var k;\n  var kLen;\n  var renderedLetters = this.textAnimator.renderedLetters;\n\n  var letters = this.textProperty.currentData.l;\n\n  len = letters.length;\n  var renderedLetter;\n  var lastFill = null;\n  var lastStroke = null;\n  var lastStrokeW = null;\n  var commands;\n  var pathArr;\n  for (i = 0; i < len; i += 1) {\n    if (!letters[i].n) {\n      renderedLetter = renderedLetters[i];\n      if (renderedLetter) {\n        this.globalData.renderer.save();\n        this.globalData.renderer.ctxTransform(renderedLetter.p);\n        this.globalData.renderer.ctxOpacity(renderedLetter.o);\n      }\n      if (this.fill) {\n        if (renderedLetter && renderedLetter.fc) {\n          if (lastFill !== renderedLetter.fc) {\n            lastFill = renderedLetter.fc;\n            ctx.fillStyle = renderedLetter.fc;\n          }\n        } else if (lastFill !== this.values.fill) {\n          lastFill = this.values.fill;\n          ctx.fillStyle = this.values.fill;\n        }\n        commands = this.textSpans[i].elem;\n        jLen = commands.length;\n        this.globalData.canvasContext.beginPath();\n        for (j = 0; j < jLen; j += 1) {\n          pathArr = commands[j];\n          kLen = pathArr.length;\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n          for (k = 2; k < kLen; k += 6) {\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n          }\n        }\n        this.globalData.canvasContext.closePath();\n        this.globalData.canvasContext.fill();\n        /// ctx.fillText(this.textSpans[i].val,0,0);\n      }\n      if (this.stroke) {\n        if (renderedLetter && renderedLetter.sw) {\n          if (lastStrokeW !== renderedLetter.sw) {\n            lastStrokeW = renderedLetter.sw;\n            ctx.lineWidth = renderedLetter.sw;\n          }\n        } else if (lastStrokeW !== this.values.sWidth) {\n          lastStrokeW = this.values.sWidth;\n          ctx.lineWidth = this.values.sWidth;\n        }\n        if (renderedLetter && renderedLetter.sc) {\n          if (lastStroke !== renderedLetter.sc) {\n            lastStroke = renderedLetter.sc;\n            ctx.strokeStyle = renderedLetter.sc;\n          }\n        } else if (lastStroke !== this.values.stroke) {\n          lastStroke = this.values.stroke;\n          ctx.strokeStyle = this.values.stroke;\n        }\n        commands = this.textSpans[i].elem;\n        jLen = commands.length;\n        this.globalData.canvasContext.beginPath();\n        for (j = 0; j < jLen; j += 1) {\n          pathArr = commands[j];\n          kLen = pathArr.length;\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n          for (k = 2; k < kLen; k += 6) {\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n          }\n        }\n        this.globalData.canvasContext.closePath();\n        this.globalData.canvasContext.stroke();\n        /// ctx.strokeText(letters[i].val,0,0);\n      }\n      if (renderedLetter) {\n        this.globalData.renderer.restore();\n      }\n    }\n  }\n};\n\nfunction CVImageElement(data, globalData, comp) {\n  this.assetData = globalData.getAssetData(data.refId);\n  this.img = globalData.imageLoader.getAsset(this.assetData);\n  this.initElement(data, globalData, comp);\n}\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\n\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\nCVImageElement.prototype.createContent = function () {\n  if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\n    var canvas = createTag('canvas');\n    canvas.width = this.assetData.w;\n    canvas.height = this.assetData.h;\n    var ctx = canvas.getContext('2d');\n\n    var imgW = this.img.width;\n    var imgH = this.img.height;\n    var imgRel = imgW / imgH;\n    var canvasRel = this.assetData.w / this.assetData.h;\n    var widthCrop;\n    var heightCrop;\n    var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\n    if ((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\n      heightCrop = imgH;\n      widthCrop = heightCrop * canvasRel;\n    } else {\n      widthCrop = imgW;\n      heightCrop = widthCrop / canvasRel;\n    }\n    ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\n    this.img = canvas;\n  }\n};\n\nCVImageElement.prototype.renderInnerContent = function () {\n  this.canvasContext.drawImage(this.img, 0, 0);\n};\n\nCVImageElement.prototype.destroy = function () {\n  this.img = null;\n};\n\nfunction CVSolidElement(data, globalData, comp) {\n  this.initElement(data, globalData, comp);\n}\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\n\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\nCVSolidElement.prototype.renderInnerContent = function () {\n  var ctx = this.canvasContext;\n  ctx.fillStyle = this.data.sc;\n  ctx.fillRect(0, 0, this.data.sw, this.data.sh);\n  //\n};\n\nfunction CanvasRendererBase(animationItem, config) {\n  this.animationItem = animationItem;\n  this.renderConfig = {\n    clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\n    context: (config && config.context) || null,\n    progressiveLoad: (config && config.progressiveLoad) || false,\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\n    contentVisibility: (config && config.contentVisibility) || 'visible',\n    className: (config && config.className) || '',\n    id: (config && config.id) || '',\n  };\n  this.renderConfig.dpr = (config && config.dpr) || 1;\n  if (this.animationItem.wrapper) {\n    this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\n  }\n  this.renderedFrame = -1;\n  this.globalData = {\n    frameNum: -1,\n    _mdf: false,\n    renderConfig: this.renderConfig,\n    currentGlobalAlpha: -1,\n  };\n  this.contextData = new CVContextData();\n  this.elements = [];\n  this.pendingElements = [];\n  this.transformMat = new Matrix();\n  this.completeLayers = false;\n  this.rendererType = 'canvas';\n}\nextendPrototype([BaseRenderer], CanvasRendererBase);\n\nCanvasRendererBase.prototype.createShape = function (data) {\n  return new CVShapeElement(data, this.globalData, this);\n};\n\nCanvasRendererBase.prototype.createText = function (data) {\n  return new CVTextElement(data, this.globalData, this);\n};\n\nCanvasRendererBase.prototype.createImage = function (data) {\n  return new CVImageElement(data, this.globalData, this);\n};\n\nCanvasRendererBase.prototype.createSolid = function (data) {\n  return new CVSolidElement(data, this.globalData, this);\n};\n\nCanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n\nCanvasRendererBase.prototype.ctxTransform = function (props) {\n  if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\n    return;\n  }\n  if (!this.renderConfig.clearCanvas) {\n    this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\n    return;\n  }\n  this.transformMat.cloneFromProps(props);\n  var cProps = this.contextData.cTr.props;\n  this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]);\n  // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\n  this.contextData.cTr.cloneFromProps(this.transformMat.props);\n  var trProps = this.contextData.cTr.props;\n  this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\n};\n\nCanvasRendererBase.prototype.ctxOpacity = function (op) {\n  /* if(op === 1){\n        return;\n    } */\n  if (!this.renderConfig.clearCanvas) {\n    this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\n    return;\n  }\n  this.contextData.cO *= op < 0 ? 0 : op;\n  if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\n    this.canvasContext.globalAlpha = this.contextData.cO;\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\n  }\n};\n\nCanvasRendererBase.prototype.reset = function () {\n  if (!this.renderConfig.clearCanvas) {\n    this.canvasContext.restore();\n    return;\n  }\n  this.contextData.reset();\n};\n\nCanvasRendererBase.prototype.save = function (actionFlag) {\n  if (!this.renderConfig.clearCanvas) {\n    this.canvasContext.save();\n    return;\n  }\n  if (actionFlag) {\n    this.canvasContext.save();\n  }\n  var props = this.contextData.cTr.props;\n  if (this.contextData._length <= this.contextData.cArrPos) {\n    this.contextData.duplicate();\n  }\n  var i;\n  var arr = this.contextData.saved[this.contextData.cArrPos];\n  for (i = 0; i < 16; i += 1) {\n    arr[i] = props[i];\n  }\n  this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\n  this.contextData.cArrPos += 1;\n};\n\nCanvasRendererBase.prototype.restore = function (actionFlag) {\n  if (!this.renderConfig.clearCanvas) {\n    this.canvasContext.restore();\n    return;\n  }\n  if (actionFlag) {\n    this.canvasContext.restore();\n    this.globalData.blendMode = 'source-over';\n  }\n  this.contextData.cArrPos -= 1;\n  var popped = this.contextData.saved[this.contextData.cArrPos];\n  var i;\n  var arr = this.contextData.cTr.props;\n  for (i = 0; i < 16; i += 1) {\n    arr[i] = popped[i];\n  }\n  this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\n  popped = this.contextData.savedOp[this.contextData.cArrPos];\n  this.contextData.cO = popped;\n  if (this.globalData.currentGlobalAlpha !== popped) {\n    this.canvasContext.globalAlpha = popped;\n    this.globalData.currentGlobalAlpha = popped;\n  }\n};\n\nCanvasRendererBase.prototype.configAnimation = function (animData) {\n  if (this.animationItem.wrapper) {\n    this.animationItem.container = createTag('canvas');\n    var containerStyle = this.animationItem.container.style;\n    containerStyle.width = '100%';\n    containerStyle.height = '100%';\n    var origin = '0px 0px 0px';\n    containerStyle.transformOrigin = origin;\n    containerStyle.mozTransformOrigin = origin;\n    containerStyle.webkitTransformOrigin = origin;\n    containerStyle['-webkit-transform'] = origin;\n    containerStyle.contentVisibility = this.renderConfig.contentVisibility;\n    this.animationItem.wrapper.appendChild(this.animationItem.container);\n    this.canvasContext = this.animationItem.container.getContext('2d');\n    if (this.renderConfig.className) {\n      this.animationItem.container.setAttribute('class', this.renderConfig.className);\n    }\n    if (this.renderConfig.id) {\n      this.animationItem.container.setAttribute('id', this.renderConfig.id);\n    }\n  } else {\n    this.canvasContext = this.renderConfig.context;\n  }\n  this.data = animData;\n  this.layers = animData.layers;\n  this.transformCanvas = {\n    w: animData.w,\n    h: animData.h,\n    sx: 0,\n    sy: 0,\n    tx: 0,\n    ty: 0,\n  };\n  this.setupGlobalData(animData, document.body);\n  this.globalData.canvasContext = this.canvasContext;\n  this.globalData.renderer = this;\n  this.globalData.isDashed = false;\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n  this.globalData.transformCanvas = this.transformCanvas;\n  this.elements = createSizedArray(animData.layers.length);\n\n  this.updateContainerSize();\n};\n\nCanvasRendererBase.prototype.updateContainerSize = function () {\n  this.reset();\n  var elementWidth;\n  var elementHeight;\n  if (this.animationItem.wrapper && this.animationItem.container) {\n    elementWidth = this.animationItem.wrapper.offsetWidth;\n    elementHeight = this.animationItem.wrapper.offsetHeight;\n    this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\n    this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\n  } else {\n    elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\n    elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\n  }\n  var elementRel;\n  var animationRel;\n  if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\n    var par = this.renderConfig.preserveAspectRatio.split(' ');\n    var fillType = par[1] || 'meet';\n    var pos = par[0] || 'xMidYMid';\n    var xPos = pos.substr(0, 4);\n    var yPos = pos.substr(4);\n    elementRel = elementWidth / elementHeight;\n    animationRel = this.transformCanvas.w / this.transformCanvas.h;\n    if ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice')) {\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n    } else {\n      this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n    }\n\n    if (xPos === 'xMid' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\n      this.transformCanvas.tx = ((elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2) * this.renderConfig.dpr;\n    } else if (xPos === 'xMax' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\n      this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\n    } else {\n      this.transformCanvas.tx = 0;\n    }\n    if (yPos === 'YMid' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2) * this.renderConfig.dpr;\n    } else if (yPos === 'YMax' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w))) * this.renderConfig.dpr;\n    } else {\n      this.transformCanvas.ty = 0;\n    }\n  } else if (this.renderConfig.preserveAspectRatio === 'none') {\n    this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n    this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n    this.transformCanvas.tx = 0;\n    this.transformCanvas.ty = 0;\n  } else {\n    this.transformCanvas.sx = this.renderConfig.dpr;\n    this.transformCanvas.sy = this.renderConfig.dpr;\n    this.transformCanvas.tx = 0;\n    this.transformCanvas.ty = 0;\n  }\n  this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\n  /* var i, len = this.elements.length;\n    for(i=0;i<len;i+=1){\n        if(this.elements[i] && this.elements[i].data.ty === 0){\n            this.elements[i].resize(this.globalData.transformCanvas);\n        }\n    } */\n  this.ctxTransform(this.transformCanvas.props);\n  this.canvasContext.beginPath();\n  this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n  this.canvasContext.closePath();\n  this.canvasContext.clip();\n\n  this.renderFrame(this.renderedFrame, true);\n};\n\nCanvasRendererBase.prototype.destroy = function () {\n  if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\n    this.animationItem.wrapper.innerText = '';\n  }\n  var i;\n  var len = this.layers ? this.layers.length : 0;\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (this.elements[i]) {\n      this.elements[i].destroy();\n    }\n  }\n  this.elements.length = 0;\n  this.globalData.canvasContext = null;\n  this.animationItem.container = null;\n  this.destroyed = true;\n};\n\nCanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\n  if ((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1) {\n    return;\n  }\n  this.renderedFrame = num;\n  this.globalData.frameNum = num - this.animationItem._isFirstFrame;\n  this.globalData.frameId += 1;\n  this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\n  this.globalData.projectInterface.currentFrame = num;\n\n  // console.log('--------');\n  // console.log('NEW: ',num);\n  var i;\n  var len = this.layers.length;\n  if (!this.completeLayers) {\n    this.checkLayers(num);\n  }\n\n  for (i = 0; i < len; i += 1) {\n    if (this.completeLayers || this.elements[i]) {\n      this.elements[i].prepareFrame(num - this.layers[i].st);\n    }\n  }\n  if (this.globalData._mdf) {\n    if (this.renderConfig.clearCanvas === true) {\n      this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n    } else {\n      this.save();\n    }\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n    if (this.renderConfig.clearCanvas !== true) {\n      this.restore();\n    }\n  }\n};\n\nCanvasRendererBase.prototype.buildItem = function (pos) {\n  var elements = this.elements;\n  if (elements[pos] || this.layers[pos].ty === 99) {\n    return;\n  }\n  var element = this.createItem(this.layers[pos], this, this.globalData);\n  elements[pos] = element;\n  element.initExpressions();\n  /* if(this.layers[pos].ty === 0){\n        element.resize(this.globalData.transformCanvas);\n    } */\n};\n\nCanvasRendererBase.prototype.checkPendingElements = function () {\n  while (this.pendingElements.length) {\n    var element = this.pendingElements.pop();\n    element.checkParenting();\n  }\n};\n\nCanvasRendererBase.prototype.hide = function () {\n  this.animationItem.container.style.display = 'none';\n};\n\nCanvasRendererBase.prototype.show = function () {\n  this.animationItem.container.style.display = 'block';\n};\n\nfunction CVCompElement(data, globalData, comp) {\n  this.completeLayers = false;\n  this.layers = data.layers;\n  this.pendingElements = [];\n  this.elements = createSizedArray(this.layers.length);\n  this.initElement(data, globalData, comp);\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\n}\n\nextendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\n\nCVCompElement.prototype.renderInnerContent = function () {\n  var ctx = this.canvasContext;\n  ctx.beginPath();\n  ctx.moveTo(0, 0);\n  ctx.lineTo(this.data.w, 0);\n  ctx.lineTo(this.data.w, this.data.h);\n  ctx.lineTo(0, this.data.h);\n  ctx.lineTo(0, 0);\n  ctx.clip();\n  var i;\n  var len = this.layers.length;\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (this.completeLayers || this.elements[i]) {\n      this.elements[i].renderFrame();\n    }\n  }\n};\n\nCVCompElement.prototype.destroy = function () {\n  var i;\n  var len = this.layers.length;\n  for (i = len - 1; i >= 0; i -= 1) {\n    if (this.elements[i]) {\n      this.elements[i].destroy();\n    }\n  }\n  this.layers = null;\n  this.elements = null;\n};\n\nCVCompElement.prototype.createComp = function (data) {\n  return new CVCompElement(data, this.globalData, this);\n};\n\nfunction CanvasRenderer(animationItem, config) {\n  this.animationItem = animationItem;\n  this.renderConfig = {\n    clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\n    context: (config && config.context) || null,\n    progressiveLoad: (config && config.progressiveLoad) || false,\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\n    contentVisibility: (config && config.contentVisibility) || 'visible',\n    className: (config && config.className) || '',\n    id: (config && config.id) || '',\n  };\n  this.renderConfig.dpr = (config && config.dpr) || 1;\n  if (this.animationItem.wrapper) {\n    this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\n  }\n  this.renderedFrame = -1;\n  this.globalData = {\n    frameNum: -1,\n    _mdf: false,\n    renderConfig: this.renderConfig,\n    currentGlobalAlpha: -1,\n  };\n  this.contextData = new CVContextData();\n  this.elements = [];\n  this.pendingElements = [];\n  this.transformMat = new Matrix();\n  this.completeLayers = false;\n  this.rendererType = 'canvas';\n}\nextendPrototype([CanvasRendererBase], CanvasRenderer);\n\nCanvasRenderer.prototype.createComp = function (data) {\n  return new CVCompElement(data, this.globalData, this);\n};\n\n// Registering renderers\nregisterRenderer('canvas', CanvasRenderer);\n\n// Registering shape modifiers\nShapeModifiers.registerModifier('tm', TrimModifier);\nShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\nShapeModifiers.registerModifier('rp', RepeaterModifier);\nShapeModifiers.registerModifier('rd', RoundCornersModifier);\n\nconst Expressions = (function () {\n  var ob = {};\n  ob.initExpressions = initExpressions;\n\n  function initExpressions(animation) {\n    var stackCount = 0;\n    var registers = [];\n\n    function pushExpression() {\n      stackCount += 1;\n    }\n\n    function popExpression() {\n      stackCount -= 1;\n      if (stackCount === 0) {\n        releaseInstances();\n      }\n    }\n\n    function registerExpressionProperty(expression) {\n      if (registers.indexOf(expression) === -1) {\n        registers.push(expression);\n      }\n    }\n\n    function releaseInstances() {\n      var i;\n      var len = registers.length;\n      for (i = 0; i < len; i += 1) {\n        registers[i].release();\n      }\n      registers.length = 0;\n    }\n\n    animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\n    animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\n    animation.renderer.globalData.pushExpression = pushExpression;\n    animation.renderer.globalData.popExpression = popExpression;\n    animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\n  }\n  return ob;\n}());\n\n/* eslint-disable */\n/*\n Copyright 2014 David Bau.\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the\n \"Software\"), to deal in the Software without restriction, including\n without limitation the rights to use, copy, modify, merge, publish,\n distribute, sublicense, and/or sell copies of the Software, and to\n permit persons to whom the Software is furnished to do so, subject to\n the following conditions:\n\n The above copyright notice and this permission notice shall be\n included in all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n */\n\nfunction seedRandom(pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n    var global = this,\n        width = 256,        // each RC4 output is 0 <= x < 256\n        chunks = 6,         // at least six RC4 outputs for each double\n        digits = 52,        // there are 52 significant digits in a double\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n        startdenom = math.pow(width, chunks),\n        significance = math.pow(2, digits),\n        overflow = significance * 2,\n        mask = width - 1,\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\n    function seedrandom(seed, options, callback) {\n        var key = [];\n        options = (options === true) ? { entropy: true } : (options || {});\n\n        // Flatten the seed string or build one from local entropy if needed.\n        var shortseed = mixkey(flatten(\n            options.entropy ? [seed, tostring(pool)] :\n                (seed === null) ? autoseed() : seed, 3), key);\n\n        // Use the seed to initialize an ARC4 generator.\n        var arc4 = new ARC4(key);\n\n        // This function returns a random double in [0, 1) that contains\n        // randomness in every bit of the mantissa of the IEEE 754 value.\n        var prng = function() {\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\n                x = 0;                          //   and no 'extra last byte'.\n            while (n < significance) {          // Fill up all significant digits by\n                n = (n + x) * width;              //   shifting numerator and\n                d *= width;                       //   denominator and generating a\n                x = arc4.g(1);                    //   new least-significant-byte.\n            }\n            while (n >= overflow) {             // To avoid rounding up, before adding\n                n /= 2;                           //   last byte, shift everything\n                d /= 2;                           //   right using integer math until\n                x >>>= 1;                         //   we have exactly the desired bits.\n            }\n            return (n + x) / d;                 // Form the number within [0, 1).\n        };\n\n        prng.int32 = function() { return arc4.g(4) | 0; };\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\n        prng.double = prng;\n\n        // Mix the randomness into accumulated entropy.\n        mixkey(tostring(arc4.S), pool);\n\n        // Calling convention: what to return as a function of prng, seed, is_math.\n        return (options.pass || callback ||\n        function(prng, seed, is_math_call, state) {\n            if (state) {\n                // Load the arc4 state from the given state if it has an S array.\n                if (state.S) { copy(state, arc4); }\n                // Only provide the .state method if requested via options.state.\n                prng.state = function() { return copy(arc4, {}); };\n            }\n\n            // If called as a method of Math (Math.seedrandom()), mutate\n            // Math.random because that is how seedrandom.js has worked since v1.0.\n            if (is_math_call) { math[rngname] = prng; return seed; }\n\n            // Otherwise, it is a newer calling convention, so return the\n            // prng directly.\n            else return prng;\n        })(\n            prng,\n            shortseed,\n            'global' in options ? options.global : (this == math),\n            options.state);\n    }\n    math['seed' + rngname] = seedrandom;\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\n    function ARC4(key) {\n        var t, keylen = key.length,\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n        // The empty key [] is treated as [0].\n        if (!keylen) { key = [keylen++]; }\n\n        // Set up S using the standard key scheduling algorithm.\n        while (i < width) {\n            s[i] = i++;\n        }\n        for (i = 0; i < width; i++) {\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n            s[j] = t;\n        }\n\n        // The \"g\" method returns the next (count) outputs as one number.\n        me.g = function(count) {\n            // Using instance members instead of closure state nearly doubles speed.\n            var t, r = 0,\n                i = me.i, j = me.j, s = me.S;\n            while (count--) {\n                t = s[i = mask & (i + 1)];\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n            }\n            me.i = i; me.j = j;\n            return r;\n            // For robust unpredictability, the function call below automatically\n            // discards an initial batch of values.  This is called RC4-drop[256].\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\n        };\n    }\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\n    function copy(f, t) {\n        t.i = f.i;\n        t.j = f.j;\n        t.S = f.S.slice();\n        return t;\n    }\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\n    function flatten(obj, depth) {\n        var result = [], typ = (typeof obj), prop;\n        if (depth && typ == 'object') {\n            for (prop in obj) {\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n            }\n        }\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n    }\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\n    function mixkey(seed, key) {\n        var stringseed = seed + '', smear, j = 0;\n        while (j < stringseed.length) {\n            key[mask & j] =\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n        }\n        return tostring(key);\n    }\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\n    function autoseed() {\n        try {\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\n            var out = new Uint8Array(width);\n            (global.crypto || global.msCrypto).getRandomValues(out);\n            return tostring(out);\n        } catch (e) {\n            var browser = global.navigator,\n                plugins = browser && browser.plugins;\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\n        }\n    }\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\n    function tostring(a) {\n        return String.fromCharCode.apply(0, a);\n    }\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\n    mixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\n\n// End anonymous scope, and pass initial values.\n};\n\nfunction initialize$2(BMMath) {\n    seedRandom([], BMMath);\n}\n\nvar propTypes = {\n  SHAPE: 'shape',\n};\n\n/* eslint-disable camelcase */\n\nconst ExpressionManager = (function () {\n  'use strict';\n\n  var ob = {};\n  var Math = BMMath;\n  var window = null;\n  var document = null;\n  var XMLHttpRequest = null;\n  var fetch = null;\n  var frames = null;\n  initialize$2(BMMath);\n\n  function $bm_isInstanceOfArray(arr) {\n    return arr.constructor === Array || arr.constructor === Float32Array;\n  }\n\n  function isNumerable(tOfV, v) {\n    return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\n  }\n\n  function $bm_neg(a) {\n    var tOfA = typeof a;\n    if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\n      return -a;\n    }\n    if ($bm_isInstanceOfArray(a)) {\n      var i;\n      var lenA = a.length;\n      var retArr = [];\n      for (i = 0; i < lenA; i += 1) {\n        retArr[i] = -a[i];\n      }\n      return retArr;\n    }\n    if (a.propType) {\n      return a.v;\n    }\n    return -a;\n  }\n\n  var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\n  var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\n  var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\n\n  function sum(a, b) {\n    var tOfA = typeof a;\n    var tOfB = typeof b;\n    if (tOfA === 'string' || tOfB === 'string') {\n      return a + b;\n    }\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n      return a + b;\n    }\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n      a = a.slice(0);\n      a[0] += b;\n      return a;\n    }\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n      b = b.slice(0);\n      b[0] = a + b[0];\n      return b;\n    }\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n      var i = 0;\n      var lenA = a.length;\n      var lenB = b.length;\n      var retArr = [];\n      while (i < lenA || i < lenB) {\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n          retArr[i] = a[i] + b[i];\n        } else {\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n        }\n        i += 1;\n      }\n      return retArr;\n    }\n    return 0;\n  }\n  var add = sum;\n\n  function sub(a, b) {\n    var tOfA = typeof a;\n    var tOfB = typeof b;\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n      if (tOfA === 'string') {\n        a = parseInt(a, 10);\n      }\n      if (tOfB === 'string') {\n        b = parseInt(b, 10);\n      }\n      return a - b;\n    }\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n      a = a.slice(0);\n      a[0] -= b;\n      return a;\n    }\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n      b = b.slice(0);\n      b[0] = a - b[0];\n      return b;\n    }\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n      var i = 0;\n      var lenA = a.length;\n      var lenB = b.length;\n      var retArr = [];\n      while (i < lenA || i < lenB) {\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n          retArr[i] = a[i] - b[i];\n        } else {\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n        }\n        i += 1;\n      }\n      return retArr;\n    }\n    return 0;\n  }\n\n  function mul(a, b) {\n    var tOfA = typeof a;\n    var tOfB = typeof b;\n    var arr;\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n      return a * b;\n    }\n\n    var i;\n    var len;\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n      len = a.length;\n      arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = a[i] * b;\n      }\n      return arr;\n    }\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n      len = b.length;\n      arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = a * b[i];\n      }\n      return arr;\n    }\n    return 0;\n  }\n\n  function div(a, b) {\n    var tOfA = typeof a;\n    var tOfB = typeof b;\n    var arr;\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n      return a / b;\n    }\n    var i;\n    var len;\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n      len = a.length;\n      arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = a[i] / b;\n      }\n      return arr;\n    }\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n      len = b.length;\n      arr = createTypedArray('float32', len);\n      for (i = 0; i < len; i += 1) {\n        arr[i] = a / b[i];\n      }\n      return arr;\n    }\n    return 0;\n  }\n  function mod(a, b) {\n    if (typeof a === 'string') {\n      a = parseInt(a, 10);\n    }\n    if (typeof b === 'string') {\n      b = parseInt(b, 10);\n    }\n    return a % b;\n  }\n  var $bm_sum = sum;\n  var $bm_sub = sub;\n  var $bm_mul = mul;\n  var $bm_div = div;\n  var $bm_mod = mod;\n\n  function clamp(num, min, max) {\n    if (min > max) {\n      var mm = max;\n      max = min;\n      min = mm;\n    }\n    return Math.min(Math.max(num, min), max);\n  }\n\n  function radiansToDegrees(val) {\n    return val / degToRads;\n  }\n  var radians_to_degrees = radiansToDegrees;\n\n  function degreesToRadians(val) {\n    return val * degToRads;\n  }\n  var degrees_to_radians = radiansToDegrees;\n\n  var helperLengthArray = [0, 0, 0, 0, 0, 0];\n\n  function length(arr1, arr2) {\n    if (typeof arr1 === 'number' || arr1 instanceof Number) {\n      arr2 = arr2 || 0;\n      return Math.abs(arr1 - arr2);\n    }\n    if (!arr2) {\n      arr2 = helperLengthArray;\n    }\n    var i;\n    var len = Math.min(arr1.length, arr2.length);\n    var addedLength = 0;\n    for (i = 0; i < len; i += 1) {\n      addedLength += Math.pow(arr2[i] - arr1[i], 2);\n    }\n    return Math.sqrt(addedLength);\n  }\n\n  function normalize(vec) {\n    return div(vec, length(vec));\n  }\n\n  function rgbToHsl(val) {\n    var r = val[0]; var g = val[1]; var b = val[2];\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var s;\n    var l = (max + min) / 2;\n\n    if (max === min) {\n      h = 0; // achromatic\n      s = 0; // achromatic\n    } else {\n      var d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        default: break;\n      }\n      h /= 6;\n    }\n\n    return [h, s, l, val[3]];\n  }\n\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n\n  function hslToRgb(val) {\n    var h = val[0];\n    var s = val[1];\n    var l = val[2];\n\n    var r;\n    var g;\n    var b;\n\n    if (s === 0) {\n      r = l; // achromatic\n      b = l; // achromatic\n      g = l; // achromatic\n    } else {\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      var p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [r, g, b, val[3]];\n  }\n\n  function linear(t, tMin, tMax, value1, value2) {\n    if (value1 === undefined || value2 === undefined) {\n      value1 = tMin;\n      value2 = tMax;\n      tMin = 0;\n      tMax = 1;\n    }\n    if (tMax < tMin) {\n      var _tMin = tMax;\n      tMax = tMin;\n      tMin = _tMin;\n    }\n    if (t <= tMin) {\n      return value1;\n    } if (t >= tMax) {\n      return value2;\n    }\n    var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\n    if (!value1.length) {\n      return value1 + (value2 - value1) * perc;\n    }\n    var i;\n    var len = value1.length;\n    var arr = createTypedArray('float32', len);\n    for (i = 0; i < len; i += 1) {\n      arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\n    }\n    return arr;\n  }\n  function random(min, max) {\n    if (max === undefined) {\n      if (min === undefined) {\n        min = 0;\n        max = 1;\n      } else {\n        max = min;\n        min = undefined;\n      }\n    }\n    if (max.length) {\n      var i;\n      var len = max.length;\n      if (!min) {\n        min = createTypedArray('float32', len);\n      }\n      var arr = createTypedArray('float32', len);\n      var rnd = BMMath.random();\n      for (i = 0; i < len; i += 1) {\n        arr[i] = min[i] + rnd * (max[i] - min[i]);\n      }\n      return arr;\n    }\n    if (min === undefined) {\n      min = 0;\n    }\n    var rndm = BMMath.random();\n    return min + rndm * (max - min);\n  }\n\n  function createPath(points, inTangents, outTangents, closed) {\n    var i;\n    var len = points.length;\n    var path = shapePool.newElement();\n    path.setPathData(!!closed, len);\n    var arrPlaceholder = [0, 0];\n    var inVertexPoint;\n    var outVertexPoint;\n    for (i = 0; i < len; i += 1) {\n      inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\n      outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\n      path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\n    }\n    return path;\n  }\n\n  function initiateExpression(elem, data, property) {\n    var val = data.x;\n    var needsVelocity = /velocity(?![\\w\\d])/.test(val);\n    var _needsRandom = val.indexOf('random') !== -1;\n    var elemType = elem.data.ty;\n    var transform;\n    var $bm_transform;\n    var content;\n    var effect;\n    var thisProperty = property;\n    thisProperty.valueAtTime = thisProperty.getValueAtTime;\n    Object.defineProperty(thisProperty, 'value', {\n      get: function () {\n        return thisProperty.v;\n      },\n    });\n    elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\n    elem.comp.displayStartTime = 0;\n    var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n    var outPoint = elem.data.op / elem.comp.globalData.frameRate;\n    var width = elem.data.sw ? elem.data.sw : 0;\n    var height = elem.data.sh ? elem.data.sh : 0;\n    var name = elem.data.nm;\n    var loopIn;\n    var loop_in;\n    var loopOut;\n    var loop_out;\n    var smooth;\n    var toWorld;\n    var fromWorld;\n    var fromComp;\n    var toComp;\n    var fromCompToSurface;\n    var position;\n    var rotation;\n    var anchorPoint;\n    var scale;\n    var thisLayer;\n    var thisComp;\n    var mask;\n    var valueAtTime;\n    var velocityAtTime;\n\n    var scoped_bm_rt;\n    // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\n    var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\n    var numKeys = property.kf ? data.k.length : 0;\n\n    var active = !this.data || this.data.hd !== true;\n\n    var wiggle = function wiggle(freq, amp) {\n      var iWiggle;\n      var j;\n      var lenWiggle = this.pv.length ? this.pv.length : 1;\n      var addedAmps = createTypedArray('float32', lenWiggle);\n      freq = 5;\n      var iterations = Math.floor(time * freq);\n      iWiggle = 0;\n      j = 0;\n      while (iWiggle < iterations) {\n        // var rnd = BMMath.random();\n        for (j = 0; j < lenWiggle; j += 1) {\n          addedAmps[j] += -amp + amp * 2 * BMMath.random();\n          // addedAmps[j] += -amp + amp*2*rnd;\n        }\n        iWiggle += 1;\n      }\n      // var rnd2 = BMMath.random();\n      var periods = time * freq;\n      var perc = periods - Math.floor(periods);\n      var arr = createTypedArray('float32', lenWiggle);\n      if (lenWiggle > 1) {\n        for (j = 0; j < lenWiggle; j += 1) {\n          arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\n          // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\n          // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\n        }\n        return arr;\n      }\n      return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\n    }.bind(this);\n\n    if (thisProperty.loopIn) {\n      loopIn = thisProperty.loopIn.bind(thisProperty);\n      loop_in = loopIn;\n    }\n\n    if (thisProperty.loopOut) {\n      loopOut = thisProperty.loopOut.bind(thisProperty);\n      loop_out = loopOut;\n    }\n\n    if (thisProperty.smooth) {\n      smooth = thisProperty.smooth.bind(thisProperty);\n    }\n\n    function loopInDuration(type, duration) {\n      return loopIn(type, duration, true);\n    }\n\n    function loopOutDuration(type, duration) {\n      return loopOut(type, duration, true);\n    }\n\n    if (this.getValueAtTime) {\n      valueAtTime = this.getValueAtTime.bind(this);\n    }\n\n    if (this.getVelocityAtTime) {\n      velocityAtTime = this.getVelocityAtTime.bind(this);\n    }\n\n    var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\n\n    function lookAt(elem1, elem2) {\n      var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\n      var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\n      var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\n      return [yaw, pitch, 0];\n    }\n\n    function easeOut(t, tMin, tMax, val1, val2) {\n      return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\n    }\n\n    function easeIn(t, tMin, tMax, val1, val2) {\n      return applyEase(easeInBez, t, tMin, tMax, val1, val2);\n    }\n\n    function ease(t, tMin, tMax, val1, val2) {\n      return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\n    }\n\n    function applyEase(fn, t, tMin, tMax, val1, val2) {\n      if (val1 === undefined) {\n        val1 = tMin;\n        val2 = tMax;\n      } else {\n        t = (t - tMin) / (tMax - tMin);\n      }\n      if (t > 1) {\n        t = 1;\n      } else if (t < 0) {\n        t = 0;\n      }\n      var mult = fn(t);\n      if ($bm_isInstanceOfArray(val1)) {\n        var iKey;\n        var lenKey = val1.length;\n        var arr = createTypedArray('float32', lenKey);\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\n          arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\n        }\n        return arr;\n      }\n      return (val2 - val1) * mult + val1;\n    }\n\n    function nearestKey(time) {\n      var iKey;\n      var lenKey = data.k.length;\n      var index;\n      var keyTime;\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\n        index = 0;\n        keyTime = 0;\n      } else {\n        index = -1;\n        time *= elem.comp.globalData.frameRate;\n        if (time < data.k[0].t) {\n          index = 1;\n          keyTime = data.k[0].t;\n        } else {\n          for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\n            if (time === data.k[iKey].t) {\n              index = iKey + 1;\n              keyTime = data.k[iKey].t;\n              break;\n            } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\n              if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\n                index = iKey + 2;\n                keyTime = data.k[iKey + 1].t;\n              } else {\n                index = iKey + 1;\n                keyTime = data.k[iKey].t;\n              }\n              break;\n            }\n          }\n          if (index === -1) {\n            index = iKey + 1;\n            keyTime = data.k[iKey].t;\n          }\n        }\n      }\n      var obKey = {};\n      obKey.index = index;\n      obKey.time = keyTime / elem.comp.globalData.frameRate;\n      return obKey;\n    }\n\n    function key(ind) {\n      var obKey;\n      var iKey;\n      var lenKey;\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\n        throw new Error('The property has no keyframe at index ' + ind);\n      }\n      ind -= 1;\n      obKey = {\n        time: data.k[ind].t / elem.comp.globalData.frameRate,\n        value: [],\n      };\n      var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\n\n      lenKey = arr.length;\n      for (iKey = 0; iKey < lenKey; iKey += 1) {\n        obKey[iKey] = arr[iKey];\n        obKey.value[iKey] = arr[iKey];\n      }\n      return obKey;\n    }\n\n    function framesToTime(fr, fps) {\n      if (!fps) {\n        fps = elem.comp.globalData.frameRate;\n      }\n      return fr / fps;\n    }\n\n    function timeToFrames(t, fps) {\n      if (!t && t !== 0) {\n        t = time;\n      }\n      if (!fps) {\n        fps = elem.comp.globalData.frameRate;\n      }\n      return t * fps;\n    }\n\n    function seedRandom(seed) {\n      BMMath.seedrandom(randSeed + seed);\n    }\n\n    function sourceRectAtTime() {\n      return elem.sourceRectAtTime();\n    }\n\n    function substring(init, end) {\n      if (typeof value === 'string') {\n        if (end === undefined) {\n          return value.substring(init);\n        }\n        return value.substring(init, end);\n      }\n      return '';\n    }\n\n    function substr(init, end) {\n      if (typeof value === 'string') {\n        if (end === undefined) {\n          return value.substr(init);\n        }\n        return value.substr(init, end);\n      }\n      return '';\n    }\n\n    function posterizeTime(framesPerSecond) {\n      time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\n      value = valueAtTime(time);\n    }\n\n    var time;\n    var velocity;\n    var value;\n    var text;\n    var textIndex;\n    var textTotal;\n    var selectorValue;\n    var index = elem.data.ind;\n    var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n    var parent;\n    var randSeed = Math.floor(Math.random() * 1000000);\n    var globalData = elem.globalData;\n    function executeExpression(_value) {\n      // globalData.pushExpression();\n      value = _value;\n      if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\n        return value;\n      }\n      if (this.propType === 'textSelector') {\n        textIndex = this.textIndex;\n        textTotal = this.textTotal;\n        selectorValue = this.selectorValue;\n      }\n      if (!thisLayer) {\n        text = elem.layerInterface.text;\n        thisLayer = elem.layerInterface;\n        thisComp = elem.comp.compInterface;\n        toWorld = thisLayer.toWorld.bind(thisLayer);\n        fromWorld = thisLayer.fromWorld.bind(thisLayer);\n        fromComp = thisLayer.fromComp.bind(thisLayer);\n        toComp = thisLayer.toComp.bind(thisLayer);\n        mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\n        fromCompToSurface = fromComp;\n      }\n      if (!transform) {\n        transform = elem.layerInterface('ADBE Transform Group');\n        $bm_transform = transform;\n        if (transform) {\n          anchorPoint = transform.anchorPoint;\n          /* position = transform.position;\n                    rotation = transform.rotation;\n                    scale = transform.scale; */\n        }\n      }\n\n      if (elemType === 4 && !content) {\n        content = thisLayer('ADBE Root Vectors Group');\n      }\n      if (!effect) {\n        effect = thisLayer(4);\n      }\n      hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n      if (hasParent && !parent) {\n        parent = elem.hierarchy[0].layerInterface;\n      }\n      time = this.comp.renderedFrame / this.comp.globalData.frameRate;\n      if (_needsRandom) {\n        seedRandom(randSeed + time);\n      }\n      if (needsVelocity) {\n        velocity = velocityAtTime(time);\n      }\n      expression_function();\n      this.frameExpressionId = elem.globalData.frameId;\n\n      // TODO: Check if it's possible to return on ShapeInterface the .v value\n      // Changed this to a ternary operation because Rollup failed compiling it correctly\n      scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE\n        ? scoped_bm_rt.v\n        : scoped_bm_rt;\n      return scoped_bm_rt;\n    }\n    // Bundlers will see these as dead code and unless we reference them\n    executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\n    return executeExpression;\n  }\n\n  ob.initiateExpression = initiateExpression;\n  ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath];\n  return ob;\n}());\n\nconst expressionHelpers = (function () {\n  function searchExpressions(elem, data, prop) {\n    if (data.x) {\n      prop.k = true;\n      prop.x = true;\n      prop.initiateExpression = ExpressionManager.initiateExpression;\n      prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\n    }\n  }\n\n  function getValueAtTime(frameNum) {\n    frameNum *= this.elem.globalData.frameRate;\n    frameNum -= this.offsetTime;\n    if (frameNum !== this._cachingAtTime.lastFrame) {\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\n      this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\n      this._cachingAtTime.lastFrame = frameNum;\n    }\n    return this._cachingAtTime.value;\n  }\n\n  function getSpeedAtTime(frameNum) {\n    var delta = -0.01;\n    var v1 = this.getValueAtTime(frameNum);\n    var v2 = this.getValueAtTime(frameNum + delta);\n    var speed = 0;\n    if (v1.length) {\n      var i;\n      for (i = 0; i < v1.length; i += 1) {\n        speed += Math.pow(v2[i] - v1[i], 2);\n      }\n      speed = Math.sqrt(speed) * 100;\n    } else {\n      speed = 0;\n    }\n    return speed;\n  }\n\n  function getVelocityAtTime(frameNum) {\n    if (this.vel !== undefined) {\n      return this.vel;\n    }\n    var delta = -0.001;\n    // frameNum += this.elem.data.st;\n    var v1 = this.getValueAtTime(frameNum);\n    var v2 = this.getValueAtTime(frameNum + delta);\n    var velocity;\n    if (v1.length) {\n      velocity = createTypedArray('float32', v1.length);\n      var i;\n      for (i = 0; i < v1.length; i += 1) {\n        // removing frameRate\n        // if needed, don't add it here\n        // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\n        velocity[i] = (v2[i] - v1[i]) / delta;\n      }\n    } else {\n      velocity = (v2 - v1) / delta;\n    }\n    return velocity;\n  }\n\n  function getStaticValueAtTime() {\n    return this.pv;\n  }\n\n  function setGroupProperty(propertyGroup) {\n    this.propertyGroup = propertyGroup;\n  }\n\n  return {\n    searchExpressions: searchExpressions,\n    getSpeedAtTime: getSpeedAtTime,\n    getVelocityAtTime: getVelocityAtTime,\n    getValueAtTime: getValueAtTime,\n    getStaticValueAtTime: getStaticValueAtTime,\n    setGroupProperty: setGroupProperty,\n  };\n}());\n\nfunction addPropertyDecorator() {\n  function loopOut(type, duration, durationFlag) {\n    if (!this.k || !this.keyframes) {\n      return this.pv;\n    }\n    type = type ? type.toLowerCase() : '';\n    var currentFrame = this.comp.renderedFrame;\n    var keyframes = this.keyframes;\n    var lastKeyFrame = keyframes[keyframes.length - 1].t;\n    if (currentFrame <= lastKeyFrame) {\n      return this.pv;\n    }\n    var cycleDuration;\n    var firstKeyFrame;\n    if (!durationFlag) {\n      if (!duration || duration > keyframes.length - 1) {\n        duration = keyframes.length - 1;\n      }\n      firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\n      cycleDuration = lastKeyFrame - firstKeyFrame;\n    } else {\n      if (!duration) {\n        cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\n      } else {\n        cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\n      }\n      firstKeyFrame = lastKeyFrame - cycleDuration;\n    }\n    var i;\n    var len;\n    var ret;\n    if (type === 'pingpong') {\n      var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n      if (iterations % 2 !== 0) {\n          return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n      }\n    } else if (type === 'offset') {\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n      var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n      if (this.pv.length) {\n        ret = new Array(initV.length);\n        len = ret.length;\n        for (i = 0; i < len; i += 1) {\n          ret[i] = (endV[i] - initV[i]) * repeats + current[i];\n        }\n        return ret;\n      }\n      return (endV - initV) * repeats + current;\n    } else if (type === 'continue') {\n      var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n      var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\n      if (this.pv.length) {\n        ret = new Array(lastValue.length);\n        len = ret.length;\n        for (i = 0; i < len; i += 1) {\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\n        }\n        return ret;\n      }\n      return lastValue + (lastValue - nextLastValue) * (((currentFrame - lastKeyFrame)) / 0.001);\n    }\n      return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n\n  }\n\n  function loopIn(type, duration, durationFlag) {\n    if (!this.k) {\n      return this.pv;\n    }\n    type = type ? type.toLowerCase() : '';\n    var currentFrame = this.comp.renderedFrame;\n    var keyframes = this.keyframes;\n    var firstKeyFrame = keyframes[0].t;\n    if (currentFrame >= firstKeyFrame) {\n      return this.pv;\n    }\n    var cycleDuration;\n    var lastKeyFrame;\n    if (!durationFlag) {\n      if (!duration || duration > keyframes.length - 1) {\n        duration = keyframes.length - 1;\n      }\n      lastKeyFrame = keyframes[duration].t;\n      cycleDuration = lastKeyFrame - firstKeyFrame;\n    } else {\n      if (!duration) {\n        cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\n      } else {\n        cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\n      }\n      lastKeyFrame = firstKeyFrame + cycleDuration;\n    }\n    var i;\n    var len;\n    var ret;\n    if (type === 'pingpong') {\n      var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\n      if (iterations % 2 === 0) {\n          return this.getValueAtTime((((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n      }\n    } else if (type === 'offset') {\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n      var current = this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration) + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n      var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\n      if (this.pv.length) {\n        ret = new Array(initV.length);\n        len = ret.length;\n        for (i = 0; i < len; i += 1) {\n          ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\n        }\n        return ret;\n      }\n      return current - (endV - initV) * repeats;\n    } else if (type === 'continue') {\n      var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n      var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\n      if (this.pv.length) {\n        ret = new Array(firstValue.length);\n        len = ret.length;\n        for (i = 0; i < len; i += 1) {\n          ret[i] = firstValue[i] + ((firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame)) / 0.001;\n        }\n        return ret;\n      }\n      return firstValue + ((firstValue - nextFirstValue) * (firstKeyFrame - currentFrame)) / 0.001;\n    }\n      return this.getValueAtTime(((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame))) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n\n  }\n\n  function smooth(width, samples) {\n    if (!this.k) {\n      return this.pv;\n    }\n    width = (width || 0.4) * 0.5;\n    samples = Math.floor(samples || 5);\n    if (samples <= 1) {\n      return this.pv;\n    }\n    var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\n    var initFrame = currentTime - width;\n    var endFrame = currentTime + width;\n    var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\n    var i = 0;\n    var j = 0;\n    var value;\n    if (this.pv.length) {\n      value = createTypedArray('float32', this.pv.length);\n    } else {\n      value = 0;\n    }\n    var sampleValue;\n    while (i < samples) {\n      sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\n      if (this.pv.length) {\n        for (j = 0; j < this.pv.length; j += 1) {\n          value[j] += sampleValue[j];\n        }\n      } else {\n        value += sampleValue;\n      }\n      i += 1;\n    }\n    if (this.pv.length) {\n      for (j = 0; j < this.pv.length; j += 1) {\n        value[j] /= samples;\n      }\n    } else {\n      value /= samples;\n    }\n    return value;\n  }\n\n  function getTransformValueAtTime(time) {\n    if (!this._transformCachingAtTime) {\n      this._transformCachingAtTime = {\n        v: new Matrix(),\n      };\n    }\n    /// /\n    var matrix = this._transformCachingAtTime.v;\n    matrix.cloneFromProps(this.pre.props);\n    if (this.appliedTransformations < 1) {\n      var anchor = this.a.getValueAtTime(time);\n      matrix.translate(\n        -anchor[0] * this.a.mult,\n        -anchor[1] * this.a.mult,\n        anchor[2] * this.a.mult\n      );\n    }\n    if (this.appliedTransformations < 2) {\n      var scale = this.s.getValueAtTime(time);\n      matrix.scale(\n        scale[0] * this.s.mult,\n        scale[1] * this.s.mult,\n        scale[2] * this.s.mult\n      );\n    }\n    if (this.sk && this.appliedTransformations < 3) {\n      var skew = this.sk.getValueAtTime(time);\n      var skewAxis = this.sa.getValueAtTime(time);\n      matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\n    }\n    if (this.r && this.appliedTransformations < 4) {\n      var rotation = this.r.getValueAtTime(time);\n      matrix.rotate(-rotation * this.r.mult);\n    } else if (!this.r && this.appliedTransformations < 4) {\n      var rotationZ = this.rz.getValueAtTime(time);\n      var rotationY = this.ry.getValueAtTime(time);\n      var rotationX = this.rx.getValueAtTime(time);\n      var orientation = this.or.getValueAtTime(time);\n      matrix.rotateZ(-rotationZ * this.rz.mult)\n        .rotateY(rotationY * this.ry.mult)\n        .rotateX(rotationX * this.rx.mult)\n        .rotateZ(-orientation[2] * this.or.mult)\n        .rotateY(orientation[1] * this.or.mult)\n        .rotateX(orientation[0] * this.or.mult);\n    }\n    if (this.data.p && this.data.p.s) {\n      var positionX = this.px.getValueAtTime(time);\n      var positionY = this.py.getValueAtTime(time);\n      if (this.data.p.z) {\n        var positionZ = this.pz.getValueAtTime(time);\n        matrix.translate(\n          positionX * this.px.mult,\n          positionY * this.py.mult,\n          -positionZ * this.pz.mult\n        );\n      } else {\n        matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\n      }\n    } else {\n      var position = this.p.getValueAtTime(time);\n      matrix.translate(\n        position[0] * this.p.mult,\n        position[1] * this.p.mult,\n        -position[2] * this.p.mult\n      );\n    }\n    return matrix;\n    /// /\n  }\n\n  function getTransformStaticValueAtTime() {\n    return this.v.clone(new Matrix());\n  }\n\n  var getTransformProperty = TransformPropertyFactory.getTransformProperty;\n  TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\n    var prop = getTransformProperty(elem, data, container);\n    if (prop.dynamicProperties.length) {\n      prop.getValueAtTime = getTransformValueAtTime.bind(prop);\n    } else {\n      prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\n    }\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\n    return prop;\n  };\n\n  var propertyGetProp = PropertyFactory.getProp;\n  PropertyFactory.getProp = function (elem, data, type, mult, container) {\n    var prop = propertyGetProp(elem, data, type, mult, container);\n    // prop.getVelocityAtTime = getVelocityAtTime;\n    // prop.loopOut = loopOut;\n    // prop.loopIn = loopIn;\n    if (prop.kf) {\n      prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\n    } else {\n      prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\n    }\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\n    prop.loopOut = loopOut;\n    prop.loopIn = loopIn;\n    prop.smooth = smooth;\n    prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\n    prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\n    prop.numKeys = data.a === 1 ? data.k.length : 0;\n    prop.propertyIndex = data.ix;\n    var value = 0;\n    if (type !== 0) {\n      value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\n    }\n    prop._cachingAtTime = {\n      lastFrame: initialDefaultFrame,\n      lastIndex: 0,\n      value: value,\n    };\n    expressionHelpers.searchExpressions(elem, data, prop);\n    if (prop.k) {\n      container.addDynamicProperty(prop);\n    }\n\n    return prop;\n  };\n\n  function getShapeValueAtTime(frameNum) {\n    // For now this caching object is created only when needed instead of creating it when the shape is initialized.\n    if (!this._cachingAtTime) {\n      this._cachingAtTime = {\n        shapeValue: shapePool.clone(this.pv),\n        lastIndex: 0,\n        lastTime: initialDefaultFrame,\n      };\n    }\n\n    frameNum *= this.elem.globalData.frameRate;\n    frameNum -= this.offsetTime;\n    if (frameNum !== this._cachingAtTime.lastTime) {\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\n      this._cachingAtTime.lastTime = frameNum;\n      this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\n    }\n    return this._cachingAtTime.shapeValue;\n  }\n\n  var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\n  var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\n\n  function ShapeExpressions() {}\n  ShapeExpressions.prototype = {\n    vertices: function (prop, time) {\n      if (this.k) {\n        this.getValue();\n      }\n      var shapePath = this.v;\n      if (time !== undefined) {\n        shapePath = this.getValueAtTime(time, 0);\n      }\n      var i;\n      var len = shapePath._length;\n      var vertices = shapePath[prop];\n      var points = shapePath.v;\n      var arr = createSizedArray(len);\n      for (i = 0; i < len; i += 1) {\n        if (prop === 'i' || prop === 'o') {\n          arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\n        } else {\n          arr[i] = [vertices[i][0], vertices[i][1]];\n        }\n      }\n      return arr;\n    },\n    points: function (time) {\n      return this.vertices('v', time);\n    },\n    inTangents: function (time) {\n      return this.vertices('i', time);\n    },\n    outTangents: function (time) {\n      return this.vertices('o', time);\n    },\n    isClosed: function () {\n      return this.v.c;\n    },\n    pointOnPath: function (perc, time) {\n      var shapePath = this.v;\n      if (time !== undefined) {\n        shapePath = this.getValueAtTime(time, 0);\n      }\n      if (!this._segmentsLength) {\n        this._segmentsLength = bez.getSegmentsLength(shapePath);\n      }\n\n      var segmentsLength = this._segmentsLength;\n      var lengths = segmentsLength.lengths;\n      var lengthPos = segmentsLength.totalLength * perc;\n      var i = 0;\n      var len = lengths.length;\n      var accumulatedLength = 0;\n      var pt;\n      while (i < len) {\n        if (accumulatedLength + lengths[i].addedLength > lengthPos) {\n          var initIndex = i;\n          var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\n          var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\n          pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\n          break;\n        } else {\n          accumulatedLength += lengths[i].addedLength;\n        }\n        i += 1;\n      }\n      if (!pt) {\n        pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\n      }\n      return pt;\n    },\n    vectorOnPath: function (perc, time, vectorType) {\n      // perc doesn't use triple equality because it can be a Number object as well as a primitive.\n      if (perc == 1) { // eslint-disable-line eqeqeq\n        perc = this.v.c;\n      } else if (perc == 0) { // eslint-disable-line eqeqeq\n        perc = 0.999;\n      }\n      var pt1 = this.pointOnPath(perc, time);\n      var pt2 = this.pointOnPath(perc + 0.001, time);\n      var xLength = pt2[0] - pt1[0];\n      var yLength = pt2[1] - pt1[1];\n      var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\n      if (magnitude === 0) {\n        return [0, 0];\n      }\n      var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\n      return unitVector;\n    },\n    tangentOnPath: function (perc, time) {\n      return this.vectorOnPath(perc, time, 'tangent');\n    },\n    normalOnPath: function (perc, time) {\n      return this.vectorOnPath(perc, time, 'normal');\n    },\n    setGroupProperty: expressionHelpers.setGroupProperty,\n    getValueAtTime: expressionHelpers.getStaticValueAtTime,\n  };\n  extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\n  extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\n  KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\n  KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\n\n  var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\n  ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\n    var prop = propertyGetShapeProp(elem, data, type, arr, trims);\n    prop.propertyIndex = data.ix;\n    prop.lock = false;\n    if (type === 3) {\n      expressionHelpers.searchExpressions(elem, data.pt, prop);\n    } else if (type === 4) {\n      expressionHelpers.searchExpressions(elem, data.ks, prop);\n    }\n    if (prop.k) {\n      elem.addDynamicProperty(prop);\n    }\n    return prop;\n  };\n}\n\nfunction initialize$1() {\n  addPropertyDecorator();\n}\n\nfunction addDecorator() {\n  function searchExpressions() {\n    if (this.data.d.x) {\n      this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\n      this.addEffect(this.getExpressionValue.bind(this));\n      return true;\n    }\n    return null;\n  }\n\n  TextProperty.prototype.getExpressionValue = function (currentValue, text) {\n    var newValue = this.calculateExpression(text);\n    if (currentValue.t !== newValue) {\n      var newData = {};\n      this.copyData(newData, currentValue);\n      newData.t = newValue.toString();\n      newData.__complete = false;\n      return newData;\n    }\n    return currentValue;\n  };\n\n  TextProperty.prototype.searchProperty = function () {\n    var isKeyframed = this.searchKeyframes();\n    var hasExpressions = this.searchExpressions();\n    this.kf = isKeyframed || hasExpressions;\n    return this.kf;\n  };\n\n  TextProperty.prototype.searchExpressions = searchExpressions;\n}\n\nfunction initialize() {\n  addDecorator();\n}\n\n// Registering expression plugin\nsetExpressionsPlugin(Expressions);\ninitialize$1();\ninitialize();\n\n}\n\nexport { lottie as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}