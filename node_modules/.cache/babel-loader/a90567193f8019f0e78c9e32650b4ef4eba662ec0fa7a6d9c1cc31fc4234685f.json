{"ast":null,"code":"import { AddEquation, Color, CustomBlending, DataTexture, DepthTexture, DstAlphaFactor, DstColorFactor, FloatType, HalfFloatType, MathUtils, MeshNormalMaterial, NearestFilter, NoBlending, RedFormat, DepthStencilFormat, UnsignedInt248Type, RepeatWrapping, ShaderMaterial, UniformsUtils, Vector3, WebGLRenderTarget, ZeroFactor } from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { SimplexNoise } from '../math/SimplexNoise.js';\nimport { SSAOBlurShader, SSAODepthShader, SSAOShader } from '../shaders/SSAOShader.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\n\n/**\n * A pass for a basic SSAO effect.\n *\n * {@link SAOPass} and {@link GTAPass} produce a more advanced AO but are also\n * more expensive.\n *\n * ```js\n * const ssaoPass = new SSAOPass( scene, camera, width, height );\n * composer.addPass( ssaoPass );\n * ```\n *\n * @augments Pass\n * @three_import import { SSAOPass } from 'three/addons/postprocessing/SSAOPass.js';\n */\nclass SSAOPass extends Pass {\n  /**\n   * Constructs a new SSAO pass.\n   *\n   * @param {Scene} scene - The scene to compute the AO for.\n   * @param {Camera} camera - The camera.\n   * @param {number} [width=512] - The width of the effect.\n   * @param {number} [height=512] - The height of the effect.\n   * @param {number} [kernelSize=32] - The kernel size.\n   */\n  constructor(scene, camera, width = 512, height = 512, kernelSize = 32) {\n    super();\n\n    /**\n     * The width of the effect.\n     *\n     * @type {number}\n     * @default 512\n     */\n    this.width = width;\n\n    /**\n     * The height of the effect.\n     *\n     * @type {number}\n     * @default 512\n     */\n    this.height = height;\n\n    /**\n     * Overwritten to perform a clear operation by default.\n     *\n     * @type {boolean}\n     * @default true\n     */\n    this.clear = true;\n\n    /**\n     * Overwritten to disable the swap.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    this.needsSwap = false;\n\n    /**\n     * The camera.\n     *\n     * @type {Camera}\n     */\n    this.camera = camera;\n\n    /**\n     * The scene to render the AO for.\n     *\n     * @type {Scene}\n     */\n    this.scene = scene;\n\n    /**\n     * The kernel radius controls how wide the\n     * AO spreads.\n     *\n     * @type {number}\n     * @default 8\n     */\n    this.kernelRadius = 8;\n    this.kernel = [];\n    this.noiseTexture = null;\n\n    /**\n     * The output configuration.\n     *\n     * @type {number}\n     * @default 0\n     */\n    this.output = 0;\n\n    /**\n     * Defines the minimum distance that should be\n     * affected by the AO.\n     *\n     * @type {number}\n     * @default 0.005\n     */\n    this.minDistance = 0.005;\n\n    /**\n     * Defines the maximum distance that should be\n     * affected by the AO.\n     *\n     * @type {number}\n     * @default 0.1\n     */\n    this.maxDistance = 0.1;\n    this._visibilityCache = new Map();\n\n    //\n\n    this._generateSampleKernel(kernelSize);\n    this._generateRandomKernelRotations();\n\n    // depth texture\n\n    const depthTexture = new DepthTexture();\n    depthTexture.format = DepthStencilFormat;\n    depthTexture.type = UnsignedInt248Type;\n\n    // normal render target with depth buffer\n\n    this.normalRenderTarget = new WebGLRenderTarget(this.width, this.height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter,\n      type: HalfFloatType,\n      depthTexture: depthTexture\n    });\n\n    // ssao render target\n\n    this.ssaoRenderTarget = new WebGLRenderTarget(this.width, this.height, {\n      type: HalfFloatType\n    });\n    this.blurRenderTarget = this.ssaoRenderTarget.clone();\n\n    // ssao material\n\n    this.ssaoMaterial = new ShaderMaterial({\n      defines: Object.assign({}, SSAOShader.defines),\n      uniforms: UniformsUtils.clone(SSAOShader.uniforms),\n      vertexShader: SSAOShader.vertexShader,\n      fragmentShader: SSAOShader.fragmentShader,\n      blending: NoBlending\n    });\n    this.ssaoMaterial.defines['KERNEL_SIZE'] = kernelSize;\n    this.ssaoMaterial.uniforms['tNormal'].value = this.normalRenderTarget.texture;\n    this.ssaoMaterial.uniforms['tDepth'].value = this.normalRenderTarget.depthTexture;\n    this.ssaoMaterial.uniforms['tNoise'].value = this.noiseTexture;\n    this.ssaoMaterial.uniforms['kernel'].value = this.kernel;\n    this.ssaoMaterial.uniforms['cameraNear'].value = this.camera.near;\n    this.ssaoMaterial.uniforms['cameraFar'].value = this.camera.far;\n    this.ssaoMaterial.uniforms['resolution'].value.set(this.width, this.height);\n    this.ssaoMaterial.uniforms['cameraProjectionMatrix'].value.copy(this.camera.projectionMatrix);\n    this.ssaoMaterial.uniforms['cameraInverseProjectionMatrix'].value.copy(this.camera.projectionMatrixInverse);\n\n    // normal material\n\n    this.normalMaterial = new MeshNormalMaterial();\n    this.normalMaterial.blending = NoBlending;\n\n    // blur material\n\n    this.blurMaterial = new ShaderMaterial({\n      defines: Object.assign({}, SSAOBlurShader.defines),\n      uniforms: UniformsUtils.clone(SSAOBlurShader.uniforms),\n      vertexShader: SSAOBlurShader.vertexShader,\n      fragmentShader: SSAOBlurShader.fragmentShader\n    });\n    this.blurMaterial.uniforms['tDiffuse'].value = this.ssaoRenderTarget.texture;\n    this.blurMaterial.uniforms['resolution'].value.set(this.width, this.height);\n\n    // material for rendering the depth\n\n    this.depthRenderMaterial = new ShaderMaterial({\n      defines: Object.assign({}, SSAODepthShader.defines),\n      uniforms: UniformsUtils.clone(SSAODepthShader.uniforms),\n      vertexShader: SSAODepthShader.vertexShader,\n      fragmentShader: SSAODepthShader.fragmentShader,\n      blending: NoBlending\n    });\n    this.depthRenderMaterial.uniforms['tDepth'].value = this.normalRenderTarget.depthTexture;\n    this.depthRenderMaterial.uniforms['cameraNear'].value = this.camera.near;\n    this.depthRenderMaterial.uniforms['cameraFar'].value = this.camera.far;\n\n    // material for rendering the content of a render target\n\n    this.copyMaterial = new ShaderMaterial({\n      uniforms: UniformsUtils.clone(CopyShader.uniforms),\n      vertexShader: CopyShader.vertexShader,\n      fragmentShader: CopyShader.fragmentShader,\n      transparent: true,\n      depthTest: false,\n      depthWrite: false,\n      blendSrc: DstColorFactor,\n      blendDst: ZeroFactor,\n      blendEquation: AddEquation,\n      blendSrcAlpha: DstAlphaFactor,\n      blendDstAlpha: ZeroFactor,\n      blendEquationAlpha: AddEquation\n    });\n\n    // internals\n\n    this._fsQuad = new FullScreenQuad(null);\n    this._originalClearColor = new Color();\n  }\n\n  /**\n   * Frees the GPU-related resources allocated by this instance. Call this\n   * method whenever the pass is no longer used in your app.\n   */\n  dispose() {\n    // dispose render targets\n\n    this.normalRenderTarget.dispose();\n    this.ssaoRenderTarget.dispose();\n    this.blurRenderTarget.dispose();\n\n    // dispose materials\n\n    this.normalMaterial.dispose();\n    this.blurMaterial.dispose();\n    this.copyMaterial.dispose();\n    this.depthRenderMaterial.dispose();\n\n    // dispose full screen quad\n\n    this._fsQuad.dispose();\n  }\n\n  /**\n   * Performs the SSAO pass.\n   *\n   * @param {WebGLRenderer} renderer - The renderer.\n   * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n   * destination for the pass.\n   * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n   * previous pass from this buffer.\n   * @param {number} deltaTime - The delta time in seconds.\n   * @param {boolean} maskActive - Whether masking is active or not.\n   */\n  render(renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */) {\n    // render normals and depth (honor only meshes, points and lines do not contribute to SSAO)\n\n    this._overrideVisibility();\n    this._renderOverride(renderer, this.normalMaterial, this.normalRenderTarget, 0x7777ff, 1.0);\n    this._restoreVisibility();\n\n    // render SSAO\n\n    this.ssaoMaterial.uniforms['kernelRadius'].value = this.kernelRadius;\n    this.ssaoMaterial.uniforms['minDistance'].value = this.minDistance;\n    this.ssaoMaterial.uniforms['maxDistance'].value = this.maxDistance;\n    this._renderPass(renderer, this.ssaoMaterial, this.ssaoRenderTarget);\n\n    // render blur\n\n    this._renderPass(renderer, this.blurMaterial, this.blurRenderTarget);\n\n    // output result to screen\n\n    switch (this.output) {\n      case SSAOPass.OUTPUT.SSAO:\n        this.copyMaterial.uniforms['tDiffuse'].value = this.ssaoRenderTarget.texture;\n        this.copyMaterial.blending = NoBlending;\n        this._renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer);\n        break;\n      case SSAOPass.OUTPUT.Blur:\n        this.copyMaterial.uniforms['tDiffuse'].value = this.blurRenderTarget.texture;\n        this.copyMaterial.blending = NoBlending;\n        this._renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer);\n        break;\n      case SSAOPass.OUTPUT.Depth:\n        this._renderPass(renderer, this.depthRenderMaterial, this.renderToScreen ? null : readBuffer);\n        break;\n      case SSAOPass.OUTPUT.Normal:\n        this.copyMaterial.uniforms['tDiffuse'].value = this.normalRenderTarget.texture;\n        this.copyMaterial.blending = NoBlending;\n        this._renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer);\n        break;\n      case SSAOPass.OUTPUT.Default:\n        this.copyMaterial.uniforms['tDiffuse'].value = this.blurRenderTarget.texture;\n        this.copyMaterial.blending = CustomBlending;\n        this._renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer);\n        break;\n      default:\n        console.warn('THREE.SSAOPass: Unknown output type.');\n    }\n  }\n\n  /**\n   * Sets the size of the pass.\n   *\n   * @param {number} width - The width to set.\n   * @param {number} height - The height to set.\n   */\n  setSize(width, height) {\n    this.width = width;\n    this.height = height;\n    this.ssaoRenderTarget.setSize(width, height);\n    this.normalRenderTarget.setSize(width, height);\n    this.blurRenderTarget.setSize(width, height);\n    this.ssaoMaterial.uniforms['resolution'].value.set(width, height);\n    this.ssaoMaterial.uniforms['cameraProjectionMatrix'].value.copy(this.camera.projectionMatrix);\n    this.ssaoMaterial.uniforms['cameraInverseProjectionMatrix'].value.copy(this.camera.projectionMatrixInverse);\n    this.blurMaterial.uniforms['resolution'].value.set(width, height);\n  }\n\n  // internals\n\n  _renderPass(renderer, passMaterial, renderTarget, clearColor, clearAlpha) {\n    // save original state\n    renderer.getClearColor(this._originalClearColor);\n    const originalClearAlpha = renderer.getClearAlpha();\n    const originalAutoClear = renderer.autoClear;\n    renderer.setRenderTarget(renderTarget);\n\n    // setup pass state\n    renderer.autoClear = false;\n    if (clearColor !== undefined && clearColor !== null) {\n      renderer.setClearColor(clearColor);\n      renderer.setClearAlpha(clearAlpha || 0.0);\n      renderer.clear();\n    }\n    this._fsQuad.material = passMaterial;\n    this._fsQuad.render(renderer);\n\n    // restore original state\n    renderer.autoClear = originalAutoClear;\n    renderer.setClearColor(this._originalClearColor);\n    renderer.setClearAlpha(originalClearAlpha);\n  }\n  _renderOverride(renderer, overrideMaterial, renderTarget, clearColor, clearAlpha) {\n    renderer.getClearColor(this._originalClearColor);\n    const originalClearAlpha = renderer.getClearAlpha();\n    const originalAutoClear = renderer.autoClear;\n    renderer.setRenderTarget(renderTarget);\n    renderer.autoClear = false;\n    clearColor = overrideMaterial.clearColor || clearColor;\n    clearAlpha = overrideMaterial.clearAlpha || clearAlpha;\n    if (clearColor !== undefined && clearColor !== null) {\n      renderer.setClearColor(clearColor);\n      renderer.setClearAlpha(clearAlpha || 0.0);\n      renderer.clear();\n    }\n    this.scene.overrideMaterial = overrideMaterial;\n    renderer.render(this.scene, this.camera);\n    this.scene.overrideMaterial = null;\n\n    // restore original state\n\n    renderer.autoClear = originalAutoClear;\n    renderer.setClearColor(this._originalClearColor);\n    renderer.setClearAlpha(originalClearAlpha);\n  }\n  _generateSampleKernel(kernelSize) {\n    const kernel = this.kernel;\n    for (let i = 0; i < kernelSize; i++) {\n      const sample = new Vector3();\n      sample.x = Math.random() * 2 - 1;\n      sample.y = Math.random() * 2 - 1;\n      sample.z = Math.random();\n      sample.normalize();\n      let scale = i / kernelSize;\n      scale = MathUtils.lerp(0.1, 1, scale * scale);\n      sample.multiplyScalar(scale);\n      kernel.push(sample);\n    }\n  }\n  _generateRandomKernelRotations() {\n    const width = 4,\n      height = 4;\n    const simplex = new SimplexNoise();\n    const size = width * height;\n    const data = new Float32Array(size);\n    for (let i = 0; i < size; i++) {\n      const x = Math.random() * 2 - 1;\n      const y = Math.random() * 2 - 1;\n      const z = 0;\n      data[i] = simplex.noise3d(x, y, z);\n    }\n    this.noiseTexture = new DataTexture(data, width, height, RedFormat, FloatType);\n    this.noiseTexture.wrapS = RepeatWrapping;\n    this.noiseTexture.wrapT = RepeatWrapping;\n    this.noiseTexture.needsUpdate = true;\n  }\n  _overrideVisibility() {\n    const scene = this.scene;\n    const cache = this._visibilityCache;\n    scene.traverse(function (object) {\n      cache.set(object, object.visible);\n      if (object.isPoints || object.isLine) object.visible = false;\n    });\n  }\n  _restoreVisibility() {\n    const scene = this.scene;\n    const cache = this._visibilityCache;\n    scene.traverse(function (object) {\n      const visible = cache.get(object);\n      object.visible = visible;\n    });\n    cache.clear();\n  }\n}\nSSAOPass.OUTPUT = {\n  'Default': 0,\n  'SSAO': 1,\n  'Blur': 2,\n  'Depth': 3,\n  'Normal': 4\n};\nexport { SSAOPass };","map":{"version":3,"names":["AddEquation","Color","CustomBlending","DataTexture","DepthTexture","DstAlphaFactor","DstColorFactor","FloatType","HalfFloatType","MathUtils","MeshNormalMaterial","NearestFilter","NoBlending","RedFormat","DepthStencilFormat","UnsignedInt248Type","RepeatWrapping","ShaderMaterial","UniformsUtils","Vector3","WebGLRenderTarget","ZeroFactor","Pass","FullScreenQuad","SimplexNoise","SSAOBlurShader","SSAODepthShader","SSAOShader","CopyShader","SSAOPass","constructor","scene","camera","width","height","kernelSize","clear","needsSwap","kernelRadius","kernel","noiseTexture","output","minDistance","maxDistance","_visibilityCache","Map","_generateSampleKernel","_generateRandomKernelRotations","depthTexture","format","type","normalRenderTarget","minFilter","magFilter","ssaoRenderTarget","blurRenderTarget","clone","ssaoMaterial","defines","Object","assign","uniforms","vertexShader","fragmentShader","blending","value","texture","near","far","set","copy","projectionMatrix","projectionMatrixInverse","normalMaterial","blurMaterial","depthRenderMaterial","copyMaterial","transparent","depthTest","depthWrite","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","_fsQuad","_originalClearColor","dispose","render","renderer","writeBuffer","readBuffer","_overrideVisibility","_renderOverride","_restoreVisibility","_renderPass","OUTPUT","SSAO","renderToScreen","Blur","Depth","Normal","Default","console","warn","setSize","passMaterial","renderTarget","clearColor","clearAlpha","getClearColor","originalClearAlpha","getClearAlpha","originalAutoClear","autoClear","setRenderTarget","undefined","setClearColor","setClearAlpha","material","overrideMaterial","i","sample","x","Math","random","y","z","normalize","scale","lerp","multiplyScalar","push","simplex","size","data","Float32Array","noise3d","wrapS","wrapT","needsUpdate","cache","traverse","object","visible","isPoints","isLine","get"],"sources":["/home/powqy/Desktop/Design/solar-system-orbits/node_modules/three/examples/jsm/postprocessing/SSAOPass.js"],"sourcesContent":["import {\n\tAddEquation,\n\tColor,\n\tCustomBlending,\n\tDataTexture,\n\tDepthTexture,\n\tDstAlphaFactor,\n\tDstColorFactor,\n\tFloatType,\n\tHalfFloatType,\n\tMathUtils,\n\tMeshNormalMaterial,\n\tNearestFilter,\n\tNoBlending,\n\tRedFormat,\n\tDepthStencilFormat,\n\tUnsignedInt248Type,\n\tRepeatWrapping,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tWebGLRenderTarget,\n\tZeroFactor\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { SimplexNoise } from '../math/SimplexNoise.js';\nimport { SSAOBlurShader, SSAODepthShader, SSAOShader } from '../shaders/SSAOShader.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\n\n/**\n * A pass for a basic SSAO effect.\n *\n * {@link SAOPass} and {@link GTAPass} produce a more advanced AO but are also\n * more expensive.\n *\n * ```js\n * const ssaoPass = new SSAOPass( scene, camera, width, height );\n * composer.addPass( ssaoPass );\n * ```\n *\n * @augments Pass\n * @three_import import { SSAOPass } from 'three/addons/postprocessing/SSAOPass.js';\n */\nclass SSAOPass extends Pass {\n\n\t/**\n\t * Constructs a new SSAO pass.\n\t *\n\t * @param {Scene} scene - The scene to compute the AO for.\n\t * @param {Camera} camera - The camera.\n\t * @param {number} [width=512] - The width of the effect.\n\t * @param {number} [height=512] - The height of the effect.\n\t * @param {number} [kernelSize=32] - The kernel size.\n\t */\n\tconstructor( scene, camera, width = 512, height = 512, kernelSize = 32 ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * The width of the effect.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 512\n\t\t */\n\t\tthis.width = width;\n\n\t\t/**\n\t\t * The height of the effect.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 512\n\t\t */\n\t\tthis.height = height;\n\n\t\t/**\n\t\t * Overwritten to perform a clear operation by default.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.clear = true;\n\n\t\t/**\n\t\t * Overwritten to disable the swap.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.needsSwap = false;\n\n\t\t/**\n\t\t * The camera.\n\t\t *\n\t\t * @type {Camera}\n\t\t */\n\t\tthis.camera = camera;\n\n\t\t/**\n\t\t * The scene to render the AO for.\n\t\t *\n\t\t * @type {Scene}\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The kernel radius controls how wide the\n\t\t * AO spreads.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 8\n\t\t */\n\t\tthis.kernelRadius = 8;\n\t\tthis.kernel = [];\n\t\tthis.noiseTexture = null;\n\n\t\t/**\n\t\t * The output configuration.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.output = 0;\n\n\t\t/**\n\t\t * Defines the minimum distance that should be\n\t\t * affected by the AO.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.005\n\t\t */\n\t\tthis.minDistance = 0.005;\n\n\t\t/**\n\t\t * Defines the maximum distance that should be\n\t\t * affected by the AO.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.1\n\t\t */\n\t\tthis.maxDistance = 0.1;\n\n\t\tthis._visibilityCache = new Map();\n\n\t\t//\n\n\t\tthis._generateSampleKernel( kernelSize );\n\t\tthis._generateRandomKernelRotations();\n\n\t\t// depth texture\n\n\t\tconst depthTexture = new DepthTexture();\n\t\tdepthTexture.format = DepthStencilFormat;\n\t\tdepthTexture.type = UnsignedInt248Type;\n\n\t\t// normal render target with depth buffer\n\n\t\tthis.normalRenderTarget = new WebGLRenderTarget( this.width, this.height, {\n\t\t\tminFilter: NearestFilter,\n\t\t\tmagFilter: NearestFilter,\n\t\t\ttype: HalfFloatType,\n\t\t\tdepthTexture: depthTexture\n\t\t} );\n\n\t\t// ssao render target\n\n\t\tthis.ssaoRenderTarget = new WebGLRenderTarget( this.width, this.height, { type: HalfFloatType } );\n\n\t\tthis.blurRenderTarget = this.ssaoRenderTarget.clone();\n\n\t\t// ssao material\n\n\t\tthis.ssaoMaterial = new ShaderMaterial( {\n\t\t\tdefines: Object.assign( {}, SSAOShader.defines ),\n\t\t\tuniforms: UniformsUtils.clone( SSAOShader.uniforms ),\n\t\t\tvertexShader: SSAOShader.vertexShader,\n\t\t\tfragmentShader: SSAOShader.fragmentShader,\n\t\t\tblending: NoBlending\n\t\t} );\n\n\t\tthis.ssaoMaterial.defines[ 'KERNEL_SIZE' ] = kernelSize;\n\n\t\tthis.ssaoMaterial.uniforms[ 'tNormal' ].value = this.normalRenderTarget.texture;\n\t\tthis.ssaoMaterial.uniforms[ 'tDepth' ].value = this.normalRenderTarget.depthTexture;\n\t\tthis.ssaoMaterial.uniforms[ 'tNoise' ].value = this.noiseTexture;\n\t\tthis.ssaoMaterial.uniforms[ 'kernel' ].value = this.kernel;\n\t\tthis.ssaoMaterial.uniforms[ 'cameraNear' ].value = this.camera.near;\n\t\tthis.ssaoMaterial.uniforms[ 'cameraFar' ].value = this.camera.far;\n\t\tthis.ssaoMaterial.uniforms[ 'resolution' ].value.set( this.width, this.height );\n\t\tthis.ssaoMaterial.uniforms[ 'cameraProjectionMatrix' ].value.copy( this.camera.projectionMatrix );\n\t\tthis.ssaoMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.copy( this.camera.projectionMatrixInverse );\n\n\t\t// normal material\n\n\t\tthis.normalMaterial = new MeshNormalMaterial();\n\t\tthis.normalMaterial.blending = NoBlending;\n\n\t\t// blur material\n\n\t\tthis.blurMaterial = new ShaderMaterial( {\n\t\t\tdefines: Object.assign( {}, SSAOBlurShader.defines ),\n\t\t\tuniforms: UniformsUtils.clone( SSAOBlurShader.uniforms ),\n\t\t\tvertexShader: SSAOBlurShader.vertexShader,\n\t\t\tfragmentShader: SSAOBlurShader.fragmentShader\n\t\t} );\n\t\tthis.blurMaterial.uniforms[ 'tDiffuse' ].value = this.ssaoRenderTarget.texture;\n\t\tthis.blurMaterial.uniforms[ 'resolution' ].value.set( this.width, this.height );\n\n\t\t// material for rendering the depth\n\n\t\tthis.depthRenderMaterial = new ShaderMaterial( {\n\t\t\tdefines: Object.assign( {}, SSAODepthShader.defines ),\n\t\t\tuniforms: UniformsUtils.clone( SSAODepthShader.uniforms ),\n\t\t\tvertexShader: SSAODepthShader.vertexShader,\n\t\t\tfragmentShader: SSAODepthShader.fragmentShader,\n\t\t\tblending: NoBlending\n\t\t} );\n\t\tthis.depthRenderMaterial.uniforms[ 'tDepth' ].value = this.normalRenderTarget.depthTexture;\n\t\tthis.depthRenderMaterial.uniforms[ 'cameraNear' ].value = this.camera.near;\n\t\tthis.depthRenderMaterial.uniforms[ 'cameraFar' ].value = this.camera.far;\n\n\t\t// material for rendering the content of a render target\n\n\t\tthis.copyMaterial = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( CopyShader.uniforms ),\n\t\t\tvertexShader: CopyShader.vertexShader,\n\t\t\tfragmentShader: CopyShader.fragmentShader,\n\t\t\ttransparent: true,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tblendSrc: DstColorFactor,\n\t\t\tblendDst: ZeroFactor,\n\t\t\tblendEquation: AddEquation,\n\t\t\tblendSrcAlpha: DstAlphaFactor,\n\t\t\tblendDstAlpha: ZeroFactor,\n\t\t\tblendEquationAlpha: AddEquation\n\t\t} );\n\n\t\t// internals\n\n\t\tthis._fsQuad = new FullScreenQuad( null );\n\n\t\tthis._originalClearColor = new Color();\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever the pass is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\t// dispose render targets\n\n\t\tthis.normalRenderTarget.dispose();\n\t\tthis.ssaoRenderTarget.dispose();\n\t\tthis.blurRenderTarget.dispose();\n\n\t\t// dispose materials\n\n\t\tthis.normalMaterial.dispose();\n\t\tthis.blurMaterial.dispose();\n\t\tthis.copyMaterial.dispose();\n\t\tthis.depthRenderMaterial.dispose();\n\n\t\t// dispose full screen quad\n\n\t\tthis._fsQuad.dispose();\n\n\t}\n\n\t/**\n\t * Performs the SSAO pass.\n\t *\n\t * @param {WebGLRenderer} renderer - The renderer.\n\t * @param {WebGLRenderTarget} writeBuffer - The write buffer. This buffer is intended as the rendering\n\t * destination for the pass.\n\t * @param {WebGLRenderTarget} readBuffer - The read buffer. The pass can access the result from the\n\t * previous pass from this buffer.\n\t * @param {number} deltaTime - The delta time in seconds.\n\t * @param {boolean} maskActive - Whether masking is active or not.\n\t */\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\t// render normals and depth (honor only meshes, points and lines do not contribute to SSAO)\n\n\t\tthis._overrideVisibility();\n\t\tthis._renderOverride( renderer, this.normalMaterial, this.normalRenderTarget, 0x7777ff, 1.0 );\n\t\tthis._restoreVisibility();\n\n\t\t// render SSAO\n\n\t\tthis.ssaoMaterial.uniforms[ 'kernelRadius' ].value = this.kernelRadius;\n\t\tthis.ssaoMaterial.uniforms[ 'minDistance' ].value = this.minDistance;\n\t\tthis.ssaoMaterial.uniforms[ 'maxDistance' ].value = this.maxDistance;\n\t\tthis._renderPass( renderer, this.ssaoMaterial, this.ssaoRenderTarget );\n\n\t\t// render blur\n\n\t\tthis._renderPass( renderer, this.blurMaterial, this.blurRenderTarget );\n\n\t\t// output result to screen\n\n\t\tswitch ( this.output ) {\n\n\t\t\tcase SSAOPass.OUTPUT.SSAO:\n\n\t\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.ssaoRenderTarget.texture;\n\t\t\t\tthis.copyMaterial.blending = NoBlending;\n\t\t\t\tthis._renderPass( renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\t\t\tbreak;\n\n\t\t\tcase SSAOPass.OUTPUT.Blur:\n\n\t\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.blurRenderTarget.texture;\n\t\t\t\tthis.copyMaterial.blending = NoBlending;\n\t\t\t\tthis._renderPass( renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\t\t\tbreak;\n\n\t\t\tcase SSAOPass.OUTPUT.Depth:\n\n\t\t\t\tthis._renderPass( renderer, this.depthRenderMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\t\t\tbreak;\n\n\t\t\tcase SSAOPass.OUTPUT.Normal:\n\n\t\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.normalRenderTarget.texture;\n\t\t\t\tthis.copyMaterial.blending = NoBlending;\n\t\t\t\tthis._renderPass( renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\t\t\tbreak;\n\n\t\t\tcase SSAOPass.OUTPUT.Default:\n\n\t\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.blurRenderTarget.texture;\n\t\t\t\tthis.copyMaterial.blending = CustomBlending;\n\t\t\t\tthis._renderPass( renderer, this.copyMaterial, this.renderToScreen ? null : readBuffer );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.SSAOPass: Unknown output type.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the size of the pass.\n\t *\n\t * @param {number} width - The width to set.\n\t * @param {number} height - The height to set.\n\t */\n\tsetSize( width, height ) {\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tthis.ssaoRenderTarget.setSize( width, height );\n\t\tthis.normalRenderTarget.setSize( width, height );\n\t\tthis.blurRenderTarget.setSize( width, height );\n\n\t\tthis.ssaoMaterial.uniforms[ 'resolution' ].value.set( width, height );\n\t\tthis.ssaoMaterial.uniforms[ 'cameraProjectionMatrix' ].value.copy( this.camera.projectionMatrix );\n\t\tthis.ssaoMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.copy( this.camera.projectionMatrixInverse );\n\n\t\tthis.blurMaterial.uniforms[ 'resolution' ].value.set( width, height );\n\n\t}\n\n\t// internals\n\n\t_renderPass( renderer, passMaterial, renderTarget, clearColor, clearAlpha ) {\n\n\t\t// save original state\n\t\trenderer.getClearColor( this._originalClearColor );\n\t\tconst originalClearAlpha = renderer.getClearAlpha();\n\t\tconst originalAutoClear = renderer.autoClear;\n\n\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t// setup pass state\n\t\trenderer.autoClear = false;\n\t\tif ( ( clearColor !== undefined ) && ( clearColor !== null ) ) {\n\n\t\t\trenderer.setClearColor( clearColor );\n\t\t\trenderer.setClearAlpha( clearAlpha || 0.0 );\n\t\t\trenderer.clear();\n\n\t\t}\n\n\t\tthis._fsQuad.material = passMaterial;\n\t\tthis._fsQuad.render( renderer );\n\n\t\t// restore original state\n\t\trenderer.autoClear = originalAutoClear;\n\t\trenderer.setClearColor( this._originalClearColor );\n\t\trenderer.setClearAlpha( originalClearAlpha );\n\n\t}\n\n\t_renderOverride( renderer, overrideMaterial, renderTarget, clearColor, clearAlpha ) {\n\n\t\trenderer.getClearColor( this._originalClearColor );\n\t\tconst originalClearAlpha = renderer.getClearAlpha();\n\t\tconst originalAutoClear = renderer.autoClear;\n\n\t\trenderer.setRenderTarget( renderTarget );\n\t\trenderer.autoClear = false;\n\n\t\tclearColor = overrideMaterial.clearColor || clearColor;\n\t\tclearAlpha = overrideMaterial.clearAlpha || clearAlpha;\n\n\t\tif ( ( clearColor !== undefined ) && ( clearColor !== null ) ) {\n\n\t\t\trenderer.setClearColor( clearColor );\n\t\t\trenderer.setClearAlpha( clearAlpha || 0.0 );\n\t\t\trenderer.clear();\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = overrideMaterial;\n\t\trenderer.render( this.scene, this.camera );\n\t\tthis.scene.overrideMaterial = null;\n\n\t\t// restore original state\n\n\t\trenderer.autoClear = originalAutoClear;\n\t\trenderer.setClearColor( this._originalClearColor );\n\t\trenderer.setClearAlpha( originalClearAlpha );\n\n\t}\n\n\t_generateSampleKernel( kernelSize ) {\n\n\t\tconst kernel = this.kernel;\n\n\t\tfor ( let i = 0; i < kernelSize; i ++ ) {\n\n\t\t\tconst sample = new Vector3();\n\t\t\tsample.x = ( Math.random() * 2 ) - 1;\n\t\t\tsample.y = ( Math.random() * 2 ) - 1;\n\t\t\tsample.z = Math.random();\n\n\t\t\tsample.normalize();\n\n\t\t\tlet scale = i / kernelSize;\n\t\t\tscale = MathUtils.lerp( 0.1, 1, scale * scale );\n\t\t\tsample.multiplyScalar( scale );\n\n\t\t\tkernel.push( sample );\n\n\t\t}\n\n\t}\n\n\t_generateRandomKernelRotations() {\n\n\t\tconst width = 4, height = 4;\n\n\t\tconst simplex = new SimplexNoise();\n\n\t\tconst size = width * height;\n\t\tconst data = new Float32Array( size );\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\tconst x = ( Math.random() * 2 ) - 1;\n\t\t\tconst y = ( Math.random() * 2 ) - 1;\n\t\t\tconst z = 0;\n\n\t\t\tdata[ i ] = simplex.noise3d( x, y, z );\n\n\t\t}\n\n\t\tthis.noiseTexture = new DataTexture( data, width, height, RedFormat, FloatType );\n\t\tthis.noiseTexture.wrapS = RepeatWrapping;\n\t\tthis.noiseTexture.wrapT = RepeatWrapping;\n\t\tthis.noiseTexture.needsUpdate = true;\n\n\t}\n\n\t_overrideVisibility() {\n\n\t\tconst scene = this.scene;\n\t\tconst cache = this._visibilityCache;\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tcache.set( object, object.visible );\n\n\t\t\tif ( object.isPoints || object.isLine ) object.visible = false;\n\n\t\t} );\n\n\t}\n\n\t_restoreVisibility() {\n\n\t\tconst scene = this.scene;\n\t\tconst cache = this._visibilityCache;\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst visible = cache.get( object );\n\t\t\tobject.visible = visible;\n\n\t\t} );\n\n\t\tcache.clear();\n\n\t}\n\n}\n\nSSAOPass.OUTPUT = {\n\t'Default': 0,\n\t'SSAO': 1,\n\t'Blur': 2,\n\t'Depth': 3,\n\t'Normal': 4\n};\n\nexport { SSAOPass };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}